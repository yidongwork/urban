/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
require({cache:{"url:esri/dijit/geoenrichment/templates/InfographicsMainPage.html":"<div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props=\"row: 0\">\r\n    <div>${nls.mainTitle}</div>\r\n    <table class=\"InfographicsMainPage_CountryAndTheme\">\r\n        <tr>\r\n            <td><div class=\"configureInfographicsStep configureInfographicsStepOne\"></div> </td>\r\n            <td class=\"Wizard_AlignRight\">${nls.chooseCountry}</td>\r\n            <td>\r\n        <select data-dojo-type=\"dijit/form/Select\"\r\n            data-dojo-attach-point=\"countrySelect\"\r\n            data-dojo-props=\"maxHeight: 151\"\r\n            data-dojo-attach-event=\"onChange: _onCountryChanged\"></select>\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <td colspan=\"2\" class=\"Wizard_AlignRight\">${nls.chooseTheme}</td>\r\n            <td>\r\n                <select data-dojo-attach-point=\"themeSelect\" data-dojo-type=\"dijit/form/Select\" data-dojo-attach-event=\"onChange: _onThemeChange\">\r\n                    <option value=\"common\">${nls.dark}</option>\r\n                    <option value=\"light\">${nls.light}</option>\r\n                </select>\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <td style=\"padding-top: 6px;\"><div class=\"configureInfographicsStep configureInfographicsStepTwo\"></div> </td>\r\n            <td colspan=\"2\" >\r\n    <div class=\"InfographicsMainPage_ChooseDataCollection\">${nls.chooseDataCollection}</div>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    \r\n</div>\r\n<div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props=\"row: 1\" style=\"margin: 5px 10px 0 10px;\">\r\n    <div data-dojo-attach-point=\"itemsDiv\" style=\"height: 100%;\"></div>\r\n    <div data-dojo-attach-point=\"progressDiv\" class=\"Wizard_Progress\"></div>\r\n</div>\r\n<div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props=\"row: 2\" >\r\n    <div class=\"InfographicsMainPage_AddVariables Wizard_Link\" style=\"margin: 0 10px 0 10px;\" data-dojo-attach-event=\"click: _onAddVariables\">${nls.addVariables}</div>\r\n\r\n    <table >\r\n        <tr>\r\n            <td style=\"vertical-align:top; padding: 10px 0 0 8px;\"><div class=\"configureInfographicsStep configureInfographicsStepThree\"></div> </td>\r\n            <td style=\"padding: 0;\">\r\n                <div data-dojo-type=\"esri/dijit/geoenrichment/BufferOptions\"\r\n        data-dojo-attach-point=\"bufferOptions\"\r\n        data-dojo-attach-event=\"onChange: _onBufferChange\"\r\n        class=\"InfographicsMainPage_BufferOptions\"></div>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n\r\n    <button class=\"Wizard_Button\" data-dojo-attach-point=\"okButton\" data-dojo-attach-event=\"click: _onOK\" disabled=\"disabled\">${nls.ok}</button>\r\n    <button class=\"Wizard_Button\" data-dojo-attach-event=\"click: _onCancel\">${nls.cancel}</button>\r\n</div>"}});define("esri/dijit/geoenrichment/InfographicsMainPage",["require","../../declare","dojo/_base/lang","dojo/on","dojo/dom-construct","./_WizardPage","dojo/i18n!../../nls/jsapi","dojo/text!./templates/InfographicsMainPage.html","./dom","dijit/form/CheckBox","../../tasks/geoenrichment/GeoenrichmentTask","./config","dijit/layout/ContentPane","dijit/form/Select","./BufferOptions"],function(_1,_2,_3,on,_4,_5,_6,_7,_8,_9,_a,_b){_6=_6.geoenrichment.dijit.InfographicsMainPage;var _c="_";var _d=_2("esri.dijit.geoenrichment.InfographicsMainPage",[_5],{templateString:_7,nls:_6,options:null,items:null,_eventMap:{"add-variables":true,"ok":true,"cancel":true},constructor:function(){this._task=new _a(_b.server);this._task.token=_b.token;},startup:function(){this.inherited(arguments);this.countrySelect.addOption({value:_c,label:_6.loading});this.countrySelect.set("disabled",true);this.showProgress(this._task.getAvailableCountries(),"_onCountriesResponse");},_onCountriesResponse:function(_e){this.countrySelect.set("disabled",false);var _f=[];for(var i=0;i<_e.length;i++){var id=_e[i].id;var _10=_e[i].name;_f.push({label:_10,value:id});}this.countrySelect.set("options",_f);this.countrySelect.set("value","US");},_getCountryAttr:function(){return this.countrySelect.get("value");},_setOptionsAttr:function(_11){this._set("options",_11);this.themeSelect.set("value",_11.theme);this.bufferOptions.set("buffer",_11.studyAreaOptions);this._renderItems();},_onCountryChanged:function(){this._renderItems();},_onThemeChange:function(_12,evt){var _13=this.themeSelect.get("value");if(_13=="common"){_13=null;}this.options.theme=_13;if(!this.progressPromises["_onGetReports"]){this._renderItems();}},_renderItems:function(){var _14=this.countrySelect.get("value");if(!_14||_14==_c){return;}_8.clear(this.itemsDiv);this.showProgress(this.options.getItems(_14),"_onGetReports");},_onGetReports:function(_15){if(!_15){return;}this.items=_15;for(var i=0;i<_15.length;i++){var _16=_4.create("div",{"class":"InfographicsMainPage_Item"},this.itemsDiv);var _17=new _9({"class":"InfographicsMainPage_ItemCheck",checked:_15[i].isVisible,onChange:_3.hitch(this,this._onCheckChange,i)}).placeAt(_16);on(_16,"click",_3.hitch(this,this._toggleCheck,_17));var div=_4.create("div",{"class":"InfographicsMainPage_ItemLabel",innerHTML:_15[i].title},_16);var _18=this.options.theme||"common";var img=_1.toUrl("./themes/"+_18+"/images/"+_15[i].type+".png");_4.create("div",{"class":"InfographicsMainPage_ItemImage","style":"background-image:url('"+img+"')"},div);}this._enableOK();},_toggleCheck:function(_19,evt){if(evt.target.type=="checkbox"){return;}_19.set("checked",!_19.get("checked"));},_onCheckChange:function(i,_1a){var _1b=this.countrySelect.get("value");this.showProgress(this.options.getItems(_1b),function(_1c){_1c[i].isVisible=_1a;});this._enableOK();},_enableOK:function(){var _1d=false;if(this.items){for(var i=0;i<this.items.length;i++){if(this.items[i].isVisible){_1d=true;break;}}}this.okButton.disabled=!_1d;},_onBufferChange:function(){this.options.studyAreaOptions=this.bufferOptions.get("buffer");},_onAddVariables:function(){this.onAddVariables();},onAddVariables:function(){},_onOK:function(){this.onOK();},onOK:function(){},_onCancel:function(){this.onCancel();},onCancel:function(){}});return _d;});