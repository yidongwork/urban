/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
require({cache:{"esri/layers/TimeReference":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_1,_2,_3,_4){var _5=_1(null,{declaredClass:"esri.layers.TimeReference",constructor:function(_6){if(_6){_2.mixin(this,_6);}}});if(_3("extend-esri")){_2.setObject("layers.TimeReference",_5,_4);}return _5;});},"dijit/form/TextBox":function(){require({cache:{"url:dijit/form/templates/TextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n"}});define("dijit/form/TextBox",["dojo/_base/declare","dojo/dom-construct","dojo/dom-style","dojo/_base/kernel","dojo/_base/lang","dojo/sniff","./_FormValueWidget","./_TextBoxMixin","dojo/text!./templates/TextBox.html","../main"],function(_7,_8,_9,_a,_b,_c,_d,_e,_f,_10){var _11=_7("dijit.form.TextBox",[_d,_e],{templateString:_f,_singleNodeTemplate:"<input class=\"dijit dijitReset dijitLeft dijitInputField\" data-dojo-attach-point=\"textbox,focusNode\" autocomplete=\"off\" type=\"${type}\" ${!nameAttrSetting} />",_buttonInputDisabled:_c("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var _12=this.type.toLowerCase();if(this.templateString&&this.templateString.toLowerCase()=="input"||((_12=="hidden"||_12=="file")&&this.templateString==this.constructor.prototype.templateString)){this.templateString=this._singleNodeTemplate;}this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(_c("ie")<9){this.defer(function(){try{var s=_9.getComputedStyle(this.domNode);if(s){var ff=s.fontFamily;if(ff){var _13=this.domNode.getElementsByTagName("INPUT");if(_13){for(var i=0;i<_13.length;i++){_13[i].style.fontFamily=ff;}}}}}catch(e){}});}},_onInput:function(e){this.inherited(arguments);if(this.intermediateChanges){this.defer(function(){this._handleOnChange(this.get("value"),false);});}},_setPlaceHolderAttr:function(v){this._set("placeHolder",v);if(!this._phspan){this._attachPoints.push("_phspan");this._phspan=_8.create("span",{onmousedown:function(e){e.preventDefault();},className:"dijitPlaceHolder dijitInputField"},this.textbox,"after");}this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(v));this._updatePlaceHolder();},_updatePlaceHolder:function(){if(this._phspan){this._phspan.style.display=(this.placeHolder&&!this.focused&&!this.textbox.value)?"":"none";}},_setValueAttr:function(_14,_15,_16){this.inherited(arguments);this._updatePlaceHolder();},getDisplayedValue:function(){_a.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue");},setDisplayedValue:function(_17){_a.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",_17);},_onBlur:function(e){if(this.disabled){return;}this.inherited(arguments);this._updatePlaceHolder();if(_c("mozilla")){if(this.selectOnClick){this.textbox.selectionStart=this.textbox.selectionEnd=undefined;}}},_onFocus:function(by){if(this.disabled||this.readOnly){return;}this.inherited(arguments);this._updatePlaceHolder();}});if(_c("ie")){_11.prototype._isTextSelected=function(){var _18=this.ownerDocument.selection.createRange();var _19=_18.parentElement();return _19==this.textbox&&_18.text.length>0;};_10._setSelectionRange=_e._setSelectionRange=function(_1a,_1b,_1c){if(_1a.createTextRange){var r=_1a.createTextRange();r.collapse(true);r.moveStart("character",-99999);r.moveStart("character",_1b);r.moveEnd("character",_1c-_1b);r.select();}};}return _11;});},"esri/tasks/QueryTask":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/_base/json","dojo/has","esri/kernel","esri/request","esri/deferredUtils","esri/geometry/normalizeUtils","esri/tasks/Task","esri/tasks/FeatureSet"],function(_1d,_1e,_1f,_20,_21,has,_22,_23,_24,_25,_26,_27){var _28=_1d(_26,{declaredClass:"esri.tasks.QueryTask",_eventMap:{"complete":["featureSet"],"execute-for-count-complete":["count"],"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},constructor:function(url,_29){this._handler=_1e.hitch(this,this._handler);this._relationshipQueryHandler=_1e.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=_1e.hitch(this,this._executeForIdsHandler);this._countHandler=_1e.hitch(this,this._countHandler);this.source=_29&&_29.source;this.gdbVersion=_29&&_29.gdbVersion;this.registerConnectEvents();},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},execute:function(_2a,_2b,_2c,_2d,_2e){var _2f=_2e.assembly,_30=this._encode(_1e.mixin({},this._url.query,{f:"json"},_2a.toJson(_2f&&_2f[0]))),_31=this._handler,_32=this._errorHandler;if(this.source){var _33={source:this.source.toJson()};_30.layer=_21.toJson(_33);}if(this.gdbVersion){_30.gdbVersion=this.gdbVersion;}return _23({url:this._url.path+"/query",content:_30,callbackParamName:"callback",load:function(r,i){_31(r,i,_2b,_2c,_2e.dfd);},error:function(r){_32(r,_2c,_2e.dfd);},callbackSuffix:_2d});},executeRelationshipQuery:function(_34,_35,_36){var _37=this._encode(_1e.mixin({},this._url.query,{f:"json"},_34.toJson())),_38=this._relationshipQueryHandler,_39=this._errorHandler;if(this.gdbVersion){_37.gdbVersion=this.gdbVersion;}var dfd=new _20(_24._dfdCanceller);dfd._pendingDfd=_23({url:this._url.path+"/queryRelatedRecords",content:_37,callbackParamName:"callback",load:function(r,i){_38(r,i,_35,_36,dfd);},error:function(r){_39(r,_36,dfd);}});return dfd;},executeForIds:function(_3a,_3b,_3c,_3d){var _3e=_3d.assembly,_3f=this._encode(_1e.mixin({},this._url.query,{f:"json",returnIdsOnly:true},_3a.toJson(_3e&&_3e[0]))),_40=this._executeForIdsHandler,_41=this._errorHandler;if(this.source){var _42={source:this.source.toJson()};_3f.layer=_21.toJson(_42);}if(this.gdbVersion){_3f.gdbVersion=this.gdbVersion;}return _23({url:this._url.path+"/query",content:_3f,callbackParamName:"callback",load:function(r,i){_40(r,i,_3b,_3c,_3d.dfd);},error:function(r){_41(r,_3c,_3d.dfd);}});},executeForCount:function(_43,_44,_45,_46){var _47=_46.assembly,_48=this._encode(_1e.mixin({},this._url.query,{f:"json",returnIdsOnly:true,returnCountOnly:true},_43.toJson(_47&&_47[0]))),_49=this._countHandler,_4a=this._errorHandler;if(this.source){var _4b={source:this.source.toJson()};_48.layer=_21.toJson(_4b);}if(this.gdbVersion){_48.gdbVersion=this.gdbVersion;}return _23({url:this._url.path+"/query",content:_48,callbackParamName:"callback",load:function(r,i){_49(r,i,_44,_45,_46.dfd);},error:function(r){_4a(r,_45,_46.dfd);}});},_handler:function(_4c,io,_4d,_4e,dfd){try{var _4f=new _27(_4c);this._successHandler([_4f],"onComplete",_4d,dfd);}catch(err){this._errorHandler(err,_4e,dfd);}},_relationshipQueryHandler:function(_50,io,_51,_52,dfd){try{var gt=_50.geometryType,sr=_50.spatialReference,_53={};_1f.forEach(_50.relatedRecordGroups,function(gr){var _54={};_54.geometryType=gt;_54.spatialReference=sr;_54.features=gr.relatedRecords;var _55=new _27(_54);_53[gr.objectId]=_55;});this._successHandler([_53],"onExecuteRelationshipQueryComplete",_51,dfd);}catch(err){this._errorHandler(err,_52,dfd);}},_executeForIdsHandler:function(_56,io,_57,_58,dfd){try{this._successHandler([_56.objectIds],"onExecuteForIdsComplete",_57,dfd);}catch(err){this._errorHandler(err,_58,dfd);}},_countHandler:function(_59,io,_5a,_5b,dfd){try{var _5c,_5d=_59.features,ids=_59.objectIds;if(ids){_5c=ids.length;}else{if(_5d){throw new Error("Unable to perform query. Please check your parameters.");}else{_5c=_59.count;}}this._successHandler([_5c],"onExecuteForCountComplete",_5a,dfd);}catch(err){this._errorHandler(err,_5b,dfd);}}});_25._createWrappers(_28);if(has("extend-esri")){_1e.setObject("tasks.QueryTask",_28,_22);}return _28;});},"esri/symbols/Font":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/sniff","dojox/gfx/_base","esri/kernel","esri/lang"],function(_5e,_5f,has,_60,_61,_62){var _63={STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"};var _64=_5e(null,{declaredClass:"esri.symbol.Font",constructor:function(_65,_66,_67,_68,_69){if(_65){if(_5f.isObject(_65)){_5f.mixin(this,_65);}else{this.size=_65;if(_66!==undefined){this.style=_66;}if(_67!==undefined){this.variant=_67;}if(_68!==undefined){this.weight=_68;}if(_69!==undefined){this.family=_69;}}}else{_5f.mixin(this,_60.defaultFont);}if(has("ie")<9&&this.size&&_5f.isString(this.size)&&this.size.indexOf("em")>-1){this.size=_60.pt2px(parseFloat(this.size)*12)+"px";}},setSize:function(_6a){this.size=_6a;return this;},setStyle:function(_6b){this.style=_6b;return this;},setVariant:function(_6c){this.variant=_6c;return this;},setWeight:function(_6d){this.weight=_6d;return this;},setFamily:function(_6e){this.family=_6e;return this;},toJson:function(){return _62.fixJson({size:this.size,style:this.style,variant:this.variant,decoration:this.decoration,weight:this.weight,family:this.family});}});_5f.mixin(_64,_63);if(has("extend-esri")){_5f.setObject("symbol.Font",_64,_61);}return _64;});},"esri/sniff":function(){define(["dojo/_base/sniff","esri/kernel"],function(has,_6f){var _70=has("ff"),_71=has("ie"),_72=has("webkit"),_73=has("opera"),_74=has("chrome"),_75=has("safari");var nua=navigator.userAgent,_76;_76=nua.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+\_\d+)/i);if(_76){has.add("esri-iphone",parseFloat(_76[2].replace("_",".")));}_76=nua.match(/Android\s+(\d+\.\d+)/i);if(_76){has.add("esri-android",parseFloat(_76[1]));}_76=nua.match(/Fennec\/(\d+\.\d+)/i);if(_76){has.add("esri-fennec",parseFloat(_76[1]));}if(nua.indexOf("BlackBerry")>=0){if(nua.indexOf("WebKit")>=0){has.add("esri-blackberry",1);}}has.add("esri-touch",(has("esri-iphone")||has("esri-android")||has("esri-blackberry")||(has("esri-fennec")>=6)||((_70||_72)&&document.createTouch))?true:false);has.add("esri-pointer",navigator.pointerEnabled||navigator.msPointerEnabled);_6f._getDOMAccessor=function(_77){var _78="";if(_70){_78="Moz";}else{if(_72){_78="Webkit";}else{if(_71){_78="ms";}else{if(_73){_78="O";}}}}return _78+_77.charAt(0).toUpperCase()+_77.substr(1);};has.add("esri-cors",_74>=4||_70>=3.5||_75>=4||_71>=10);has.add("esri-file-upload",(window.FormData&&window.FileList)?true:false);has.add("esri-transforms",_71>=9||_70>=3.5||_74>=4||_75>=3.1||_73>=10.5||has("esri-iphone")>=3.2||has("esri-android")>=2.1);has.add("esri-transitions",_71>=10||_70>=4||_74>=4||_75>=3.1||_73>=10.5||has("esri-iphone")>=3.2||has("esri-android")>=2.1);has.add("esri-transforms3d",_71>=11||_70>=10||_74>=12||_75>=4||has("esri-iphone")>=3.2||has("esri-android")>=3);if(has("esri-android")<3){has.add("esri-transforms",false,false,true);has.add("esri-transitions",false,false,true);has.add("esri-transforms3d",false,false,true);}_6f._css=function(_79){var _7a=has("esri-transforms3d");if(_79!==undefined&&_79!==null){_7a=_79;}else{if(_7a){if(_74||(_75&&!has("esri-iphone"))){_7a=false;}}}var _7b=_7a?"translate3d(":"translate(",_7c=_7a?(_74?",-1px)":",0px)"):")",_7d=_7a?"scale3d(":"scale(",_7e=_7a?",1)":")",_7f=_7a?"rotate3d(0,0,1,":"rotate(",_80=_7a?"matrix3d(":"matrix(",_81=_7a?",0,0,":",",_82=_7a?",0,0,0,0,1,0,":",",_83=_7a?",0,1)":")";return {names:{transition:(_72&&"-webkit-transition")||(_70&&"MozTransition")||(_73&&"OTransition")||(_71&&"msTransition"),transform:(_72&&"-webkit-transform")||(_70&&"MozTransform")||(_73&&"OTransform")||(_71&&"msTransform"),transformName:(_72&&"-webkit-transform")||(_70&&"-moz-transform")||(_73&&"-o-transform")||(_71&&"-ms-transform"),origin:(_72&&"-webkit-transform-origin")||(_70&&"MozTransformOrigin")||(_73&&"OTransformOrigin")||(_71&&"msTransformOrigin"),endEvent:(_72&&"webkitTransitionEnd")||(_70&&"transitionend")||(_73&&"oTransitionEnd")||(_71&&"MSTransitionEnd")},translate:function(x,y){return _7b+x+"px,"+y+"px"+_7c;},scale:function(_84){return _7d+_84+","+_84+_7e;},rotate:function(_85){return _7f+_85+"deg)";},matrix:function(m){return _80+m.xx+","+m.xy+_81+m.yx+","+m.yy+_82+m.dx.toFixed(10)+(_70?"px,":",")+m.dy.toFixed(10)+(_70?"px":"")+_83;}};};if(has("extend-esri")){_6f.isiPhone=has("esri-iphone");_6f.isAndroid=has("esri-android");_6f.isFennec=has("esri-fennec");_6f.isBlackBerry=has("esri-blackberry");_6f.isTouchEnabled=has("esri-touch");_6f.isPointerEnabled=has("esri-pointer");_6f._hasCors=has("esri-cors");_6f._hasFileUpload=has("esri-file-upload");_6f._hasTransforms=has("esri-transforms");_6f._hasTransitions=has("esri-transitions");_6f._has3DTransforms=has("esri-transforms3d");}return has;});},"esri/tasks/NAMessage":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_86,_87,has,_88){var _89=_86(null,{declaredClass:"esri.tasks.NAMessage",constructor:function(_8a){_87.mixin(this,_8a);}});_87.mixin(_89,{TYPE_INFORMATIVE:0,TYPE_PROCESS_DEFINITION:1,TYPE_PROCESS_START:2,TYPE_PROCESS_STOP:3,TYPE_WARNING:50,TYPE_ERROR:100,TYPE_EMPTY:101,TYPE_ABORT:200});if(has("extend-esri")){_87.setObject("tasks.NAMessage",_89,_88);}return _89;});},"dijit/_base/scroll":function(){define("dijit/_base/scroll",["dojo/window","../main"],function(_8b,_8c){_8c.scrollIntoView=function(_8d,pos){_8b.scrollIntoView(_8d,pos);};});},"dijit/_TemplatedMixin":function(){define("dijit/_TemplatedMixin",["dojo/_base/lang","dojo/touch","./_WidgetBase","dojo/string","dojo/cache","dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/sniff","dojo/_base/unload"],function(_8e,_8f,_90,_91,_92,_93,_94,_95,has,_96){var _97=_94("dijit._TemplatedMixin",null,{templateString:null,templatePath:null,_skipNodeCache:false,_earlyTemplatedStartup:false,constructor:function(){this._attachPoints=[];this._attachEvents=[];},_stringRepl:function(_98){var _99=this.declaredClass,_9a=this;return _91.substitute(_98,this,function(_9b,key){if(key.charAt(0)=="!"){_9b=_8e.getObject(key.substr(1),false,_9a);}if(typeof _9b=="undefined"){throw new Error(_99+" template:"+key);}if(_9b==null){return "";}return key.charAt(0)=="!"?_9b:_9b.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){if(!this.templateString){this.templateString=_92(this.templatePath,{sanitize:true});}var _9c=_97.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument);var _9d;if(_8e.isString(_9c)){_9d=_95.toDom(this._stringRepl(_9c),this.ownerDocument);if(_9d.nodeType!=1){throw new Error("Invalid template: "+_9c);}}else{_9d=_9c.cloneNode(true);}this.domNode=_9d;this.inherited(arguments);this._attachTemplateNodes(_9d,function(n,p){return n.getAttribute(p);});this._beforeFillContent();this._fillContent(this.srcNodeRef);},_beforeFillContent:function(){},_fillContent:function(_9e){var _9f=this.containerNode;if(_9e&&_9f){while(_9e.hasChildNodes()){_9f.appendChild(_9e.firstChild);}}},_attachTemplateNodes:function(_a0,_a1){var _a2=_8e.isArray(_a0)?_a0:(_a0.all||_a0.getElementsByTagName("*"));var x=_8e.isArray(_a0)?0:-1;for(;x<0||_a2[x];x++){var _a3=(x==-1)?_a0:_a2[x];if(this.widgetsInTemplate&&(_a1(_a3,"dojoType")||_a1(_a3,"data-dojo-type"))){continue;}var _a4=_a1(_a3,"dojoAttachPoint")||_a1(_a3,"data-dojo-attach-point");if(_a4){var _a5,_a6=_a4.split(/\s*,\s*/);while((_a5=_a6.shift())){if(_8e.isArray(this[_a5])){this[_a5].push(_a3);}else{this[_a5]=_a3;}this._attachPoints.push(_a5);}}var _a7=_a1(_a3,"dojoAttachEvent")||_a1(_a3,"data-dojo-attach-event");if(_a7){var _a8,_a9=_a7.split(/\s*,\s*/);var _aa=_8e.trim;while((_a8=_a9.shift())){if(_a8){var _ab=null;if(_a8.indexOf(":")!=-1){var _ac=_a8.split(":");_a8=_aa(_ac[0]);_ab=_aa(_ac[1]);}else{_a8=_aa(_a8);}if(!_ab){_ab=_a8;}this._attachEvents.push(this.connect(_a3,_8f[_a8]||_a8,_ab));}}}}},destroyRendering:function(){_93.forEach(this._attachPoints,function(_ad){delete this[_ad];},this);this._attachPoints=[];_93.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments);}});_97._templateCache={};_97.getCachedTemplate=function(_ae,_af,doc){var _b0=_97._templateCache;var key=_ae;var _b1=_b0[key];if(_b1){try{if(!_b1.ownerDocument||_b1.ownerDocument==(doc||document)){return _b1;}}catch(e){}_95.destroy(_b1);}_ae=_91.trim(_ae);if(_af||_ae.match(/\$\{([^\}]+)\}/g)){return (_b0[key]=_ae);}else{var _b2=_95.toDom(_ae,doc);if(_b2.nodeType!=1){throw new Error("Invalid template: "+_ae);}return (_b0[key]=_b2);}};if(has("ie")){_96.addOnWindowUnload(function(){var _b3=_97._templateCache;for(var key in _b3){var _b4=_b3[key];if(typeof _b4=="object"){_95.destroy(_b4);}delete _b3[key];}});}_8e.extend(_90,{dojoAttachEvent:"",dojoAttachPoint:""});return _97;});},"esri/dijit/Attribution":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/kernel","dojo/has","dojo/query","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-style","dojo/dom-class","dojo/dom-geometry","esri/kernel","esri/lang","esri/SpatialReference","esri/geometry/webMercatorUtils","esri/geometry/Extent"],function(_b5,_b6,_b7,_b8,_b9,has,_ba,dom,_bb,_bc,_bd,_be,_bf,_c0,_c1,_c2,_c3,_c4){var ATR=_b5(null,{declaredClass:"esri.dijit.Attribution",itemDelimiter:" | ",listClass:"esriAttributionList",itemClass:"esriAttributionItem",lastItemClass:"esriAttributionLastItem",delimiterClass:"esriAttributionDelim",constructor:function(_c5,_c6){try{_b6.mixin(this,_c5);this._attributions={};this._pendingDfds={};this._activeLayers=[];this._sharedLayers=[];var _c7=(this.domNode=dom.byId(_c6)),map=this.map,_c8="<span class='"+this.listClass+"'></span>";if(_c7){_bb.set(_c7,"innerHTML",_c8);this.listNode=_b9.query(".esriAttributionList",_c7)[0];this.itemNodes={};}this._eventConnections=[_b8.connect(map,"onLayerAdd",this,this._onLayerAdd),_b8.connect(map,"onLayerRemove",this,this._onLayerRemove),_b8.connect(map,"onLayerSuspend",this,this._onLayerSuspend),_b8.connect(map,"onLayerResume",this,this._onLayerResume),_b8.connect(map,"onExtentChange",this,this._onExtentChange)];if(map.loaded){var _c9=map.layerIds.concat(map.graphicsLayerIds),_ca,i,len=_c9.length;for(i=0;i<len;i++){_ca=map.getLayer(_c9[i]);if(_ca.loaded){this._onLayerAdd(_ca);}}}}catch(err){}},startup:function(){},destroy:function(){_b7.forEach(this._eventConnections,_b8.disconnect);_bc.destroy(this.listNode);this.map=this.domNode=this._eventConnections=this.listNode=this._attributions=this._pendingDfds=this.itemNodes=this._activeLayers=this._lastItem=this._sharedLayers=null;},_onLayerAdd:function(_cb){try{var _cc=this._attributions,_cd=_cb.id;if(_c1.isDefined(_cc[_cd])||!_cb.showAttribution){return;}if(_cb.hasAttributionData){var dfd=_cb.getAttributionData();this._pendingDfds[_cd]=1;_cc[_cd]=dfd;dfd.addBoth(_b6.partial(this._onAttributionLoad,this,_cb));}else{_cc[_cd]=_cb.copyright||_cb.copyrightText||"";if(_cc[_cd]){if(!_cb.suspended){this._activeLayers.push(_cd);}this._createNode(_cd);}else{this._onLayerRemove(_cb);}}}catch(err){}},_onAttributionLoad:function(_ce,_cf,_d0){var _d1=_ce._attributions,_d2=_ce._pendingDfds,_d3=_cf.id;if(!_d2||!_d2[_d3]){return;}delete _d2[_d3];if(!_d0||_d0 instanceof Error){_d0="";}if(_d0){_d1[_d3]=_ce._createIndexByLevel(_d0,_cf.declaredClass.toLowerCase().indexOf("vetiledlayer")!==-1);}else{_d1[_d3]=_cf.copyright||_cf.copyrightText||"";}if(_d1[_d3]){if(!_cf.suspended){_ce._activeLayers.push(_d3);}_ce._createNode(_d3);}else{_ce._onLayerRemove(_cf);}},_onLayerRemove:function(_d4){try{var _d5=_d4.id,_d6=this.itemNodes,idx,_d7=-1;this._onLayerSuspend(_d4);delete this._attributions[_d5];delete this._pendingDfds[_d5];idx=this._getGroupIndex(_d5);if(idx!==-1){_d7=_b7.indexOf(this._sharedLayers[idx],_d5);if(_d7!==-1){this._sharedLayers[idx].splice(_d7,1);if(this._sharedLayers[idx].length<=1){this._sharedLayers.splice(idx,1);}}}if(_d6[_d5]&&_d7===-1){_bc.destroy(_d6[_d5]);}delete _d6[_d5];this._updateLastItem();}catch(err){}},_onLayerSuspend:function(_d8){try{var _d9=_d8.id;if(this._attributions[_d9]){var idx=_b7.indexOf(this._activeLayers,_d9),_da=this.itemNodes[_d9];if(idx!==-1){this._activeLayers.splice(idx,1);}if(_da){this._toggleItem(_da,false,this._getGroupIndex(_d9));}}}catch(err){}},_onLayerResume:function(_db){try{var _dc=_db.id,_dd=this._attributions[_dc],_de=this.itemNodes[_dc];if(_dd){if(_b7.indexOf(this._activeLayers,_dc)===-1){this._activeLayers.push(_dc);}if(_de){var _df=_b6.isString(_dd)?_dd:this._getContributorsList(_dd,this.map.extent,this.map.getLevel());if(!_b6.isString(_dd)){_bb.set(_de,"innerHTML",(_df?(_df+this._getDelimiter()):""));}if(_df){this._toggleItem(_de,true,this._getGroupIndex(_dc));}}}}catch(err){}},_onExtentChange:function(_e0,_e1,_e2,lod){try{var _e3=this._activeLayers,_e4=this._attributions,_e5=this.itemNodes,_e6,_e7,_e8,i,len=_e3.length||0;for(i=0;i<len;i++){_e7=_e3[i];_e8=_e4[_e7];_e6=_e5[_e7];if(_e6&&!_b6.isString(_e8)){var _e9=this._getContributorsList(_e8,_e0,lod?lod.level:-1);_bb.set(_e6,"innerHTML",(_e9?(_e9+this._getDelimiter()):""));this._toggleItem(_e6,!!_e9,-1);}}}catch(err){}this._adjustCursorStyle();},_createNode:function(_ea){if(!this.domNode){return;}var _eb=this._checkShareInfo(_ea),_ec=_eb&&_eb.sharedWith,_ed=_ec&&this.itemNodes[_ec];var map=this.map,_ee=this._attributions[_ea],_ef,_f0=(_b6.isString(_ee)?_ee:this._getContributorsList(_ee,map.extent,map.getLevel())),_f1=(!!_f0&&!map.getLayer(_ea).suspended);if(_ed){this.itemNodes[_ea]=_ed;this._toggleItem(_ed,_f1,_eb.index);}else{_ef=(this.itemNodes[_ea]=_bc.create("span",{"class":this.itemClass,"innerHTML":_f0?(_f0+this._getDelimiter()):"","style":{"display":(_f1?"inline":"none")}},this.listNode));if(_f1){this._setLastItem(_ef);}}this._adjustCursorStyle();},_checkShareInfo:function(_f2){var _f3=this._attributions,_f4,i,_f5=-1,_f6=_f3[_f2],_f7;if(_f6&&_b6.isString(_f6)){for(i in _f3){_f4=_f3[i];if(i!==_f2&&_f4&&_b6.isString(_f4)){if(_f4.length===_f6.length&&_f4.toLowerCase()===_f6.toLowerCase()){_f7=i;break;}}}var _f8=this._sharedLayers,len=_f8.length,_f9;if(_f7){for(i=0;i<len;i++){_f9=_f8[i];if(_b7.indexOf(_f9,_f7)!==-1){_f5=i;_f9.push(_f2);break;}}if(_f5===-1){_f5=_f8.push([_f7,_f2])-1;}}}return (_f5>-1)?{index:_f5,sharedWith:_f7}:null;},_getGroupIndex:function(_fa){var _fb=this._sharedLayers,i,len=_fb.length,_fc=-1;for(i=0;i<len;i++){if(_b7.indexOf(_fb[i],_fa)!==-1){_fc=i;break;}}return _fc;},_getDelimiter:function(){var _fd=this.itemDelimiter;return _fd?("<span class='"+this.delimiterClass+"'>"+_fd+"</span>"):"";},_toggleItem:function(_fe,_ff,_100){if(_100>-1&&!_ff){var _101=this._sharedLayers[_100],i,len=_101.length,_102=this._activeLayers;for(i=0;i<len;i++){if(_b7.indexOf(_102,_101[i])!==-1){return;}}}_bd.set(_fe,"display",(_ff?"inline":"none"));this._updateLastItem();},_updateLastItem:function(){var _103=this.listNode.childNodes,i,len=_103.length,_104;if(len){for(i=len-1;i>=0;i--){_104=_103[i];if(_bd.get(_104,"display")!=="none"){this._setLastItem(_104);break;}}}this._adjustCursorStyle();},_setLastItem:function(node){var _105=this.itemClass,_106=this.lastItemClass;if(this._lastItem){_be.replace(this._lastItem,_105,_106);}if(node){_be.replace(node,_106,_105);this._lastItem=node;}},_createIndexByLevel:function(_107,_108){var _109=_107.contributors,_10a,_10b,area,i,ilen=_109?_109.length:0,j,jlen,z,sr=new _c2(4326),_10c={},_10d,bbox;for(i=0;i<ilen;i++){_10a=_109[i];_10b=_10a.coverageAreas;jlen=_10b?_10b.length:0;for(j=0;j<jlen;j++){area=_10b[j];bbox=area.bbox;_10d={extent:_c3.geographicToWebMercator(new _c4(bbox[1],bbox[0],bbox[3],bbox[2],sr)),attribution:_10a.attribution||"",zoomMin:area.zoomMin-((_108&&area.zoomMin)?1:0),zoomMax:area.zoomMax-((_108&&area.zoomMax)?1:0),score:_c1.isDefined(area.score)?area.score:100,objectId:i};for(z=_10d.zoomMin;z<=_10d.zoomMax;z++){_10c[z]=_10c[z]||[];_10c[z].push(_10d);}}}return _10c;},_getContributorsList:function(_10e,_10f,_110){var list="";if(_10f&&_c1.isDefined(_110)&&_110>-1){var _111=_10e[_110],_112,_113=_10f.getCenter().normalize(),i,ilen=_111?_111.length:0,_114=[],seen={};for(i=0;i<ilen;i++){_112=_111[i];if(!seen[_112.objectId]&&_112.extent.contains(_113)){seen[_112.objectId]=1;_114.push(_112);}}_114.sort(function(a,b){return (b.score-a.score)||(a.objectId-b.objectId);});ilen=_114.length;for(i=0;i<ilen;i++){_114[i]=_114[i].attribution;}list=_114.join(", ");}return list;},_adjustCursorStyle:function(){var _115=_bf.position(this.listNode.parentNode,true).h;if(_be.contains(this.listNode.parentNode,"esriAttributionOpen")){_be.remove(this.listNode.parentNode,"esriAttributionOpen");if(_115>_bf.position(this.listNode.parentNode,true).h){_bd.set(this.listNode.parentNode,"cursor","pointer");_be.add(this.listNode.parentNode,"esriAttributionOpen");}else{_bd.set(this.listNode.parentNode,"cursor","default");}}else{_be.add(this.listNode.parentNode,"esriAttributionOpen");if(_115<_bf.position(this.listNode.parentNode,true).h){_bd.set(this.listNode.parentNode,"cursor","pointer");}else{_bd.set(this.listNode.parentNode,"cursor","default");}_be.remove(this.listNode.parentNode,"esriAttributionOpen");}}});if(has("extend-esri")){_b6.setObject("dijit.Attribution",ATR,_c0);}return ATR;});},"dijit/_Templated":function(){define("dijit/_Templated",["./_WidgetBase","./_TemplatedMixin","./_WidgetsInTemplateMixin","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/kernel"],function(_116,_117,_118,_119,_11a,lang,_11b){lang.extend(_116,{waiRole:"",waiState:""});return _11a("dijit._Templated",[_117,_118],{widgetsInTemplate:false,constructor:function(){_11b.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0");},_attachTemplateNodes:function(_11c,_11d){this.inherited(arguments);var _11e=lang.isArray(_11c)?_11c:(_11c.all||_11c.getElementsByTagName("*"));var x=lang.isArray(_11c)?0:-1;for(;x<_11e.length;x++){var _11f=(x==-1)?_11c:_11e[x];var role=_11d(_11f,"waiRole");if(role){_11f.setAttribute("role",role);}var _120=_11d(_11f,"waiState");if(_120){_119.forEach(_120.split(/\s*,\s*/),function(_121){if(_121.indexOf("-")!=-1){var pair=_121.split("-");_11f.setAttribute("aria-"+pair[0],pair[1]);}});}}}});});},"esri/toolbars/navigation":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/Color","dojo/has","esri/kernel","esri/toolbars/_toolbar","esri/undoManager","esri/OperationBase","esri/geometry/Extent","esri/geometry/Rect","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/graphic"],function(_122,lang,_123,_124,has,_125,_126,_127,_128,_129,Rect,_12a,_12b,_12c){var NAV=_122(_126,{declaredClass:"esri.toolbars.Navigation",_eventMap:{"extent-history-change":true},constructor:function(map){this.zoomSymbol=new _12b(_12b.STYLE_SOLID,new _12a(_12a.STYLE_SOLID,new _124([255,0,0]),2),new _124([0,0,0,0.25]));_123.connect(map,"onUnload",this,"_cleanUp");this.map=map;this._undoManager=new _127({maxOperations:-1});this._normalizeRect=lang.hitch(this,this._normalizeRect);this._onMouseDownHandler=lang.hitch(this,this._onMouseDownHandler);this._onMouseUpHandler=lang.hitch(this,this._onMouseUpHandler);this._onMouseDragHandler=lang.hitch(this,this._onMouseDragHandler);this._onExtentChangeHandler_connect=_123.connect(map,"onExtentChange",this,"_extentChangeHandler");this._onMapLoad_connect=_123.connect(map,"onLoad",this,"_mapLoadHandler");if(map.loaded&&map.extent){this._currentExtent=map.extent;}},_mapLoadHandler:function(){this._currentExtent=this.map.extent;},_navType:null,_start:null,_graphic:null,_prevExtent:false,_currentExtent:null,_preExtent:null,_cleanUp:function(map){_123.disconnect(this._onExtentChangeHandler_connect);_123.disconnect(this._onMapLoad_connect);},activate:function(_12d){var map=this.map;if(!this._graphic){this._deactivateMapTools(true,false,false,true);this._graphic=new _12c(null,this.zoomSymbol);}switch(_12d){case NAV.ZOOM_IN:case NAV.ZOOM_OUT:this._deactivate();this._onMouseDownHandler_connect=_123.connect(map,"onMouseDown",this,"_onMouseDownHandler");this._onMouseDragHandler_connect=_123.connect(map,"onMouseDrag",this,"_onMouseDragHandler");this._onMouseUpHandler_connect=_123.connect(map,"onMouseUp",this,"_onMouseUpHandler");this._navType=_12d;break;case NAV.PAN:this._deactivate();map.enablePan();this._navType=_12d;break;}},_extentChangeHandler:function(_12e){if(this._prevExtent||this._nextExtent){this._currentExtent=_12e;}else{this._preExtent=this._currentExtent;this._currentExtent=_12e;if(this._preExtent&&this._currentExtent){var _12f=new NAV.MapExtent({map:this.map,preExtent:this._preExtent,currentExtent:this._currentExtent});this._undoManager.add(_12f);}}this._prevExtent=this._nextExtent=false;this.onExtentHistoryChange();},_deactivate:function(){var _130=this._navType;if(_130===NAV.PAN){this.map.disablePan();}else{if(_130===NAV.ZOOM_IN||_130===NAV.ZOOM_OUT){_123.disconnect(this._onMouseDownHandler_connect);_123.disconnect(this._onMouseDragHandler_connect);_123.disconnect(this._onMouseUpHandler_connect);}}},_normalizeRect:function(_131,end,_132){var sx=_131.x,sy=_131.y,ex=end.x,ey=end.y,_133=Math.abs(sx-ex),_134=Math.abs(sy-ey);return {x:Math.min(sx,ex),y:Math.max(sy,ey),width:_133,height:_134,spatialReference:_132};},_onMouseDownHandler:function(evt){this._start=evt.mapPoint;},_onMouseDragHandler:function(evt){var _135=this._graphic,_136=this.map.graphics;_136.remove(_135,true);_135.setGeometry(new Rect(this._normalizeRect(this._start,evt.mapPoint,this.map.spatialReference)));_136.add(_135,true);},_onMouseUpHandler:function(evt){var map=this.map,rect=this._normalizeRect(this._start,evt.mapPoint,map.spatialReference);map.graphics.remove(this._graphic,true);if(rect.width===0&&rect.height===0){return;}if(this._navType===NAV.ZOOM_IN){map.setExtent(new Rect(rect).getExtent());}else{var tl=map.toScreen(rect),tr=map.toScreen({x:rect.x+rect.width,y:rect.y,spatialReference:map.spatialReference}),_137=map.extent.getWidth(),_138=(_137*map.width)/Math.abs(tr.x-tl.x),_139=(_138-_137)/2,ext=map.extent;map.setExtent(new _129(ext.xmin-_139,ext.ymin-_139,ext.xmax+_139,ext.ymax+_139,ext.spatialReference));}},deactivate:function(){this._deactivate();if(this._graphic){this.map.graphics.remove(this._graphic,true);}this._navType=this._start=this._graphic=null;this._activateMapTools(true,false,false,true);},setZoomSymbol:function(_13a){this.zoomSymbol=_13a;},isFirstExtent:function(){return !this._undoManager.canUndo;},isLastExtent:function(){return !this._undoManager.canRedo;},zoomToFullExtent:function(){var map=this.map;map.setExtent(map.getLayer(map.layerIds[0]).initialExtent);},zoomToPrevExtent:function(){if(!this._undoManager.canUndo){return;}this._prevExtent=true;this._undoManager.undo();},zoomToNextExtent:function(){if(!this._undoManager.canRedo){return;}this._nextExtent=true;this._undoManager.redo();},onExtentHistoryChange:function(){}});lang.mixin(NAV,{ZOOM_IN:"zoomin",ZOOM_OUT:"zoomout",PAN:"pan"});NAV.MapExtent=_122(_128,{declaredClass:"esri.toolbars.MapExtent",label:"extent changes",constructor:function(_13b){this.map=_13b.map;this.preExtent=_13b.preExtent;this.currentExtent=_13b.currentExtent;},performRedo:function(){this.map.setExtent(this.currentExtent);},performUndo:function(){this.map.setExtent(this.preExtent);}});if(has("extend-esri")){lang.setObject("toolbars.Navigation",NAV,_125);lang.setObject("toolbars.MapExtent",NAV.MapExtent,_125);}return NAV;});},"dijit/_CssStateMixin":function(){define("dijit/_CssStateMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/has","dojo/_base/lang","dojo/on","dojo/ready","dojo/_base/window","./registry"],function(_13c,_13d,dom,_13e,has,lang,on,_13f,win,_140){var _141=_13d("dijit._CssStateMixin",[],{cssStateNodes:{},hovering:false,active:false,_applyAttributes:function(){this.inherited(arguments);_13c.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active","_opened"],function(attr){this.watch(attr,lang.hitch(this,"_setStateClass"));},this);for(var ap in this.cssStateNodes){this._trackMouseState(this[ap],this.cssStateNodes[ap]);}this._trackMouseState(this.domNode,this.baseClass);this._setStateClass();},_cssMouseEvent:function(_142){if(!this.disabled){switch(_142.type){case "mouseover":this._set("hovering",true);this._set("active",this._mouseDown);break;case "mouseout":this._set("hovering",false);this._set("active",false);break;case "mousedown":case "touchstart":this._set("active",true);break;case "mouseup":case "touchend":this._set("active",false);break;}}},_setStateClass:function(){var _143=this.baseClass.split(" ");function _144(_145){_143=_143.concat(_13c.map(_143,function(c){return c+_145;}),"dijit"+_145);};if(!this.isLeftToRight()){_144("Rtl");}var _146=this.checked=="mixed"?"Mixed":(this.checked?"Checked":"");if(this.checked){_144(_146);}if(this.state){_144(this.state);}if(this.selected){_144("Selected");}if(this._opened){_144("Opened");}if(this.disabled){_144("Disabled");}else{if(this.readOnly){_144("ReadOnly");}else{if(this.active){_144("Active");}else{if(this.hovering){_144("Hover");}}}}if(this.focused){_144("Focused");}var tn=this.stateNode||this.domNode,_147={};_13c.forEach(tn.className.split(" "),function(c){_147[c]=true;});if("_stateClasses" in this){_13c.forEach(this._stateClasses,function(c){delete _147[c];});}_13c.forEach(_143,function(c){_147[c]=true;});var _148=[];for(var c in _147){_148.push(c);}tn.className=_148.join(" ");this._stateClasses=_143;},_subnodeCssMouseEvent:function(node,_149,evt){if(this.disabled||this.readOnly){return;}function _14a(_14b){_13e.toggle(node,_149+"Hover",_14b);};function _14c(_14d){_13e.toggle(node,_149+"Active",_14d);};function _14e(_14f){_13e.toggle(node,_149+"Focused",_14f);};switch(evt.type){case "mouseover":_14a(true);break;case "mouseout":_14a(false);_14c(false);break;case "mousedown":case "touchstart":_14c(true);break;case "mouseup":case "touchend":_14c(false);break;case "focus":case "focusin":_14e(true);break;case "blur":case "focusout":_14e(false);break;}},_trackMouseState:function(node,_150){node._cssState=_150;}});_13f(function(){function _151(evt){if(!dom.isDescendant(evt.relatedTarget,evt.target)){for(var node=evt.target;node&&node!=evt.relatedTarget;node=node.parentNode){if(node._cssState){var _152=_140.getEnclosingWidget(node);if(_152){if(node==_152.domNode){_152._cssMouseEvent(evt);}else{_152._subnodeCssMouseEvent(node,node._cssState,evt);}}}}}};function _153(evt){evt.target=evt.srcElement;_151(evt);};var body=win.body(),_154=(has("touch")?[]:["mouseover","mouseout"]).concat(["mousedown","touchstart","mouseup","touchend"]);_13c.forEach(_154,function(type){if(body.addEventListener){body.addEventListener(type,_151,true);}else{body.attachEvent("on"+type,_153);}});on(body,"focusin, focusout",function(evt){var node=evt.target;if(node._cssState&&!node.getAttribute("widgetId")){var _155=_140.getEnclosingWidget(node);_155._subnodeCssMouseEvent(node,node._cssState,evt);}});});return _141;});},"esri/layers/agscommon":function(){define(["esri/layers/ArcGISMapServiceLayer","esri/layers/LayerInfo","esri/layers/TimeInfo","esri/layers/LayerTimeOptions","esri/layers/TimeReference","esri/layers/Field","esri/layers/Domain","esri/layers/RangeDomain","esri/layers/CodedValueDomain","esri/layers/InheritedDomain","esri/layers/LayerSource","esri/layers/LayerMapSource","esri/layers/LayerDataSource","esri/layers/DataSource","esri/layers/TableDataSource","esri/layers/QueryDataSource","esri/layers/JoinDataSource","esri/layers/RasterDataSource","esri/layers/DynamicLayerInfo","esri/layers/LayerDrawingOptions","esri/geometry","esri/utils"],function(){return {};});},"url:dijit/form/templates/ComboButton.html":"<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tcellspacing='0' cellpadding='0' role=\"presentation\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonNode\" data-dojo-attach-point=\"buttonNode\" data-dojo-attach-event=\"ondijitclick:_onClick,onkeypress:_onButtonKeyPress\"\n\t\t><div id=\"${id}_button\" class=\"dijitReset dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><div class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitInline dijitButtonText\" id=\"${id}_label\" data-dojo-attach-point=\"containerNode\" role=\"presentation\"></div\n\t\t></div\n\t\t></td\n\t\t><td id=\"${id}_arrow\" class='dijitReset dijitRight dijitButtonNode dijitArrowButton'\n\t\t\tdata-dojo-attach-point=\"_popupStateNode,focusNode,_buttonNode\"\n\t\t\tdata-dojo-attach-event=\"onkeypress:_onArrowKeyPress\"\n\t\t\ttitle=\"${optionsTitle}\"\n\t\t\trole=\"button\" aria-haspopup=\"true\"\n\t\t\t><div class=\"dijitReset dijitArrowButtonInner\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitArrowButtonChar\" role=\"presentation\">&#9660;</div\n\t\t></td\n\t\t><td style=\"display:none !important;\"\n\t\t\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" data-dojo-attach-point=\"valueNode\" role=\"presentation\"\n\t\t/></td></tr></tbody\n></table>\n","dijit/DialogUnderlay":function(){define("dijit/DialogUnderlay",["dojo/_base/declare","dojo/dom-attr","dojo/window","./_Widget","./_TemplatedMixin","./BackgroundIframe"],function(_156,_157,_158,_159,_15a,_15b){return _156("dijit.DialogUnderlay",[_159,_15a],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' data-dojo-attach-point='node'></div></div>",dialogId:"","class":"",_setDialogIdAttr:function(id){_157.set(this.node,"id",id+"_underlay");this._set("dialogId",id);},_setClassAttr:function(_15c){this.node.className="dijitDialogUnderlay "+_15c;this._set("class",_15c);},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);},layout:function(){var is=this.node.style,os=this.domNode.style;os.display="none";var _15d=_158.getBox(this.ownerDocument);os.top=_15d.t+"px";os.left=_15d.l+"px";is.width=_15d.w+"px";is.height=_15d.h+"px";os.display="block";},show:function(){this.domNode.style.display="block";this.layout();this.bgIframe=new _15b(this.domNode);},hide:function(){this.bgIframe.destroy();delete this.bgIframe;this.domNode.style.display="none";}});});},"esri/TimeExtent":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_15e,lang,has,_15f){var _160=_15e(null,{declaredClass:"esri.TimeExtent",constructor:function(json){if(arguments.length>1){this._create(arguments[0],arguments[1]);}else{if(json){if(lang.isArray(json)){var _161=json[0],end=json[1];this.startTime=(_161===null||_161==="null")?null:new Date(_161);this.endTime=(end===null||end==="null")?null:new Date(end);}else{if(json instanceof Date){this._create(json,null);}}}}},offset:function(_162,_163){var _164=new _160();var _165=this.startTime,end=this.endTime;if(_165){_164.startTime=this._getOffsettedDate(_165,_162,_163);}if(end){_164.endTime=this._getOffsettedDate(end,_162,_163);}return _164;},intersection:function(_166){return this._intersection(this,_166);},toJson:function(){var _167=[];var _168=this.startTime;_167.push(_168?_168.getTime():"null");var end=this.endTime;_167.push(end?end.getTime():"null");return _167;},_create:function(_169,end){this.startTime=_169?new Date(_169.getTime()):null;this.endTime=end?new Date(end.getTime()):null;},_refData:{"esriTimeUnitsMilliseconds":{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",multiplier:1},"esriTimeUnitsSeconds":{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},"esriTimeUnitsMinutes":{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},"esriTimeUnitsHours":{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},"esriTimeUnitsDays":{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},"esriTimeUnitsWeeks":{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},"esriTimeUnitsMonths":{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},"esriTimeUnitsYears":{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},"esriTimeUnitsDecades":{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},"esriTimeUnitsCenturies":{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}},_intersection:function(_16a,_16b){if(_16a&&_16b){var _16c=_16a.startTime,end1=_16a.endTime;var _16d=_16b.startTime,end2=_16b.endTime;_16c=_16c?_16c.getTime():-Infinity;_16d=_16d?_16d.getTime():-Infinity;end1=end1?end1.getTime():Infinity;end2=end2?end2.getTime():Infinity;var _16e,end;if(_16d>=_16c&&_16d<=end1){_16e=_16d;}else{if(_16c>=_16d&&_16c<=end2){_16e=_16c;}}if(end1>=_16d&&end1<=end2){end=end1;}else{if(end2>=_16c&&end2<=end1){end=end2;}}if(!isNaN(_16e)&&!isNaN(end)){var _16f=new _160();_16f.startTime=(_16e===-Infinity)?null:new Date(_16e);_16f.endTime=(end===Infinity)?null:new Date(end);return _16f;}else{return null;}}else{return null;}},_getOffsettedDate:function(_170,_171,_172){var data=this._refData;var _173=new Date(_170.getTime());if(_171&&_172){data=data[_172];_173[data.setter](_173[data.getter]()+(_171*data.multiplier));}return _173;}});if(has("extend-esri")){_15f.TimeExtent=_160;}return _160;});},"esri/symbols/FillSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/symbols/Symbol","esri/symbols/SimpleLineSymbol"],function(_174,lang,has,_175,_176,_177){var _178=_174(_176,{declaredClass:"esri.symbol.FillSymbol",constructor:function(json){if(json&&lang.isObject(json)&&json.outline){this.outline=new _177(json.outline);}},setOutline:function(_179){this.outline=_179;return this;},toJson:function(){var json=this.inherited("toJson",arguments);if(this.outline){json.outline=this.outline.toJson();}return json;}});if(has("extend-esri")){lang.setObject("symbol.FillSymbol",_178,_175);}return _178;});},"dijit/place":function(){define("dijit/place",["dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/window","dojo/window","./main"],function(_17a,_17b,_17c,_17d,win,_17e,_17f){function _180(node,_181,_182,_183){var view=_17e.getBox(node.ownerDocument);if(!node.parentNode||String(node.parentNode.tagName).toLowerCase()!="body"){win.body(node.ownerDocument).appendChild(node);}var best=null;_17a.some(_181,function(_184){var _185=_184.corner;var pos=_184.pos;var _186=0;var _187={w:{"L":view.l+view.w-pos.x,"R":pos.x-view.l,"M":view.w}[_185.charAt(1)],h:{"T":view.t+view.h-pos.y,"B":pos.y-view.t,"M":view.h}[_185.charAt(0)]};var s=node.style;s.left=s.right="auto";if(_182){var res=_182(node,_184.aroundCorner,_185,_187,_183);_186=typeof res=="undefined"?0:res;}var _188=node.style;var _189=_188.display;var _18a=_188.visibility;if(_188.display=="none"){_188.visibility="hidden";_188.display="";}var bb=_17b.position(node);_188.display=_189;_188.visibility=_18a;var _18b={"L":pos.x,"R":pos.x-bb.w,"M":Math.max(view.l,Math.min(view.l+view.w,pos.x+(bb.w>>1))-bb.w)}[_185.charAt(1)],_18c={"T":pos.y,"B":pos.y-bb.h,"M":Math.max(view.t,Math.min(view.t+view.h,pos.y+(bb.h>>1))-bb.h)}[_185.charAt(0)],_18d=Math.max(view.l,_18b),_18e=Math.max(view.t,_18c),endX=Math.min(view.l+view.w,_18b+bb.w),endY=Math.min(view.t+view.h,_18c+bb.h),_18f=endX-_18d,_190=endY-_18e;_186+=(bb.w-_18f)+(bb.h-_190);if(best==null||_186<best.overflow){best={corner:_185,aroundCorner:_184.aroundCorner,x:_18d,y:_18e,w:_18f,h:_190,overflow:_186,spaceAvailable:_187};}return !_186;});if(best.overflow&&_182){_182(node,best.aroundCorner,best.corner,best.spaceAvailable,_183);}var l=_17b.isBodyLtr(node.ownerDocument),s=node.style;s.top=best.y+"px";s[l?"left":"right"]=(l?best.x:view.w-best.x-best.w)+"px";s[l?"right":"left"]="auto";return best;};var _191={at:function(node,pos,_192,_193){var _194=_17a.map(_192,function(_195){var c={corner:_195,pos:{x:pos.x,y:pos.y}};if(_193){c.pos.x+=_195.charAt(1)=="L"?_193.x:-_193.x;c.pos.y+=_195.charAt(0)=="T"?_193.y:-_193.y;}return c;});return _180(node,_194);},around:function(node,_196,_197,_198,_199){var _19a=(typeof _196=="string"||"offsetWidth" in _196)?_17b.position(_196,true):_196;if(_196.parentNode){var _19b=_17c.getComputedStyle(_196).position=="absolute";var _19c=_196.parentNode;while(_19c&&_19c.nodeType==1&&_19c.nodeName!="BODY"){var _19d=_17b.position(_19c,true),pcs=_17c.getComputedStyle(_19c);if(/relative|absolute/.test(pcs.position)){_19b=false;}if(!_19b&&/hidden|auto|scroll/.test(pcs.overflow)){var _19e=Math.min(_19a.y+_19a.h,_19d.y+_19d.h);var _19f=Math.min(_19a.x+_19a.w,_19d.x+_19d.w);_19a.x=Math.max(_19a.x,_19d.x);_19a.y=Math.max(_19a.y,_19d.y);_19a.h=_19e-_19a.y;_19a.w=_19f-_19a.x;}if(pcs.position=="absolute"){_19b=true;}_19c=_19c.parentNode;}}var x=_19a.x,y=_19a.y,_1a0="w" in _19a?_19a.w:(_19a.w=_19a.width),_1a1="h" in _19a?_19a.h:(_17d.deprecated("place.around: dijit/place.__Rectangle: { x:"+x+", y:"+y+", height:"+_19a.height+", width:"+_1a0+" } has been deprecated.  Please use { x:"+x+", y:"+y+", h:"+_19a.height+", w:"+_1a0+" }","","2.0"),_19a.h=_19a.height);var _1a2=[];function push(_1a3,_1a4){_1a2.push({aroundCorner:_1a3,corner:_1a4,pos:{x:{"L":x,"R":x+_1a0,"M":x+(_1a0>>1)}[_1a3.charAt(1)],y:{"T":y,"B":y+_1a1,"M":y+(_1a1>>1)}[_1a3.charAt(0)]}});};_17a.forEach(_197,function(pos){var ltr=_198;switch(pos){case "above-centered":push("TM","BM");break;case "below-centered":push("BM","TM");break;case "after-centered":ltr=!ltr;case "before-centered":push(ltr?"ML":"MR",ltr?"MR":"ML");break;case "after":ltr=!ltr;case "before":push(ltr?"TL":"TR",ltr?"TR":"TL");push(ltr?"BL":"BR",ltr?"BR":"BL");break;case "below-alt":ltr=!ltr;case "below":push(ltr?"BL":"BR",ltr?"TL":"TR");push(ltr?"BR":"BL",ltr?"TR":"TL");break;case "above-alt":ltr=!ltr;case "above":push(ltr?"TL":"TR",ltr?"BL":"BR");push(ltr?"TR":"TL",ltr?"BR":"BL");break;default:push(pos.aroundCorner,pos.corner);}});var _1a5=_180(node,_1a2,_199,{w:_1a0,h:_1a1});_1a5.aroundNodePos=_19a;return _1a5;}};return _17f.place=_191;});},"esri/_coremap":function(){define(["require","dojo/_base/kernel","dojo/_base/declare","dojo/_base/connect","dojo/_base/Deferred","dojo/_base/lang","dojo/_base/array","dojo/_base/event","dojo/_base/unload","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/sniff","dijit/registry","dojox/gfx/matrix","esri/kernel","esri/config","esri/lang","esri/Evented","esri/fx","esri/deferredUtils","esri/tileUtils","esri/geometry/Point","esri/geometry/ScreenPoint","esri/geometry/Extent","esri/geometry/Rect","esri/geometry/mathUtils","esri/geometry/scaleUtils","esri/geometry/screenUtils","esri/geometry/webMercatorUtils","esri/layers/GraphicsLayer","esri/layers/TileInfo","esri/layers/LOD","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/OpenStreetMapLayer","esri/dijit/Popup","dojo/uacss"],function(_1a6,_1a7,_1a8,_1a9,_1aa,lang,_1ab,_1ac,_1ad,dom,_1ae,_1af,_1b0,_1b1,_1b2,has,_1b3,_1b4,_1b5,_1b6,_1b7,_1b8,_1b9,_1ba,_1bb,_1bc,_1bd,_1be,Rect,_1bf,_1c0,_1c1,_1c2,_1c3,_1c4,LOD,_1c5,_1c6,_1c7){var _1c8=_1c1.toMapPoint,_1c9=_1c1.toScreenPoint,dc=_1a9.connect,ddc=_1a9.disconnect,dh=lang.hitch,ds=_1b2.set,iOf=_1ab.indexOf,_1ca=lang.mixin,uid=0,_1cb=_1b6.defaults.map,_1cc=1000000,_1cd=0.75,_1ce=0.25,_1cf=3,_1d0=20,_1d1=40;function _1d2(_1d3,_1d4){var lods=_1d3.lods;lods.sort(function(l1,l2){if(l1.scale>l2.scale){return -1;}else{if(l1.scale<l2.scale){return 1;}}return 0;});var _1d5=[];lods=_1ab.filter(lods,function(l){if(iOf(_1d5,l.scale)===-1){_1d5.push(l.scale);return true;}});var pl=(_1d4.lods=[]),l;_1ab.forEach(lods,function(lod,_1d6){l=(pl[_1d6]=new LOD(lod));l.level=_1d6;});_1d4.tileInfo=new _1c4(_1ca(_1d3,{lods:pl}));};var _1d7=_1a8([_1b8],{declaredClass:"esri._CoreMap",resizeDelay:300,invalidExtent:"Map does not have a valid extent.",invalidGeometry:"Geometry (wkid: ${geometry}) cannot be converted to spatial reference of the map (wkid: ${map})",unknownBasemap:"Unable to find basemap definition for: \"${basemapName}\". Try one of these: ${list}",invalidBasemap:"Unable to add basemap: \"${basemapName}\".",unknownLayerType:"Unknown basemap layer type: \"${type}\" found in basemap definition for: \"${basemapName}\".",visible:true,_eventMap:{"basemap-change":true,"extent-change":["extent","delta","levelChange","lod"],"layer-add":["layer"],"layer-add-result":["layer","error"],"layer-remove":["layer"],"layer-reorder":["layer","index"],"layer-resume":["layer"],"layer-suspend":["layer"],"layers-add-result":["layers"],"layers-removed":true,"layers-reordered":["layerIds"],"load":["map"],"pan":["extent","delta"],"pan-end":["extent","delta"],"pan-start":["extent","screenPoint"],"reposition":["x","y"],"resize":["extent","width","height"],"scale":["matrix","immediate"],"time-extent-change":["timeExtent"],"unload":["map"],"update-end":["error"],"update-start":true,"zoom":["extent","zoomFactor","anchor"],"zoom-end":["extent","zoomFactor","anchor","level"],"zoom-start":["extent","zoomFactor","anchor","level"],"click":true,"dbl-click":true,"key-down":true,"key-up":true,"mouse-down":true,"mouse-drag":true,"mouse-drag-end":true,"mouse-drag-start":true,"mouse-move":true,"mouse-out":true,"mouse-over":true,"mouse-up":true,"mouse-wheel":true,"basic-tap":true,"double-tap":true,"pinch-end":true,"pinch-move":true,"pinch-start":true,"processed-double-tap":true,"processed-tap":true,"swipe-end":true,"swipe-move":true,"swipe-start":true,"tap":true,"two-finger-tap":true},constructor:function(_1d8,_1d9){this.registerConnectEvents();_1ca(this,{_internalLayerIds:[],_layers:[],_layerDivs:[],_layerSize:0,_clickHandles:[],_connects:[]});_1ca(this,{_zoomAnimDiv:null,_zoomAnim:null,_layersDiv:null,_firstLayerId:null,_delta:null,_cursor:null,_ratioW:1,_ratioH:1,_params:null});_1ca(this,{cursor:null,layerIds:[],graphicsLayerIds:[],graphics:null,loaded:false});_1ca(this,{__panning:false,__zooming:false,__container:null,root:null,__LOD:null,__tileInfo:null,__visibleRect:null,__visibleDelta:null});this._rids=[];var cont=(this.container=dom.byId(_1d8));var id=(this.id=_1ae.get(cont,"id")||_1b3.getUniqueId(this.declaredClass));_1af.add(cont,"map");var box=_1b1.getContentBox(cont),dac=_1af.add,dcr=_1b0.create;this.position=new _1bd(0,0);this._reposition();var _1da=(this.width=(box.w||_1cb.width));var _1db=(this.height=box.h||_1cb.height);if(box.w===0){ds(cont,"width",_1da+"px");}if(box.h===0){ds(cont,"height",_1db+"px");}var _1dc=(this.root=dcr("div",{id:id+"_root",style:{width:_1da+"px",height:_1db+"px",direction:"ltr"}}));dac(_1dc,"container");var _1dd=(this.__container=dcr("div",{id:id+"_container"},_1dc));ds(_1dd,"position","absolute");dac(_1dd,"container");cont.appendChild(_1dc);var _1de=(this._params=_1ca({slider:true,nav:false,zoom:-1,minZoom:-1,maxZoom:-1,scale:-1,minScale:0,maxScale:0,showInfoWindowOnClick:true,displayGraphicsOnPan:true,wrapAround180:true,fitExtent:false},_1d9||{}));this.wrapAround180=_1de.wrapAround180;if(_1b7.isDefined(_1de.resizeDelay)){this.resizeDelay=_1de.resizeDelay;}if(_1de.lods){_1d2({rows:512,cols:512,dpi:96,format:"JPEG",compressionQuality:75,origin:{x:-180,y:90},spatialReference:{wkid:4326},lods:_1de.lods},_1de);this.__tileInfo=_1de.tileInfo;}var ext=(this.extent=_1de.extent);this._extentUtil({mapCenter:_1de.center,targetLevel:_1de.zoom,targetScale:_1de.scale});this.__visibleRect=new Rect(0,0,_1da,_1db);this.__visibleDelta=new Rect(0,0,_1da,_1db);var _1df=(this._layersDiv=dcr("div",{id:id+"_layers"}));dac(_1df,"layersDiv");_1dd.appendChild(_1df);this._zoomAnimDiv=dcr("div",{style:{position:"absolute"}});if(_1de.infoWindow){this.infoWindow=_1de.infoWindow;}else{var iw=(this.infoWindow=new _1c7(_1de.popupOptions,dcr("div")));iw.startup();iw._ootb=true;ds(iw.domNode,"zIndex",_1d1);}this._zoomStartHandler=dh(this,this._zoomStartHandler);this._zoomingHandler=dh(this,this._zoomingHandler);this._zoomEndHandler=dh(this,this._zoomEndHandler);this._panningHandler=dh(this,this._panningHandler);this._panEndHandler=dh(this,this._panEndHandler);this._endTranslate=dh(this,this._endTranslate);_1ad.addOnWindowUnload(this,this.destroy);},_cleanUp:function(){var iw=this.infoWindow;if(iw){if(iw._ootb&&iw.destroy){iw.destroy();}else{iw.unsetMap(this);}delete this.infoWindow;}ddc(this._tsTimeExtentChange_connect);this.setInfoWindowOnClick(false);_1b0.destroy(this.root);this.root=null;},_addLayer:function(_1e0,_1e1,_1e2){var id=(_1e0.id=_1e0.id||(_1e0 instanceof _1c3?_1cb.graphicsLayerNamePrefix:_1cb.layerNamePrefix)+(uid++));this._layers[id]=_1e0;var i,lyr;if(_1e1===this.layerIds||_1e1===this.graphicsLayerIds){i=this._layerSize;this._layerSize++;}_1e0._isRefLayer=(_1e2==="top");_1e2=(!_1b7.isDefined(_1e2)||_1e2<0||_1e2>_1e1.length||_1e2==="top")?_1e1.length:_1e2;if(i===0){this._firstLayerId=id;}if(!_1e0._isRefLayer){while((lyr=this.getLayer(_1e1[_1e2-1]))&&lyr._isRefLayer){_1e2--;}}_1e1.splice(_1e2,0,id);var _1e3=dh(this,this._addLayerHandler),self=this,_1e4=this._connects,_1e5=function(){if(_1e0.loaded){if(self._onLoadFix){self._onLoadFix=false;setTimeout(function(){_1e3(_1e0);},0);}else{_1e3(_1e0);}}else{self[id+"_addtoken_load"]=dc(_1e0,"onLoad",self,"_addLayerHandler");self[id+"_addtoken_err"]=dc(_1e0,"onError",self,function(_1e6){_1e3(_1e0,_1e6,_1e1);});}};if(this.loaded||i===0||(_1e0.loaded&&iOf(this.graphicsLayerIds,id)===-1)){_1e5();}else{_1e4.push(dc(this,"onLoad",_1e5));}return _1e0;},_addLayerHandler:function(_1e7,_1e8,_1e9){var id=this.id,_1ea=_1e7.id,_1eb=iOf(_1e7 instanceof _1c3?this.graphicsLayerIds:this.layerIds,_1ea),_1ec=_1eb,_1ed=false,_1ee=this._params,_1ef,_1f0,_1f1,lods;ddc(this[_1ea+"_addtoken_load"]);ddc(this[_1ea+"_addtoken_err"]);if(_1e8){delete this._layers[_1ea];if(_1eb!==-1){_1e9.splice(_1eb,1);this.onLayerAddResult(_1e7,_1e8);}return;}if(_1eb===-1){_1eb=iOf(this._internalLayerIds,_1ea);_1ec=_1d0+_1eb;_1ed=true;}if(_1ea===this._firstLayerId){_1f0=_1e7.spatialReference;_1f1=(this.extent&&this.extent.spatialReference);if(_1f1&&!_1f1.equals(_1f0)&&(_1e7.tileInfo||!_1e7.url)){_1f1=null;}_1ef=(this.spatialReference=(_1f1||_1f0));this.wrapAround180=(this.wrapAround180&&_1ef&&_1ef._isWrappable())?true:false;if(_1e7.tileInfo){if(!this.__tileInfo){_1d2(_1ca({},_1e7.tileInfo),_1ee);this.__tileInfo=_1ee.tileInfo;}else{lods=this.__tileInfo.lods;this.__tileInfo=_1ca({},_1e7.tileInfo);this.__tileInfo.lods=lods;}}if(this.wrapAround180){var _1f2=this.__tileInfo,info=_1ef._getInfo();if(!_1f2||Math.abs(info.origin[0]-_1f2.origin.x)>info.dx){this.wrapAround180=false;}if(this.wrapAround180&&_1f2){_1bb._addFrameInfo(_1f2,info);}}_1ee.units=_1e7.units;lods=this.__tileInfo&&this.__tileInfo.lods;if(lods&&lods.length){var _1f3=_1ee.minScale,_1f4=_1ee.maxScale,_1f5=-1,_1f6=-1,_1f7=false,_1f8=false,i;for(i=0;i<lods.length;i++){if(_1f3>0&&!_1f7&&_1f3>=lods[i].scale){_1f5=lods[i].level;_1f7=true;}if(_1f4>0&&!_1f8&&_1f4>=lods[i].scale){_1f6=(i>0)?lods[i-1].level:-1;_1f8=true;}}if(_1ee.minZoom===-1){_1ee.minZoom=(_1f3===0)?lods[0].level:_1f5;}if(_1ee.maxZoom===-1){_1ee.maxZoom=(_1f4===0)?lods[lods.length-1].level:_1f6;}for(i=0;i<lods.length;i++){if(_1ee.minZoom===lods[i].level){_1ee.minScale=lods[i].scale;}if(_1ee.maxZoom===lods[i].level){_1ee.maxScale=lods[i].scale;}}}else{_1ee.minZoom=_1ee.maxZoom=_1ee.zoom=-1;}}if(_1e7 instanceof _1c3){if(!this._gc){this._gc=new _1c3._GraphicsContainer();var gc=this._gc._setMap(this,this._layersDiv);gc.id=id+"_gc";}var _1f9=_1e7._setMap(this,this._gc._surface);_1f9.id=id+"_"+_1ea;this._layerDivs[_1ea]=_1f9;this._reorderLayers(this.graphicsLayerIds);if(_1ee.showInfoWindowOnClick){this._clickHandles.push(dc(_1e7,"onClick",this,"_gClickHandler"));}}else{var _1fa=_1e7._setMap(this,this._layersDiv,_1ec,this.__LOD);_1fa.id=id+"_"+_1ea;this._layerDivs[_1ea]=_1fa;this._reorderLayers(this.layerIds);if(!_1ed&&_1e7.declaredClass.indexOf("VETiledLayer")!==-1){this._onBingLayerAdd(_1e7);}}if(_1ea===this._firstLayerId){this.graphics=new _1c3({id:id+"_graphics",displayOnPan:_1ee.displayGraphicsOnPan});this._addLayer(this.graphics,this._internalLayerIds,_1d0);}if(_1e7===this.graphics){var _1fb,_1fc=this._layers[this._firstLayerId],_1fd,zoom=_1ee.zoom,_1fe=_1ee.scale,_1ff=_1ee.center,_200=_1fc.initialExtent||_1fc.fullExtent;this._firstLayerId=null;if(this.extent){this.extent=this._convertGeometry(this,this.extent);}if(!this.extent&&_200){if(_1ff){_1ff=this._convertGeometry(_200,_1ff);}if(_1ff){_200=_200.centerAt(_1ff);_1ff=null;}}_1fd=this.extent||(_200&&new _1be(_200.toJson()));if(_1fd){if(zoom>-1){_1fd=this.__getExtentForLevel(zoom,null,_1fd).extent;}else{if(_1fe>0){_1fd=_1c0.getExtentForScale(this,_1fe,_1fd);}}}if(!_1fd){console.log("Map: "+this.invalidExtent);return;}_1fb=this._fixExtent(_1fd,_1ee.fitExtent);this.extent=_1fb.extent;this.__LOD=_1fb.lod;this.__setExtent(this.extent,null,null,_1ee.fitExtent);this.loaded=true;this.infoWindow.setMap(this);this.onLoad(this);}if(!_1ed){this.onLayerAdd(_1e7);this.onLayerAddResult(_1e7);}ddc(this[_1ea+"_addLayerHandler_connect"]);},_convertGeometry:function(host,_201){var _202=host&&host.spatialReference,inSR=_201&&_201.spatialReference;if(_202&&inSR&&!_202.equals(inSR)){if(_202._canProject(inSR)){if(_202.isWebMercator()){_201=_1c2.geographicToWebMercator(_201);}else{if(_202.wkid===4326){_201=_1c2.webMercatorToGeographic(_201,true);}}}else{console.log("Map: "+_1b7.substitute({geometry:inSR.wkid||inSR.wkt,map:_202.wkid||_202.wkt},this.invalidGeometry));_201=null;}}return _201;},_reorderLayers:function(_203){var _204=this.onLayerReorder,djp=_1b0.place,_205=this._layerDivs,_206=this._layers,gcES=this._gc?this._gc._surface.getEventSource():null;if(_203===this.graphicsLayerIds){_1ab.forEach(_203,function(id,i){var _207=_205[id];if(_207){djp(_207.getEventSource(),gcES,i);_204(_206[id],i);}});}else{var g=this.graphics,gId=g?g.id:null,_208=this._layersDiv,_209;_1ab.forEach(_203,function(id,i){_209=_205[id];if(id!==gId&&_209){djp(_209,_208,i);_204(_206[id],i);}});if(gcES){gcES=(has("ie")<9)?gcES.parentNode:gcES;djp(gcES,gcES.parentNode,_203.length);}}this.onLayersReordered([].concat(_203));},_zoomStartHandler:function(){this.__zoomStart(this._zoomAnimDiv.startingExtent,this._zoomAnimDiv.anchor);},_zoomingHandler:function(rect){var rl=parseFloat(rect.left),rt=parseFloat(rect.top),_20a=new _1be(rl,rt-parseFloat(rect.height),rl+parseFloat(rect.width),rt,this.spatialReference),_20b=this.extent.getWidth()/_20a.getWidth();this.__zoom(_20a,_20b,this._zoomAnimDiv.anchor);},_zoomEndHandler:function(){var _20c=this._zoomAnimDiv,_20d=_20c.extent,_20e=this.extent.getWidth()/_20d.getWidth();var _20f=_20c.anchor,_210=_20c.newLod,_211=_20c.levelChange;_20c.extent=_20c.anchor=_20c.levelChange=_20c.startingExtent=_20c.newLod=this._delta=this._zoomAnim=null;this.__zoomEnd(_20d,_20e,_20f,_210,_211);},_panningHandler:function(_212){if(isNaN(parseFloat(_212.left))||isNaN(parseFloat(_212.top))){var _213=Math.round,node=this._panAnim.node;_212.left=(-1*(this._delta.x-_213(this.width/2)))+"px";_212.top=(-1*(this._delta.y-_213(this.height/2)))+"px";_1b2.set(node,"left",_212.left);_1b2.set(node,"top",_212.top);}var d=new _1bd(parseFloat(_212.left),parseFloat(_212.top)),dm=this.toMap(d);this.onPan(this.extent.offset(dm.x,dm.y),d);},_panEndHandler:function(node){this.__panning=false;var _214=Math.round,_215=new _1bd(-_214(parseFloat(node.style.left)),-_214(parseFloat(node.style.top))),dx=_215.x,dy=_215.y,_216=this.__visibleRect,_217=this.__visibleDelta;_216.x+=-dx;_216.y+=-dy;_217.x+=-dx;_217.y+=-dy;ds(this._zoomAnimDiv,{left:"0px",top:"0px"});var _218=this.extent,rw=this._ratioW,rh=this._ratioH;_218=new _1be(_218.xmin+(dx/rw),_218.ymin-(dy/rh),_218.xmax+(dx/rw),_218.ymax-(dy/rh),this.spatialReference);_215.setX(-_215.x);_215.setY(-_215.y);this._delta=this._panAnim=null;this._updateExtent(_218);this.onPanEnd(_218,_215);this._fireExtChg([_218,_215,false,this.__LOD]);},_fixExtent:function(_219,fit){var _21a=this._reshapeExtent(_219),_21b=1+_1ce;while(fit===true&&(_21a.extent.getWidth()<_219.getWidth()||_21a.extent.getHeight()<_219.getHeight())&&_21a.lod.level>0&&_21b<=_1cf){_21a=this._reshapeExtent(_219.expand(_21b));_21b+=_1ce;}return _21a;},_getFrameWidth:function(){var _21c=-1,info=this.spatialReference._getInfo();if(this.__LOD){var _21d=this.__LOD._frameInfo;if(_21d){_21c=_21d[3];}}else{if(info){_21c=Math.round((2*info.valid[1])/(this.extent.getWidth()/this.width));}}return _21c;},_reshapeExtent:function(_21e){var w=_21e.getWidth(),h=_21e.getHeight(),r=w/h,_21f=this.width/this.height,dw=0,dh=0;if(this.width>this.height){if(w>h){if(_21f>r){dw=(h*_21f)-w;}else{dh=(w/_21f)-h;}}else{if(w<h){dw=(h*_21f)-w;}else{dw=(h*_21f)-w;}}}else{if(this.width<this.height){if(w>h){dh=(w/_21f)-h;}else{if(w<h){if(_21f>r){dw=(h*_21f)-w;}else{dh=(w/_21f)-h;}}else{dh=(w/_21f)-h;}}}else{if(w<h){dw=h-w;}else{if(w>h){dh=(w/_21f)-h;}}}}if(dw){_21e.xmin-=dw/2;_21e.xmax+=dw/2;}if(dh){_21e.ymin-=dh/2;_21e.ymax+=dh/2;}return this._getAdjustedExtent(_21e);},_getAdjustedExtent:function(_220){if(this.__tileInfo){return _1bb.getCandidateTileInfo(this,this.__tileInfo,_220);}else{var _221=_1c0.getScale(this,_220),_222=this.getMinScale(),_223=this.getMaxScale(),_224=!_222||(_221<=_222),_225=!_223||(_221>=_223);if(!_224){_220=_1c0.getExtentForScale(this,_222,_220);}else{if(!_225){_220=_1c0.getExtentForScale(this,_223,_220);}}return {extent:_220};}},_gClickHandler:function(evt){var _226=evt.graphic,iw=this.infoWindow;if(_226._getEffInfoTemplate()&&iw){_1ac.stop(evt);var _227=_226.geometry,_228=(_227&&_227.type==="point")?_227:evt.mapPoint,_229,_22a;if(iw.setFeatures){iw.setFeatures([_226]);}else{iw.setTitle(_226.getTitle());_229=_226.getContent();if(_229&&lang.isString(_229.id)){_22a=_1b3.byId(_229.id);if(_22a&&_22a.set&&/_PopupRenderer/.test(_22a.declaredClass)){_22a.set("showTitle",false);}}iw.setContent(_229);}iw.show(_228);}},_onBingLayerAdd:function(_22b){this["__"+_22b.id+"_vis_connect"]=_1a9.connect(_22b,"onVisibilityChange",this,"_toggleBingLogo");this._toggleBingLogo(_22b.visible);},_onBingLayerRemove:function(_22c){_1a9.disconnect(this["__"+_22c.id+"_vis_connect"]);delete this["__"+_22c.id+"_vis_connect"];var _22d=this.layerIds;var _22e=_1ab.some(_22d,function(_22f){var _230=this._layers[_22f];return _230&&_230.visible&&_230.declaredClass.indexOf("VETiledLayer")!==-1;},this);this._toggleBingLogo(_22e);},_toggleBingLogo:function(_231){if(_231&&!this._bingLogo){var _232={left:(this._mapParams&&this._mapParams.nav?"25px":"")};if(has("ie")===6){_232.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true', sizingMethod='crop', src='"+_1a6.toUrl("esri")+"/images/map/bing-logo-lg.png"+"')";}var _233=this._bingLogo=_1b0.create("div",{style:_232},this.root);_1af.add(_233,"bingLogo-lg");}else{if(!_231&&this._bingLogo){_1b0.destroy(this._bingLogo);delete this._bingLogo;}}},__panStart:function(x,y){var _234=this._zoomAnim,_235=this._panAnim;if(_234&&_234._active){_234.stop();_234._fire("onEnd",[_234.node]);}else{if(_235&&_235._active){_235.stop();this._panAnim=null;var rect=_235.curve.getValue(_235._getStep()),rl=Math.round(parseFloat(rect.left)),rt=Math.round(parseFloat(rect.top)),drag=this.navigationManager._dragOrigin;this.__pan(rl,rt);if(drag){drag.x-=rl;drag.y-=rt;}return;}}this.__panning=true;this.onPanStart(this.extent,new _1bd(x,y));},__pan:function(dx,dy){var _236=this.extent,rw=this._ratioW,rh=this._ratioH;this.onPan(new _1be(_236.xmin-(dx/rw),_236.ymin+(dy/rh),_236.xmax-(dx/rw),_236.ymax+(dy/rh),this.spatialReference),new _1bd(dx,dy));},__panEnd:function(dx,dy){var _237=this.__visibleRect,_238=this.__visibleDelta;_237.x+=dx;_237.y+=dy;_238.x+=dx;_238.y+=dy;var d=new _1bd(dx,dy),_239=this.extent,rw=this._ratioW,rh=this._ratioH;_239=new _1be(_239.xmin-(dx/rw),_239.ymin+(dy/rh),_239.xmax-(dx/rw),_239.ymax+(dy/rh),this.spatialReference);this.__panning=false;this._updateExtent(_239);this.onPanEnd(_239,d);this._fireExtChg([_239,d,false,this.__LOD]);},__zoomStart:function(_23a,_23b){this.__zooming=true;this.onZoomStart(_23a,1,_23b,this.__LOD?this.__LOD.level:null);},__zoom:function(_23c,_23d,_23e){this.onZoom(_23c,_23d,_23e);},__zoomEnd:function(_23f,_240,_241,lod,_242){ds(this._layersDiv,{left:"0px",top:"0px"});this._delta=new _1bd(0,0);this.__visibleRect.x=(this.__visibleRect.y=0);_23f=new _1be(_23f);this.__LOD=lod;this._ratioW=this.width/_23f.getWidth();this._ratioH=this.height/_23f.getHeight();var _243=this._delta;this._delta=null;this.__zooming=false;this._updateExtent(_23f,_242);this.onZoomEnd(_23f,_240,_241,lod?lod.level:null);this._fireExtChg([_23f,_243,_242,lod]);},_extentUtil:function(zoom,pan,_244,fit,_245){var dfd=new _1aa(),_246,_247,_248,_249,_24a,_24b,_24c,_24d,dx,dy,_24e=this.width,_24f=this.height,_250,_251,_252;if(zoom){_246=zoom.numLevels;_247=zoom.targetLevel;_250=_1b7.isDefined(_247);_248=zoom.factor;_249=zoom.mapAnchor;_24a=zoom.screenAnchor;_24b=zoom.mapCenter;_251=zoom.levelOrFactor;_24c=zoom.targetScale;_24d=_1b7.isDefined(_24c)&&_24c>0;}if(pan){dx=pan.dx;dy=pan.dy;_24b=pan.mapCenter;}if(lang.isArray(_24b)){_24b=new _1bc(_24b);}var _253=this._panAnim,_254=this._stopAnim(),_255=_254?_254.divExtent:this.extent,_256=this.__tileInfo,xmin,ymin,ewd,eht,_257=this._params;if(!this.loaded){if(_244){if(_255){_244=this._convertGeometry(_255,_244);}if(_244){this.extent=_244;_257.zoom=_257.scale=-1;_257.center=null;}}else{if(_24b||_250||_24d){if(_24b){if(_255){_24b=this._convertGeometry(_255,_24b);if(_24b){this.extent=_255.centerAt(_24b);_257.center=null;}}else{_257.center=_24b;}}if(_250&&_247>-1){_257.zoom=_247;_257.scale=-1;}else{if(_24d){_257.scale=_24c;_257.zoom=-1;}}}}dfd.resolve();return dfd;}if(_24b){_24b=this._convertGeometry(this,_24b);if(!_24b){dfd.reject();return dfd;}}if(_249){_249=this._convertGeometry(this,_249);if(!_249){dfd.reject();return dfd;}}if(_244){_244=this._convertGeometry(this,_244);if(!_244){dfd.reject();return dfd;}}if(_253&&_249&&_24a){_249=_1c8(this.extent,_24e,_24f,_24a);}if(_254&&_249&&_24a){_249=_1c8(_254.divExtent,_24e,_24f,_24a);}if(_250){if(_256){var _258=this.getMinZoom(),_259=this.getMaxZoom();if(_247<_258){_247=_258;}else{if(_247>_259){_247=_259;}}_246=_247-(_254?_254.level:this.getLevel());}else{_246=_247>0?-1:1;_252=_251?_247:null;}}if(_244){}else{if(_1b7.isDefined(_246)){var size;if(_256){var _25a=_254?_254.level:this.getLevel();size=this.__getExtentForLevel(_25a+_246,_24b,_255).extent;}else{var temp=_254?_254.end:this.extent;size=temp.expand(_252||(_246>0?0.5*_246:2*-_246));if(_252&&_24b){size=size.centerAt(_24b);}}if(size){if(_24b){_244=size;}else{var _25b=_249||_255.getCenter(),ymax=_255.ymax-((size.getHeight()-_255.getHeight())*(_25b.y-_255.ymax)/_255.getHeight());xmin=_255.xmin-((size.getWidth()-_255.getWidth())*(_25b.x-_255.xmin)/_255.getWidth());_244=new _1be(xmin,ymax-size.getHeight(),xmin+size.getWidth(),ymax,this.spatialReference);}}}else{if(_24d){_244=_1c0.getExtentForScale(this,_24c,_255);}else{if(_1b7.isDefined(_248)){_244=_255.expand(_248);}else{if(dx||dy){if(_254){var end=_254.end,c1=end.getCenter(),c2=_1c9(end,_24e,_24f,c1);c2.x+=dx;c2.y+=dy;c2=_1c8(end,_24e,_24f,c2);_244=end.offset(c2.x-c1.x,c2.y-c1.y);}else{var _25c=new _1bd((_24e/2)+dx,(_24f/2)+dy),_25d=_1c8(_255,_24e,_24f,_25c);ewd=_255.getWidth();eht=_255.getHeight();xmin=_25d.x-(ewd/2);ymin=_25d.y-(eht/2);_244=new _1be(xmin,ymin,xmin+ewd,ymin+eht,this.spatialReference);}}}}}}if(!_244){if(_24b){var ext=_254?_254.end:_255;ewd=ext.getWidth();eht=ext.getHeight();xmin=_24b.x-(ewd/2);ymin=_24b.y-(eht/2);_244=new _1be(xmin,ymin,xmin+ewd,ymin+eht,this.spatialReference);}else{if(_254){_244=_254.end;}}}if(_244){if(this._extentDfd&&this._extentDfd.fired===-1){this._extentDfd.reject();}this._extentDfd=dfd;this.__setExtent(_244,null,_24a,fit,_254,_245);}else{dfd.reject();}return dfd;},__setExtent:function(_25e,_25f,_260,fit,_261,_262){try{if(this._firstLayerId){this.extent=_25e;return;}var _263=true,sr=this.spatialReference,ext=_261?_261.divExtent:this.extent,_264=this._fixExtent(_25e,fit||false);_25e=_264.extent;var _265=_25e.getWidth(),_266=_25e.getHeight(),_267=Math.round;if(ext){var tw=_267(ext.getWidth()*_1cc),w=_267(_265*_1cc),th=_267(ext.getHeight()*_1cc),h=_267(_266*_1cc);_263=(tw!==w)||(th!==h);}var _268,end,_269,_26a,_26b=_261&&_261.rect,_26c=_261&&_261.divExtent;if(_1cb.zoomDuration&&_263&&ext){_26c=_26c||new _1be(ext);_26b=_26b||{left:ext.xmin,top:ext.ymax,width:ext.getWidth(),height:ext.getHeight()};end={left:_25e.xmin,top:_25e.ymax,width:_265,height:_266};_269=_26b.width/end.width;_26a=_26b.height/end.height;var mtl=new _1bc(_25e.xmin,_25e.ymax,sr),mbl=new _1bc(_25e.xmin,_25e.ymin,sr),etl=new _1bc(this.extent.xmin,this.extent.ymax,sr),ebl=new _1bc(this.extent.xmin,this.extent.ymin,sr);_268=_1bf.getLineIntersection(etl,mtl,ebl,mbl,sr);if(!_268&&!_261){_263=false;}}this._ratioW=this.width/_265;this._ratioH=this.height/_266;var _26d=this._zoomAnimDiv;if(_263){ds(this._layersDiv,{left:"0px",top:"0px"});_25f=new _1bd(0,0);this.__visibleRect.x=(this.__visibleRect.y=0);if(_26b&&end){this._delta=_25f;_26d.id="_zAD";_26d.startingExtent=_26c;_26d.extent=_25e;_26d.levelChange=_263;_26d.newLod=_264.lod;if(_260){_26d.anchor=_260;}else{if(!_268&&_261){_26d.anchor=_261.anchor;}else{_26d.anchor=_1c9(this.extent,this.width,this.height,_268);}}this._zoomAnim=_1b9.resize({node:_26d,start:_26b,end:end,duration:_1cb.zoomDuration,rate:_1cb.zoomRate,beforeBegin:!_261?this._zoomStartHandler:null,onAnimate:this._zoomingHandler,onEnd:this._zoomEndHandler}).play();this._fireOnScale(this.extent.getWidth()/_25e.getWidth(),_26d.anchor);}else{this._updateExtent(_25e,_263);this._fireExtChg([this.extent,_25f,_263,(this.__LOD=_264.lod)]);}}else{if(!this.__panning){if(this.loaded===false||_262){this._updateExtent(_25e,_263);this._fireExtChg([this.extent,_25f,_263,(this.__LOD=_264.lod)]);}else{this.__panning=true;_26b=new Rect(0,0,this.width,this.height,this.spatialReference).getCenter();_26b.x=_267(_26b.x);_26b.y=_267(_26b.y);this.onPanStart(this.extent,new _1bd(0,0));var _26e=(this._delta=this.toScreen(_25e.getCenter()));this._panAnim=_1b9.slideTo({node:_26d,left:_26b.x-_26e.x,top:_26b.y-_26e.y,duration:_1cb.panDuration,rate:_1cb.panRate,onAnimate:this._panningHandler,onEnd:this._panEndHandler});this._panAnim.play();}}}}catch(e){console.log(e.stack);console.error(e);}},_fireOnScale:function(_26f,_270,_271){if(this.navigationMode==="css-transforms"){var vd=this.__visibleDelta;this.onScale(_1b4.scaleAt(_26f,{x:-1*((this.width/2)-(_270.x-vd.x)),y:-1*((this.height/2)-(_270.y-vd.y))}),_271);}},_stopAnim:function(){var _272=this._zoomAnim,_273=this._panAnim;if(_272&&_272._active){_272.stop();var rect=_272.curve.getValue(_272._getStep()),rl=parseFloat(rect.left),rt=parseFloat(rect.top),node=_272.node;return {anchor:node.anchor,start:node.startingExtent,end:node.extent,level:node.newLod&&node.newLod.level,rect:rect,divExtent:new _1be(rl,rt-parseFloat(rect.height),rl+parseFloat(rect.width),rt,this.spatialReference)};}else{if(_273&&_273._active){_273.stop();_273._fire("onEnd",[_273.node]);}}},__getExtentForLevel:function(_274,_275,_276){var ti=this.__tileInfo,lods=ti&&ti.lods;_274=_1b7.isDefined(_274)?_274:0;_276=_276||this.extent;_275=_275||(_276&&_276.getCenter());if(lods){if(!_275){console.log("Map: "+this.invalidExtent);return;}var _277=this.getMinZoom(),_278=this.getMaxZoom();if(_274>_278){_274=_278;}if(_274<_277){_274=_277;}var lod=lods[_274],_279=this.width*lod.resolution/2,_27a=this.height*lod.resolution/2;return {extent:new _1be(_275.x-_279,_275.y-_27a,_275.x+_279,_275.y+_27a,_275.spatialReference),lod:lod};}else{if(!_276){console.log("Map: "+this.invalidExtent);return;}_274=(!_274||_274<1)?1:_274;return {extent:_276.expand(_274).centerAt(_275)};}},_jobs:0,_incr:function(){if((++this._jobs)===1){this.updating=true;this.onUpdateStart();}},_decr:function(){var _27b=--this._jobs;if(!_27b){this.updating=false;this.onUpdateEnd();}else{if(_27b<0){this._jobs=0;}}},_fireEvent:function(_27c,args){if(this[_27c]){this[_27c].apply(this,args);}},_updateExtent:function(_27d,_27e){this.extent=_27d;if(_27e){this._setClipRect();}var _27f=this.spatialReference;if(_27f){if(_27f.isWebMercator()){this.geographicExtent=_1c2.webMercatorToGeographic(this._getAvailExtent(),true);}else{if(_27f.wkid===4326){this.geographicExtent=new _1be(this._getAvailExtent().toJson());}}}},_fireExtChg:function(args){this._fireEvent("onExtentChange",args);var dfd=this._extentDfd;if(dfd){delete this._extentDfd;dfd.resolve();}},onUpdateStart:function(){},onUpdateEnd:function(){},onLoad:function(){this._setClipRect();},onUnload:function(){},onExtentChange:function(a,b,_280){},onTimeExtentChange:function(){},onLayerAdd:function(){},onLayerAddResult:function(){},onLayersAddResult:function(){},onLayerRemove:function(){},onLayersRemoved:function(){},onLayerReorder:function(){},onLayersReordered:function(){},onLayerSuspend:function(){},onLayerResume:function(){},onPanStart:function(){},onPan:function(){},onPanEnd:function(){},onScale:function(){},onZoomStart:function(){},onZoom:function(){},onZoomEnd:function(){},onResize:function(){this._setClipRect();},onReposition:function(){},destroy:function(){if(!this._destroyed){this.removeAllLayers();this._cleanUp();if(this._gc){this._gc._cleanUp();}this._destroyed=true;this.onUnload(this);}},setCursor:function(_281){ds(this.__container,"cursor",(this.cursor=_281));},setMapCursor:function(c){this.setCursor((this._cursor=c));},resetMapCursor:function(){this.setCursor(this._cursor);},setInfoWindow:function(_282){var iw=this.infoWindow;if(iw){iw.unsetMap(this);}this.infoWindow=_282;if(this.loaded&&_282){_282.setMap(this);}},setInfoWindowOnClick:function(_283){var _284=this._params;if(_283){if(!_284.showInfoWindowOnClick){var _285=[this.graphics].concat(_1ab.map(this.graphicsLayerIds,this.getLayer,this));_1ab.map(_285,function(_286){if(_286&&_286.loaded){this._clickHandles.push(dc(_286,"onClick",this,"_gClickHandler"));}},this);}}else{_1ab.forEach(this._clickHandles,ddc);this._clickHandles=[];}_284.showInfoWindowOnClick=_283;},getInfoWindowAnchor:function(pt){return (this.infoWindow&&this.infoWindow._getAnchor&&this.infoWindow._getAnchor(pt))||"upperright";},toScreen:function(pt,_287){return _1c9(this.extent,this.width,this.height,pt,_287);},toMap:function(pt){return _1c8(this.extent,this.width,this.height,pt);},addLayer:function(_288,_289){if(_288&&!this.getLayer(_288.id)){this._addLayer(_288,_288 instanceof _1c3?this.graphicsLayerIds:this.layerIds,_289);}return _288;},addLayers:function(_28a){var _28b=[],_28c=_28a.length,_28d,i,len=_28a.length;var _28e=function(_28f,_290){if(_1ab.indexOf(_28a,_28f)!==-1){_28c--;_28b.push({"layer":_28f,"success":!_290,"error":_290});if(!_28c){_1a9.disconnect(_28d);this.onLayersAddResult(_28b);}}};_28d=_1a9.connect(this,"onLayerAddResult",_28e);for(i=0;i<len;i++){this.addLayer(_28a[i]);}return this;},removeLayer:function(_291,_292){var id=_291.id,ids=_291 instanceof _1c3?this.graphicsLayerIds:this.layerIds,i=iOf(ids,id);if(i>=0){ids.splice(i,1);if(_291 instanceof _1c3){ddc(this["_gl_"+_291.id+"_click_connect"]);if(_291.loaded){_291._unsetMap(this,this._gc._surface);}}else{if(_291.loaded){_291._unsetMap(this,this._layersDiv);if(_291.declaredClass.indexOf("VETiledLayer")!==-1){this._onBingLayerRemove(_291);}}}delete this._layers[id];delete this._layerDivs[id];if(!_292){this._reorderLayers(ids);}this.onLayerRemove(_291);}},removeAllLayers:function(){var ids=this.layerIds,i;for(i=ids.length-1;i>=0;i--){this.removeLayer(this._layers[ids[i]],1);}ids=this.graphicsLayerIds;for(i=ids.length-1;i>=0;i--){this.removeLayer(this._layers[ids[i]],1);}this.onLayersRemoved();},reorderLayer:function(_293,_294){if(lang.isString(_293)){_1a7.deprecated(this.declaredClass+": "+"Map.reorderLayer(/*String*/ id, /*Number*/ index) deprecated. Use Map.reorderLayer(/*Layer*/ layer, /*Number*/ index).",null,"v2.0");_293=this.getLayer(_293);}var id=_293.id,i,ids=_293 instanceof _1c3?this.graphicsLayerIds:this.layerIds;if(_294<0){_294=0;}else{if(_294>=ids.length){_294=ids.length-1;}}i=iOf(ids,id);if(i===-1||i===_294){return;}ids.splice(i,1);ids.splice(_294,0,id);this._reorderLayers(ids);},getLayer:function(id){return this._layers[id];},setExtent:function(_295,fit){_295=new _1be(_295.toJson());var _296=_295.getWidth(),_297=_295.getHeight(),dfd;if(_296===0&&_297===0){dfd=this.centerAt(new _1bc({x:_295.xmin,y:_295.ymin,spatialReference:_295.spatialReference&&_295.spatialReference.toJson()}));}else{dfd=this._extentUtil(null,null,_295,fit);}return dfd;},centerAt:function(_298){return this._extentUtil(null,{mapCenter:_298});},centerAndZoom:function(_299,_29a){return this._extentUtil({targetLevel:_29a,mapCenter:_299,levelOrFactor:true});},getScale:function(){return this.__LOD?this.__LOD.scale:_1c0.getScale(this);},getMinScale:function(){return this._params.minScale;},getMaxScale:function(){return this._params.maxScale;},setScale:function(_29b){return this._extentUtil({targetScale:_29b});},getLayersVisibleAtScale:function(_29c){var _29d=[];_29c=_29c||this.getScale();if(_29c){_1ab.forEach(this.layerIds.concat(this.graphicsLayerIds),function(_29e){_29e=this.getLayer(_29e);if(_29e.isVisibleAtScale(_29c)){_29d.push(_29e);}},this);}return _29d;},getNumLevels:function(){var _29f=this.getMinZoom(),_2a0=this.getMaxZoom();return ((_29f===_2a0)&&_29f<0)?0:(_2a0-_29f+1);},getLevel:function(){return this.__LOD?this.__LOD.level:-1;},setLevel:function(_2a1){if(_2a1>-1){return this._extentUtil({targetLevel:_2a1});}},getZoom:function(){return this.getLevel();},setZoom:function(zoom){return this.setLevel(zoom);},getMinZoom:function(){return this._params.minZoom;},getMaxZoom:function(){return this._params.maxZoom;},setBasemap:function(_2a2){var _2a3,_2a4="Map.setBasemap: ";if(lang.isObject(_2a2)){_2a3=_2a2;_2a2=_2a3.title;}else{_2a3=_1cb.basemaps&&_1cb.basemaps[_2a2];}if(_2a3){if(this._basemapDfd&&this._basemapDfd.fired===-1){this._basemapDfd.cancel();}var _2a5=[],_2a6=[],_2a7=0;_1ab.forEach(_2a3.baseMapLayers||_2a3.layers,function(_2a8){var _2a9,_2aa={id:_2a8.id,displayLevels:_2a8.displayLevels,opacity:_1b7.isDefined(_2a8.opacity)?_2a8.opacity:null,visible:_1b7.isDefined(_2a8.visibility)?_2a8.visibility:null};if(_2a8.type){switch(_2a8.type){case "OpenStreetMap":_2a9=new _1c6(_2aa);break;default:console.log(_2a4+_1b7.substitute({basemapName:_2a2,type:_2a8.type},this.unknownLayerType));break;}}else{var url=_2a8.url;if(window.location.protocol==="https:"&&((url.search(/^http\:\/\/server\.arcgisonline\.com/i)!==-1)||(url.search(/^http\:\/\/services\.arcgisonline\.com/i)!==-1)||(url.search(/^http\:\/\/.+\.arcgis\.com/i)!==-1))){url=url.replace(/http:/i,"https:");}_2a9=new _1c5(url,_2aa);}if(_2a9){_2a5.push(_2a9);_2a6.push(_2a8);if(!_2a8.isReference){_2a7++;}}},this);if(!_2a5.length||!_2a7){console.log(_2a4+_1b7.substitute({basemapName:_2a2},this.invalidBasemap));return;}var _2ab={basemapName:_2a2,infos:_2a6,layers:_2a5};if(!this.loaded){this._basemapLoaded(_2ab);return;}var self=this,dfd=new _1aa(_1ba._dfdCanceller),_2ac=function(_2ad){dfd._pendingLayers--;var idx=_1ab.indexOf(_2ab.layers,this);if(idx>-1){var _2ae=dfd._layerEvents[idx];if(_2ae){_1a9.disconnect(_2ae[0]);_1a9.disconnect(_2ae[1]);}}if(dfd._pendingLayers<=0){delete dfd._layerEvents;delete self._basemapDfd;dfd.callback(_2ab);}};this._basemapDfd=dfd;dfd._pendingLayers=0;dfd._layerEvents={};_1ab.forEach(_2a5,function(_2af,i){if(_2af){dfd._pendingLayers++;if(_2af.loaded){_2ac(_2af);}else{dfd._layerEvents[i]=[_1a9.connect(_2af,"onLoad",_2af,_2ac),_1a9.connect(_2af,"onError",_2af,_2ac)];}}});dfd.addCallback(lang.hitch(this,this._basemapLoaded));}else{var _2b0=[],_2b1;for(_2b1 in _1cb.basemaps){_2b0.push(_2b1);}console.log(_2a4+_1b7.substitute({basemapName:_2a2,list:_2b0.join(",")},this.unknownBasemap));}},_basemapLoaded:function(_2b2){var _2b3=_2b2.layers,_2b4=_2b2.infos,_2b5=0,_2b6=true;if(this.loaded){_1ab.forEach(_2b3,function(_2b7,i){if(_2b7.loaded){if(!_2b4[i].isReference){_2b5++;}}});_2b6=_2b5;}if(_2b6){this._removeBasemap();this._basemap=_2b2.basemapName;this.basemapLayerIds=this._addBasemap(_2b3,_2b4);this._fireEvent("onBasemapChange");}},_addBasemap:function(_2b8,_2b9){var _2ba=[],ids=[],_2bb=0;_1ab.forEach(_2b8,function(_2bc,i){if(_2b9[i].isReference){_2ba.push(_2bc);}else{this.addLayer(_2bc,_2bb++);ids.push(_2bc.id);}},this);if(_2ba.length){_1ab.forEach(_2ba,function(_2bd){this.addLayer(_2bd,"top");ids.push(_2bd.id);},this);}return ids;},_removeBasemap:function(){var ids=this.basemapLayerIds,_2be;if(ids&&ids.length){_1ab.forEach(ids,function(id){_2be=this.getLayer(id);if(_2be){this.removeLayer(_2be);}},this);}},getBasemap:function(){return this._basemap||"";},translate:function(dx,dy){dx=dx||0;dy=dy||0;if(!this._txTimer){this._tx=this._ty=0;var _2bf=this.toScreen(this.extent.getCenter());this.__panStart(_2bf.x,_2bf.y);}this._tx+=dx;this._ty+=dy;this.__pan(this._tx,this._ty);clearTimeout(this._txTimer);this._txTimer=setTimeout(this._endTranslate,150);},_endTranslate:function(){clearTimeout(this._txTimer);this._txTimer=null;var dx=this._tx,dy=this._ty;this._tx=this._ty=0;this.__panEnd(dx,dy);},setTimeExtent:function(_2c0){this.timeExtent=_2c0;var arg=_2c0?new _2c0.constructor(_2c0.toJson()):null;this.onTimeExtentChange(arg);},setTimeSlider:function(_2c1){if(this.timeSlider){ddc(this._tsTimeExtentChange_connect);this._tsTimeExtentChange_connect=null;this.timeSlider=null;}if(_2c1){this.timeSlider=_2c1;this.setTimeExtent(_2c1.getCurrentTimeExtent());this._tsTimeExtentChange_connect=dc(_2c1,"onTimeExtentChange",this,"setTimeExtent");}},setVisibility:function(_2c2){if(this.visible!==_2c2){this.visible=_2c2;if(!_2c2){this._display=this.container.style.display;}this.container.style.display=_2c2?this._display:"none";if(this.autoResize){var _2c3=_2c2?"resume":"pause";this._rszSignal[_2c3]();this._oriSignal[_2c3]();}if(_2c2){this.resize();}}},resize:function(_2c4){var self=this,_2c5=function(){clearTimeout(self._resizeT);self.reposition();self._resize();};clearTimeout(self._resizeT);if(_2c4===true){_2c5();}else{self._resizeT=setTimeout(_2c5,self.resizeDelay);}},_resize:function(){var w=this.width,h=this.height,box=_1b1.getContentBox(this.container);if(w===box.w&&h===box.h){return;}var _2c6=this._zoomAnim||this._panAnim;if(_2c6){_2c6.stop();_2c6._fire("onEnd",[_2c6.node]);}ds(this.root,{width:(this.width=box.w)+"px",height:(this.height=box.h)+"px"});var wd=this.width,ht=this.height;if(this.attribution&&this.attribution.domNode){_1b2.set(this.attribution.domNode,"width",Math.floor(wd*this._mapParams.attributionWidth)+"px");}this.__visibleRect.update(this.__visibleRect.x,this.__visibleRect.y,wd,ht);this.__visibleDelta.update(this.__visibleDelta.x,this.__visibleDelta.y,wd,ht);var r=new Rect(this.extent),ne=(new Rect(r.x,r.y,r.width*(wd/w),r.height*(ht/h),this.spatialReference)).getExtent();this.onResize(ne,wd,ht);this._extentUtil(null,null,ne,null,true);},reposition:function(){this._reposition();this.onReposition(this.position.x,this.position.y);},_reposition:function(){var pos=_1b1.position(this.container,true),brdr=_1b1.getPadBorderExtents(this.container);this.position.update(pos.x+brdr.l,pos.y+brdr.t);},_setClipRect:function(){delete this._clip;var _2c7=has("ie")?"rect(auto,auto,auto,auto)":null;if(this.wrapAround180){var _2c8=this.width,_2c9=this.height,_2ca=this._getFrameWidth(),diff=_2c8-_2ca;if(diff>0){var left=diff/2;_2c7="rect(0px,"+(left+_2ca)+"px,"+_2c9+"px,"+left+"px)";var _2cb=this.extent.getWidth(),_2cc=_2cb*(_2ca/_2c8);this._clip=[(_2cb-_2cc)/2,_2cc];}}ds(this.__container,"clip",_2c7);},_getAvailExtent:function(){var _2cd=this.extent,clip=this._clip;if(clip){if(!_2cd._clip){var rect=new Rect(_2cd);rect.width=clip[1];rect.x=rect.x+clip[0];_2cd._clip=rect.getExtent();}return _2cd._clip;}return _2cd;},_fixedPan:function(dx,dy){return this._extentUtil(null,{dx:dx,dy:dy});},panUp:function(){return this._fixedPan(0,this.height*-_1cd);},panUpperRight:function(){return this._fixedPan(this.width*_1cd,this.height*-_1cd);},panRight:function(){return this._fixedPan(this.width*_1cd,0);},panLowerRight:function(){return this._fixedPan(this.width*_1cd,this.height*_1cd);},panDown:function(){return this._fixedPan(0,this.height*_1cd);},panLowerLeft:function(){return this._fixedPan(this.width*-_1cd,this.height*_1cd);},panLeft:function(){return this._fixedPan(this.width*-_1cd,0);},panUpperLeft:function(){return this._fixedPan(this.width*-_1cd,this.height*-_1cd);},enableSnapping:function(_2ce){_2ce=_2ce||{};if(_2ce.declaredClass==="esri.SnappingManager"){this.snappingManager=_2ce;}else{var _2cf=["esri/SnappingManager"],rid=uid++,self=this;this._rids&&this._rids.push(rid);_1a6(_2cf,function(_2d0){var idx=self._rids?_1ab.indexOf(self._rids,rid):-1;if(idx!==-1){self._rids.splice(idx,1);self.snappingManager=new _2d0(lang.mixin({map:self},_2ce));}});}return this.snappingManager;},disableSnapping:function(){if(this.snappingManager){this.snappingManager.destroy();}this.snappingManager=null;}});if(has("extend-esri")){_1b5._CoreMap=_1d7;}return _1d7;});},"dijit/_HasDropDown":function(){define("dijit/_HasDropDown",["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/event","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","dojo/window","./registry","./focus","./popup","./_FocusMixin"],function(_2d1,_2d2,_2d3,dom,_2d4,_2d5,_2d6,_2d7,has,keys,lang,on,_2d8,_2d9,_2da,_2db,_2dc){return _2d1("dijit._HasDropDown",_2dc,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:true,forceWidth:false,maxHeight:0,dropDownPosition:["below","above"],_stopClickEvents:true,_onDropDownMouseDown:function(e){if(this.disabled||this.readOnly){return;}e.preventDefault();this._docHandler=this.connect(this.ownerDocument,"mouseup","_onDropDownMouseUp");this.toggleDropDown();},_onDropDownMouseUp:function(e){if(e&&this._docHandler){this.disconnect(this._docHandler);}var _2dd=this.dropDown,_2de=false;if(e&&this._opened){var c=_2d6.position(this._buttonNode,true);if(!(e.pageX>=c.x&&e.pageX<=c.x+c.w)||!(e.pageY>=c.y&&e.pageY<=c.y+c.h)){var t=e.target;while(t&&!_2de){if(_2d5.contains(t,"dijitPopup")){_2de=true;}else{t=t.parentNode;}}if(_2de){t=e.target;if(_2dd.onItemClick){var _2df;while(t&&!(_2df=_2d9.byNode(t))){t=t.parentNode;}if(_2df&&_2df.onClick&&_2df.getParent){_2df.getParent().onItemClick(_2df,e);}}return;}}}if(this._opened){if(_2dd.focus&&_2dd.autoFocus!==false){this._focusDropDownTimer=this.defer(function(){_2dd.focus();delete this._focusDropDownTimer;});}}else{this.defer("focus");}if(has("touch")){this._justGotMouseUp=true;this.defer(function(){this._justGotMouseUp=false;});}},_onDropDownClick:function(e){if(has("touch")&&!this._justGotMouseUp){this._onDropDownMouseDown(e);this._onDropDownMouseUp(e);}if(this._stopClickEvents){_2d3.stop(e);}},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var _2e0={"after":this.isLeftToRight()?"Right":"Left","before":this.isLeftToRight()?"Left":"Right","above":"Up","below":"Down","left":"Left","right":"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";_2d5.add(this._arrowWrapperNode||this._buttonNode,"dijit"+_2e0+"ArrowButton");},postCreate:function(){this.inherited(arguments);var _2e1=this.focusNode||this.domNode;this.own(on(this._buttonNode,"mousedown",lang.hitch(this,"_onDropDownMouseDown")),on(this._buttonNode,"click",lang.hitch(this,"_onDropDownClick")),on(_2e1,"keydown",lang.hitch(this,"_onKey")),on(_2e1,"keyup",lang.hitch(this,"_onKeyUp")));},destroy:function(){if(this.dropDown){if(!this.dropDown._destroyed){this.dropDown.destroyRecursive();}delete this.dropDown;}this.inherited(arguments);},_onKey:function(e){if(this.disabled||this.readOnly){return;}var d=this.dropDown,_2e2=e.target;if(d&&this._opened&&d.handleKey){if(d.handleKey(e)===false){_2d3.stop(e);return;}}if(d&&this._opened&&e.keyCode==keys.ESCAPE){this.closeDropDown();_2d3.stop(e);}else{if(!this._opened&&(e.keyCode==keys.DOWN_ARROW||((e.keyCode==keys.ENTER||e.keyCode==keys.SPACE)&&((_2e2.tagName||"").toLowerCase()!=="input"||(_2e2.type&&_2e2.type.toLowerCase()!=="text"))))){this._toggleOnKeyUp=true;_2d3.stop(e);}}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var d=this.dropDown;if(d&&d.focus){this.defer(lang.hitch(d,"focus"),1);}}},_onBlur:function(){var _2e3=_2da.curNode&&this.dropDown&&dom.isDescendant(_2da.curNode,this.dropDown.domNode);this.closeDropDown(_2e3);this.inherited(arguments);},isLoaded:function(){return true;},loadDropDown:function(_2e4){_2e4();},loadAndOpenDropDown:function(){var d=new _2d2(),_2e5=lang.hitch(this,function(){this.openDropDown();d.resolve(this.dropDown);});if(!this.isLoaded()){this.loadDropDown(_2e5);}else{_2e5();}return d;},toggleDropDown:function(){if(this.disabled||this.readOnly){return;}if(!this._opened){this.loadAndOpenDropDown();}else{this.closeDropDown();}},openDropDown:function(){var _2e6=this.dropDown,_2e7=_2e6.domNode,_2e8=this._aroundNode||this.domNode,self=this;if(!this._preparedNode){this._preparedNode=true;if(_2e7.style.width){this._explicitDDWidth=true;}if(_2e7.style.height){this._explicitDDHeight=true;}}if(this.maxHeight||this.forceWidth||this.autoWidth){var _2e9={display:"",visibility:"hidden"};if(!this._explicitDDWidth){_2e9.width="";}if(!this._explicitDDHeight){_2e9.height="";}_2d7.set(_2e7,_2e9);var _2ea=this.maxHeight;if(_2ea==-1){var _2eb=_2d8.getBox(this.ownerDocument),_2ec=_2d6.position(_2e8,false);_2ea=Math.floor(Math.max(_2ec.y,_2eb.h-(_2ec.y+_2ec.h)));}_2db.moveOffScreen(_2e6);if(_2e6.startup&&!_2e6._started){_2e6.startup();}var mb=_2d6.getMarginSize(_2e7);var _2ed=(_2ea&&mb.h>_2ea);_2d7.set(_2e7,{overflowX:"visible",overflowY:_2ed?"auto":"visible"});if(_2ed){mb.h=_2ea;if("w" in mb){mb.w+=16;}}else{delete mb.h;}if(this.forceWidth){mb.w=_2e8.offsetWidth;}else{if(this.autoWidth){mb.w=Math.max(mb.w,_2e8.offsetWidth);}else{delete mb.w;}}if(lang.isFunction(_2e6.resize)){_2e6.resize(mb);}else{_2d6.setMarginBox(_2e7,mb);}}var _2ee=_2db.open({parent:this,popup:_2e6,around:_2e8,orient:this.dropDownPosition,onExecute:function(){self.closeDropDown(true);},onCancel:function(){self.closeDropDown(true);},onClose:function(){_2d4.set(self._popupStateNode,"popupActive",false);_2d5.remove(self._popupStateNode,"dijitHasDropDownOpen");self._set("_opened",false);}});_2d4.set(this._popupStateNode,"popupActive","true");_2d5.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",true);this.domNode.setAttribute("aria-expanded","true");return _2ee;},closeDropDown:function(_2ef){if(this._focusDropDownTimer){this._focusDropDownTimer.remove();delete this._focusDropDownTimer;}if(this._opened){this.domNode.setAttribute("aria-expanded","false");if(_2ef){this.focus();}_2db.close(this.dropDown);this._opened=false;}}});});},"esri/dijit/_EventedWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/on","esri/Evented","dijit/_WidgetBase"],function(_2f0,lang,_2f1,on,_2f2,_2f3){var EWM=_2f0([_2f2,_2f3],{_onMap:function(_2f4){var _2f5=this.constructor._onMap,_2f6,_2f7;if(!_2f5){_2f5=this.registerConnectEvents();}_2f4=_2f4.toLowerCase();if(_2f5[_2f4]){_2f6=this[_2f5[_2f4].name];}else{_2f7=this._onCamelCase(_2f4);if(this[_2f7]){_2f6=_2f7;}}return _2f6;},on:function(type,_2f8){_2f2.prototype.on.apply(this,arguments);return this.inherited(arguments);},emit:function(type,_2f9,_2fa){var _2fb,_2fc,_2fd,_2fe=type.toLowerCase(),_2ff=this.constructor._onMap||this.registerConnectEvents();_2fc=this[this._onMap(_2fe)];_2f9=_2f9||{};if(!_2f9.target){_2f9.target=this;}if(_2fc&&_2ff&&_2ff[_2fe]){this._onObj2Arr(function(){_2fb=Array.prototype.slice.call(arguments);},_2ff[_2fe].argKeys)(_2f9);_2fd=lang.mixin({},arguments);_2fd[2]=_2fb;_2fd[0]=_2ff[_2fe].name.replace(/^on/,"");}return this.inherited(_2fd||arguments);}});return EWM;});},"esri/layers/agsimageservice":function(){define(["esri/layers/agscommon","esri/layers/ArcGISImageServiceLayer","esri/layers/ImageServiceParameters","esri/layers/MosaicRule","esri/layers/RasterFunction","esri/utils"],function(){return {};});},"esri/layerUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel"],function(lang,_300,_301,has,_302){var _303={_serializeLayerDefinitions:function(_304){var defs=[],_305=false,re=/[:;]/;if(_304){_300.forEach(_304,function(defn,i){if(defn){defs.push([i,defn]);if(!_305&&re.test(defn)){_305=true;}}});if(defs.length>0){var _306;if(_305){_306={};_300.forEach(defs,function(defn){_306[defn[0]]=defn[1];});_306=_301.toJson(_306);}else{_306=[];_300.forEach(defs,function(defn){_306.push(defn[0]+":"+defn[1]);});_306=_306.join(";");}return _306;}}return null;},_serializeTimeOptions:function(_307,ids){if(!_307){return;}var _308=[];_300.forEach(_307,function(_309,i){if(_309){var json=_309.toJson();if(ids&&_300.indexOf(ids,i)!==-1){json.useTime=false;}_308.push("\""+i+"\":"+_301.toJson(json));}});if(_308.length){return "{"+_308.join(",")+"}";}},_getDefaultVisibleLayers:function(_30a){var _30b=[],i;if(!_30a){return _30b;}for(i=0;i<_30a.length;i++){if(_30a[i].parentLayerId>=0&&_300.indexOf(_30b,_30a[i].parentLayerId)===-1&&_300.some(_30a,function(item){return item.id===_30a[i].parentLayerId;})){continue;}if(_30a[i].defaultVisibility){_30b.push(_30a[i].id);}}return _30b;},_getLayersForScale:function(_30c,_30d){var _30e=[];if(_30c>0&&_30d){var i;for(i=0;i<_30d.length;i++){if(_30d[i].parentLayerId>=0&&_300.indexOf(_30e,_30d[i].parentLayerId)===-1&&_300.some(_30d,function(item){return item.id===_30d[i].parentLayerId;})){continue;}if(_30d[i].id>=0){var _30f=true,_310=_30d[i].maxScale,_311=_30d[i].minScale;if(_310>0||_311>0){if(_310>0&&_311>0){_30f=_310<=_30c&&_30c<=_311;}else{if(_310>0){_30f=_310<=_30c;}else{if(_311>0){_30f=_30c<=_311;}}}}if(_30f){_30e.push(_30d[i].id);}}}}return _30e;}};if(has("extend-esri")){lang.mixin(_302,_303);}return _303;});},"dijit/focus":function(){define("dijit/focus",["dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/Evented","dojo/_base/lang","dojo/on","dojo/ready","dojo/sniff","dojo/Stateful","dojo/_base/unload","dojo/_base/window","dojo/window","./a11y","./registry","./main"],function(_312,_313,dom,_314,_315,_316,lang,on,_317,has,_318,_319,win,_31a,a11y,_31b,_31c){var _31d=_313([_318,_316],{curNode:null,activeStack:[],constructor:function(){var _31e=lang.hitch(this,function(node){if(dom.isDescendant(this.curNode,node)){this.set("curNode",null);}if(dom.isDescendant(this.prevNode,node)){this.set("prevNode",null);}});_312.before(_315,"empty",_31e);_312.before(_315,"destroy",_31e);},registerIframe:function(_31f){return this.registerWin(_31f.contentWindow,_31f);},registerWin:function(_320,_321){var _322=this;var _323=function(evt){_322._justMouseDowned=true;setTimeout(function(){_322._justMouseDowned=false;},0);if(has("ie")&&evt&&evt.srcElement&&evt.srcElement.parentNode==null){return;}_322._onTouchNode(_321||evt.target||evt.srcElement,"mouse");};var doc=has("ie")?_320.document.documentElement:_320.document;if(doc){if(has("ie")){_320.document.body.attachEvent("onmousedown",_323);var _324=function(evt){var tag=evt.srcElement.tagName.toLowerCase();if(tag=="#document"||tag=="body"){return;}if(a11y.isTabNavigable(evt.srcElement)){_322._onFocusNode(_321||evt.srcElement);}else{_322._onTouchNode(_321||evt.srcElement);}};doc.attachEvent("onfocusin",_324);var _325=function(evt){_322._onBlurNode(_321||evt.srcElement);};doc.attachEvent("onfocusout",_325);return {remove:function(){_320.document.detachEvent("onmousedown",_323);doc.detachEvent("onfocusin",_324);doc.detachEvent("onfocusout",_325);doc=null;}};}else{doc.body.addEventListener("mousedown",_323,true);doc.body.addEventListener("touchstart",_323,true);var _326=function(evt){_322._onFocusNode(_321||evt.target);};doc.addEventListener("focus",_326,true);var _327=function(evt){_322._onBlurNode(_321||evt.target);};doc.addEventListener("blur",_327,true);return {remove:function(){doc.body.removeEventListener("mousedown",_323,true);doc.body.removeEventListener("touchstart",_323,true);doc.removeEventListener("focus",_326,true);doc.removeEventListener("blur",_327,true);doc=null;}};}}},_onBlurNode:function(node){if(this._clearFocusTimer){clearTimeout(this._clearFocusTimer);}this._clearFocusTimer=setTimeout(lang.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null);}),0);if(this._justMouseDowned){return;}if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);}this._clearActiveWidgetsTimer=setTimeout(lang.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([]);}),0);},_onTouchNode:function(node,by){if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);delete this._clearActiveWidgetsTimer;}var _328=[];try{while(node){var _329=_314.get(node,"dijitPopupParent");if(_329){node=_31b.byId(_329).domNode;}else{if(node.tagName&&node.tagName.toLowerCase()=="body"){if(node===win.body()){break;}node=_31a.get(node.ownerDocument).frameElement;}else{var id=node.getAttribute&&node.getAttribute("widgetId"),_32a=id&&_31b.byId(id);if(_32a&&!(by=="mouse"&&_32a.get("disabled"))){_328.unshift(id);}node=node.parentNode;}}}}catch(e){}this._setStack(_328,by);},_onFocusNode:function(node){if(!node){return;}if(node.nodeType==9){return;}if(this._clearFocusTimer){clearTimeout(this._clearFocusTimer);delete this._clearFocusTimer;}this._onTouchNode(node);if(node==this.curNode){return;}this.set("prevNode",this.curNode);this.set("curNode",node);},_setStack:function(_32b,by){var _32c=this.activeStack;this.set("activeStack",_32b);for(var _32d=0;_32d<Math.min(_32c.length,_32b.length);_32d++){if(_32c[_32d]!=_32b[_32d]){break;}}var _32e;for(var i=_32c.length-1;i>=_32d;i--){_32e=_31b.byId(_32c[i]);if(_32e){_32e._hasBeenBlurred=true;_32e.set("focused",false);if(_32e._focusManager==this){_32e._onBlur(by);}this.emit("widget-blur",_32e,by);}}for(i=_32d;i<_32b.length;i++){_32e=_31b.byId(_32b[i]);if(_32e){_32e.set("focused",true);if(_32e._focusManager==this){_32e._onFocus(by);}this.emit("widget-focus",_32e,by);}}},focus:function(node){if(node){try{node.focus();}catch(e){}}}});var _32f=new _31d();_317(function(){var _330=_32f.registerWin(_31a.get(win.doc));if(has("ie")){_319.addOnWindowUnload(function(){if(_330){_330.remove();_330=null;}});}});_31c.focus=function(node){_32f.focus(node);};for(var attr in _32f){if(!/^_/.test(attr)){_31c.focus[attr]=typeof _32f[attr]=="function"?lang.hitch(_32f,attr):_32f[attr];}}_32f.watch(function(attr,_331,_332){_31c.focus[attr]=_332;});return _32f;});},"dijit/hccss":function(){define("dijit/hccss",["dojo/dom-class","dojo/hccss","dojo/ready","dojo/_base/window"],function(_333,has,_334,win){_334(90,function(){if(has("highcontrast")){_333.add(win.body(),"dijit_a11y");}});return has;});},"esri/graphic":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/domUtils","esri/lang","esri/InfoTemplate","esri/geometry/jsonUtils","esri/symbols/jsonUtils"],function(_335,lang,has,_336,_337,_338,_339,_33a,_33b){var _33c=_335(null,{declaredClass:"esri.Graphic",constructor:function(json,_33d,_33e,_33f){if(json&&!json.declaredClass){this.geometry=json.geometry?_33a.fromJson(json.geometry):null;this.symbol=json.symbol?_33b.fromJson(json.symbol):null;this.attributes=json.attributes||null;this.infoTemplate=json.infoTemplate?new _339(json.infoTemplate):null;}else{this.geometry=json;this.symbol=_33d;this.attributes=_33e;this.infoTemplate=_33f;}},_shape:null,_graphicsLayer:null,_visible:true,visible:true,getDojoShape:function(){return this._shape;},getLayer:function(){return this._graphicsLayer;},setGeometry:function(_340){this.geometry=_340;var gl=this._graphicsLayer;if(gl){gl._updateExtent(this);gl._draw(this,true);}return this;},setSymbol:function(_341,_342){var gl=this._graphicsLayer,_343=this._shape;this.symbol=_341;if(_341){this.symbol._stroke=this.symbol._fill=null;}if(gl){if(_342){if(_343){gl._removeShape(this);}}gl._draw(this,true);}return this;},setAttributes:function(_344){this.attributes=_344;return this;},setInfoTemplate:function(_345){this.infoTemplate=_345;return this;},getInfoTemplate:function(){return this._getEffInfoTemplate();},_getEffInfoTemplate:function(){var _346=this.getLayer();return this.infoTemplate||(_346&&_346.infoTemplate);},getTitle:function(){var _347=this.getInfoTemplate();var _348=_347&&_347.title;if(lang.isFunction(_348)){_348=_348.call(_347,this);}else{if(lang.isString(_348)){var _349=this._graphicsLayer;var func=_349&&_349._getDateOpts;_348=_338.substitute(this.attributes,_348,{first:true,dateFormat:func&&func.call(_349)});}}return _348;},getContent:function(){var _34a=this.getInfoTemplate();var _34b=_34a&&_34a.content;if(lang.isFunction(_34b)){_34b=_34b.call(_34a,this);}else{if(lang.isString(_34b)){var _34c=this._graphicsLayer;var func=_34c&&_34c._getDateOpts;_34b=_338.substitute(this.attributes,_34b,{dateFormat:func&&func.call(_34c)});}}return _34b;},show:function(){this.visible=this._visible=true;var _34d=this._shape,_34e;if(_34d){_34e=_34d.declaredClass.toLowerCase().indexOf("canvas")===-1?_34d.getEventSource():null;if(_34e){_337.show(_34e);}}else{if(this._graphicsLayer){this._graphicsLayer._draw(this,true);}}return this;},hide:function(){this.visible=this._visible=false;var _34f=this._shape,_350,_351;if(_34f){_350=_34f.declaredClass.toLowerCase().indexOf("canvas")===-1?_34f.getEventSource():null;if(_350){_337.hide(_350);}else{_351=this._graphicsLayer;if(_351){_351._removeShape(this);}}}return this;},toJson:function(){var json={};if(this.geometry){json.geometry=this.geometry.toJson();}if(this.attributes){json.attributes=lang.mixin({},this.attributes);}if(this.symbol){json.symbol=this.symbol.toJson();}if(this.infoTemplate){json.infoTemplate=this.infoTemplate.toJson();}return json;}});if(has("extend-esri")){_336.Graphic=_33c;}return _33c;});},"esri/tasks/DirectionsFeatureSet":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/geometry/Extent","esri/geometry/Polyline","esri/tasks/FeatureSet"],function(_352,lang,_353,has,_354,_355,_356,_357){var _358=_352(_357,{declaredClass:"esri.tasks.DirectionsFeatureSet",constructor:function(json,cgs){this.routeId=json.routeId;this.routeName=json.routeName;lang.mixin(this,json.summary);this.extent=new _355(this.envelope);var _359=this._fromCompressedGeometry,_35a=this.features,sr=this.extent.spatialReference,_35b=[];_353.forEach(cgs,function(cg,i){_35a[i].setGeometry(_35b[i]=_359(cg,sr));});this.strings=json.strings;this.mergedGeometry=this._mergePolylinesToSinglePath(_35b,sr);this.geometryType="esriGeometryPolyline";delete this.envelope;},_fromCompressedGeometry:function(str,sr){var _35c=0,_35d=0,_35e=[],x,y,_35f=str.replace(/(\+)|(\-)/g," $&").split(" "),j,jl=_35f.length,_360=parseInt(_35f[1],32);for(j=2;j<jl;j+=2){_35c=(x=(parseInt(_35f[j],32)+_35c));_35d=(y=(parseInt(_35f[j+1],32)+_35d));_35e.push([x/_360,y/_360]);}var po=new _356({paths:[_35e]});po.setSpatialReference(sr);return po;},_mergePolylinesToSinglePath:function(_361,sr){var _362=[];_353.forEach(_361,function(_363){_353.forEach(_363.paths,function(path){_362=_362.concat(path);});});var path=[],_364=[0,0];_353.forEach(_362,function(_365){if(_365[0]!==_364[0]||_365[1]!==_364[1]){path.push(_365);_364=_365;}});return new _356({paths:[path]}).setSpatialReference(sr);}});if(has("extend-esri")){lang.setObject("tasks.DirectionsFeatureSet",_358,_354);}return _358;});},"esri/layers/GraphicsLayer":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/dom-attr","dojo/dom-construct","dojo/dom-style","dojox/gfx","dojox/gfx/matrix","esri/kernel","esri/lang","esri/sniff","esri/domUtils","esri/layers/layer","esri/symbols/SimpleMarkerSymbol","esri/geometry/Point","esri/geometry/ScreenPoint","esri/geometry/Extent","esri/geometry/mathUtils","esri/geometry/screenUtils"],function(_366,_367,lang,_368,_369,_36a,_36b,_36c,_36d,_36e,_36f,has,_370,_371,SMS,_372,_373,_374,_375,_376){var _377;var _378=_366(null,{declaredClass:"esri.layers._GraphicsContainer",_setMap:function(map,_379){var es,_37a=(this._connects=[]);this._map=map;if(_36c.renderer.toLowerCase().indexOf("canvas")!==-1){es=_36a.create("div",{style:"overflow: visible; position: absolute;"},_379);this._surface={getEventSource:function(){return es;}};_37a.push(_367.connect(es,"onmousedown",this,this._canvasDownHandler));_37a.push(_367.connect(es,"onmouseup",this,this._canvasUpHandler));_37a.push(_367.connect(es,"onclick",this,this._canvasClickHandler));_377.prototype._canvas=true;}else{var _37b=(this._surface=_36c.createSurface(_379,map.width,map.height));es=_37b.getEventSource();_36b.set((es=(has("ie")<9)?es.parentNode:es),{overflow:"visible",position:"absolute"});}_37a.push(_367.connect(map,"onResize",this,"_onResizeHandler"));return es;},_onResizeHandler:function(_37c,_37d,_37e){var es=this._surface.getEventSource(),map=this._map,_37f;if(has("ie")<9){_36b.set((es=es.parentNode),{width:_37d+"px",height:_37e+"px",clip:"rect(0px "+_37d+"px "+_37e+"px 0px)"});}_369.set(es,"width",_37d);_369.set(es,"height",_37e);if(!this._surface.declaredClass){_368.forEach(es.childNodes,function(_380){_369.set(_380,"width",_37d);_369.set(_380,"height",_37e);});}if(map.loaded){if(!map.graphics.suspended){map.graphics._resized=true;}_368.forEach(map.graphicsLayerIds,function(_381){_37f=map.getLayer(_381);if(!_37f.suspended){_37f._resized=true;}});}},_cleanUp:function(){_368.forEach(this._connects,_367.disconnect,_367);this._map=this._surface=null;},_processEvent:function(evt){var map=this._map;evt.screenPoint=new _373(evt.pageX-map.position.x,evt.pageY-map.position.y);evt.mapPoint=map.toMap(evt.screenPoint);},_canvasDownHandler:function(evt){this._processEvent(evt);this._downPt=evt.screenPoint.x+","+evt.screenPoint.y;},_canvasUpHandler:function(evt){this._processEvent(evt);this._upPt=evt.screenPoint.x+","+evt.screenPoint.y;},_tolerance:15,_canvasClickHandler:function(evt){if(!this._downPt||!this._upPt||this._downPt!==this._upPt){return;}this._processEvent(evt);var map=this._map,_382=_368.map(map.graphicsLayerIds,function(id){return map.getLayer(id);});_382.push(map.graphics);_382.reverse();_382=_368.filter(_382,function(_383){return _383.loaded&&_383._mouseEvents&&!_383.suspended&&(!_36f.isDefined(_383.opacity)||_383.opacity>0);});var _384=evt.screenPoint,_385=this._tolerance,xmin=_384.x-_385,ymin=_384.y+_385,xmax=_384.x+_385,ymax=_384.y-_385,_386=new _374(xmin,ymax,xmax,ymin),_387=map.toMap(new _373(xmin,ymin)),_388=map.toMap(new _373(xmax,ymax)),_389=new _374(_387.x,_387.y,_388.x,_388.y,_387.spatialReference),_38a,_38b=has("esri-touch");delete _386.spatialReference;_368.some(_382,function(_38c){var _38d=_368.filter(_38c.graphics,function(_38e){var _38f=_38e.getDojoShape();if(!_38e.visible||!_38f){return false;}var bbox=_38f.getTransformedBoundingBox();if(bbox){var _390=new _374(bbox[0].x,bbox[0].y,bbox[2].x,bbox[2].y);delete _390.spatialReference;return _38b?_390.intersects(_386):_390.contains(_384);}else{return _368.some(_38f.children||[],function(_391){bbox=_391.getTransformedBoundingBox();var _392=new _374(bbox[0].x,bbox[0].y,bbox[2].x,bbox[2].y);delete _392.spatialReference;return _38b?_392.intersects(_386):_392.contains(_384);});}});_38d.reverse();if(_38d.length>0){var _393;_368.some(_38d,function(_394){if(_394.geometry&&_389.intersects(_394.geometry)){_393=_394;return true;}return false;});if(_393){_38a=_393;return true;}}return false;});if(_38a){var _395=_38a.getLayer();if(_395){evt.graphic=_38a;_395.onClick(evt);}}}});_377=_366(_371,{declaredClass:"esri.layers._GraphicsLayer",managedSuspension:true,_eventMap:{"graphic-add":["graphic"],"graphic-remove":["graphic"]},constructor:function(_396){if(_396&&(lang.isString(_396)||(lang.isObject(_396)&&_396.layerDefinition))){_396=arguments[1];}this._params=lang.mixin({displayOnPan:true,drawMode:true},_396||{});this.infoTemplate=_396&&_396.infoTemplate;this.graphics=[];this._draw=lang.hitch(this,this._draw);this._refresh=lang.hitch(this,this._refresh);this.registerConnectEvents();},setDrawMode:function(_397){this._params.drawMode=_397;},renderer:null,_setMap:function(map,_398){this.inherited(arguments);this._map=map;this._wrap=map.wrapAround180;this._srInfo=map.spatialReference._getInfo();if(!this._canvas){this._div=_398.createGroup();}else{_398=_36c.createSurface(_398.getEventSource(),map.width,map.height);_36b.set(_398.rawNode,"position","absolute");this._div=_398.createGroup();this._renderProto=this._div.constructor.prototype._render;this._div._render=lang.hitch(this,this._canvasRender);}this._div.getEventSource().id=this.id+"_layer";var op=this.opacity;if(_36f.isDefined(op)&&op<1){this.setOpacity(op,true);}return this._div;},_unsetMap:function(map,_399){_368.forEach(this.graphics,function(g){g._shape=null;});if(!this._canvas){this._div.clear();_399.remove(this._div);_36a.destroy(this._div.getEventSource());}else{_399=this._div.getParent();_399._parent={};_36a.destroy(_399.rawNode);_399.destroy();}this._map=this._div=null;clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments);},_onZoomStartHandler:function(){_370.hide(this._div.getEventSource());},_onExtentChangeHandler:function(_39a,_39b,_39c,lod){clearTimeout(this._wakeTimer);this._wakeTimer=null;if(_39c){var _39d=this._map.__visibleRect,_39e=this._div;this._refresh(true);_39e.setTransform(_36d.translate({x:_39d.x,y:_39d.y}));if(this._renderProto&&_39e.surface.pendingRender){this._dirty=true;}else{if(!this.suspended){_370.show(_39e.getEventSource());}}}else{if(this._resized){this._refresh(false);this._resized=false;}}if(this.graphics.length>0){this.onUpdate();}},_canvasRender:function(){var _39f=this._div;if(this._dirty){delete this._dirty;if(!this.suspended){_370.show(_39f.getEventSource());}}return this._renderProto.apply(_39f,arguments);},_refresh:function(_3a0){var gs=this.graphics,il=gs.length,i,_3a1=this._draw;for(i=0;i<il;i++){_3a1(gs[i],_3a0);}},refresh:function(){this._refresh(true);},redraw:function(){this._refresh(true);},_onPanHandler:function(_3a2,_3a3){this._panDx=_3a3.x;this._panDy=_3a3.y;var _3a4=this._map.__visibleRect;this._div.setTransform(_36d.translate({x:_3a4.x+_3a3.x,y:_3a4.y+_3a3.y}));},_onPanEndUpdateHandler:function(_3a5,_3a6){if(!this._params._child&&(_3a6.x!==this._panDx||_3a6.y!==this._panDy)){var _3a7=this._map.__visibleRect;this._div.setTransform(_36d.translate({x:_3a7.x,y:_3a7.y}));}this._refresh(false);if(this.graphics.length){this.onUpdate();}},_onPanStartHandler:function(){_370.hide(this._div.getEventSource());},_onPanEndHandler:function(){var _3a8=this._map.__visibleRect,_3a9=this._div;_3a9.setTransform(_36d.translate({x:_3a8.x,y:_3a8.y}));this._refresh(false);if(this._renderProto&&_3a9.surface.pendingRender){this._dirty=true;}else{_370.show(_3a9.getEventSource());}if(this.graphics.length){this.onUpdate();}},onSuspend:function(){this.inherited(arguments);_370.hide(this._div.getEventSource());clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();},onResume:function(evt){this.inherited(arguments);this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(lang.hitch(this,function(){if(!this.suspended){this._onExtentChangeHandler(null,null,true);}}),0);},_enableDrawConnectors:function(){var map=this._map,dc=_367.connect;this._disableDrawConnectors();if(this._params.displayOnPan){if(!this._params._child){this._onPanHandler_connect=dc(map,"onPan",this,"_onPanHandler");}this._onPanEndHandler_connect=dc(map,"onPanEnd",this,"_onPanEndUpdateHandler");}else{this._onPanStartHandler_connect=dc(map,"onPanStart",this,"_onPanStartHandler");this._onPanEndHandler_connect=dc(map,"onPanEnd",this,"_onPanEndHandler");}this._onZoomStartHandler_connect=dc(map,"onZoomStart",this,"_onZoomStartHandler");this._onExtentChangeHandler_connect=dc(map,"onExtentChange",this,"_onExtentChangeHandler");},_disableDrawConnectors:function(){var dd=_367.disconnect;dd(this._onExtentChangeHandler_connect);dd(this._onZoomStartHandler_connect);dd(this._onPanHandler_connect);dd(this._onPanStartHandler_connect);dd(this._onPanEndHandler_connect);this._onExtentChangeHandler_connect=this._onZoomStartHandler_connect=this._onPanHandler_connect=this._onPanStartHandler_connect=this._onPanEndHandler_connect=null;},_updateExtent:function(_3aa){var geom=_3aa.geometry;if(!geom){_3aa._extent=null;return;}var _3ab=(_3aa._extent=geom.getExtent());if(!_3ab){var x,y;if(geom.declaredClass==="esri.geometry.Point"){x=geom.x;y=geom.y;}else{if(geom.declaredClass==="esri.geometry.Multipoint"){x=geom.points[0][0];y=geom.points[0][1];}else{_3aa._extent=null;return;}}_3aa._extent=new _374(x,y,x,y,geom.spatialReference);}},_intersects:function(map,_3ac,_3ad){var _3ae=map.spatialReference,_3af=_3ac.spatialReference,_3b0=(_3ae&&_3af&&!_3ae.equals(_3af)&&_3ae._canProject(_3af)&&_3af.wkid===4326);if(this._wrap&&!_3ad){var _3b1=[],_3b2=map._getFrameWidth(),info=this._srInfo,_3b3,_3b4=map._clip?map._getAvailExtent():map.extent,_3b5,g,m,f,gl,ml,fl,_3b6,_3b7,_3b8=[],_3b9=_3ac._partwise;if(_3b0){_3b4=map.geographicExtent;info=_3af._getInfo();}_3b5=_3b4._getParts(info);if(_3b9&&_3b9.length){_3b3=[];for(g=0,gl=_3b9.length;g<gl;g++){_3b3=_3b3.concat(_3b9[g]._getParts(info));}}else{_3b3=_3ac._getParts(info);}for(g=0,gl=_3b3.length;g<gl;g++){_3b6=_3b3[g];for(m=0,ml=_3b5.length;m<ml;m++){_3b7=_3b5[m];if(_3b7.extent.intersects(_3b6.extent)){for(f=0,fl=_3b6.frameIds.length;f<fl;f++){_3b1.push((_3b7.frameIds[0]-_3b6.frameIds[f])*_3b2);}}}}for(g=0,gl=_3b1.length;g<gl;g++){f=_3b1[g];if(_368.indexOf(_3b1,f)===g){_3b8.push(f);}}return (_3b8.length)?_3b8:null;}else{return (_3b0?map.geographicExtent:map.extent).intersects(_3ac)?[0]:null;}},_draw:function(_3ba,_3bb){if(!this._params.drawMode||!this._map||this.suspended){return;}try{var _3bc=_3ba._extent,_3bd,_3be;if(_3ba.visible&&_3bc&&(_3bd=this._intersects(this._map,_3bc,_3ba.geometry._originOnly))&&(_3be=this._getSymbol(_3ba))){if(!_3ba.getDojoShape()||_3bb||_3bd){var type=_3ba.geometry.type;if(type==="point"){this._drawMarker(_3ba,_3be,_3bd);this._symbolizeMarker(_3ba,_3be);}else{if(type==="multipoint"){this._drawMarkers(_3ba,_3be,_3bd);this._symbolizeMarkers(_3ba,_3be);}else{this._drawShape(_3ba,_3bd);this._symbolizeShape(_3ba,_3be);}}}}else{if(_3ba.getDojoShape()){this._removeShape(_3ba);}}}catch(err){this._errorHandler(err,_3ba);}},_removeShape:function(_3bf){var _3c0=_3bf.getDojoShape();_3c0.removeShape();_3bf._shape=null;},_drawShape:function(_3c1,_3c2){var _3c3=_3c1.geometry,type=_3c3.type,map=this._map,me=map.extent,mw=map.width,mh=map.height,_3c4=map.__visibleRect,_3c5=[],i,il,rect,pt,xy,wh,_3c6=(type==="extent");if(type==="rect"||_3c6){pt={x:0,y:0,spatialReference:_3c3.spatialReference};pt.x=_3c6?_3c3.xmin:_3c3.x;pt.y=_3c6?_3c3.ymax:_3c3.y;xy=_376.toScreenPoint(me,mw,mh,pt);pt.x=_3c6?_3c3.xmax:(_3c3.x+_3c3.width);pt.y=_3c6?_3c3.ymin:(_3c3.y+_3c3.height);wh=_376.toScreenPoint(me,mw,mh,pt);rect={x:xy.x-_3c4.x+_3c2[0],y:xy.y-_3c4.y,width:Math.abs(wh.x-xy.x),height:Math.abs(wh.y-xy.y)};if(rect.width===0){rect.width=1;}if(rect.height===0){rect.height=1;}_3c1._shape=this._drawRect(this._div,_3c1.getDojoShape(),rect);}else{if(type==="polyline"||type==="polygon"){for(i=0,il=_3c2.length;i<il;i++){_3c5=_3c5.concat(_376._toScreenPath(me,mw,mh,_3c3,-_3c4.x+_3c2[i],-_3c4.y));}_3c1._shape=this._drawPath(this._div,_3c1.getDojoShape(),_3c5);if(this._rendererLimits){if(type==="polyline"){this._clipPolyline(_3c1._shape,_3c3);}else{this._clipPolygon(_3c1._shape,_3c3);}}}}},_drawRect:function(_3c7,_3c8,rect){return _3c8?_3c8.setShape(rect):_3c7.createRect(rect);},_drawImage:function(_3c9,_3ca,_3cb){return _3ca?_3ca.setShape(_3cb):_3c9.createImage(_3cb);},_drawCircle:function(_3cc,_3cd,_3ce){return _3cd?_3cd.setShape(_3ce):_3cc.createCircle(_3ce);},_drawPath:(function(){if(has("ie")<9){return function(_3cf,_3d0,path,_3d1){path=_3d1?path:path.join(" ");if(_3d0){return _3d0.setShape(path);}else{var p=_3cf.createObject(_3d1?_36c.Path:_36c.EsriPath,path);_3cf._overrideSize(p.getEventSource());return p;}};}else{return function(_3d2,_3d3,path,_3d4){path=_3d4?path:path.join(" ");return _3d3?_3d3.setShape(path):_3d2.createPath(path);};}}()),_drawText:function(_3d5,_3d6,text){return _3d6?_3d6.setShape(text):_3d5.createText(text);},_getSymbol:function(_3d7){return _3d7.symbol||(this.renderer?this.renderer.getSymbol(_3d7):null)||null;},_symbolizeShape:function(_3d8,_3d9){var _3da=_3d9._stroke,fill=_3d9._fill;if(_3da===null||fill===null){_3da=_3d9.getStroke();fill=_3d9.getFill();}_3d8.getDojoShape().setStroke(_3da).setFill(fill);_3d9._stroke=_3da;_3d9._fill=fill;},_smsToPath:(function(){if(has("ie")<9){return function(SMS,_3db,x,y,xMh,xPh,yMh,yPh,_3dc){switch(_3db){case SMS.STYLE_SQUARE:return ["M",xMh+","+yMh,"L",xPh+","+yMh,xPh+","+yPh,xMh+","+yPh,"X","E"];case SMS.STYLE_CROSS:return ["M",x+","+yMh,"L",x+","+yPh,"M",xMh+","+y,"L",xPh+","+y,"E"];case SMS.STYLE_X:return ["M",xMh+","+yMh,"L",xPh+","+yPh,"M",xMh+","+yPh,"L",xPh+","+yMh,"E"];case SMS.STYLE_DIAMOND:return ["M",x+","+yMh,"L",xPh+","+y,x+","+yPh,xMh+","+y,"X","E"];case SMS.STYLE_TARGET:return ["M",xMh+","+yMh,"L",xPh+","+yMh,xPh+","+yPh,xMh+","+yPh,xMh+","+yMh,"M",(xMh-_3dc)+","+y,"L",xMh+","+y,"M",x+","+(yMh-_3dc),"L",x+","+yMh,"M",(xPh+_3dc)+","+y,"L",xPh+","+y,"M",x+","+(yPh+_3dc),"L",x+","+yPh,"E"];}};}else{return function(SMS,_3dd,x,y,xMh,xPh,yMh,yPh,_3de){switch(_3dd){case SMS.STYLE_SQUARE:return ["M",xMh+","+yMh,xPh+","+yMh,xPh+","+yPh,xMh+","+yPh,"Z"];case SMS.STYLE_CROSS:return ["M",x+","+yMh,x+","+yPh,"M",xMh+","+y,xPh+","+y];case SMS.STYLE_X:return ["M",xMh+","+yMh,xPh+","+yPh,"M",xMh+","+yPh,xPh+","+yMh];case SMS.STYLE_DIAMOND:return ["M",x+","+yMh,xPh+","+y,x+","+yPh,xMh+","+y,"Z"];case SMS.STYLE_TARGET:return ["M",xMh+","+yMh,xPh+","+yMh,xPh+","+yPh,xMh+","+yPh,xMh+","+yMh,"M",(xMh-_3de)+","+y,xMh+","+y,"M",x+","+(yMh-_3de),x+","+yMh,"M",(xPh+_3de)+","+y,xPh+","+y,"M",x+","+(yPh+_3de),x+","+yPh];}};}}()),_pathStyles:{"square":1,"cross":1,"x":1,"diamond":1,"target":1},_typeMaps:{"picturemarkersymbol":"image","textsymbol":"text"},_isInvalidShape:function(_3df,_3e0){var _3e1=_3e0&&_3e0.shape&&_3e0.shape.type,_3e2=_3df&&_3df.type,_3e3=_3df&&_3df.style;if(!_3e3){if(_3e2){_3e3=this._typeMaps[_3e2];}}else{if(this._pathStyles[_3e3]){_3e3="path";}}if(_3e1&&_3e3&&(_3e1!==_3e3)){return true;}},_drawPoint:function(_3e4,_3e5,_3e6,_3e7,_3e8){var type=_3e6.type,map=this._map,_3e9=map.__visibleRect,_3ea=_376.toScreenPoint(map.extent,map.width,map.height,_3e5).offset(-_3e9.x+_3e8[0],-_3e9.y),px=_3ea.x,py=_3ea.y,_3eb,bbox,_3ec=0,_3ed=0;if(this._isInvalidShape(_3e6,_3e7)){_3e7.removeShape();_3e7=null;}if(type==="simplemarkersymbol"){var _3ee=_3e6.style,half=_3e6.size/2,_3ef=Math.round;switch(_3ee){case SMS.STYLE_SQUARE:case SMS.STYLE_CROSS:case SMS.STYLE_X:case SMS.STYLE_DIAMOND:_3eb=this._drawPath(_3e4,_3e7,this._smsToPath(SMS,_3ee,px,py,_3ef(px-half),_3ef(px+half),_3ef(py-half),_3ef(py+half)));break;case SMS.STYLE_TARGET:var _3f0=_3e6._targetWidth/2,_3f1=_3e6._targetHeight/2;_3eb=this._drawPath(_3e4,_3e7,this._smsToPath(SMS,_3ee,px,py,_3ef(px-_3f0),_3ef(px+_3f0),_3ef(py-_3f1),_3ef(py+_3f1),_3e6._spikeSize));break;case SMS.STYLE_PATH:_3eb=this._drawPath(_3e4,_3e7,_3e6.path,true);bbox=_3eb.getBoundingBox();_3ec=-(bbox.x+(bbox.width/2))+px;_3ed=-(bbox.y+(bbox.height/2))+py;break;default:_3eb=this._drawCircle(_3e4,_3e7,{cx:px,cy:py,r:half});}}else{if(type==="picturemarkersymbol"){var w=_3e6.width,h=_3e6.height;_3eb=this._drawImage(_3e4,_3e7,{x:px-(w/2),y:py-(h/2),width:w,height:h,src:_3e6.url});}else{if(type==="textsymbol"){_3eb=this._drawText(_3e4,_3e7,{type:"text",text:_3e6.text,x:px,y:py,align:_3e6.align,decoration:_3e6.decoration,rotated:_3e6.rotated,kerning:_3e6.kerning});}}}_3eb.setTransform(_36d.multiply(_36d.translate(_3e6.xoffset,-_3e6.yoffset),_36d.rotategAt(_3e6.angle,_3ea),_36d.translate(_3ec,_3ed)));_3eb._wrapOffsets=_3e8;return _3eb;},_symbolizePoint:function(_3f2,_3f3){var type=_3f3.type;if(type==="picturemarkersymbol"){return;}var _3f4=_3f3._stroke,fill=_3f3._fill;if(type==="textsymbol"){_3f2.setFont(_3f3.font).setFill(_3f3.getFill());}else{if(_3f4===null||fill===null){_3f4=_3f3.getStroke();fill=_3f3.getFill();}if(type==="simplemarkersymbol"){_3f2.setFill(fill).setStroke(_3f4);}_3f3._stroke=_3f4;_3f3._fill=fill;}},_drawMarker:function(_3f5,_3f6,_3f7){_3f5._shape=this._drawPoint(this._div,_3f5.geometry,_3f6,_3f5.getDojoShape(),_3f7);},_symbolizeMarker:function(_3f8,_3f9){this._symbolizePoint(_3f8.getDojoShape(),_3f9);},_drawMarkers:function(_3fa,_3fb,_3fc){var _3fd=_3fa.geometry,_3fe=_3fd.points,_3ff=_3fa.getDojoShape()||this._div.createGroup(),_400,i,il=_3fe.length,temp=[],idx=0,j,jl=_3fc?_3fc.length:0;if(_3ff.children[0]&&this._isInvalidShape(_3fb,_3ff.children[0])){_3ff.clear();}for(i=0;i<il;i++){_400=_3fe[i];for(j=0;j<jl;j++){temp[0]=_3fc[j];this._drawPoint(_3ff,{x:_400[0],y:_400[1],spatialReference:_3fd.spatialReference},_3fb,_3ff.children[idx++],temp);}}var _401=_3ff.children.length;if(il*_3fc.length<_401){for(i=_401-1;i>=il*_3fc.length;i--){_3ff.children[i].removeShape();}}_3fa._shape=_3ff;},_symbolizeMarkers:function(_402,_403){var _404=_402.getDojoShape(),_405=_404.children,i,il=_405.length;for(i=0;i<il;i++){this._symbolizePoint(_405[i],_403);}},_errorHandler:function(err,_406){var msg="Unable to draw graphic ";if(_406){err.message=msg+"(geometry:"+(_406.geometry?_406.geometry.declaredClass:null)+", symbol:"+(_406.symbol?_406.symbol.declaredClass:null)+"): "+err.message;}else{err.message=msg+"(null): "+err.message;}this.inherited(arguments);},_rendererLimits:(function(){var _407,_408,_409;if(has("ff")){_407=16125;_408=-32250;_409=32250;}else{if(has("ie")<9){_407=100000;_408=-100000;_409=100000;}else{if(has("chrome")&&has("chrome")<6){_407=8150;_408=-10000;_409=10000;}}}if(_407){var _40a,_40b;_40a=[-_407,-_407,_407,_407];_40b=[[[-_407,-_407],[_407,-_407]],[[_407,-_407],[_407,_407]],[[_407,_407],[-_407,_407]],[[-_407,_407],[-_407,-_407]]];return {clipLimit:_407,rangeMin:_408,rangeMax:_409,clipBBox:_40a,clipSegments:_40b};}}()),_clipPolyline:function(_40c,_40d){var _40e=this._getCorners(_40c,_40d);var _40f=_40e.tl,_410=_40e.br;var _411=this._rendererLimits;var _412=_411.rangeMin,_413=_411.rangeMax,_414=_411.clipBBox,_415=_411.clipSegments;var _416=this._isPointWithinRange,_417=this._isPointWithinBBox,_418=this._getClipperIntersection,_419=this._getPlaneIndex;if(!_416(_40f,_412,_413)||!_416(_410,_412,_413)){if(has("ie")<9){this._createSegments(_40c);}var _41a=[];_368.forEach(_40c.segments,function(_41b){var _41c=_41b.args,len=_41c.length,_41d=[],i;for(i=0;i<len;i+=2){var pt1=[_41c[i],_41c[i+1]];var pt2=[_41c[i+2],_41c[i+3]];var _41e=_417(pt1,_414);var _41f=_417(pt2,_414);if(_41e^_41f){var _420=_418([pt1,pt2],_415);if(_420){if(!_41e){_41d.push(_420[1],pt2);}else{if(i){_41d.push(_420[1]);}else{_41d.push(pt1,_420[1]);}_41a.push(_41d);_41d=[];}}}else{if(_41e){if(i){_41d.push(pt2);}else{_41d.push(pt1,pt2);}}else{var _421=_419(pt1,_414);var _422=_419(pt2,_414);if(_421===-1||_422===-1||_421===_422){continue;}var _423=_418([pt1,pt2],_415,true);if(_423.length>0){if(!_423[_421]){_421=_423[_421[0]]?_421[0]:_421[1];}if(!_423[_422]){_422=_423[_422[0]]?_422[0]:_422[1];}var _424=_423[_421],_425=_423[_422];if(_424){_41d.push(_424);}if(_425){_41d.push(_425);_41a.push(_41d);_41d=[];}}}}}_41a.push(_41d);});_40c.setShape(this._getPathStringFromPaths(_41a));}},_clipPolygon:function(_426,_427){var _428=this._getCorners(_426,_427);var _429=_428.tl,_42a=_428.br;var _42b=this._rendererLimits;var _42c=_42b.clipLimit,_42d=_42b.rangeMin,_42e=_42b.rangeMax,_42f=_42b.clipBBox,_430=_42b.clipSegments;var _431=this._isPointWithinRange,_432=this._isPointWithinBBox,_433=this._getClipperIntersection,_434=this._getPlaneIndex,_435=_375._pointLineDistance;if(!_431(_429,_42d,_42e)||!_431(_42a,_42d,_42e)){if(has("ie")<9){this._createSegments(_426);}var _436=_368.map(_426.segments,function(_437){var _438=_437.args,len=_438.length,_439=[],_43a=[],i;for(i=0;i<len;i+=2){var pt1=[_438[i],_438[i+1]];var pt2=[_438[i+2],_438[i+3]];if(i===(len-2)){_439.push(pt1);break;}var _43b=_432(pt1,_42f);var _43c=_432(pt2,_42f);_439.push(pt1);if(_43b^_43c){var _43d=_433([pt1,pt2],_430);if(_43d){var _43e=_43d[1];_43e[_43b?"inOut":"outIn"]=true;_439.push(_43e);_43a.push([_43b?"INOUT":"OUTIN",_439.length-1,_43d[0]]);}}else{if(!_43b){var _43f=_434(pt1,_42f);var _440=_434(pt2,_42f);if(_43f===-1||_440===-1||_43f===_440){continue;}var _43d=_433([pt1,pt2],_430,true);if(_43d.length>0){if(!_43d[_43f]){_43f=_43d[_43f[0]]?_43f[0]:_43f[1];}if(!_43d[_440]){_440=_43d[_440[0]]?_440[0]:_440[1];}var _441=_43d[_43f],_442=_43d[_440];if(_441){_441.outIn=true;_439.push(_441);_43a.push(["OUTIN",_439.length-1,_43f]);}if(_442){_442.inOut=true;_439.push(_442);_43a.push(["INOUT",_439.length-1,_440]);}}else{if(lang.isArray(_43f)&&lang.isArray(_440)){var _443=_43f.concat(_440);_443.sort();if(_443.join("")==="0123"){var _444=[];if((_43f[0]+_43f[1])===3){_444.push([_42c,-_42c],[-_42c,_42c]);}else{_444.push([-_42c,-_42c],[_42c,_42c]);}var d1=_435(_444[0],[pt1,pt2]);var d2=_435(_444[1],[pt1,pt2]);_439.push((d1<d2)?_444[0]:_444[1]);}}}}}}var xmin=_42f[0],ymin=_42f[1],xmax=_42f[2],ymax=_42f[3];_368.forEach(_439,function(_445){if(_445[0]<xmin){if(_445[1]>=ymin&&_445[1]<=ymax){_445[0]=xmin;}else{_445[0]=xmin;_445[1]=_445[1]<ymin?ymin:ymax;}}});_368.forEach(_439,function(_446){if(_446[1]<ymin){if(_446[0]>=xmin&&_446[0]<=xmax){_446[1]=ymin;}else{_446[1]=ymin;_446[0]=_446[0]<xmin?xmin:xmax;}}});_368.forEach(_439,function(_447){if(_447[0]>xmax){if(_447[1]>=ymin&&_447[1]<=ymax){_447[0]=xmax;}else{_447[0]=xmax;_447[1]=_447[1]<ymin?ymin:ymax;}}});_368.forEach(_439,function(_448){if(_448[1]>ymax){if(_448[0]>=xmin&&_448[0]<=xmax){_448[1]=ymax;}else{_448[1]=ymax;_448[0]=_448[0]<xmin?xmin:xmax;}}});var k=0,len=_43a.length;if(len>0){do{var curr=_43a[k];var next=_43a[(k+1)%len];if(curr[2]===next[2]&&curr[0]==="INOUT"&&next[0]==="OUTIN"){var _449=curr[1],end=next[1],u;if(_449<end){for(u=_449+1;u<end;u++){_439[u][2]=true;}}else{if(_449>end){for(u=_449+1;u<_439.length;u++){_439[u][2]=true;}for(u=0;u<end;u++){_439[u][2]=true;}}}}k=(k+1)%len;}while(k!==0);}var _44a=_439[0],last=_439[_439.length-1];if(_44a[2]){last[2]=true;_368.some(_43a,function(data){if(data[1]===1){_439.splice(_439.length-1,0,lang.clone(_439[1]));return true;}return false;});}_439=_368.filter(_439,function(_44b){return _44b[2]?false:true;});for(k=0;k<_439.length-1;k++){var now=_439[k];var next=_439[k+1];if(!next||(now[0]!==next[0])||(now[1]!==next[1])){continue;}if(next.outIn){now.outIn=true;}else{if(next.inOut){now.inOut=true;}}_439.splice(k+1,1);}var abs=Math.abs,_44c=[];for(k=0;k<_439.length-1;k++){var curr=_439[k],cx=curr[0],cy=curr[1];var x1=(abs(cx)===_42c);var y1=(abs(cy)===_42c);var next=_439[k+1],nx=next[0],ny=next[1];var x2=(abs(nx)===_42c);var y2=(abs(ny)===_42c);if(x1&&y2){_44c.push([k+1,[cx,ny]]);}else{if(y1&&x2){_44c.push([k+1,[nx,cy]]);}}}for(k=_44c.length-1;k>=0;k--){var data=_44c[k];var prev=_439[data[0]-1];var now=_439[data[0]];if(prev.outIn||prev.inOut||now.outIn||now.inOut){continue;}_439.splice(data[0],0,data[1]);}var _44a=_439[0],last=_439[_439.length-1];if(_44a[0]!==last[0]||_44a[1]!==last[1]){_439.push(_44a);}return _439;});_426.setShape(this._getPathStringFromPaths(_436));}},_getCorners:function(_44d,_44e){if(has("ie")<9){var map=this._map,_44f=_44e.getExtent(),_450=_44f.spatialReference,_451=map.toScreen(new _372(_44f.xmin,_44f.ymax,_450)),_452=map.toScreen(new _372(_44f.xmax,_44f.ymin,_450));return {tl:_451,br:_452};}else{var _453=_44d.getTransformedBoundingBox();return {tl:_453[0],br:_453[2]};}},_createSegments:function(_454){_454.shape.path=_454.vmlPath;_454.segmented=false;_454._confirmSegmented();var _455=_454.segments;if(_455.length>1){_454.segments=_368.filter(_455,function(_456,idx,arr){var next=arr[idx+1];if(_456.action==="M"&&next&&next.action==="L"){_456.args=_456.args.concat(next.args);return true;}return false;});}},_getPathStringFromPaths:function(_457){if(has("ie")<9){_457=_368.map(_457,function(path){var _458=_368.map(path,function(_459,idx){return (idx===1?"l ":"")+_459.join(",");});return "m "+_458.join(" ");});_457.push("e");}else{_457=_368.map(_457,function(path){var _45a=_368.map(path,function(_45b){return _45b.join(",");});return "M "+_45a.join(" ");});}return _457.join(" ");},_isPointWithinBBox:function(_45c,bbox){var left=bbox[0],top=bbox[1];var _45d=bbox[2],_45e=bbox[3];var x=_45c[0],y=_45c[1];if(x>left&&x<_45d&&y>top&&y<_45e){return true;}else{return false;}},_isPointWithinRange:function(_45f,_460,_461){var x=_45f.x,y=_45f.y;if(x<_460||y<_460||x>_461||y>_461){return false;}else{return true;}},_getClipperIntersection:function(line,_462,_463){var i,_464=_375._getLineIntersection2,_465=Math.round,data={length:0};for(i=0;i<4;i++){var _466=_464(line,_462[i]);if(_466){_466[0]=_465(_466[0]);_466[1]=_465(_466[1]);if(!_463){return [i,_466];}else{data[i]=_466;data.length++;}}}return _463?data:null;},_getPlaneIndex:function(_467,_468){var px=_467[0],py=_467[1],xmin=_468[0],ymin=_468[1],xmax=_468[2],ymax=_468[3];if(px<=xmin){if((py>=ymin)&&(py<=ymax)){return 3;}else{return (py<ymin)?[0,3]:[2,3];}}if(py<=ymin){if((px>=xmin)&&(px<=xmax)){return 0;}else{return (px<xmin)?[3,0]:[1,0];}}if(px>=xmax){if((py>=ymin)&&(py<=ymax)){return 1;}else{return (py<ymin)?[0,1]:[2,1];}}if(py>=ymax){if((px>=xmin)&&(px<=xmax)){return 2;}else{return (px<xmin)?[3,2]:[1,2];}}return -1;},onGraphicAdd:function(){},onGraphicRemove:function(){},onGraphicsClear:function(){},onOpacityChange:function(){},setInfoTemplate:function(_469){this.infoTemplate=_469;},add:function(_46a){var _46b=arguments[1];if(_46a._graphicsLayer===this){return _46a;}if(!_46b){this.graphics.push(_46a);}_46a._graphicsLayer=this;this._updateExtent(_46a);this._draw(_46a);if(!_46b){this.onGraphicAdd(_46a);}return _46a;},remove:function(_46c){if(!arguments[1]){var _46d=this.graphics,i;if((i=_368.indexOf(_46d,_46c))===-1){return null;}_46c=this.graphics.splice(i,1)[0];}if(_46c.getDojoShape()){this._removeShape(_46c);}_46c._shape=_46c._graphicsLayer=null;this.onGraphicRemove(_46c);return _46c;},clear:function(){var _46e=arguments[1],g=this.graphics;while(g.length>0){this.remove(g[0]);}if(!_46e){this.onGraphicsClear();}},setOpacity:function(op,_46f){if(_46f||this.opacity!=op){var div=this._div;if(div){if(has("ie")<9){_368.forEach(this.graphics,function(_470){var _471=_470._shape;var node=_471&&_471.getNode();if(node){var _472=_471.strokeStyle,_473=node.stroke;if(_472&&_473){_473.opacity=_472.color.a*op;}var _474=_471.fillStyle,fill=node.fill;if(_474&&fill){if(fill.type==="tile"){_36b.set(node,"opacity",op);}else{fill.opacity=_474.a*op;}}}});div._esriIeOpacity=op;}else{if(this._canvas){_36b.set(div.getEventSource(),"opacity",op);}else{div.getEventSource().setAttribute("opacity",op);}}}this.opacity=op;if(!_46f){this.onOpacityChange(op);}}},setRenderer:function(ren){this.renderer=ren;}});var _475=_366(_377,{declaredClass:"esri.layers.GraphicsLayer",constructor:function(){this.enableMouseEvents=lang.hitch(this,this.enableMouseEvents);this.disableMouseEvents=lang.hitch(this,this.disableMouseEvents);this._processEvent=lang.hitch(this,this._processEvent);this._initLayer();},_initLayer:function(){this.loaded=true;this.onLoad(this);},_setMap:function(){var d=this.inherited("_setMap",arguments);this.enableMouseEvents();return d;},_unsetMap:function(){this.disableMouseEvents();this.inherited("_unsetMap",arguments);},_processEvent:function(evt){var _476=this._map,g=this.graphics,gl=g.length;evt.screenPoint=new _373(evt.pageX-_476.position.x,evt.pageY-_476.position.y);evt.mapPoint=_476.toMap(evt.screenPoint);var i,es,gr,ds,_477=evt.target,_478=_477.parentNode;for(i=0;i<gl;i++){gr=g[i];ds=gr.getDojoShape();if(ds){es=ds.getEventSource();if(es===_477||es===_478){evt.graphic=gr;return evt;}}}},_onMouseOverHandler:function(evt){if(this._processEvent(evt)){this.onMouseOver(evt);}},_onMouseMoveHandler:function(evt){if(this._processEvent(evt)){this.onMouseMove(evt);}},_onMouseDragHandler:function(evt){if(this._processEvent(evt)){this.onMouseDrag(evt);}},_onMouseOutHandler:function(evt){if(this._processEvent(evt)){this.onMouseOut(evt);}},_onMouseDownHandler:function(evt){this._downGr=this._downPt=null;if(this._processEvent(evt)){_367.disconnect(this._onmousemove_connect);_367.disconnect(this._onmousedrag_connect);this._onmousedrag_connect=_367.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseDragHandler");this._downGr=evt.graphic;this._downPt=evt.screenPoint.x+","+evt.screenPoint.y;this.onMouseDown(evt);}},_onMouseUpHandler:function(evt){this._upGr=this._upPt=null;if(this._processEvent(evt)){_367.disconnect(this._onmousedrag_connect);_367.disconnect(this._onmousemove_connect);this._onmousemove_connect=_367.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseMoveHandler");this._upGr=evt.graphic;this._upPt=evt.screenPoint.x+","+evt.screenPoint.y;this.onMouseUp(evt);}},_onClickHandler:function(evt){if(this._processEvent(evt)){var _479=this._downGr,upGr=this._upGr;if(_479&&upGr&&_479===upGr&&this._downPt===this._upPt){if(has("ie")<9){_36e._ieGraphic=evt.graphic;}this.onClick(evt);}}},_onDblClickHandler:function(evt){if(this._processEvent(evt)){this.onDblClick(evt);}},onMouseOver:function(){},onMouseMove:function(){},onMouseDrag:function(){},onMouseOut:function(){},onMouseDown:function(){},onMouseUp:function(){},onClick:function(){},onDblClick:function(){},enableMouseEvents:function(){if(this._mouseEvents){return;}var dc=_367.connect,gc=this._div.getEventSource();if(_36c.renderer.toLowerCase().indexOf("canvas")===-1){this._onmouseover_connect=dc(gc,"onmouseover",this,"_onMouseOverHandler");this._onmousemove_connect=dc(gc,"onmousemove",this,"_onMouseMoveHandler");this._onmouseout_connect=dc(gc,"onmouseout",this,"_onMouseOutHandler");this._onmousedown_connect=dc(gc,"onmousedown",this,"_onMouseDownHandler");this._onmouseup_connect=dc(gc,"onmouseup",this,"_onMouseUpHandler");this._onclick_connect=dc(gc,"onclick",this,"_onClickHandler");this._ondblclick_connect=dc(gc,"ondblclick",this,"_onDblClickHandler");}this._mouseEvents=true;},disableMouseEvents:function(){if(!this._mouseEvents){return;}var ddc=_367.disconnect;ddc(this._onmouseover_connect);ddc(this._onmousemove_connect);ddc(this._onmousedrag_connect);ddc(this._onmouseout_connect);ddc(this._onmousedown_connect);ddc(this._onmouseup_connect);ddc(this._onclick_connect);ddc(this._ondblclick_connect);this._mouseEvents=false;}});_475._GraphicsContainer=_378;_475._GraphicsLayer=_377;if(has("extend-esri")){lang.setObject("layers.GraphicsLayer",_475,_36e);lang.setObject("layers._GraphicsContainer",_378,_36e);lang.setObject("layers._GraphicsLayer",_377,_36e);}return _475;});},"esri/tasks/query":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/geometry/jsonUtils","esri/tasks/SpatialRelationship","dojo/has!extend-esri?esri/tasks/QueryTask","dojo/has!extend-esri?esri/tasks/RelationshipQuery","dojo/has!extend-esri?esri/tasks/StatisticDefinition"],function(_47a,lang,_47b,_47c,has,_47d,_47e,_47f){var _480=_47a(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=_480.SPATIAL_REL_INTERSECTS;},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:false,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,toJson:function(_481){var json={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},g=_481&&_481["geometry"]||this.geometry,ids=this.objectIds,_482=this.outFields,_483=this.outSpatialReference,_484=this.groupByFieldsForStatistics,_485=this.orderByFields,_486=this.outStatistics;if(g){json.geometry=g;json.geometryType=_47e.getJsonType(g);json.inSR=g.spatialReference.wkid||_47c.toJson(g.spatialReference.toJson());}if(ids){json.objectIds=ids.join(",");}if(_482){json.outFields=_482.join(",");}if(_484){json.groupByFieldsForStatistics=_484.join(",");}if(_485){json.orderByFields=_485.join(",");}if(_486){var _487=[];_47b.forEach(_486,function(item,idx){_487.push(item.toJson());});json.outStatistics=_47c.toJson(_487);}if(_483!==null){json.outSR=_483.wkid||_47c.toJson(_483.toJson());}else{if(g){json.outSR=g.spatialReference.wkid||_47c.toJson(g.spatialReference.toJson());}}var _488=this.timeExtent;json.time=_488?_488.toJson().join(","):null;var _489=this.relationParam;if(_489&&this.spatialRelationship===_480.SPATIAL_REL_RELATION){json.relationParam=_489;}json.pixelSize=this.pixelSize?_47c.toJson(this.pixelSize.toJson()):null;json._ts=this._ts;return json;}});lang.mixin(_480,_47f);if(has("extend-esri")){lang.setObject("tasks.Query",_480,_47d);}return _480;});},"esri/layers/ArcGISDynamicMapServiceLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/sniff","dojo/io-query","esri/kernel","esri/config","esri/request","esri/urlUtils","esri/layerUtils","esri/geometry/scaleUtils","esri/layers/DynamicMapServiceLayer","esri/layers/ArcGISMapServiceLayer","esri/layers/TimeInfo","esri/layers/LayerTimeOptions","esri/layers/ImageParameters","esri/layers/DynamicLayerInfo","esri/layers/LayerMapSource"],function(_48a,lang,_48b,_48c,has,ioq,_48d,_48e,_48f,_490,_491,_492,_493,_494,_495,_496,_497,_498,_499){var _49a=_48a([_493,_494],{declaredClass:"esri.layers.ArcGISDynamicMapServiceLayer",_eventMap:{"gdb-version-change":true},constructor:function(url,_49b){var _49c=_49b&&_49b.imageParameters,dh=lang.hitch;if(_49c){var ldef=_49c.layerDefinitions;if(ldef){this.setLayerDefinitions(ldef);}if(_49c.layerOption===_497.LAYER_OPTION_SHOW){this.visibleLayers=[].concat(_49c.layerIds);}}this._setIsPNG32=dh(this,this._setIsPNG32);this.dpi=(_49c&&_49c.dpi)||96;this.imageFormat=(_49c&&_49c.format)||"png8";this.imageTransparency=(_49c&&_49c.transparent===false)?false:true;this._setIsPNG32();this.gdbVersion=_49b&&_49b.gdbVersion;this._params.gdbVersion=this.gdbVersion;lang.mixin(this._params,this._url.query,{dpi:this.dpi,transparent:this.imageTransparency,format:this.imageFormat},_49c?_49c.toJson():{});this.getImageUrl=dh(this,this.getImageUrl);this._initLayer=dh(this,this._initLayer);this._load=dh(this,this._load);this.useMapImage=_49b?_49b.useMapImage:false;if(this.useMapImage){this._imageExportHandler=dh(this,this._imageExportHandler);}this._loadCallback=_49b&&_49b.loadCallback;var _49d=_49b&&_49b.resourceInfo;if(_49d){this._initLayer(_49d);}else{if(arguments[2]===undefined||arguments[2]===false){this._load();}}this.registerConnectEvents();},disableClientCaching:false,layerDefinitions:null,_initLayer:function(_49e,io){this.inherited(arguments);if(_49e.timeInfo){this.timeInfo=new _495(_49e.timeInfo);}this.loaded=true;this.onLoad(this);var _49f=this._loadCallback;if(_49f){delete this._loadCallback;_49f(this);}},getImageUrl:function(_4a0,_4a1,_4a2,_4a3){var path=this._url.path+"/export?",_4a4=this._params,sr=_4a0.spatialReference.wkid||_48c.toJson(_4a0.spatialReference.toJson()),_4a5=this._errorHandler;delete _4a4._ts;lang.mixin(_4a4,{bbox:_4a0.xmin+","+_4a0.ymin+","+_4a0.xmax+","+_4a0.ymax,bboxSR:sr,imageSR:sr,size:_4a1+","+_4a2},this.disableClientCaching?{_ts:new Date().getTime()}:{});if(_4a4.layerDefs){var defs=_4a4.layerDefs;delete _4a4.layerDefs;lang.mixin(_4a4,{layerDefs:defs});}var _4a6=(_4a4.token=this._getToken()),_4a7=_490.addProxy(path+ioq.objectToQuery(lang.mixin({},_4a4,{f:"image"})));if((_4a7.length>_48e.defaults.io.postLength)||this.useMapImage){this._jsonRequest=_48f({url:path,content:lang.mixin(_4a4,{f:"json"}),callbackParamName:"callback",load:function(_4a8,io){var href=_4a8.href;if(_4a6){href+=(href.indexOf("?")===-1?("?token="+_4a6):("&token="+_4a6));}_4a3(_490.addProxy(href));},error:_4a5});}else{_4a3(_4a7);}},_setIsPNG32:function(){var _4a9=this.imageFormat.toLowerCase(),isIE=has("ie");this.isPNG32=isIE&&isIE===6&&(_4a9==="png32"||_4a9==="png24")&&this.imageTransparency;},_setTime:function(_4aa){var _4ab=this.timeInfo,time=(this._params.time=_4aa?_4aa.toJson().join(","):null);if(this.version<10.02&&_4ab){if(!time){var _4ac=this.layerInfos;if(_4ac){var _4ad=this.layerTimeOptions,_4ae=_4ad?_4ad.slice(0):[],ids=[];_48b.forEach(_4ac,function(info){if(!info.subLayerIds){ids.push(info.id);}});if(ids.length){_48b.forEach(ids,function(id){if(!_4ae[id]){var opt=new _496();opt.useTime=false;_4ae[id]=opt;}});this._params.layerTimeOptions=_491._serializeTimeOptions(_4ae,ids);}}}else{this._params.layerTimeOptions=_491._serializeTimeOptions(this.layerTimeOptions);}}if(this.version>=10.02&&_4ab){if(!time&&!_4ab.hasLiveData){this._params.time="null,null";}}},setDPI:function(dpi,_4af){this.dpi=(this._params.dpi=dpi);if(!_4af){this.refresh(true);}},setImageFormat:function(_4b0,_4b1){this.imageFormat=(this._params.format=_4b0);this._setIsPNG32();if(!_4b1){this.refresh(true);}},setImageTransparency:function(_4b2,_4b3){this.imageTransparency=(this._params.transparent=_4b2);this._setIsPNG32();if(!_4b3){this.refresh(true);}},setVisibleLayers:function(_4b4,_4b5){this.visibleLayers=_4b4;this._params.layers=_497.LAYER_OPTION_SHOW+":"+_4b4.join(",");this._updateDynamicLayers();if(!_4b5){this.refresh(true);}},setDefaultVisibleLayers:function(_4b6){this.visibleLayers=this._defaultVisibleLayers;this._params.layers=null;this._updateDynamicLayers();if(!_4b6){this.refresh(true);}},setLayerDefinitions:function(_4b7,_4b8){this.layerDefinitions=_4b7;this._params.layerDefs=_491._serializeLayerDefinitions(_4b7);this._updateDynamicLayers();if(!_4b8){this.refresh(true);}},setDefaultLayerDefinitions:function(_4b9){this.layerDefinitions=this._params.layerDefs=null;this._updateDynamicLayers();if(!_4b9){this.refresh(true);}},setDisableClientCaching:function(_4ba){this.disableClientCaching=_4ba;},setLayerTimeOptions:function(_4bb,_4bc){this.layerTimeOptions=_4bb;this._params.layerTimeOptions=_491._serializeTimeOptions(_4bb);this._updateDynamicLayers();if(!_4bc){this.refresh(true);}},refresh:function(_4bd){if(_4bd){this.inherited(arguments);}else{var dc=this.disableClientCaching;this.disableClientCaching=true;this.inherited(arguments);this.disableClientCaching=dc;}},setLayerDrawingOptions:function(_4be,_4bf){this.layerDrawingOptions=_4be;this._updateDynamicLayers();if(!_4bf){this.refresh(true);}},setDynamicLayerInfos:function(_4c0,_4c1){if(_4c0&&_4c0.length>0){this.dynamicLayerInfos=_4c0;this.visibleLayers=_491._getDefaultVisibleLayers(_4c0);}else{this.dynamicLayerInfos=this.layerDrawingOptions=null;}this._updateDynamicLayers();if(!_4c1){this.refresh(true);}},createDynamicLayerInfosFromLayerInfos:function(){var _4c2=[],_4c3;_48b.forEach(this.layerInfos,function(_4c4,idx){_4c3=new _498(_4c4.toJson());_4c3.source=new _499({mapLayerId:_4c4.id});_4c2.push(_4c3);});return _4c2;},_onDynamicLayersChange:function(){},_updateDynamicLayers:function(){if((this.dynamicLayerInfos&&this.dynamicLayerInfos.length>0)||(this.layerDrawingOptions&&this.layerDrawingOptions.length>0)){if(!this.dynamicLayerInfos||this.dynamicLayerInfos.length===0){this.dynamicLayerInfos=this.createDynamicLayerInfosFromLayerInfos();}var _4c5,_4c6=this.dynamicLayerInfos,_4c7=[],_4c8=this._map&&_492.getScale(this._map),_4c9=this.visibleLayers,_4ca=_4c8?_491._getLayersForScale(_4c8,_4c6):_4c9;_48b.forEach(_4c6,function(info){if(!info.subLayerIds){var _4cb,_4cc=info.id;if(_48b.indexOf(_4c9,_4cc)!==-1&&_48b.indexOf(_4ca,_4cc)!==-1){_4cb={id:_4cc};_4cb.source=info.source&&info.source.toJson();var _4cd;if(this.layerDefinitions&&this.layerDefinitions[_4cc]){_4cd=this.layerDefinitions[_4cc];}if(_4cd){_4cb.definitionExpression=_4cd;}var _4ce;if(this.layerDrawingOptions&&this.layerDrawingOptions[_4cc]){_4ce=this.layerDrawingOptions[_4cc];}if(_4ce){_4cb.drawingInfo=_4ce.toJson();}var _4cf;if(this.layerTimeOptions&&this.layerTimeOptions[_4cc]){_4cf=this.layerTimeOptions[_4cc];}if(_4cf){_4cb.layerTimeOptions=_4cf.toJson();}_4cb.minScale=info.minScale||0;_4cb.maxScale=info.maxScale||0;_4c7.push(_4cb);}}},this);_4c5=_48c.toJson(_4c7);if(!this._params.dynamicLayers||(this._params.dynamicLayers.length!==_4c5.length||this._params.dynamicLayers!==_4c5)){this._params.dynamicLayers=_4c5;this._onDynamicLayersChange(this._params.dynamicLayers);}}else{if(this._params.dynamicLayers){this._params.dynamicLayers=null;this._onDynamicLayersChange(null);}else{this._params.dynamicLayers=null;}}},_onExtentChangeHandler:function(_4d0,_4d1,_4d2){if(_4d2){this._updateDynamicLayers();}this.inherited(arguments);},_setMap:function(map,_4d3,_4d4){this._map=map;this._updateDynamicLayers();return this.inherited(arguments);},onGDBVersionChange:function(){},setGDBVersion:function(_4d5,_4d6){this.gdbVersion=_4d5;this._params.gdbVersion=_4d5;this.onGDBVersionChange();if(!_4d6){this.refresh(true);}},exportMapImage:function(_4d7,_4d8){var m=_48e.defaults.map,p=lang.mixin({size:m.width+","+m.height},this._params,_4d7?_4d7.toJson(this.normalization):{},{f:"json"});delete p._ts;if(p.layerDefs){var defs=p.layerDefs;delete p.layerDefs;lang.mixin(p,{layerDefs:defs});}this._exportMapImage(this._url.path+"/export",p,_4d8);}});if(has("extend-esri")){lang.setObject("layers.ArcGISDynamicMapServiceLayer",_49a,_48d);}return _49a;});},"dojo/parser":function(){define(["require","./_base/kernel","./_base/lang","./_base/array","./_base/config","./_base/html","./_base/window","./_base/url","./_base/json","./aspect","./date/stamp","./Deferred","./has","./query","./on","./ready"],function(_4d9,dojo,_4da,_4db,_4dc,_4dd,_4de,_4df,_4e0,_4e1,_4e2,_4e3,has,_4e4,don,_4e5){new Date("X");var _4e6=0;_4e1.after(_4da,"extend",function(){_4e6++;},true);function _4e7(ctor){var map=ctor._nameCaseMap,_4e8=ctor.prototype;if(!map||map._extendCnt<_4e6){map=ctor._nameCaseMap={};for(var name in _4e8){if(name.charAt(0)==="_"){continue;}map[name.toLowerCase()]=name;}map._extendCnt=_4e6;}return map;};var _4e9={};function _4ea(_4eb){var ts=_4eb.join();if(!_4e9[ts]){var _4ec=[];for(var i=0,l=_4eb.length;i<l;i++){var t=_4eb[i];_4ec[_4ec.length]=(_4e9[t]=_4e9[t]||(_4da.getObject(t)||(~t.indexOf("/")&&_4d9(t))));}var ctor=_4ec.shift();_4e9[ts]=_4ec.length?(ctor.createSubclass?ctor.createSubclass(_4ec):ctor.extend.apply(ctor,_4ec)):ctor;}return _4e9[ts];};var _4ed={_clearCache:function(){_4e6++;_4e9={};},_functionFromScript:function(_4ee,_4ef){var _4f0="",_4f1="",_4f2=(_4ee.getAttribute(_4ef+"args")||_4ee.getAttribute("args")),_4f3=_4ee.getAttribute("with");var _4f4=(_4f2||"").split(/\s*,\s*/);if(_4f3&&_4f3.length){_4db.forEach(_4f3.split(/\s*,\s*/),function(part){_4f0+="with("+part+"){";_4f1+="}";});}return new Function(_4f4,_4f0+_4ee.innerHTML+_4f1);},instantiate:function(_4f5,_4f6,_4f7){_4f6=_4f6||{};_4f7=_4f7||{};var _4f8=(_4f7.scope||dojo._scopeName)+"Type",_4f9="data-"+(_4f7.scope||dojo._scopeName)+"-",_4fa=_4f9+"type",_4fb=_4f9+"mixins";var list=[];_4db.forEach(_4f5,function(node){var type=_4f8 in _4f6?_4f6[_4f8]:node.getAttribute(_4fa)||node.getAttribute(_4f8);if(type){var _4fc=node.getAttribute(_4fb),_4fd=_4fc?[type].concat(_4fc.split(/\s*,\s*/)):[type];list.push({node:node,types:_4fd});}});return this._instantiate(list,_4f6,_4f7);},_instantiate:function(_4fe,_4ff,_500){var _501=_4db.map(_4fe,function(obj){var ctor=obj.ctor||_4ea(obj.types);if(!ctor){throw new Error("Unable to resolve constructor for: '"+obj.types.join()+"'");}return this.construct(ctor,obj.node,_4ff,_500,obj.scripts,obj.inherited);},this);if(!_4ff._started&&!_500.noStart){_4db.forEach(_501,function(_502){if(typeof _502.startup==="function"&&!_502._started){_502.startup();}});}return _501;},construct:function(ctor,node,_503,_504,_505,_506){var _507=ctor&&ctor.prototype;_504=_504||{};var _508={};if(_504.defaults){_4da.mixin(_508,_504.defaults);}if(_506){_4da.mixin(_508,_506);}var _509;if(has("dom-attributes-explicit")){_509=node.attributes;}else{if(has("dom-attributes-specified-flag")){_509=_4db.filter(node.attributes,function(a){return a.specified;});}else{var _50a=/^input$|^img$/i.test(node.nodeName)?node:node.cloneNode(false),_50b=_50a.outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,"");_509=_4db.map(_50b.split(/\s+/),function(name){var _50c=name.toLowerCase();return {name:name,value:(node.nodeName=="LI"&&name=="value")||_50c=="enctype"?node.getAttribute(_50c):node.getAttributeNode(_50c).value};});}}var _50d=_504.scope||dojo._scopeName,_50e="data-"+_50d+"-",hash={};if(_50d!=="dojo"){hash[_50e+"props"]="data-dojo-props";hash[_50e+"type"]="data-dojo-type";hash[_50e+"mixins"]="data-dojo-mixins";hash[_50d+"type"]="dojoType";hash[_50e+"id"]="data-dojo-id";}var i=0,item,_50f=[],_510,_511;while(item=_509[i++]){var name=item.name,_512=name.toLowerCase(),_513=item.value;switch(hash[_512]||_512){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":_511=_513;break;case "data-dojo-id":case "jsid":_510=_513;break;case "data-dojo-attach-point":case "dojoattachpoint":_508.dojoAttachPoint=_513;break;case "data-dojo-attach-event":case "dojoattachevent":_508.dojoAttachEvent=_513;break;case "class":_508["class"]=node.className;break;case "style":_508["style"]=node.style&&node.style.cssText;break;default:if(!(name in _507)){var map=_4e7(ctor);name=map[_512]||name;}if(name in _507){switch(typeof _507[name]){case "string":_508[name]=_513;break;case "number":_508[name]=_513.length?Number(_513):NaN;break;case "boolean":_508[name]=_513.toLowerCase()!="false";break;case "function":if(_513===""||_513.search(/[^\w\.]+/i)!=-1){_508[name]=new Function(_513);}else{_508[name]=_4da.getObject(_513,false)||new Function(_513);}_50f.push(name);break;default:var pVal=_507[name];_508[name]=(pVal&&"length" in pVal)?(_513?_513.split(/\s*,\s*/):[]):(pVal instanceof Date)?(_513==""?new Date(""):_513=="now"?new Date():_4e2.fromISOString(_513)):(pVal instanceof _4df)?(dojo.baseUrl+_513):_4e0.fromJson(_513);}}else{_508[name]=_513;}}}for(var j=0;j<_50f.length;j++){var _514=_50f[j].toLowerCase();node.removeAttribute(_514);node[_514]=null;}if(_511){try{_511=_4e0.fromJson.call(_504.propsThis,"{"+_511+"}");_4da.mixin(_508,_511);}catch(e){throw new Error(e.toString()+" in data-dojo-props='"+_511+"'");}}_4da.mixin(_508,_503);if(!_505){_505=(ctor&&(ctor._noScript||_507._noScript)?[]:_4e4("> script[type^='dojo/']",node));}var _515=[],_516=[],_517=[],ons=[];if(_505){for(i=0;i<_505.length;i++){var _518=_505[i];node.removeChild(_518);var _519=(_518.getAttribute(_50e+"event")||_518.getAttribute("event")),prop=_518.getAttribute(_50e+"prop"),_51a=_518.getAttribute(_50e+"method"),_51b=_518.getAttribute(_50e+"advice"),_51c=_518.getAttribute("type"),nf=this._functionFromScript(_518,_50e);if(_519){if(_51c=="dojo/connect"){_515.push({method:_519,func:nf});}else{if(_51c=="dojo/on"){ons.push({event:_519,func:nf});}else{_508[_519]=nf;}}}else{if(_51c=="dojo/aspect"){_515.push({method:_51a,advice:_51b,func:nf});}else{if(_51c=="dojo/watch"){_517.push({prop:prop,func:nf});}else{_516.push(nf);}}}}}var _51d=ctor.markupFactory||_507.markupFactory;var _51e=_51d?_51d(_508,node,ctor):new ctor(_508,node);if(_510){_4da.setObject(_510,_51e);}for(i=0;i<_515.length;i++){_4e1[_515[i].advice||"after"](_51e,_515[i].method,_4da.hitch(_51e,_515[i].func),true);}for(i=0;i<_516.length;i++){_516[i].call(_51e);}for(i=0;i<_517.length;i++){_51e.watch(_517[i].prop,_517[i].func);}for(i=0;i<ons.length;i++){don(_51e,ons[i].event,ons[i].func);}return _51e;},scan:function(root,_51f){var list=[],mids=[],_520={};var _521=(_51f.scope||dojo._scopeName)+"Type",_522="data-"+(_51f.scope||dojo._scopeName)+"-",_523=_522+"type",_524=_522+"textdir",_525=_522+"mixins";var node=root.firstChild;var _526=_51f.inherited;if(!_526){function _527(node,attr){return (node.getAttribute&&node.getAttribute(attr))||(node.parentNode&&_527(node.parentNode,attr));};_526={dir:_527(root,"dir"),lang:_527(root,"lang"),textDir:_527(root,_524)};for(var key in _526){if(!_526[key]){delete _526[key];}}}var _528={inherited:_526};var _529;var _52a;function _52b(_52c){if(!_52c.inherited){_52c.inherited={};var node=_52c.node,_52d=_52b(_52c.parent);var _52e={dir:node.getAttribute("dir")||_52d.dir,lang:node.getAttribute("lang")||_52d.lang,textDir:node.getAttribute(_524)||_52d.textDir};for(var key in _52e){if(_52e[key]){_52c.inherited[key]=_52e[key];}}}return _52c.inherited;};while(true){if(!node){if(!_528||!_528.node){break;}node=_528.node.nextSibling;_52a=false;_528=_528.parent;_529=_528.scripts;continue;}if(node.nodeType!=1){node=node.nextSibling;continue;}if(_529&&node.nodeName.toLowerCase()=="script"){type=node.getAttribute("type");if(type&&/^dojo\/\w/i.test(type)){_529.push(node);}node=node.nextSibling;continue;}if(_52a){node=node.nextSibling;continue;}var type=node.getAttribute(_523)||node.getAttribute(_521);var _52f=node.firstChild;if(!type&&(!_52f||(_52f.nodeType==3&&!_52f.nextSibling))){node=node.nextSibling;continue;}var _530;var ctor=null;if(type){var _531=node.getAttribute(_525),_532=_531?[type].concat(_531.split(/\s*,\s*/)):[type];try{ctor=_4ea(_532);}catch(e){}if(!ctor){_4db.forEach(_532,function(t){if(~t.indexOf("/")&&!_520[t]){_520[t]=true;mids[mids.length]=t;}});}var _533=ctor&&!ctor.prototype._noScript?[]:null;_530={types:_532,ctor:ctor,parent:_528,node:node,scripts:_533};_530.inherited=_52b(_530);list.push(_530);}else{_530={node:node,scripts:_529,parent:_528};}node=_52f;_529=_533;_52a=ctor&&ctor.prototype.stopParser&&!(_51f.template);_528=_530;}var d=new _4e3();if(mids.length){if(has("dojo-debug-messages")){console.warn("WARNING: Modules being Auto-Required: "+mids.join(", "));}_4d9(mids,function(){d.resolve(_4db.filter(list,function(_534){if(!_534.ctor){try{_534.ctor=_4ea(_534.types);}catch(e){}}var _535=_534.parent;while(_535&&!_535.types){_535=_535.parent;}var _536=_534.ctor&&_534.ctor.prototype;_534.instantiateChildren=!(_536&&_536.stopParser&&!(_51f.template));_534.instantiate=!_535||(_535.instantiate&&_535.instantiateChildren);return _534.instantiate;}));});}else{d.resolve(list);}return d.promise;},_require:function(_537){var hash=_4e0.fromJson("{"+_537.innerHTML+"}"),vars=[],mids=[],d=new _4e3();for(var name in hash){vars.push(name);mids.push(hash[name]);}_4d9(mids,function(){for(var i=0;i<vars.length;i++){_4da.setObject(vars[i],arguments[i]);}d.resolve(arguments);});return d.promise;},_scanAmd:function(root){var _538=new _4e3(),_539=_538.promise;_538.resolve(true);var self=this;_4e4("script[type='dojo/require']",root).forEach(function(node){_539=_539.then(function(){return self._require(node);});node.parentNode.removeChild(node);});return _539;},parse:function(_53a,_53b){var root;if(!_53b&&_53a&&_53a.rootNode){_53b=_53a;root=_53b.rootNode;}else{if(_53a&&_4da.isObject(_53a)&&!("nodeType" in _53a)){_53b=_53a;}else{root=_53a;}}root=root?_4dd.byId(root):_4de.body();_53b=_53b||{};var _53c=_53b.template?{template:true}:{},_53d=[],self=this;var p=this._scanAmd(root,_53b).then(function(){return self.scan(root,_53b);}).then(function(_53e){return _53d=_53d.concat(self._instantiate(_53e,_53c,_53b));}).otherwise(function(e){console.error("dojo/parser::parse() error",e);throw e;});_4da.mixin(_53d,p);return _53d;}};if(1){dojo.parser=_4ed;}if(_4dc.parseOnLoad){_4e5(100,_4ed,"parse");}return _4ed;});},"esri/layers/MapImage":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/domUtils","esri/geometry/Extent"],function(_53f,lang,has,_540,_541,_542){var _543=_53f(null,{declaredClass:"esri.layers.MapImage",constructor:function(json){lang.mixin(this,json);this.extent=new _542(this.extent);},visible:true,getLayer:function(){return this._layer;},getNode:function(){return this._node;},show:function(){if(!this.visible){this.visible=true;var node=this._node,_544=this._layer,div;if(node){div=_544&&_544._div;if(div){if(!_544.suspended){_544._setPos(node,div._left,div._top);}(_544._active||div).appendChild(node);}_541.show(node);}}},hide:function(){if(this.visible){this.visible=false;var node=this._node;if(node){_541.hide(node);if(node.parentNode){node.parentNode.removeChild(node);}}}}});if(has("extend-esri")){lang.setObject("layers.MapImage",_543,_540);}return _543;});},"esri/symbols/Symbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","esri/kernel","esri/lang"],function(_545,lang,_546,has,_547,_548){function _549(clr){return clr&&new _546([clr[0],clr[1],clr[2],clr[3]/255]);};function _54a(clr){return clr&&[clr.r,clr.g,clr.b,Math.round(clr.a*255)];};var _54b=_545(null,{declaredClass:"esri.symbol.Symbol",color:new _546([0,0,0,1]),type:null,_stroke:null,_fill:null,constructor:function(json){if(json&&lang.isObject(json)){lang.mixin(this,json);if(this.color&&_548.isDefined(this.color[0])){this.color=_549(this.color);}var type=this.type;if(type&&type.indexOf("esri")===0){this.type={"esriSMS":"simplemarkersymbol","esriPMS":"picturemarkersymbol","esriSLS":"simplelinesymbol","esriCLS":"cartographiclinesymbol","esriSFS":"simplefillsymbol","esriPFS":"picturefillsymbol","esriTS":"textsymbol"}[type];}}},setColor:function(_54c){this.color=_54c;return this;},toJson:function(){return {color:_54a(this.color)};}});_54b.toDojoColor=_549;_54b.toJsonColor=_54a;if(has("extend-esri")){lang.setObject("symbol.Symbol",_54b,_547);_547.symbol.toDojoColor=_549;_547.symbol.toJsonColor=_54a;}return _54b;});},"url:dijit/form/templates/DropDownButton.html":"<span class=\"dijit dijitReset dijitInline\"\n\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" data-dojo-attach-point=\"_buttonNode\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"focusNode,titleNode,_arrowWrapperNode\"\n\t\t\trole=\"button\" aria-haspopup=\"true\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\"\n\t\t\t\tdata-dojo-attach-point=\"iconNode\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode,_popupStateNode\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\"></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" tabIndex=\"-1\"\n\t\tdata-dojo-attach-point=\"valueNode\" role=\"presentation\"\n/></span>\n","esri/symbol":function(){define(["esri/symbols/Symbol","esri/symbols/MarkerSymbol","esri/symbols/SimpleMarkerSymbol","esri/symbols/PictureMarkerSymbol","esri/symbols/LineSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/CartographicLineSymbol","esri/symbols/FillSymbol","esri/symbols/SimpleFillSymbol","esri/symbols/PictureFillSymbol","esri/symbols/Font","esri/symbols/TextSymbol","esri/symbols/jsonUtils"],function(_54d,_54e,_54f,_550,_551,_552,_553,_554,_555,_556,Font,_557,_558){return {Symbol:_54d,MarkerSymbol:_54e,SimpleMarkerSymbol:_54f,PictureMarkerSymbol:_550,LineSymbol:_551,SimpleLineSymbol:_552,CartographicLineSymbol:_553,FillSymbol:_554,SimpleFillSymbol:_555,PictureFillSymbol:_556,Font:Font,TextSymbol:_557,jsonUtils:_558};});},"esri/virtualearth/VEAddress":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_559,lang,has,_55a){var VEA=_559(null,{declaredClass:"esri.virtualearth.VEAddress",constructor:function(json){lang.mixin(this,{addressLine:null,adminDistrict:null,countryRegion:null,district:null,formattedAddress:null,locality:null,postalCode:null,postalTown:null},json);}});if(has("extend-esri")){lang.setObject("virtualearth.VEAddress",VEA,_55a);}return VEA;});},"dijit/form/ToggleButton":function(){define("dijit/form/ToggleButton",["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(_55b,_55c,_55d,_55e){return _55b("dijit.form.ToggleButton",[_55d,_55e],{baseClass:"dijitToggleButton",setChecked:function(_55f){_55c.deprecated("setChecked("+_55f+") is deprecated. Use set('checked',"+_55f+") instead.","","2.0");this.set("checked",_55f);}});});},"esri/SpatialReference":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(_560,_561,lang,has,_562,_563){var _564="PROJCS[\"WGS_1984_Web_Mercator_Auxiliary_Sphere\",GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mercator_Auxiliary_Sphere\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],PARAMETER[\"Standard_Parallel_1\",0.0],PARAMETER[\"Auxiliary_Sphere_Type\",0.0],UNIT[\"Meter\",1.0]]",_565=[-20037508.342788905,20037508.342788905],_566=[-20037508.342787,20037508.342787];var _567=_560(null,{declaredClass:"esri.SpatialReference",constructor:function(json){if(json){if(lang.isObject(json)){lang.mixin(this,json);}else{if(lang.isString(json)){this.wkt=json;}else{this.wkid=json;}}}},wkid:null,wkt:null,_info:{"102113":{wkTemplate:"PROJCS[\"WGS_1984_Web_Mercator\",GEOGCS[\"GCS_WGS_1984_Major_Auxiliary_Sphere\",DATUM[\"D_WGS_1984_Major_Auxiliary_Sphere\",SPHEROID[\"WGS_1984_Major_Auxiliary_Sphere\",6378137.0,0.0]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mercator\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],PARAMETER[\"Standard_Parallel_1\",0.0],UNIT[\"Meter\",1.0]]",valid:_565,origin:_566,dx:0.00001},"102100":{wkTemplate:_564,valid:_565,origin:_566,dx:0.00001},"3785":{wkTemplate:"PROJCS[\"WGS_1984_Web_Mercator\",GEOGCS[\"GCS_WGS_1984_Major_Auxiliary_Sphere\",DATUM[\"D_WGS_1984_Major_Auxiliary_Sphere\",SPHEROID[\"WGS_1984_Major_Auxiliary_Sphere\",6378137.0,0.0]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mercator\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],PARAMETER[\"Standard_Parallel_1\",0.0],UNIT[\"Meter\",1.0]]",valid:_565,origin:_566,dx:0.00001},"3857":{wkTemplate:_564,valid:_565,origin:_566,dx:0.00001},"4326":{wkTemplate:"GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",${Central_Meridian}],UNIT[\"Degree\",0.0174532925199433]]",altTemplate:"PROJCS[\"WGS_1984_Plate_Carree\",GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Plate_Carree\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],UNIT[\"Degrees\",111319.491]]",valid:[-180,180],origin:[-180,180],dx:0.00001}},_isWebMercator:function(){return _561.indexOf([102113,102100,3857,3785],this.wkid)!==-1;},_isWrappable:function(){return _561.indexOf([102113,102100,3857,3785,4326],this.wkid)!==-1;},_getInfo:function(){return this.wkid?this._info[this.wkid]:null;},_canProject:function(inSR){var _568=false;if(inSR){_568=((this.isWebMercator()&&inSR.wkid===4326)||(inSR.isWebMercator()&&this.wkid===4326));}return _568;},isWebMercator:function(){return this._isWebMercator();},equals:function(inSR){var _569=false;if(inSR){if(this===inSR){_569=true;}if(this.wkid||inSR.wkid){_569=(this.wkid===inSR.wkid)||(this.isWebMercator()&&inSR.isWebMercator())||(this.wkid===inSR.latestWkid)||(inSR.wkid===this.latestWkid);}else{if(this.wkt&&inSR.wkt){_569=(this.wkt.toUpperCase()===inSR.wkt.toUpperCase());}}}return _569;},toJson:function(){var _56a=null,_56b=_563.isDefined;if(_56b(this.wkid)){_56a={wkid:this.wkid};}else{if(_56b(this.wkt)){_56a={wkt:this.wkt};}}if(_56a&&_56b(this.latestWkid)){_56a.latestWkid=this.latestWkid;}return _56a;}});if(has("extend-esri")){_562.SpatialReference=_567;}return _567;});},"esri/layers/LabelClass":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/symbols/TextSymbol"],function(_56c,lang,has,_56d,_56e,_56f){var _570=_56c(null,{declaredClass:"esri.layers.LabelClass",labelPlacement:null,labelExpression:null,useCodedValues:null,symbol:null,maxScale:0,minScale:0,where:null,labelPlacementLookup:{"above-center":"esriServerPointLabelPlacementAboveCenter","above-left":"esriServerPointLabelPlacementAboveLeft","above-right":"esriServerPointLabelPlacementAboveRight","below-center":"esriServerPointLabelPlacementBelowCenter","below-left":"esriServerPointLabelPlacementBelowLeft","below-right":"esriServerPointLabelPlacementBelowRight","center-center":"esriServerPointLabelPlacementCenterCenter","center-left":"esriServerPointLabelPlacementCenterLeft","center-right":"esriServerPointLabelPlacementCenterRight","above-after":"esriServerLinePlacementAboveAfter","above-along":"esriServerLinePlacementAboveAlong","above-before":"esriServerLinePlacementAboveBefore","above-start":"esriServerLinePlacementAboveStart","above-end":"esriServerLinePlacementAboveEnd","below-after":"esriServerLinePlacementBelowAfter","below-along":"esriServerLinePlacementBelowAlong","below-before":"esriServerLinePlacementBelowBefore","below-start":"esriServerLinePlacementBelowStart","below-end":"esriServerLinePlacementBelowEnd","center-after":"esriServerLinePlacementCenterAfter","center-along":"esriServerLinePlacementCenterAlong","center-before":"esriServerLinePlacementCenterBefore","center-start":"esriServerLinePlacementCenterStart","center-end":"esriServerLinePlacementCenterEnd","always-horizontal":"esriServerPolygonPlacementAlwaysHorizontal"},constructor:function(json){if(json){lang.mixin(this,json);if(this.labelPlacementLookup.hasOwnProperty(json.labelPlacement)){this.labelPlacement=this.labelPlacementLookup[json.labelPlacement];}if(json.symbol){this.symbol=new _56f(json.symbol);}}},toJson:function(){var json=this;if(this.labelPlacementLookup.hasOwnProperty(json.labelPlacement)){json.labelPlacement=this.labelPlacementLookup[json.labelPlacement];}if(this.symbol){json.symbol=this.symbol.toJson();}return _56e.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.LabelClass",_570,_56d);}return _570;});},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(lang,_571){var _572={};lang.setObject("dojo.date.stamp",_572);_572.fromISOString=function(_573,_574){if(!_572._isoRegExp){_572._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _575=_572._isoRegExp.exec(_573),_576=null;if(_575){_575.shift();if(_575[1]){_575[1]--;}if(_575[6]){_575[6]*=1000;}if(_574){_574=new Date(_574);_571.forEach(_571.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return _574["get"+prop]();}),function(_577,_578){_575[_578]=_575[_578]||_577;});}_576=new Date(_575[0]||1970,_575[1]||0,_575[2]||1,_575[3]||0,_575[4]||0,_575[5]||0,_575[6]||0);if(_575[0]<100){_576.setFullYear(_575[0]||1970);}var _579=0,_57a=_575[7]&&_575[7].charAt(0);if(_57a!="Z"){_579=((_575[8]||0)*60)+(Number(_575[9])||0);if(_57a!="-"){_579*=-1;}}if(_57a){_579-=_576.getTimezoneOffset();}if(_579){_576.setTime(_576.getTime()+_579*60000);}}return _576;};_572.toISOString=function(_57b,_57c){var _57d=function(n){return (n<10)?"0"+n:n;};_57c=_57c||{};var _57e=[],_57f=_57c.zulu?"getUTC":"get",date="";if(_57c.selector!="time"){var year=_57b[_57f+"FullYear"]();date=["0000".substr((year+"").length)+year,_57d(_57b[_57f+"Month"]()+1),_57d(_57b[_57f+"Date"]())].join("-");}_57e.push(date);if(_57c.selector!="date"){var time=[_57d(_57b[_57f+"Hours"]()),_57d(_57b[_57f+"Minutes"]()),_57d(_57b[_57f+"Seconds"]())].join(":");var _580=_57b[_57f+"Milliseconds"]();if(_57c.milliseconds){time+="."+(_580<100?"0":"")+_57d(_580);}if(_57c.zulu){time+="Z";}else{if(_57c.selector!="time"){var _581=_57b.getTimezoneOffset();var _582=Math.abs(_581);time+=(_581>0?"-":"+")+_57d(Math.floor(_582/60))+":"+_57d(_582%60);}}_57e.push(time);}return _57e.join("T");};return _572;});},"dojox/gfx/_base":function(){define("dojox/gfx/_base",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/Color","dojo/_base/sniff","dojo/_base/window","dojo/_base/array","dojo/dom","dojo/dom-construct","dojo/dom-geometry"],function(_583,lang,_584,has,win,arr,dom,_585,_586){var g=lang.getObject("dojox.gfx",true),b=g._base={};g._hasClass=function(node,_587){var cls=node.getAttribute("className");return cls&&(" "+cls+" ").indexOf(" "+_587+" ")>=0;};g._addClass=function(node,_588){var cls=node.getAttribute("className")||"";if(!cls||(" "+cls+" ").indexOf(" "+_588+" ")<0){node.setAttribute("className",cls+(cls?" ":"")+_588);}};g._removeClass=function(node,_589){var cls=node.getAttribute("className");if(cls){node.setAttribute("className",cls.replace(new RegExp("(^|\\s+)"+_589+"(\\s+|$)"),"$1$2"));}};b._getFontMeasurements=function(){var _58a={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};var p;if(has("ie")){win.doc.documentElement.style.fontSize="100%";}var div=_585.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},win.body());for(p in _58a){div.style.fontSize=p;_58a[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}win.body().removeChild(div);return _58a;};var _58b=null;b._getCachedFontMeasurements=function(_58c){if(_58c||!_58b){_58b=b._getFontMeasurements();}return _58b;};var _58d=null,_58e={};b._getTextBox=function(text,_58f,_590){var m,s,al=arguments.length;var i;if(!_58d){_58d=_585.create("div",{style:{position:"absolute",top:"-10000px",left:"0"}},win.body());}m=_58d;m.className="";s=m.style;s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";if(al>1&&_58f){for(i in _58f){if(i in _58e){continue;}s[i]=_58f[i];}}if(al>2&&_590){m.className=_590;}m.innerHTML=text;if(m["getBoundingClientRect"]){var bcr=m.getBoundingClientRect();return {l:bcr.left,t:bcr.top,w:bcr.width||(bcr.right-bcr.left),h:bcr.height||(bcr.bottom-bcr.top)};}else{return _586.getMarginBox(m);}};var _591=0;b._getUniqueId=function(){var id;do{id=_583._scopeName+"xUnique"+(++_591);}while(dom.byId(id));return id;};lang.mixin(g,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:(function(){var _592={};return function(type){var t=_592[type];if(t){return new t();}t=_592[type]=new Function();t.prototype=g["default"+type];return new t();};})(),normalizeColor:function(_593){return (_593 instanceof _584)?_593:new _584(_593);},normalizeParameters:function(_594,_595){var x;if(_595){var _596={};for(x in _594){if(x in _595&&!(x in _596)){_594[x]=_595[x];}}}return _594;},makeParameters:function(_597,_598){var i=null;if(!_598){return lang.delegate(_597);}var _599={};for(i in _597){if(!(i in _599)){_599[i]=lang.clone((i in _598)?_598[i]:_597[i]);}}return _599;},formatNumber:function(x,_59a){var val=x.toString();if(val.indexOf("e")>=0){val=x.toFixed(4);}else{var _59b=val.indexOf(".");if(_59b>=0&&val.length-_59b>5){val=x.toFixed(4);}}if(x<0){return val;}return _59a?" "+val:val;},makeFontString:function(font){return font.style+" "+font.variant+" "+font.weight+" "+font.size+" "+font.family;},splitFontString:function(str){var font=g.getDefault("Font");var t=str.split(/\s+/);do{if(t.length<5){break;}font.style=t[0];font.variant=t[1];font.weight=t[2];var i=t[3].indexOf("/");font.size=i<0?t[3]:t[3].substring(0,i);var j=4;if(i<0){if(t[4]=="/"){j=6;}else{if(t[4].charAt(0)=="/"){j=5;}}}if(j<t.length){font.family=t.slice(j).join(" ");}}while(false);return font;},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return g._base._getCachedFontMeasurements()["12pt"]/12;},pt2px:function(len){return len*g.px_in_pt();},px2pt:function(len){return len/g.px_in_pt();},normalizedLength:function(len){if(len.length===0){return 0;}if(len.length>2){var _59c=g.px_in_pt();var val=parseFloat(len);switch(len.slice(-2)){case "px":return val;case "pt":return val*_59c;case "in":return val*72*_59c;case "pc":return val*12*_59c;case "mm":return val*g.mm_in_pt*_59c;case "cm":return val*g.cm_in_pt*_59c;}}return parseFloat(len);},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(a,b){return a&&b&&a===b;},switchTo:function(_59d){var ns=typeof _59d=="string"?g[_59d]:_59d;if(ns){arr.forEach(["Group","Rect","Ellipse","Circle","Line","Polyline","Image","Text","Path","TextPath","EsriPath","Surface","createSurface","fixTarget"],function(name){g[name]=ns[name];});}}});return g;});},"esri/IdentityManagerBase":function(){define(["dojo/_base/declare","dojo/_base/config","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/_base/json","dojo/_base/url","dojo/has","dojo/cookie","esri/kernel","esri/config","esri/lang","esri/ServerInfo","esri/urlUtils","esri/deferredUtils","esri/request","esri/Evented"],function(_59e,_59f,lang,_5a0,_5a1,_5a2,Url,has,_5a3,_5a4,_5a5,_5a6,_5a7,_5a8,_5a9,_5aa,_5ab){var _5ac={};var _5ad=function(_5ae){var _5af=new Url(_5ae.owningSystemUrl).host,_5b0=new Url(_5ae.server).host,_5b1=/.+\.arcgis\.com$/i;return (_5b1.test(_5af)&&_5b1.test(_5b0));},_5b2=function(_5b3,list){return !!(_5ad(_5b3)&&list&&_5a0.some(list,function(_5b4){return _5b4.test(_5b3.server);}));};var _5b5;var _5b6=_59e(_5ab,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=lang.getObject("esriGeowConfig");this.serverInfos=[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=[];},defaultTokenValidity:60,tokenValidity:null,signInPage:null,useSignInPage:true,_busy:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i,_agolSuffix:".arcgis.com",_gwDomains:[{regex:/https?:\/\/www\.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/dev\.arcgis\.com/i,tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*dev[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*qa[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer)).*/ig,_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_publicUrls:[/\/arcgis\/tokens/i,/\/sharing\/generatetoken/i,/\/rest\/info/i],registerServers:function(_5b7){var _5b8=this.serverInfos;if(_5b8){_5b7=_5a0.filter(_5b7,function(info){return !this.findServerInfo(info.server);},this);this.serverInfos=_5b8.concat(_5b7);}else{this.serverInfos=_5b7;}_5a0.forEach(_5b7,function(info){if(info.owningSystemUrl){this._portals.push(info.owningSystemUrl);}if(info.hasPortal){var _5b9=_5a5.defaults.io.corsEnabledServers,_5ba=this._getOrigin(info.tokenServiceUrl);if(!_5a8.canUseXhr(info.server)){_5b9.push(info.server.replace(/^https?:\/\//i,""));}if(!_5a8.canUseXhr(_5ba)){_5b9.push(_5ba.replace(/^https?:\/\//i,""));}}},this);},registerToken:function(_5bb){var _5bc=this._sanitizeUrl(_5bb.server),_5bd=this.findServerInfo(_5bc),_5be;if(!_5bd){_5bd=new _5a7();_5bd.server=this._getOrigin(_5bc);_5bd.tokenServiceUrl=this._getTokenSvcUrl(_5bc);_5bd.hasPortal=true;this.registerServers([_5bd]);}_5be=this.findCredential(_5bc,_5bb.userId);if(_5be){lang.mixin(_5be,_5bb);}else{_5be=new _5b5({userId:_5bb.userId,server:_5bd.server,token:_5bb.token,expires:_5bb.expires,ssl:_5bb.ssl,scope:this._isServerRsrc(_5bc)?"server":"portal"});_5be.resources=[_5bc];this.credentials.push(_5be);}_5be.onTokenChange(false);},toJson:function(){return _5a6.fixJson({"serverInfos":_5a0.map(this.serverInfos,function(_5bf){return _5bf.toJson();}),"credentials":_5a0.map(this.credentials,function(crd){return crd.toJson();})});},initialize:function(json){if(!json){return;}if(lang.isString(json)){json=_5a2.fromJson(json);}var _5c0=json.serverInfos,_5c1=json.credentials;if(_5c0){var _5c2=[];_5a0.forEach(_5c0,function(_5c3){if(_5c3.server&&_5c3.tokenServiceUrl){_5c2.push(_5c3.declaredClass?_5c3:new _5a7(_5c3));}});if(_5c2.length){this.registerServers(_5c2);}}if(_5c1){_5a0.forEach(_5c1,function(crd){if(crd.userId&&crd.server&&crd.token&&crd.expires&&(crd.expires>(new Date()).getTime())){crd=crd.declaredClass?crd:new _5b5(crd);crd.onTokenChange();this.credentials.push(crd);}},this);}},findServerInfo:function(_5c4){var _5c5;_5c4=this._sanitizeUrl(_5c4);_5a0.some(this.serverInfos,function(info){if(_5a8.hasSameOrigin(info.server,_5c4,true)){_5c5=info;}return !!_5c5;});return _5c5;},findCredential:function(_5c6,_5c7){var _5c8,_5c9;_5c6=this._sanitizeUrl(_5c6);_5c9=this._isServerRsrc(_5c6)?"server":"portal";if(_5c7){_5a0.some(this.credentials,function(crd){if(_5a8.hasSameOrigin(_5c6,crd.server,true)&&_5c7===crd.userId&&crd.scope===_5c9){_5c8=crd;}return !!_5c8;},this);}else{_5a0.some(this.credentials,function(crd){if(_5a8.hasSameOrigin(_5c6,crd.server,true)&&this._getIdenticalSvcIdx(_5c6,crd)!==-1&&crd.scope===_5c9){_5c8=crd;}return !!_5c8;},this);}return _5c8;},getCredential:function(_5ca,_5cb){var _5cc,_5cd;if(_5a6.isDefined(_5cb)){if(lang.isObject(_5cb)){_5cc=!!_5cb.token;_5cd=_5cb.error;}else{_5cc=_5cb;}}_5ca=this._sanitizeUrl(_5ca);var dfd=new _5a1(_5a9._dfdCanceller),err,_5ce=this._isAdminResource(_5ca),_5cf=(_5cc&&this._doPortalSignIn(_5ca))?_5a3("esri_auth"):null,_5d0=(_5cc&&this._signedIn(_5ca))?this.findCredential(_5ca):null;if(_5cf||_5d0){_5cf=_5cf&&_5a2.fromJson(_5cf);var _5d1=(_5cf&&_5cf.email)||(_5d0&&_5d0.userId);err=new Error("You are currently signed in as: '"+_5d1+"'. You do not have access to this resource: "+_5ca);err.code="IdentityManagerBase."+1;err.httpCode=_5cd&&_5cd.httpCode;err.messageCode=_5cd?_5cd.messageCode:null;err.subcode=_5cd?_5cd.subcode:null;err.log=_59f.isDebug;dfd.errback(err);return dfd;}var _5d2=this._findCredential(_5ca,_5cb);if(_5d2){dfd.callback(_5d2);return dfd;}var _5d3=this.findServerInfo(_5ca);if(!_5d3){var _5d4=this._getTokenSvcUrl(_5ca);if(!_5d4){err=new Error("Unknown resource - could not find token service endpoint.");err.code="IdentityManagerBase."+2;err.log=_59f.isDebug;dfd.errback(err);return dfd;}_5d3=new _5a7();_5d3.server=this._getOrigin(_5ca);if(lang.isString(_5d4)){_5d3.tokenServiceUrl=_5d4;_5d3._selfDfd=this._getPortalSelf(_5d3,_5ca);_5d3.hasPortal=true;}else{_5d3._restInfoDfd=_5d4;_5d3.hasServer=true;}this.registerServers([_5d3]);}else{if(!_5d3.hasServer&&this._isServerRsrc(_5ca)){_5d3._restInfoDfd=this._getTokenSvcUrl(_5ca,true);_5d3.hasServer=true;}}return this._enqueue(_5ca,_5d3,_5cb,dfd,_5ce);},getResourceName:function(_5d5){if(this._isRESTService(_5d5)){return _5d5.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"";}else{return (this._gwUser.test(_5d5)&&_5d5.replace(this._gwUser,"$1"))||(this._gwItem.test(_5d5)&&_5d5.replace(this._gwItem,"$1"))||(this._gwGroup.test(_5d5)&&_5d5.replace(this._gwGroup,"$1"))||"";}},generateToken:function(_5d6,_5d7,_5d8){var _5d9,_5da,_5db,_5dc,_5dd,ssl,_5de=new Url(window.location.href.toLowerCase()),_5df=_5a3("esri_auth"),_5e0,_5e1=_5d6.shortLivedTokenValidity,_5e2=_5a4.id.tokenValidity||_5e1||_5a4.id.defaultTokenValidity;if(_5e2>_5e1){_5e2=_5e1;}if(_5d8){_5d9=_5d8.isAdmin;_5da=_5d8.serverUrl;_5db=_5d8.token;ssl=_5d8.ssl;_5d6.customParameters=_5d8.customParameters;}if(_5d9){_5dc=_5d6.adminTokenServiceUrl;}else{_5dc=_5d6.tokenServiceUrl;_5dd=new Url(_5dc.toLowerCase());if(_5df){_5df=_5a2.fromJson(_5df);_5e0=_5df.auth_tier;_5e0=_5e0&&_5e0.toLowerCase();}if(_5e0==="web"&&!_5d7&&!ssl&&_5de.scheme==="http"&&(_5a8.hasSameOrigin(_5de.uri,_5dc,true)||(_5dd.scheme==="https"&&_5de.host===_5dd.host&&_5de.port==="7080"&&_5dd.port==="7443"))){_5dc=_5dc.replace(/^https:/i,"http:").replace(/:7443/i,":7080");}}var _5e3=_5aa(lang.mixin({url:_5dc,content:lang.mixin({request:"getToken",username:_5d7&&_5d7.username,password:_5d7&&_5d7.password,serverUrl:_5da,token:_5db,expiration:_5e2,referer:(_5d9||_5d6.tokenServiceUrl.toLowerCase().indexOf("/sharing/generatetoken")!==-1)?window.location.host:null,client:_5d9?"referer":null,f:"json"},_5d6.customParameters),handleAs:"json"},_5d8&&_5d8.ioArgs),{usePost:true,disableIdentityLookup:true,useProxy:this._useProxy(_5d6,_5d8)});_5e3.addCallback(function(_5e4){if(!_5e4||!_5e4.token){var err=new Error("Unable to generate token");err.code="IdentityManagerBase."+3;err.log=_59f.isDebug;return err;}var _5e5=_5d6.server;if(!_5ac[_5e5]){_5ac[_5e5]={};}if(_5d7){_5ac[_5e5][_5d7.username]=_5d7.password;}_5e4.validity=_5e2;return _5e4;});_5e3.addErrback(function(_5e6){});return _5e3;},isBusy:function(){return !!this._busy;},setRedirectionHandler:function(_5e7){this._redirectFunc=_5e7;},setProtocolErrorHandler:function(_5e8){this._protocolFunc=_5e8;},signIn:function(){},_findCredential:function(_5e9,_5ea){var idx=-1,cred,_5eb,_5ec,_5ed,_5ee=_5ea&&_5ea.token,_5ef=_5ea&&_5ea.resource,_5f0=this._isServerRsrc(_5e9)?"server":"portal",_5f1=_5a0.filter(this.credentials,function(crd){return (_5a8.hasSameOrigin(crd.server,_5e9,true)&&crd.scope===_5f0);});_5e9=_5ef||_5e9;if(_5f1.length){if(_5f1.length===1){cred=_5f1[0];_5ed=this.findServerInfo(cred.server);_5eb=_5ed&&_5ed.owningSystemUrl;_5ec=_5eb&&this.findCredential(_5eb,cred.userId);idx=this._getIdenticalSvcIdx(_5e9,cred);if(_5ee){if(idx!==-1){cred.resources.splice(idx,1);this._removeResource(_5e9,_5ec);}}else{if(idx===-1){cred.resources.push(_5e9);}this._addResource(_5e9,_5ec);return cred;}}else{var _5f2,i;_5a0.some(_5f1,function(crd){i=this._getIdenticalSvcIdx(_5e9,crd);if(i!==-1){_5f2=crd;_5ed=this.findServerInfo(_5f2.server);_5eb=_5ed&&_5ed.owningSystemUrl;_5ec=_5eb&&this.findCredential(_5eb,_5f2.userId);idx=i;return true;}return false;},this);if(_5ee){if(_5f2){_5f2.resources.splice(idx,1);this._removeResource(_5e9,_5ec);}}else{if(_5f2){this._addResource(_5e9,_5ec);return _5f2;}}}}},_addResource:function(_5f3,_5f4){if(_5f4){if(this._getIdenticalSvcIdx(_5f3,_5f4)===-1){_5f4.resources.push(_5f3);}}},_removeResource:function(_5f5,_5f6){var idx=-1;if(_5f6){idx=this._getIdenticalSvcIdx(_5f5,_5f6);if(idx>-1){_5f6.resources.splice(idx,1);}}},_useProxy:function(_5f7,_5f8){return (_5f8&&_5f8.isAdmin&&!_5a8.hasSameOrigin(_5f7.adminTokenServiceUrl,window.location.href))||(!this._isPortalDomain(_5f7.tokenServiceUrl)&&_5f7.currentVersion==10.1&&!_5a8.hasSameOrigin(_5f7.tokenServiceUrl,window.location.href));},_getOrigin:function(_5f9){var uri=new Url(_5f9);return uri.scheme+"://"+uri.host+(_5a6.isDefined(uri.port)?(":"+uri.port):"");},_sanitizeUrl:function(url){url=lang.trim(url);var _5fa=(_5a5.defaults.io.proxyUrl||"").toLowerCase(),mark=_5fa?url.toLowerCase().indexOf(_5fa+"?"):-1;if(mark!==-1){url=url.substring(mark+_5fa.length+1);}return _5a8.urlToObject(url).path;},_isRESTService:function(_5fb){return (_5fb.indexOf(this._agsRest)>-1);},_isAdminResource:function(_5fc){return this._agsAdmin.test(_5fc);},_isServerRsrc:function(_5fd){return (this._isRESTService(_5fd)||this._isAdminResource(_5fd));},_isIdenticalService:function(_5fe,_5ff){var _600;if(this._isRESTService(_5fe)&&this._isRESTService(_5ff)){var _601=this._getSuffix(_5fe).toLowerCase(),_602=this._getSuffix(_5ff).toLowerCase();_600=(_601===_602);if(!_600){var _603=/(.*)\/(MapServer|FeatureServer).*/ig;_600=(_601.replace(_603,"$1")===_602.replace(_603,"$1"));}}else{if(this._isAdminResource(_5fe)&&this._isAdminResource(_5ff)){_600=true;}else{if(!this._isServerRsrc(_5fe)&&!this._isServerRsrc(_5ff)&&this._isPortalDomain(_5fe)){_600=true;}}}return _600;},_isPortalDomain:function(_604){_604=_604.toLowerCase();var _605=(new Url(_604)).authority,_606=this._portalConfig,_607=(_605.indexOf(this._agolSuffix)!==-1);if(!_607&&_606){_607=_5a8.hasSameOrigin(_606.restBaseUrl,_604,true);}if(!_607){if(!this._arcgisUrl){var _608=lang.getObject("esri.arcgis.utils.arcgisUrl");if(_608){this._arcgisUrl=(new Url(_608)).authority;}}if(this._arcgisUrl){_607=(this._arcgisUrl.toLowerCase()===_605);}}if(!_607){_607=_5a0.some(this._portals,function(_609){return _5a8.hasSameOrigin(_609,_604,true);});}_607=_607||this._agsPortal.test(_604);return _607;},_isIdProvider:function(_60a,_60b){var i=-1,j=-1;_5a0.forEach(this._gwDomains,function(_60c,idx){if(i===-1&&_60c.regex.test(_60a)){i=idx;}if(j===-1&&_60c.regex.test(_60b)){j=idx;}});var _60d=false;if(i>-1&&j>-1){if(i===0||i===4){if(j===0||j===4){_60d=true;}}else{if(i===1){if(j===1||j===2){_60d=true;}}else{if(i===2){if(j===2){_60d=true;}}else{if(i===3){if(j===3){_60d=true;}}}}}}if(!_60d){var _60e=this.findServerInfo(_60b),_60f=_60e&&_60e.owningSystemUrl;if(_60f&&_5ad(_60e)&&this._isPortalDomain(_60f)&&this._isIdProvider(_60a,_60f)){_60d=true;}}return _60d;},_isPublic:function(_610){_610=this._sanitizeUrl(_610);return _5a0.some(this._publicUrls,function(_611){return _611.test(_610);});},_getIdenticalSvcIdx:function(_612,_613){var idx=-1;_5a0.some(_613.resources,function(rsrc,i){if(this._isIdenticalService(_612,rsrc)){idx=i;return true;}return false;},this);return idx;},_getSuffix:function(_614){return _614.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1");},_getTokenSvcUrl:function(_615,_616){var _617,dfd,idx;if(this._isRESTService(_615)){idx=_615.toLowerCase().indexOf(this._agsRest);_617=_615.substring(0,idx)+"/admin/generateToken";_615=_615.substring(0,idx+"/rest/".length)+"info";dfd=_5aa({url:_615,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});dfd.adminUrl_=_617;return dfd;}else{if(this._isPortalDomain(_615)){var url="";_5a0.some(this._gwDomains,function(_618){if(_618.regex.test(_615)){url=_618.tokenServiceUrl;}return !!url;});if(!url){_5a0.some(this._portals,function(_619){if(_5a8.hasSameOrigin(_619,_615,true)){url=_619+this._gwTokenUrl;}return !!url;},this);}if(!url){idx=_615.toLowerCase().indexOf("/sharing");if(idx!==-1){url=_615.substring(0,idx)+this._gwTokenUrl;}}if(!url){url=this._getOrigin(_615)+this._gwTokenUrl;}if(url){var port=new Url(_615).port;if(/^http:\/\//i.test(_615)&&port==="7080"){url=url.replace(/:7080/i,":7443");}url=url.replace(/http:/i,"https:");}return url;}else{if(_615.toLowerCase().indexOf("premium.arcgisonline.com")!==-1){return "https://premium.arcgisonline.com/server/tokens";}else{if(this._isAdminResource(_615)){idx=_615.toLowerCase().indexOf("/admin/");_617=_615.substring(0,idx+"/admin/".length)+"generateToken";_615=_615.substring(0,idx)+"/rest/info";dfd=_5aa({url:_615,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});dfd.adminUrl_=_617;return dfd;}}}}},_getPortalSelf:function(_61a,_61b){var _61c=_61a.tokenServiceUrl.replace(/\/sharing\/generatetoken/i,"/sharing/rest/portals/self");return _5aa({url:/^http:/i.test(_61b)?_61c.replace(/^https:/i,"http:").replace(/:7443/i,":7080"):_61c,content:{f:"json"},handleAs:"json",callbackParamName:"callback"},{crossOrigin:false,disableIdentityLookup:true});},_signedIn:function(_61d){var _61e=this.findServerInfo(_61d),_61f=_61e&&_61e.owningSystemUrl,_620=_61f&&this.findServerInfo(_61f);return !!((_61e&&_61e.webTierAuth)||(_620&&_620.webTierAuth));},_hasPortalSession:function(){return _5a3.isSupported()?!!_5a3("esri_auth"):false;},_doPortalSignIn:function(_621){if(_5a3.isSupported()){var _622=_5a3("esri_auth"),_623=this._portalConfig,_624=window.location.href,_625=this.findServerInfo(_621);if((_623||this._isPortalDomain(_624)||_622)&&(this._isPortalDomain(_621)||(_625&&_625.owningSystemUrl&&this._isPortalDomain(_625.owningSystemUrl)))&&(this._isIdProvider(_624,_621)||(_623&&(_5a8.hasSameOrigin(_623.restBaseUrl,_621,true)||this._isIdProvider(_623.restBaseUrl,_621)))||_5a8.hasSameOrigin(_624,_621,true))&&this.useSignInPage){return true;}}return false;},_checkProtocol:function(_626,_627,_628,_629){var _62a=true,_62b=_629?_627.adminTokenServiceUrl:_627.tokenServiceUrl;if(lang.trim(_62b).toLowerCase().indexOf("https:")===0&&window.location.href.toLowerCase().indexOf("https:")!==0&&!_5a8.canUseXhr(_62b)&&!_5a8.canUseXhr(_5a8.getProxyUrl(true).path)){_62a=this._protocolFunc?!!this._protocolFunc({resourceUrl:_626,serverInfo:_627}):false;if(!_62a){var err=new Error("Aborted the Sign-In process to avoid sending password over insecure connection.");err.code="IdentityManagerBase."+4;err.log=_59f.isDebug;console.log(err.message);_628(err);}}return _62a;},_enqueue:function(_62c,_62d,_62e,dfd,_62f,_630){if(!dfd){dfd=new _5a1(_5a9._dfdCanceller);}dfd.resUrl_=_62c;dfd.sinfo_=_62d;dfd.options_=_62e;dfd.admin_=_62f;dfd.refresh_=_630;if(this._busy){if(_5a8.hasSameOrigin(_62c,this._busy.resUrl_,true)){this._soReqs.push(dfd);}else{this._xoReqs.push(dfd);}}else{this._doSignIn(dfd);}return dfd;},_doSignIn:function(dfd){this._busy=dfd;var self=this;var _631=function(_632){var _633=dfd.options_&&dfd.options_.resource,_634=dfd.resUrl_,_635=dfd.refresh_;if(_5a0.indexOf(self.credentials,_632)===-1){if(_635&&_5a0.indexOf(self.credentials,_635)!==-1){_635.userId=_632.userId;_635.token=_632.token;_635.expires=_632.expires;_635.validity=_632.validity;_635.ssl=_632.ssl;_635.creationTime=_632.creationTime;_632=_635;}else{self.credentials.push(_632);}}if(!_632.resources){_632.resources=[];}_632.resources.push(_633||_634);_632.scope=self._isServerRsrc(_634)?"server":"portal";_632.onTokenChange();var reqs=self._soReqs,_636={};self._soReqs=[];_5a0.forEach(reqs,function(_637){if(!this._isIdenticalService(_634,_637.resUrl_)){var _638=this._getSuffix(_637.resUrl_);if(!_636[_638]){_636[_638]=true;_632.resources.push(_637.resUrl_);}}},self);dfd.callback(_632);_5a0.forEach(reqs,function(_639){_639.callback(_632);});self._busy=dfd.resUrl_=dfd.sinfo_=dfd.refresh_=null;if(self._soReqs.length){self._doSignIn(self._soReqs.shift());}if(self._xoReqs.length){self._doSignIn(self._xoReqs.shift());}},_63a=function(_63b){dfd.errback(_63b);self._busy=dfd.resUrl_=dfd.sinfo_=dfd.refresh_=null;if(self._soReqs.length){self._doSignIn(self._soReqs.shift());}if(self._xoReqs.length){self._doSignIn(self._xoReqs.shift());}},_63c=function(_63d,_63e){var _63f=dfd.sinfo_;if(self._doPortalSignIn(dfd.resUrl_)){var _640=_5a3("esri_auth"),_641=self._portalConfig;if(_640){_640=_5a2.fromJson(_640);_631(new _5b5({userId:_640.email,server:_63f.server,token:_640.token,expires:null}));return;}else{var _642="",_643=window.location.href;if(self.signInPage){_642=self.signInPage;}else{if(_641){_642=_641.baseUrl+_641.signin;}else{if(self._isIdProvider(_643,dfd.resUrl_)){_642=self._getOrigin(_643)+"/home/signin.html";}else{_642=_63f.tokenServiceUrl.replace(/\/sharing\/generatetoken/i,"")+"/home/signin.html";}}}_642=_642.replace(/http:/i,"https:");if(_641&&_641.useSSL===false){_642=_642.replace(/https:/i,"http:");}if(_643.toLowerCase().replace("https","http").indexOf(_642.toLowerCase().replace("https","http"))===0){var err=new Error("Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: "+dfd.resUrl_);err.code="IdentityManagerBase."+5;err.log=_59f.isDebug;_63a(err);}else{if(self._redirectFunc){self._redirectFunc({signInPage:_642,returnUrlParamName:"returnUrl",returnUrl:_643,resourceUrl:dfd.resUrl_,serverInfo:_63f});}else{window.location=_642+"?returnUrl="+window.escape(_643);}}return;}}else{if(_63d){_631(new _5b5({userId:_63d,server:_63f.server,token:null,expires:null,ssl:!!_63e}));}else{if(self._checkProtocol(dfd.resUrl_,_63f,_63a,dfd.admin_)){var _644=dfd.options_;if(dfd.admin_){_644=_644||{};_644.isAdmin=true;}dfd._pendingDfd=self.signIn(dfd.resUrl_,_63f,_644).addCallbacks(_631,_63a);}}}},_645=function(){var _646=dfd.sinfo_,_647=_646.owningSystemUrl,_648=dfd.options_,_649,_64a,_64b;if(_648){_649=_648.token;_64a=_648.error;}_64b=self._findCredential(_647,{token:_649,resource:dfd.resUrl_});if(!_64b&&_5ad(_646)){_5a0.some(self.credentials,function(cred){if(this._isIdProvider(_647,cred.server)){_64b=cred;}return !!_64b;},self);}if(_64b){var _64c=self.findCredential(dfd.resUrl_,_64b.userId);if(_64c){_631(_64c);}else{if(_5b2(_646,self._legacyFed)){var cred=_64b.toJson();cred.server=_646.server;cred.resources=null;_631(new _5b5(cred));}else{var _64d=(dfd._pendingDfd=self.generateToken(self.findServerInfo(_64b.server),null,{serverUrl:dfd.resUrl_,token:_64b.token,ssl:_64b.ssl}));_64d.addCallbacks(function(_64e){_631(new _5b5({userId:_64b.userId,server:_646.server,token:_64e.token,expires:_5a6.isDefined(_64e.expires)?Number(_64e.expires):null,ssl:!!_64e.ssl,isAdmin:dfd.admin_,validity:_64e.validity}));},_63a);}}}else{self._busy=null;if(_649){dfd.options_.token=null;}var _64f=(dfd._pendingDfd=self.getCredential(_647.replace(/\/?$/,"/sharing"),{resource:dfd.resUrl_,token:_649,error:_64a}));_64f.addCallbacks(function(_650){self._enqueue(dfd.resUrl_,dfd.sinfo_,dfd.options_,dfd,dfd.admin_);},function(_651){_63a(_651);});}};var _652=dfd.sinfo_.tokenServiceUrl,_653=dfd.sinfo_.owningSystemUrl,_654=this._isServerRsrc(dfd.resUrl_),_655=dfd.sinfo_._restInfoDfd;if(!_655){if(_654&&_653){_645();}else{if(dfd.sinfo_._selfDfd){var both=function(_656){dfd.sinfo_._selfDfd=null;var _657=_656&&_656.user&&_656.user.username;dfd.sinfo_.webTierAuth=!!_657;_63c(_657,_656&&_656.allSSL);};dfd.sinfo_._selfDfd.then(both,both);}else{_63c();}}}else{_655.addCallbacks(function(_658){var _659=dfd.sinfo_;_659.adminTokenServiceUrl=_659._restInfoDfd.adminUrl_;_659._restInfoDfd=null;_659.tokenServiceUrl=lang.getObject("authInfo.tokenServicesUrl",false,_658)||lang.getObject("authInfo.tokenServiceUrl",false,_658)||lang.getObject("tokenServiceUrl",false,_658);_659.shortLivedTokenValidity=lang.getObject("authInfo.shortLivedTokenValidity",false,_658);_659.currentVersion=_658.currentVersion;_659.owningTenant=_658.owningTenant;var _65a=(_659.owningSystemUrl=_658.owningSystemUrl);if(_65a){self._portals.push(_65a);if(!_659.hasPortal&&_5a8.hasSameOrigin(_65a,dfd.resUrl_,true)){_659.hasPortal=true;}}if(_654&&_65a){_645();}else{_63c();}},function(){dfd.sinfo_._restInfoDfd=null;var err=new Error("Unknown resource - could not find token service endpoint.");err.code="IdentityManagerBase."+2;err.log=_59f.isDebug;_63a(err);});}}});_5b5=_59e(null,{declaredClass:"esri.Credential",tokenRefreshBuffer:2,constructor:function(json){lang.mixin(this,json);this.resources=this.resources||[];if(!_5a6.isDefined(this.creationTime)){this.creationTime=(new Date()).getTime();}},refreshToken:function(){var self=this,_65b=this.resources&&this.resources[0],_65c=_5a4.id.findServerInfo(this.server),_65d=_65c&&_65c.owningSystemUrl,_65e=!!_65d&&this.scope==="server",_65f=_65e&&_5b2(_65c,_5a4.id._legacyFed),_660=_65e&&_5a4.id.findServerInfo(_65d),_661,_662=_5ac[this.server],kpwd=_662&&_662[this.userId],_663;if(_65c.webTierAuth){return;}if(_65e&&!_660){_5a0.some(_5a4.id.serverInfos,function(info){if(_5a4.id._isIdProvider(_65d,info.server)){_660=info;}return !!_660;});}_661=_660&&_5a4.id.findCredential(_660.server,this.userId);if(_65e&&!_661){return;}if(_65f){_661.refreshToken();return;}else{if(_65e){_663={serverUrl:_65b,token:_661&&_661.token,ssl:_661&&_661.ssl};}else{if(!kpwd){var dfd;if(_65b){_65b=_5a4.id._sanitizeUrl(_65b);this._enqueued=1;dfd=_5a4.id._enqueue(_65b,_65c,null,null,this.isAdmin,this);dfd.addBoth(function(){self._enqueued=0;});}return dfd;}else{if(this.isAdmin){_663={isAdmin:true};}}}}return _5a4.id.generateToken(_65e?_660:_65c,_65e?null:{username:this.userId,password:kpwd},_663).addCallback(function(_664){self.token=_664.token;self.expires=_5a6.isDefined(_664.expires)?Number(_664.expires):null;self.creationTime=(new Date()).getTime();self.validity=_664.validity;self.onTokenChange();if(self.scope==="portal"){_5a0.forEach(_5a4.id.credentials,function(cred){var _665=_5a4.id.findServerInfo(cred.server),_65d=_665&&_665.owningSystemUrl;if(cred!==self&&cred.userId===self.userId&&_65d&&cred.scope==="server"&&(_5a8.hasSameOrigin(self.server,_65d,true)||_5a4.id._isIdProvider(_65d,self.server))){if(_5b2(_665,_5a4.id._legacyFed)){cred.token=self.token;cred.expires=self.expires;cred.creationTime=self.creationTime;cred.validity=self.validity;cred.onTokenChange();}else{cred.refreshToken();}}});}}).addErrback(function(){});},onTokenChange:function(_666){clearTimeout(this._refreshTimer);var _667=this.server&&_5a4.id.findServerInfo(this.server),_668=_667&&_667.owningSystemUrl,_669=_668&&_5a4.id.findServerInfo(_668);if((_666!==false)&&(!_668||this.scope==="portal"||(_669&&_669.webTierAuth))&&(_5a6.isDefined(this.expires)||_5a6.isDefined(this.validity))){this._startRefreshTimer();}},onDestroy:function(){},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;var _66a=_5a0.indexOf(_5a4.id.credentials,this);if(_66a>-1){_5a4.id.credentials.splice(_66a,1);}this.onTokenChange();this.onDestroy();},toJson:function(){return this._toJson();},_toJson:function(){var json=_5a6.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope});var _66b=this.resources;if(_66b&&_66b.length>0){json.resources=_66b;}return json;},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var _66c=this.tokenRefreshBuffer*60000,_66d=this.validity?(this.creationTime+(this.validity*60000)):this.expires,_66e=(_66d-(new Date()).getTime());if(_66e<0){_66e=0;}this._refreshTimer=setTimeout(lang.hitch(this,this.refreshToken),(_66e>_66c)?(_66e-_66c):_66e);}});_5b6.Credential=_5b5;if(has("extend-esri")){_5a4.IdentityManagerBase=_5b6;_5a4.Credential=_5b5;}return _5b6;});},"esri/layers/TableDataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/DataSource"],function(_66f,lang,has,_670,_671,_672){var _673=_66f(_672,{declaredClass:"esri.layers.TableDataSource",toJson:function(){var json={type:"table",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName,gdbVersion:this.gdbVersion};return _671.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.TableDataSource",_673,_670);}return _673;});},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","dojo/when"],function(_674,lang,_675,when){return _674("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}return (apn[name]={s:"_"+name+"Setter",g:"_"+name+"Getter"});},postscript:function(_676){if(_676){this.set(_676);}},_get:function(name,_677){return typeof this[_677.g]==="function"?this[_677.g]():this[name];},get:function(name){return this._get(name,this._getAttrNames(name));},set:function(name,_678){if(typeof name==="object"){for(var x in name){if(name.hasOwnProperty(x)&&x!="_watchCallbacks"){this.set(x,name[x]);}}return this;}var _679=this._getAttrNames(name),_67a=this._get(name,_679),_67b=this[_679.s],_67c;if(typeof _67b==="function"){_67c=_67b.apply(this,Array.prototype.slice.call(arguments,1));}else{this[name]=_678;}if(this._watchCallbacks){var self=this;when(_67c,function(){self._watchCallbacks(name,_67a,_678);});}return this;},_changeAttrValue:function(name,_67d){var _67e=this.get(name);this[name]=_67d;if(this._watchCallbacks){this._watchCallbacks(name,_67e,_67d);}return this;},watch:function(name,_67f){var _680=this._watchCallbacks;if(!_680){var self=this;_680=this._watchCallbacks=function(name,_681,_682,_683){var _684=function(_685){if(_685){_685=_685.slice();for(var i=0,l=_685.length;i<l;i++){_685[i].call(self,name,_681,_682);}}};_684(_680["_"+name]);if(!_683){_684(_680["*"]);}};}if(!_67f&&typeof name==="function"){_67f=name;name="*";}else{name="_"+name;}var _686=_680[name];if(typeof _686!=="object"){_686=_680[name]=[];}_686.push(_67f);var _687={};_687.unwatch=_687.remove=function(){var _688=_675.indexOf(_686,_67f);if(_688>-1){_686.splice(_688,1);}};return _687;}});});},"esri/tasks/IdentifyTask":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/request","esri/geometry/normalizeUtils","esri/tasks/Task","esri/tasks/IdentifyResult"],function(_689,lang,_68a,has,_68b,_68c,_68d,Task,_68e){var _68f=_689(Task,{declaredClass:"esri.tasks.IdentifyTask",_eventMap:{"complete":["results"]},constructor:function(url,_690){this._url.path+="/identify";this._handler=lang.hitch(this,this._handler);this.gdbVersion=_690&&_690.gdbVersion;this.registerConnectEvents();},__msigns:[{n:"execute",c:3,a:[{i:0,p:["geometry"]}],e:2}],_handler:function(_691,io,_692,_693,dfd){try{var _694=[];_68a.forEach(_691.results,function(_695,i){_694[i]=new _68e(_695);});this._successHandler([_694],"onComplete",_692,dfd);}catch(err){this._errorHandler(err,_693,dfd);}},execute:function(_696,_697,_698,_699){var _69a=_699.assembly,_69b=this._encode(lang.mixin({},this._url.query,{f:"json"},_696.toJson(_69a&&_69a[0]))),_69c=this._handler,_69d=this._errorHandler;if(this.gdbVersion){_69b.gdbVersion=this.gdbVersion;}return _68c({url:this._url.path,content:_69b,callbackParamName:"callback",load:function(r,i){_69c(r,i,_697,_698,_699.dfd);},error:function(r){_69d(r,_698,_699.dfd);}});},onComplete:function(){}});_68d._createWrappers(_68f);if(has("extend-esri")){lang.setObject("tasks.IdentifyTask",_68f,_68b);}return _68f;});},"dijit/form/ComboButton":function(){require({cache:{"url:dijit/form/templates/ComboButton.html":"<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tcellspacing='0' cellpadding='0' role=\"presentation\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonNode\" data-dojo-attach-point=\"buttonNode\" data-dojo-attach-event=\"ondijitclick:_onClick,onkeypress:_onButtonKeyPress\"\n\t\t><div id=\"${id}_button\" class=\"dijitReset dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><div class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitInline dijitButtonText\" id=\"${id}_label\" data-dojo-attach-point=\"containerNode\" role=\"presentation\"></div\n\t\t></div\n\t\t></td\n\t\t><td id=\"${id}_arrow\" class='dijitReset dijitRight dijitButtonNode dijitArrowButton'\n\t\t\tdata-dojo-attach-point=\"_popupStateNode,focusNode,_buttonNode\"\n\t\t\tdata-dojo-attach-event=\"onkeypress:_onArrowKeyPress\"\n\t\t\ttitle=\"${optionsTitle}\"\n\t\t\trole=\"button\" aria-haspopup=\"true\"\n\t\t\t><div class=\"dijitReset dijitArrowButtonInner\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitArrowButtonChar\" role=\"presentation\">&#9660;</div\n\t\t></td\n\t\t><td style=\"display:none !important;\"\n\t\t\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" data-dojo-attach-point=\"valueNode\" role=\"presentation\"\n\t\t/></td></tr></tbody\n></table>\n"}});define("dijit/form/ComboButton",["dojo/_base/declare","dojo/_base/event","dojo/keys","../focus","./DropDownButton","dojo/text!./templates/ComboButton.html"],function(_69e,_69f,keys,_6a0,_6a1,_6a2){return _69e("dijit.form.ComboButton",_6a1,{templateString:_6a2,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{"buttonNode":"dijitButtonNode","titleNode":"dijitButtonContents","_popupStateNode":"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyPress:function(evt){if(evt.charOrCode==keys[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]){_6a0.focus(this._popupStateNode);_69f.stop(evt);}},_onArrowKeyPress:function(evt){if(evt.charOrCode==keys[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]){_6a0.focus(this.titleNode);_69f.stop(evt);}},focus:function(_6a3){if(!this.disabled){_6a0.focus(_6a3=="start"?this.titleNode:this._popupStateNode);}}});});},"dojox/xml/parser":function(){define("dojox/xml/parser",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(dojo){dojo.getObject("xml.parser",true,dojox);dojox.xml.parser.parse=function(str,_6a4){var _6a5=dojo.doc;var doc;_6a4=_6a4||"text/xml";if(str&&dojo.trim(str)&&"DOMParser" in dojo.global){var _6a6=new DOMParser();doc=_6a6.parseFromString(str,_6a4);var de=doc.documentElement;var _6a7="http://www.mozilla.org/newlayout/xml/parsererror.xml";if(de.nodeName=="parsererror"&&de.namespaceURI==_6a7){var _6a8=de.getElementsByTagNameNS(_6a7,"sourcetext")[0];if(_6a8){_6a8=_6a8.firstChild.data;}throw new Error("Error parsing text "+de.firstChild.data+" \n"+_6a8);}return doc;}else{if("ActiveXObject" in dojo.global){var ms=function(n){return "MSXML"+n+".DOMDocument";};var dp=["Microsoft.XMLDOM",ms(6),ms(4),ms(3),ms(2)];dojo.some(dp,function(p){try{doc=new ActiveXObject(p);}catch(e){return false;}return true;});if(str&&doc){doc.async=false;doc.loadXML(str);var pe=doc.parseError;if(pe.errorCode!==0){throw new Error("Line: "+pe.line+"\n"+"Col: "+pe.linepos+"\n"+"Reason: "+pe.reason+"\n"+"Error Code: "+pe.errorCode+"\n"+"Source: "+pe.srcText);}}if(doc){return doc;}}else{if(_6a5.implementation&&_6a5.implementation.createDocument){if(str&&dojo.trim(str)&&_6a5.createElement){var tmp=_6a5.createElement("xml");tmp.innerHTML=str;var _6a9=_6a5.implementation.createDocument("foo","",null);dojo.forEach(tmp.childNodes,function(_6aa){_6a9.importNode(_6aa,true);});return _6a9;}else{return _6a5.implementation.createDocument("","",null);}}}}return null;};dojox.xml.parser.textContent=function(node,text){if(arguments.length>1){var _6ab=node.ownerDocument||dojo.doc;dojox.xml.parser.replaceChildren(node,_6ab.createTextNode(text));return text;}else{if(node.textContent!==undefined){return node.textContent;}var _6ac="";if(node){dojo.forEach(node.childNodes,function(_6ad){switch(_6ad.nodeType){case 1:case 5:_6ac+=dojox.xml.parser.textContent(_6ad);break;case 3:case 2:case 4:_6ac+=_6ad.nodeValue;}});}return _6ac;}};dojox.xml.parser.replaceChildren=function(node,_6ae){var _6af=[];if(dojo.isIE){dojo.forEach(node.childNodes,function(_6b0){_6af.push(_6b0);});}dojox.xml.parser.removeChildren(node);dojo.forEach(_6af,dojo.destroy);if(!dojo.isArray(_6ae)){node.appendChild(_6ae);}else{dojo.forEach(_6ae,function(_6b1){node.appendChild(_6b1);});}};dojox.xml.parser.removeChildren=function(node){var _6b2=node.childNodes.length;while(node.hasChildNodes()){node.removeChild(node.firstChild);}return _6b2;};dojox.xml.parser.innerXML=function(node){if(node.innerXML){return node.innerXML;}else{if(node.xml){return node.xml;}else{if(typeof XMLSerializer!="undefined"){return (new XMLSerializer()).serializeToString(node);}}}return null;};return dojox.xml.parser;});},"esri/undoManager":function(){define(["dojo/_base/declare","dojo/has","esri/kernel","dojo/has!extend-esri?esri/OperationBase"],function(_6b3,has,_6b4){var _6b5=_6b3(null,{declaredClass:"esri.UndoManager",maxOperations:10,canUndo:false,canRedo:false,position:0,length:0,onUndo:function(){},onRedo:function(){},onAdd:function(){},onChange:function(){},constructor:function(_6b6){_6b6=_6b6||{};if(_6b6.maxOperations){this.maxOperations=_6b6.maxOperations;}this._historyStack=[];},add:function(_6b7){if(this.maxOperations>0){while(this._historyStack.length>=this.maxOperations){this._historyStack.shift();}}this._historyStack.splice(this.position,0,_6b7);this.position++;this.clearRedo();this.onAdd();this._checkAvailability();},undo:function(){if(this.position===0){return null;}var _6b8=this.peekUndo();this.position--;if(_6b8){_6b8.performUndo();}this.onUndo();this._checkAvailability();},redo:function(){if(this.position===this._historyStack.length){return null;}var _6b9=this.peekRedo();this.position++;if(_6b9){_6b9.performRedo();}this.onRedo();this._checkAvailability();},_checkAvailability:function(){this.length=this._historyStack.length;if(this.length===0){this.canRedo=false;this.canUndo=false;}else{if(this.position===0){this.canRedo=true;this.canUndo=false;}else{if(this.position===this.length){this.canUndo=true;this.canRedo=false;}else{this.canUndo=true;this.canRedo=true;}}}this.onChange();},clearUndo:function(){this._historyStack.splice(0,this.position);this.position=0;this._checkAvailability();},clearRedo:function(){this._historyStack.splice(this.position,this._historyStack.length-this.position);this.position=this._historyStack.length;this._checkAvailability();},peekUndo:function(){if(this._historyStack.length>0&&this.position>0){return this.get(this.position-1);}},peekRedo:function(){if(this._historyStack.length>0&&this.position<this._historyStack.length){return this.get(this.position);}},get:function(idx){return this._historyStack[idx];},remove:function(idx){if(this._historyStack.length>0){this._historyStack.splice(idx,1);if(this.position>0){if(idx<this.position){this.position--;}}this._checkAvailability();}},destroy:function(){this._historyStack=null;}});if(has("extend-esri")){_6b4.UndoManager=_6b5;}return _6b5;});},"esri/virtualearth/VEGeocodeResult":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/geometry/Point","esri/geometry/Extent","esri/virtualearth/VEAddress"],function(_6ba,lang,has,_6bb,_6bc,_6bd,_6be){var VEGR=_6ba(null,{declaredClass:"esri.virtualearth.VEGeocodeResult",constructor:function(json){lang.mixin(this,{address:null,bestView:null,calculationMethod:null,confidence:null,displayName:null,entityType:null,location:null,matchCodes:null},json);if(this.address){this.address=new _6be(this.address);}if(this.bestView){this.bestView=new _6bd(this.bestView);}if(this.locationArray){this.calculationMethod=this.locationArray[0].calculationMethod;this.location=new _6bc(this.locationArray[0]);}}});if(has("extend-esri")){lang.setObject("virtualearth.VEGeocodeResult",VEGR,_6bb);}return VEGR;});},"esri/geometry/normalizeUtils":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","dojo/has","esri/kernel","esri/config","esri/deferredUtils","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/webMercatorUtils","esri/geometry/jsonUtils"],function(_6bf,lang,_6c0,has,_6c1,_6c2,_6c3,_6c4,_6c5,_6c6,_6c7){function _6c8(_6c9,_6ca){return Math.ceil((_6c9-_6ca)/(_6ca*2));};function _6cb(_6cc,_6cd){var _6ce=_6cc.paths||_6cc.rings,i,j,il=_6ce.length,jl;for(i=0;i<il;i++){var _6cf=_6ce[i];jl=_6cf.length;for(j=0;j<jl;j++){var _6d0=_6cc.getPoint(i,j);_6cc.setPoint(i,j,_6d0.offset(_6cd,0));}}return _6cc;};function _6d1(geom,_6d2){if(!(geom instanceof _6c4||geom instanceof _6c5)){var msg="_straightLineDensify: the input geometry is neither polyline nor polygon";console.error(msg);throw new Error(msg);}var _6d3=geom instanceof _6c4,_6d4=_6d3?geom.paths:geom.rings,_6d5=[],_6d6;_6bf.forEach(_6d4,function(ring){_6d5.push(_6d6=[]);_6d6.push([ring[0][0],ring[0][1]]);var x1,y1,x2,y2;var i,j,_6d7,_6d8,_6d9,_6da,xj,yj;for(i=0;i<ring.length-1;i++){x1=ring[i][0];y1=ring[i][1];x2=ring[i+1][0];y2=ring[i+1][1];_6d7=Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1));_6d8=(y2-y1)/_6d7;_6d9=(x2-x1)/_6d7;_6da=_6d7/_6d2;if(_6da>1){for(j=1;j<=_6da-1;j++){var _6db=j*_6d2;xj=_6d9*_6db+x1;yj=_6d8*_6db+y1;_6d6.push([xj,yj]);}var _6dc=(_6d7+Math.floor(_6da-1)*_6d2)/2;xj=_6d9*_6dc+x1;yj=_6d8*_6dc+y1;_6d6.push([xj,yj]);}_6d6.push([x2,y2]);}});if(_6d3){return new _6c4({paths:_6d5,spatialReference:geom.spatialReference});}else{return new _6c5({rings:_6d5,spatialReference:geom.spatialReference});}};function _6dd(_6de,_6df,_6e0){var _6e1=1000000;if(_6df){var _6e2=_6d1(_6de,_6e1);_6de=_6c6.webMercatorToGeographic(_6e2,true);}if(_6e0){_6de=_6cb(_6de,_6e0);}return _6de;};function _6e3(_6e4,maxX,minX){var _6e5=_6e4.x||_6e4[0];var _6e6;if(_6e5>maxX){_6e6=_6c8(_6e5,maxX);if(_6e4.x){_6e4=_6e4.offset(_6e6*(-2*maxX),0);}else{_6e4[0]=_6e5+(_6e6*(-2*maxX));}}else{if(_6e5<minX){_6e6=_6c8(_6e5,minX);if(_6e4.x){_6e4=_6e4.offset(_6e6*(-2*minX),0);}else{_6e4[0]=_6e5+(_6e6*(-2*minX));}}}return _6e4;};function _6e7(_6e8,_6e9){var _6ea=-1;_6bf.forEach(_6e9.cutIndexes,function(_6eb,i){var _6ec=_6e9.geometries[i];var _6ed=_6ec.rings||_6ec.paths;_6bf.forEach(_6ed,function(_6ee,_6ef){_6bf.some(_6ee,function(_6f0){if(_6f0[0]<180){return true;}else{var _6f1=0,j,jl=_6ee.length,ptX;for(j=0;j<jl;j++){ptX=_6ee[j][0];_6f1=ptX>_6f1?ptX:_6f1;}var _6f2=_6c8(_6f1,180),_6f3=_6f2*-360,_6f4,_6f5=_6ee.length;for(_6f4=0;_6f4<_6f5;_6f4++){var _6f6=_6ec.getPoint(_6ef,_6f4);_6ec.setPoint(_6ef,_6f4,_6f6.offset(_6f3,0));}return true;}});});if(_6eb===_6ea){if(_6ec.rings){_6bf.forEach(_6ec.rings,function(ring,j){_6e8[_6eb]=_6e8[_6eb].addRing(ring);});}else{_6bf.forEach(_6ec.paths,function(path,j){_6e8[_6eb]=_6e8[_6eb].addPath(path);});}}else{_6ea=_6eb;_6e8[_6eb]=_6ec;}});return _6e8;};function _6f7(_6f8,_6f9,_6fa,_6fb){var dfd=new _6c0();dfd.addCallbacks(_6fa,_6fb);var _6fc=[],_6fd=[],_6fe,info,_6ff,maxX,minX,wkid,_700,_701,_702=0;_6bf.forEach(_6f8,function(_703){if(!_703){_6fc.push(_703);return;}if(!_6fe){_6fe=_703.spatialReference;info=_6fe._getInfo();_6ff=_6fe._isWebMercator();maxX=_6ff?20037508.342788905:180;minX=_6ff?-20037508.342788905:-180;wkid=_6ff?102100:4326;_700=new _6c4({"paths":[[[maxX,minX],[maxX,maxX]]],"spatialReference":{"wkid":wkid}});_701=new _6c4({"paths":[[[minX,minX],[minX,maxX]]],"spatialReference":{"wkid":wkid}});}if(!info){_6fc.push(_703);return;}var _704=_6c7.fromJson(_703.toJson()),_705=_703.getExtent();if(_703.type==="point"){_6fc.push(_6e3(_704,maxX,minX));}else{if(_703.type==="multipoint"){_704.points=_6bf.map(_704.points,function(_706){return _6e3(_706,maxX,minX);});_6fc.push(_704);}else{if(_703.type==="extent"){var _707=_705._normalize(null,null,info);_6fc.push(_707.rings?new _6c5(_707):_707);}else{var _708=_6c8(_705.xmin,minX),_709=_708*(2*maxX);_704=(_709===0)?_704:_6cb(_704,_709);_705=_705.offset(_709,0);if(_705.intersects(_700)&&(_705.xmax!==maxX)){_702=(_705.xmax>_702)?_705.xmax:_702;_704=_6dd(_704,_6ff);_6fd.push(_704);_6fc.push("cut");}else{if(_705.intersects(_701)&&(_705.xmin!==minX)){_702=(_705.xmax*(2*maxX)>_702)?_705.xmax*(2*maxX):_702;_704=_6dd(_704,_6ff,360);_6fd.push(_704);_6fc.push("cut");}else{_6fc.push(_704);}}}}}});var _70a=new _6c4(),_70b=_6c8(_702,maxX),_70c=-90,_70d=_70b;while(_70b>0){var _70e=-180+(360*_70b);_70a.addPath([[_70e,_70c],[_70e,_70c*-1]]);_70c=_70c*-1;_70b--;}if(_6fd.length>0&&_70d>0){if(_6f9){_6f9.cut(_6fd,_70a,function(_70f){_6fd=_6e7(_6fd,_70f);var _710=[];_6bf.forEach(_6fc,function(_711,i){if(_711==="cut"){var _712=_6fd.shift();if((_6f8[i].rings)&&(_6f8[i].rings.length>1)&&(_712.rings.length>=_6f8[i].rings.length)){_6fc[i]="simplify";_710.push(_712);}else{_6fc[i]=(_6ff===true)?_6c6.geographicToWebMercator(_712):_712;}}});if(_710.length>0){_6f9.simplify(_710,function(_713){_6bf.forEach(_6fc,function(_714,i){if(_714==="simplify"){_6fc[i]=(_6ff===true)?_6c6.geographicToWebMercator(_713.shift()):_713.shift();}});dfd.callback(_6fc);},function(_715){dfd.errback(_715);});}else{dfd.callback(_6fc);}},function(_716){dfd.errback(_716);});}else{dfd.errback(new Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing."));}}else{_6bf.forEach(_6fc,function(_717,i){if(_717==="cut"){var _718=_6fd.shift();_6fc[i]=(_6ff===true)?_6c6.geographicToWebMercator(_718):_718;}});dfd.callback(_6fc);}return dfd;};function _719(_71a,_71b,_71c,_71d){var flag=false,_71e;if(lang.isObject(_71a)&&_71a){if(lang.isArray(_71a)){if(_71a.length){_71e=_71a[0]&&_71a[0].declaredClass;if(_71e&&_71e.indexOf("Graphic")!==-1){_71a=_6bf.map(_71a,function(_71f){return _71f.geometry;});flag=_71a.length?true:false;}else{if(_71e&&_71e.indexOf("esri.geometry.")!==-1){flag=true;}}}}else{_71e=_71a.declaredClass;if(_71e&&_71e.indexOf("FeatureSet")!==-1){_71a=_6bf.map(_71a.features||[],function(_720){return _720.geometry;});flag=_71a.length?true:false;}else{if(_71e&&_71e.indexOf("esri.geometry.")!==-1){flag=true;}}}}if(flag){_71b.push({index:_71c,property:_71d,value:_71a});}};function _721(_722,_723){var _724=[];_6bf.forEach(_723,function(_725){var _726=_725.i,arg=_722[_726],_727=_725.p,prop;if(!lang.isObject(arg)||!arg){return;}if(_727){if(_727[0]==="*"){for(prop in arg){if(arg.hasOwnProperty(prop)){_719(arg[prop],_724,_726,prop);}}}else{_6bf.forEach(_727,function(prop){_719(lang.getObject(prop,false,arg),_724,_726,prop);});}}else{_719(arg,_724,_726);}});return _724;};function _728(_729,_72a){var idx=0,_72b={};_6bf.forEach(_72a,function(comp){var _72c=comp.index,_72d=comp.property,_72e=comp.value,len=_72e.length||1;var _72f=_729.slice(idx,idx+len);if(!lang.isArray(_72e)){_72f=_72f[0];}idx+=len;delete comp.value;if(_72d){_72b[_72c]=_72b[_72c]||{};_72b[_72c][_72d]=_72f;}else{_72b[_72c]=_72f;}});return _72b;};function _730(_731){var _732=(lang.isObject(_731))?_731.prototype:lang.getObject(_731+".prototype");_6bf.forEach(_732.__msigns,function(sig){var _733=_732[sig.n];_732[sig.n]=function(){var self=this,_734=[],i,_735=new _6c0(_6c3._dfdCanceller);if(sig.f){_6c3._fixDfd(_735);}for(i=0;i<sig.c;i++){_734[i]=arguments[i];}var _736={dfd:_735};_734.push(_736);var _737,_738=[],_739;if(self.normalization&&!self._isTable){_737=_721(_734,sig.a);_6bf.forEach(_737,function(comp){_738=_738.concat(comp.value);});if(_738.length){_739=_6f7(_738,_6c2.defaults.geometryService);}}if(_739){_735._pendingDfd=_739;_739.addCallbacks(function(_73a){if(_735.canceled){return;}_736.assembly=_728(_73a,_737);_735._pendingDfd=_733.apply(self,_734);},function(err){var _73b=self.declaredClass;if(_73b&&_73b.indexOf("FeatureLayer")!==-1){self._resolve([err],null,_734[sig.e],_735,true);}else{self._errorHandler(err,_734[sig.e],_735);}});}else{_735._pendingDfd=_733.apply(self,_734);}return _735;};});};var _73c={normalizeCentralMeridian:_6f7,_foldCutResults:_6e7,_prepareGeometryForCut:_6dd,_offsetMagnitude:_6c8,_pointNormalization:_6e3,_updatePolyGeometry:_6cb,_straightLineDensify:_6d1,_createWrappers:_730,_disassemble:_721,_addToBucket:_719,_reassemble:_728};if(has("extend-esri")){lang.mixin(lang.getObject("geometry",true,_6c1),_73c);}return _73c;});},"esri/tasks/IdentifyResult":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/graphic","esri/geometry/jsonUtils"],function(_73d,lang,has,_73e,_73f,_740){var _741=_73d(null,{declaredClass:"esri.tasks.IdentifyResult",constructor:function(json){lang.mixin(this,json);this.feature=new _73f(json.geometry?_740.fromJson(json.geometry):null,null,json.attributes);delete this.geometry;delete this.attributes;}});if(has("extend-esri")){lang.setObject("tasks.IdentifyResult",_741,_73e);}return _741;});},"esri/tasks/DataFile":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_742,lang,has,_743){var _744=_742(null,{declaredClass:"esri.tasks.DataFile",constructor:function(json){if(json){lang.mixin(this,json);}},url:null,itemID:null,toJson:function(){var json={};if(this.url){json.url=this.url;}if(this.itemID){json.itemID=this.itemID;}return json;}});if(has("extend-esri")){lang.setObject("tasks.DataFile",_744,_743);}return _744;});},"esri/geometry/Extent":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/SpatialReference","esri/geometry/Geometry","esri/geometry/Point","esri/geometry/webMercatorUtils","esri/geometry/mathUtils"],function(_745,_746,lang,has,_747,_748,_749,_74a,_74b,_74c,_74d){var _74e={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0};var _74f=_745(_74a,{declaredClass:"esri.geometry.Extent",constructor:function(xmin,ymin,xmax,ymax,_750){lang.mixin(this,_74e);if(lang.isObject(xmin)){lang.mixin(this,xmin);if(this.spatialReference){this.spatialReference=new _749(this.spatialReference);}}else{this.update(xmin,ymin,xmax,ymax,_750);}this.verifySR();},getWidth:function(){return Math.abs(this.xmax-this.xmin);},getHeight:function(){return Math.abs(this.ymax-this.ymin);},getCenter:function(){return new _74b((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference);},centerAt:function(_751){var _752=this.getCenter(),dx=_751.x-_752.x,dy=_751.y-_752.y;return new _74f(this.xmin+dx,this.ymin+dy,this.xmax+dx,this.ymax+dy,this.spatialReference);},update:function(xmin,ymin,xmax,ymax,_753){this.xmin=xmin;this.ymin=ymin;this.xmax=xmax;this.ymax=ymax;this.spatialReference=_753;return this;},offset:function(ox,oy){return new _74f(this.xmin+ox,this.ymin+oy,this.xmax+ox,this.ymax+oy,this.spatialReference);},expand:function(_754){var _755=(1-_754)/2,_756=this.getWidth()*_755,_757=this.getHeight()*_755;return new _74f(this.xmin+_756,this.ymin+_757,this.xmax-_756,this.ymax-_757,this.spatialReference);},intersects:function(_758){var type=_758.type,_759=this.spatialReference,_75a=_758.spatialReference;if(_759&&_75a&&!_759.equals(_75a)&&_759._canProject(_75a)){_758=_759.isWebMercator()?_74c.geographicToWebMercator(_758):_74c.webMercatorToGeographic(_758,true);}switch(type){case "point":return this.contains(_758);case "multipoint":return this._intersectsMultipoint(_758);case "extent":return this._intersectsExtent(_758);case "polygon":return this._intersectsPolygon(_758);case "polyline":return this._intersectsPolyline(_758);}},_intersectsMultipoint:function(_75b){var len=_75b.points.length,i;for(i=0;i<len;i++){if(this.contains(_75b.getPoint(i))){return true;}}return false;},_intersectsExtent:function(_75c){var xmin,ymin,_75d,_75e,_75f=false;if(this.xmin<=_75c.xmin){xmin=_75c.xmin;if(this.xmax<xmin){_75f=true;}else{_75d=Math.min(this.xmax,_75c.xmax)-xmin;}}else{xmin=this.xmin;if(_75c.xmax<xmin){_75f=true;}else{_75d=Math.min(this.xmax,_75c.xmax)-xmin;}}if(this.ymin<=_75c.ymin){ymin=_75c.ymin;if(this.ymax<ymin){_75f=true;}else{_75e=Math.min(this.ymax,_75c.ymax)-ymin;}}else{ymin=this.ymin;if(_75c.ymax<ymin){_75f=true;}else{_75e=Math.min(this.ymax,_75c.ymax)-ymin;}}if(_75f){return null;}return new _74f(xmin,ymin,xmin+_75d,ymin+_75e,this.spatialReference);},_intersectsPolygon:function(_760){var _761=[this.xmin,this.ymax],_762=[this.xmax,this.ymax],_763=[this.xmin,this.ymin],_764=[this.xmax,this.ymin],_765=[_761,_762,_763,_764],_766=[[_763,_761],[_761,_762],[_762,_764],[_764,_763]],i,j,_767=_760.rings,_768=_767.length,ring,len,_769=new _74b(0,0,this.spatialReference);len=_765.length;for(i=0;i<len;i++){_769.update(_765[i][0],_765[i][1]);if(_760.contains(_769)){return true;}}_769.setSpatialReference(_760.spatialReference);var pi,pj;for(i=0;i<_768;i++){ring=_767[i];len=ring.length;if(!len){continue;}pi=ring[0];_769.update(pi[0],pi[1]);if(this.contains(_769)){return true;}for(j=1;j<len;j++){pj=ring[j];_769.update(pj[0],pj[1]);if(this.contains(_769)||this._intersectsLine([pi,pj],_766)){return true;}pi=pj;}}return false;},_intersectsPolyline:function(_76a){var _76b=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]];var i,j,_76c=_76a.paths,_76d=_76c.length,path,len;var pi,pj,_76e=new _74b(0,0,_76a.spatialReference);for(i=0;i<_76d;i++){path=_76c[i];len=path.length;if(!len){continue;}pi=path[0];_76e.update(pi[0],pi[1]);if(this.contains(_76e)){return true;}for(j=1;j<len;j++){pj=path[j];_76e.update(pj[0],pj[1]);if(this.contains(_76e)||this._intersectsLine([pi,pj],_76b)){return true;}pi=pj;}}return false;},_intersectsLine:function(line,_76f){var _770=_74d._getLineIntersection2,i,len=_76f.length;for(i=0;i<len;i++){if(_770(line,_76f[i])){return true;}}return false;},contains:function(_771){if(!_771){return false;}var type=_771.type;if(type==="point"){var _772=this.spatialReference,_773=_771.spatialReference,_774,x=_771.x,y=_771.y;if(_772&&_773&&!_772.equals(_773)&&_772._canProject(_773)){_774=_772.isWebMercator()?_74b.lngLatToXY(x,y):_74b.xyToLngLat(x,y,true);x=_774[0];y=_774[1];}return (x>=this.xmin&&x<=this.xmax&&y>=this.ymin&&y<=this.ymax);}else{if(type==="extent"){return this._containsExtent(_771);}}return false;},_containsExtent:function(_775){var xmin=_775.xmin,ymin=_775.ymin,xmax=_775.xmax,ymax=_775.ymax,sr=_775.spatialReference,pt1=new _74b(xmin,ymin,sr),pt2=new _74b(xmin,ymax,sr),pt3=new _74b(xmax,ymax,sr),pt4=new _74b(xmax,ymin,sr);if(this.contains(pt1)&&this.contains(pt2)&&this.contains(pt3)&&this.contains(pt4)){return true;}return false;},union:function(_776){return new _74f(Math.min(this.xmin,_776.xmin),Math.min(this.ymin,_776.ymin),Math.max(this.xmax,_776.xmax),Math.max(this.ymax,_776.ymax),this.spatialReference);},getExtent:function(){var sr=this.spatialReference;return new _74f(this.xmin,this.ymin,this.xmax,this.ymax,sr&&new _749(sr.toJson()));},_shiftCM:function(info){if(!this._shifted){var _777=new _74f(this.toJson()),sr=_777.spatialReference;info=info||sr._getInfo();if(info){var _778=this._getCM(info);if(_778){var _779=sr._isWebMercator()?_74c.webMercatorToGeographic(_778):_778;_777.xmin-=_778.x;_777.xmax-=_778.x;if(!sr._isWebMercator()){_779.x=this._normalizeX(_779.x,info).x;}_777.spatialReference.wkt=_748.substitute({Central_Meridian:_779.x},sr.wkid===4326?info.altTemplate:info.wkTemplate);_777.spatialReference.wkid=null;}}this._shifted=_777;}return this._shifted;},_getCM:function(info){var _77a,_77b=info.valid[0],_77c=info.valid[1],xmin=this.xmin,xmax=this.xmax;var _77d=(xmin>=_77b&&xmin<=_77c),_77e=(xmax>=_77b&&xmax<=_77c);if(!(_77d&&_77e)){_77a=this.getCenter();}return _77a;},_normalize:function(_77f,_780,info){var _781=new _74f(this.toJson()),sr=_781.spatialReference;if(sr){info=info||sr._getInfo();if(info){var _782=_746.map(this._getParts(info),function(part){return part.extent;});if(_782.length>2){if(_77f){return this._shiftCM(info);}else{return _781.update(info.valid[0],_781.ymin,info.valid[1],_781.ymax,sr);}}else{if(_782.length===2){if(_77f){return this._shiftCM(info);}else{return _780?_782:{"rings":_746.map(_782,function(_783){return [[_783.xmin,_783.ymin],[_783.xmin,_783.ymax],[_783.xmax,_783.ymax],[_783.xmax,_783.ymin],[_783.xmin,_783.ymin]];}),"spatialReference":sr};}}else{return _782[0]||_781;}}}}return _781;},_getParts:function(info){if(!this._parts){var xmin=this.xmin,xmax=this.xmax,ymin=this.ymin,ymax=this.ymax,sr=this.spatialReference,_784=this.getWidth(),_785=xmin,_786=xmax,_787=0,_788=0,nrml,_789=[],_78a,_78b,_78c;info=info||sr._getInfo();_78a=info.valid[0];_78b=info.valid[1];nrml=this._normalizeX(xmin,info);xmin=nrml.x;_787=nrml.frameId;nrml=this._normalizeX(xmax,info);xmax=nrml.x;_788=nrml.frameId;_78c=(xmin===xmax&&_784>0);if(_784>(2*_78b)){var E1=new _74f(_785<_786?xmin:xmax,ymin,_78b,ymax,sr),E2=new _74f(_78a,ymin,_785<_786?xmax:xmin,ymax,sr),E3=new _74f(0,ymin,_78b,ymax,sr),E4=new _74f(_78a,ymin,0,ymax,sr),k,_78d=[],_78e=[];if(E1.contains(E3)){_78d.push(_787);}if(E1.contains(E4)){_78e.push(_787);}if(E2.contains(E3)){_78d.push(_788);}if(E2.contains(E4)){_78e.push(_788);}for(k=_787+1;k<_788;k++){_78d.push(k);_78e.push(k);}_789.push({extent:E1,frameIds:[_787]},{extent:E2,frameIds:[_788]},{extent:E3,frameIds:_78d},{extent:E4,frameIds:_78e});}else{if((xmin>xmax)||_78c){_789.push({extent:new _74f(xmin,ymin,_78b,ymax,sr),frameIds:[_787]},{extent:new _74f(_78a,ymin,xmax,ymax,sr),frameIds:[_788]});}else{_789.push({extent:new _74f(xmin,ymin,xmax,ymax,sr),frameIds:[_787]});}}this._parts=_789;}return this._parts;},_normalizeX:function(x,info){var _78f=0,_790=info.valid[0],_791=info.valid[1],_792=2*_791,_793;if(x>_791){_793=Math.ceil(Math.abs(x-_791)/_792);x-=(_793*_792);_78f=_793;}else{if(x<_790){_793=Math.ceil(Math.abs(x-_790)/_792);x+=(_793*_792);_78f=-_793;}}return {x:x,frameId:_78f};},toJson:function(){var json={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});_74f.defaultProps=_74e;if(has("extend-esri")){lang.setObject("geometry.Extent",_74f,_747);_747.geometry.defaultExtent=_74e;}return _74f;});},"dijit/form/_TextBoxMixin":function(){define("dijit/form/_TextBoxMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/on","../main"],function(_794,_795,dom,_796,keys,lang,on,_797){var _798=_795("dijit.form._TextBoxMixin",null,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",selectOnClick:false,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints);},_setValueAttr:function(_799,_79a,_79b){var _79c;if(_799!==undefined){_79c=this.filter(_799);if(typeof _79b!="string"){if(_79c!==null&&((typeof _79c!="number")||!isNaN(_79c))){_79b=this.filter(this.format(_79c,this.constraints));}else{_79b="";}}}if(_79b!=null&&((typeof _79b)!="number"||!isNaN(_79b))&&this.textbox.value!=_79b){this.textbox.value=_79b;this._set("displayedValue",this.get("displayedValue"));}if(this.textDir=="auto"){this.applyTextDir(this.focusNode,_79b);}this.inherited(arguments,[_79c,_79a]);},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value);},_setDisplayedValueAttr:function(_79d){if(_79d==null){_79d="";}else{if(typeof _79d!="string"){_79d=String(_79d);}}this.textbox.value=_79d;this._setValueAttr(this.get("value"),undefined);this._set("displayedValue",this.get("displayedValue"));if(this.textDir=="auto"){this.applyTextDir(this.focusNode,_79d);}},format:function(_79e){return _79e==null?"":(_79e.toString?_79e.toString():_79e);},parse:function(_79f){return _79f;},_refreshState:function(){},onInput:function(){},__skipInputEvent:false,_onInput:function(evt){if(this.textDir=="auto"){this.applyTextDir(this.focusNode,this.focusNode.value);}this._processInput(evt);},_processInput:function(evt){this._refreshState();this._set("displayedValue",this.get("displayedValue"));},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);var _7a0=function(e){var _7a1;if(e.type=="keydown"){_7a1=e.keyCode;switch(_7a1){case keys.SHIFT:case keys.ALT:case keys.CTRL:case keys.META:case keys.CAPS_LOCK:case keys.NUM_LOCK:case keys.SCROLL_LOCK:return;}if(!e.ctrlKey&&!e.metaKey&&!e.altKey){switch(_7a1){case keys.NUMPAD_0:case keys.NUMPAD_1:case keys.NUMPAD_2:case keys.NUMPAD_3:case keys.NUMPAD_4:case keys.NUMPAD_5:case keys.NUMPAD_6:case keys.NUMPAD_7:case keys.NUMPAD_8:case keys.NUMPAD_9:case keys.NUMPAD_MULTIPLY:case keys.NUMPAD_PLUS:case keys.NUMPAD_ENTER:case keys.NUMPAD_MINUS:case keys.NUMPAD_PERIOD:case keys.NUMPAD_DIVIDE:return;}if((_7a1>=65&&_7a1<=90)||(_7a1>=48&&_7a1<=57)||_7a1==keys.SPACE){return;}var _7a2=false;for(var i in keys){if(keys[i]===e.keyCode){_7a2=true;break;}}if(!_7a2){return;}}}_7a1=e.charCode>=32?String.fromCharCode(e.charCode):e.charCode;if(!_7a1){_7a1=(e.keyCode>=65&&e.keyCode<=90)||(e.keyCode>=48&&e.keyCode<=57)||e.keyCode==keys.SPACE?String.fromCharCode(e.keyCode):e.keyCode;}if(!_7a1){_7a1=229;}if(e.type=="keypress"){if(typeof _7a1!="string"){return;}if((_7a1>="a"&&_7a1<="z")||(_7a1>="A"&&_7a1<="Z")||(_7a1>="0"&&_7a1<="9")||(_7a1===" ")){if(e.ctrlKey||e.metaKey||e.altKey){return;}}}if(e.type=="input"){if(this.__skipInputEvent){this.__skipInputEvent=false;return;}}else{this.__skipInputEvent=true;}var faux={faux:true},attr;for(attr in e){if(attr!="layerX"&&attr!="layerY"){var v=e[attr];if(typeof v!="function"&&typeof v!="undefined"){faux[attr]=v;}}}lang.mixin(faux,{charOrCode:_7a1,_wasConsumed:false,preventDefault:function(){faux._wasConsumed=true;e.preventDefault();},stopPropagation:function(){e.stopPropagation();}});if(this.onInput(faux)===false){faux.preventDefault();faux.stopPropagation();}if(faux._wasConsumed){return;}this.defer(function(){this._onInput(faux);});};this.own(on(this.textbox,"keydown, keypress, paste, cut, input, compositionend",lang.hitch(this,_7a0)));},_blankValue:"",filter:function(val){if(val===null){return this._blankValue;}if(typeof val!="string"){return val;}if(this.trim){val=lang.trim(val);}if(this.uppercase){val=val.toUpperCase();}if(this.lowercase){val=val.toLowerCase();}if(this.propercase){val=val.replace(/[^\s]+/g,function(word){return word.substring(0,1).toUpperCase()+word.substring(1);});}return val;},_setBlurValue:function(){this._setValueAttr(this.get("value"),true);},_onBlur:function(e){if(this.disabled){return;}this._setBlurValue();this.inherited(arguments);},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd;},_onFocus:function(by){if(this.disabled||this.readOnly){return;}if(this.selectOnClick&&by=="mouse"){this._selectOnClickHandle=this.connect(this.domNode,"onmouseup",function(){this.disconnect(this._selectOnClickHandle);this._selectOnClickHandle=null;if(!this._isTextSelected()){_798.selectInputText(this.textbox);}});this.defer(function(){if(this._selectOnClickHandle){this.disconnect(this._selectOnClickHandle);this._selectOnClickHandle=null;}},500);}this.inherited(arguments);this._refreshState();},reset:function(){this.textbox.value="";this.inherited(arguments);},_setTextDirAttr:function(_7a3){if(!this._created||this.textDir!=_7a3){this._set("textDir",_7a3);this.applyTextDir(this.focusNode,this.focusNode.value);}}});_798._setSelectionRange=_797._setSelectionRange=function(_7a4,_7a5,stop){if(_7a4.setSelectionRange){_7a4.setSelectionRange(_7a5,stop);}};_798.selectInputText=_797.selectInputText=function(_7a6,_7a7,stop){_7a6=dom.byId(_7a6);if(isNaN(_7a7)){_7a7=0;}if(isNaN(stop)){stop=_7a6.value?_7a6.value.length:0;}try{_7a6.focus();_798._setSelectionRange(_7a6,_7a7,stop);}catch(e){}};return _798;});},"esri/layers/ArcGISTiledMapServiceLayer":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","dojo/io-query","esri/kernel","esri/urlUtils","esri/SpatialReference","esri/layers/TiledMapServiceLayer","esri/layers/ArcGISMapServiceLayer","esri/layers/TileInfo","esri/layers/TimeInfo"],function(_7a8,_7a9,lang,_7aa,_7ab,has,ioq,_7ac,_7ad,_7ae,_7af,_7b0,_7b1,_7b2){var _7b3=_7a9([_7af,_7b0],{declaredClass:"esri.layers.ArcGISTiledMapServiceLayer",_agolAttrs:["World_Topo_Map","World_Street_Map","Ocean_Basemap"],constructor:function(url,_7b4){if(_7b4){if(_7b4.roundrobin){_7a8.deprecated(this.declaredClass+" : Constructor option 'roundrobin' deprecated. Use option 'tileServers'.");_7b4.tileServers=_7b4.roundrobin;}this._setTileServers(_7b4.tileServers);this._loadCallback=_7b4.loadCallback;}this._params=lang.mixin({},this._url.query);this._initLayer=lang.hitch(this,this._initLayer);var _7b5=_7b4&&_7b4.resourceInfo;if(_7b5){this._initLayer(_7b5);}else{this._load=lang.hitch(this,this._load);this._load();}},_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_setTileServers:function(list){if(list&&list.length>0){this.tileServers=list;var i,il=list.length;for(i=0;i<il;i++){list[i]=_7ad.urlToObject(list[i]).path;}}},_initLayer:function(_7b6,io){this.inherited(arguments);this.resourceInfo=_7ab.toJson(_7b6);this.tileInfo=new _7b1(_7b6.tileInfo);if(!this.spatialReference&&this.tileInfo.spatialReference){this.spatialReference=new _7ae(this.tileInfo.spatialReference.toJson());}this.isPNG32=this.tileInfo.format==="PNG24"||this.tileInfo.format==="PNG32";if(_7b6.timeInfo){this.timeInfo=new _7b2(_7b6.timeInfo);}var path=this._url.path,_7b7=this._loadCallback,_7b8=(window.location.protocol==="file:")?"http:":window.location.protocol,_7b9=path.match(/^https?\:\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+)\/mapserver/i),_7ba=_7b9&&_7b9[2];if(!this.tileServers){if(_7b6.tileServers){this._setTileServers(_7b6.tileServers);}else{var _7bb=(path.search(/^https?\:\/\/server\.arcgisonline\.com/i)!==-1),_7bc=(path.search(/^https?\:\/\/services\.arcgisonline\.com/i)!==-1);if(_7bb||_7bc){this._setTileServers([path,path.replace((_7bb?/server\.arcgisonline/i:/services\.arcgisonline/i),(_7bb?"services.arcgisonline":"server.arcgisonline"))]);}}}if(_7ba&&_7aa.indexOf(this._agolAttrs,_7ba)!==-1){this.hasAttributionData=true;this.attributionDataUrl=this.attributionDataUrl||(_7b8+"//static.arcgis.com/attribution/"+_7ba);}this.loaded=true;this.onLoad(this);if(_7b7){delete this._loadCallback;_7b7(this);}},getTileUrl:function(_7bd,row,col){var ts=this.tileServers,_7be=this._url.query,iurl=(ts?ts[row%ts.length]:this._url.path)+"/tile/"+_7bd+"/"+row+"/"+col;if(this._resampling){iurl+="?blankTile=false";}if(_7be){if(this._resampling){iurl+=("&"+ioq.objectToQuery(_7be));}else{iurl+=("?"+ioq.objectToQuery(_7be));}}var _7bf=this._getToken();if(_7bf&&(!_7be||!_7be.token)){iurl+=(iurl.indexOf("?")===-1?"?":"&")+"token="+_7bf;}return _7ad.addProxy(iurl);}});if(has("extend-esri")){lang.setObject("layers.ArcGISTiledMapServiceLayer",_7b3,_7ac);}return _7b3;});},"esri/geometry/Geometry":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/SpatialReference"],function(_7c0,lang,has,_7c1,_7c2){var _7c3=_7c0(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,setSpatialReference:function(sr){this.spatialReference=sr;return this;},verifySR:function(){if(!this.spatialReference){this.setSpatialReference(new _7c2(4326));}},getExtent:function(){return null;}});if(has("extend-esri")){lang.setObject("geometry.Geometry",_7c3,_7c1);}return _7c3;});},"dijit/_base/window":function(){define("dijit/_base/window",["dojo/window","../main"],function(_7c4,_7c5){_7c5.getDocumentWindow=function(doc){return _7c4.get(doc);};});},"esri/tasks/Date":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/date/locale","dojo/has","esri/kernel"],function(_7c6,lang,_7c7,has,_7c8){var _7c9=_7c6(null,{declaredClass:"esri.tasks.Date",constructor:function(json){if(json){if(json.format){this.format=json.format;}this.date=_7c7.parse(json.date,{selector:"date",datePattern:this.format});}},date:new Date(),format:"EEE MMM dd HH:mm:ss zzz yyyy",toJson:function(){return {date:_7c7.format(this.date,{selector:"date",datePattern:this.format}),format:this.format};}});if(has("extend-esri")){lang.setObject("tasks.Date",_7c9,_7c8);}return _7c9;});},"esri/tasks/IdentifyParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/layerUtils","esri/geometry/jsonUtils","esri/geometry/scaleUtils"],function(_7ca,lang,_7cb,_7cc,has,_7cd,_7ce,_7cf,_7d0){var _7d1=_7ca(null,{declaredClass:"esri.tasks.IdentifyParameters",constructor:function(){this.layerOption=_7d1.LAYER_OPTION_TOP;},geometry:null,spatialReference:null,layerIds:null,tolerance:null,returnGeometry:false,mapExtent:null,width:400,height:400,dpi:96,layerDefinitions:null,timeExtent:null,layerTimeOptions:null,dynamicLayerInfos:null,toJson:function(_7d2){var g=_7d2&&_7d2["geometry"]||this.geometry,ext=this.mapExtent,sr=this.spatialReference,_7d3=this.layerIds,json={geometry:g,tolerance:this.tolerance,returnGeometry:this.returnGeometry,mapExtent:ext,imageDisplay:this.width+","+this.height+","+this.dpi,maxAllowableOffset:this.maxAllowableOffset};if(g){json.geometryType=_7cf.getJsonType(g);}if(sr!==null){json.sr=sr.wkid||_7cc.toJson(sr.toJson());}else{if(g){json.sr=g.spatialReference.wkid||_7cc.toJson(g.spatialReference.toJson());}else{if(ext){json.sr=ext.spatialReference.wkid||_7cc.toJson(ext.spatialReference.toJson());}}}json.layers=this.layerOption;if(_7d3){json.layers+=":"+_7d3.join(",");}json.layerDefs=_7ce._serializeLayerDefinitions(this.layerDefinitions);var _7d4=this.timeExtent;json.time=_7d4?_7d4.toJson().join(","):null;json.layerTimeOptions=_7ce._serializeTimeOptions(this.layerTimeOptions);if(this.dynamicLayerInfos&&this.dynamicLayerInfos.length>0){var _7d5,_7d6={extent:ext,width:this.width,spatialReference:ext.spatialReference},_7d7=_7d0.getScale(_7d6),_7d8=_7ce._getLayersForScale(_7d7,this.dynamicLayerInfos),_7d9=[];_7cb.forEach(this.dynamicLayerInfos,function(info){if(!info.subLayerIds){var _7da=info.id;if((!this.layerIds||(this.layerIds&&_7cb.indexOf(this.layerIds,_7da)!==-1))&&_7cb.indexOf(_7d8,_7da)!==-1){var _7db={id:_7da};_7db.source=info.source&&info.source.toJson();var _7dc;if(this.layerDefinitions&&this.layerDefinitions[_7da]){_7dc=this.layerDefinitions[_7da];}if(_7dc){_7db.definitionExpression=_7dc;}var _7dd;if(this.layerTimeOptions&&this.layerTimeOptions[_7da]){_7dd=this.layerTimeOptions[_7da];}if(_7dd){_7db.layerTimeOptions=_7dd.toJson();}_7d9.push(_7db);}}},this);_7d5=_7cc.toJson(_7d9);if(_7d5==="[]"){_7d5="[{}]";}json.dynamicLayers=_7d5;}return json;}});lang.mixin(_7d1,{LAYER_OPTION_TOP:"top",LAYER_OPTION_VISIBLE:"visible",LAYER_OPTION_ALL:"all"});if(has("extend-esri")){lang.setObject("tasks.IdentifyParameters",_7d1,_7cd);}return _7d1;});},"esri/geometry":function(){define(["esri/units","esri/SpatialReference","esri/geometry/Geometry","esri/geometry/Point","esri/geometry/ScreenPoint","esri/geometry/Multipoint","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Extent","esri/geometry/Rect","esri/geometry/geodesicUtils","esri/geometry/jsonUtils","esri/geometry/mathUtils","esri/geometry/normalizeUtils","esri/geometry/scaleUtils","esri/geometry/screenUtils","esri/geometry/webMercatorUtils"],function(_7de,_7df,_7e0,_7e1,_7e2,_7e3,_7e4,_7e5,_7e6,Rect,_7e7,_7e8,_7e9,_7ea,_7eb,_7ec,_7ed){return {units:_7de,SpatialReference:_7df,Geometry:_7e0,Point:_7e1,ScreenPoint:_7e2,Multipoint:_7e3,Polyline:_7e4,Polygon:_7e5,Extent:_7e6,Rect:Rect,geodesicUtils:_7e7,jsonUtils:_7e8,mathUtils:_7e9,normalizeUtils:_7ea,scaleUtils:_7eb,screenUtils:_7ec,webMercatorUtils:_7ed};});},"esri/geometry/webMercatorUtils":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/SpatialReference","esri/geometry/Point"],function(_7ee,lang,has,_7ef,_7f0,_7f1){function _7f2(geom,func,sr,_7f3){if(geom.type==="point"){var pt=func(geom.x,geom.y,_7f3);return new geom.constructor(pt[0],pt[1],new _7f0(sr));}else{if(geom.type==="extent"){var min=func(geom.xmin,geom.ymin,_7f3),max=func(geom.xmax,geom.ymax,_7f3);return new geom.constructor(min[0],min[1],max[0],max[1],new _7f0(sr));}else{if(geom.type==="polyline"||geom.type==="polygon"){var _7f4=(geom.type==="polyline"),_7f5=_7f4?geom.paths:geom.rings,_7f6=[],_7f7;_7ee.forEach(_7f5,function(_7f8){_7f6.push(_7f7=[]);_7ee.forEach(_7f8,function(iPt){_7f7.push(func(iPt[0],iPt[1],_7f3));});});if(_7f4){return new geom.constructor({paths:_7f6,spatialReference:sr});}else{return new geom.constructor({rings:_7f6,spatialReference:sr});}}else{if(geom.type==="multipoint"){var oPts=[];_7ee.forEach(geom.points,function(iPt){oPts.push(func(iPt[0],iPt[1],_7f3));});return new geom.constructor({points:oPts,spatialReference:sr});}}}}};var _7f9={lngLatToXY:_7f1.lngLatToXY,xyToLngLat:_7f1.xyToLngLat,geographicToWebMercator:function(geom){return _7f2(geom,_7f1.lngLatToXY,{wkid:102100});},webMercatorToGeographic:function(geom,_7fa){return _7f2(geom,_7f1.xyToLngLat,{wkid:4326},_7fa);}};if(has("extend-esri")){lang.mixin(lang.getObject("geometry",true,_7ef),_7f9);}return _7f9;});},"esri/layers/LayerSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_7fb,lang,has,_7fc){var _7fd=_7fb(null,{declaredClass:"esri.layers.LayerSource",type:null,constructor:function(json){if(json){lang.mixin(this,json);}},toJson:function(){}});if(has("extend-esri")){lang.setObject("layers.LayerSource",_7fd,_7fc);}return _7fd;});},"dojo/hccss":function(){define(["require","./_base/config","./dom-class","./dom-style","./has","./ready","./_base/window"],function(_7fe,_7ff,_800,_801,has,_802,win){has.add("highcontrast",function(){var div=win.doc.createElement("div");div.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;"+"background-image: url("+(_7ff.blankGif||_7fe.toUrl("./resources/blank.gif"))+");";win.body().appendChild(div);var cs=_801.getComputedStyle(div),_803=cs.backgroundImage,hc=(cs.borderTopColor==cs.borderRightColor)||(_803&&(_803=="none"||_803=="url(invalid-url:)"));if(has("ie")<=8){div.outerHTML="";}else{win.body().removeChild(div);}return hc;});_802(90,function(){if(has("highcontrast")){_800.add(win.body(),"dj_a11y");}});return has;});},"esri/tasks/Geoprocessor":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/_base/json","dojo/has","dojo/io-query","esri/kernel","esri/request","esri/deferredUtils","esri/geometry/normalizeUtils","esri/tasks/Task","esri/tasks/FeatureSet","esri/tasks/JobInfo","esri/tasks/GPMessage","esri/tasks/LinearUnit","esri/tasks/DataFile","esri/tasks/RasterData","esri/tasks/Date","esri/tasks/ParameterValue","esri/tasks/GPResultImageLayer","esri/layers/MapImage"],function(_804,lang,_805,_806,_807,has,ioq,_808,_809,_80a,_80b,Task,_80c,_80d,_80e,_80f,_810,_811,_812,_813,_814,_815){var _816=_804(Task,{declaredClass:"esri.tasks.Geoprocessor",_eventMap:{"execute-complete":["results","messages"],"get-result-data-complete":["result"],"get-result-image-complete":["mapImage"],"get-result-image-layer-complete":["layer"],"job-cancel":["jobInfo"],"job-complete":["jobInfo"],"status-update":["jobInfo"]},constructor:function(url){this._jobUpdateHandler=lang.hitch(this,this._jobUpdateHandler);this._getJobStatus=lang.hitch(this,this._getJobStatus);this._getResultDataHandler=lang.hitch(this,this._getResultDataHandler);this._getResultImageHandler=lang.hitch(this,this._getResultImageHandler);this._executeHandler=lang.hitch(this,this._executeHandler);this._updateTimers=[];this.registerConnectEvents();},updateDelay:1000,processSpatialReference:null,outputSpatialReference:null,outSpatialReference:null,setUpdateDelay:function(_817){this.updateDelay=_817;},setProcessSpatialReference:function(sr){this.processSpatialReference=sr;},setOutputSpatialReference:function(sr){this._setOutSR(sr);},setOutSpatialReference:function(sr){this._setOutSR(sr);},__msigns:[{n:"execute",c:3,a:[{i:0,p:["*"]}],e:2,f:1},{n:"submitJob",c:4,a:[{i:0,p:["*"]}],e:3}],_setOutSR:function(sr){this.outSpatialReference=this.outputSpatialReference=sr;},_getOutSR:function(){return this.outSpatialReference||this.outputSpatialReference;},_gpEncode:function(_818,_819,_81a){var i;for(i in _818){var _81b=_818[i];if(lang.isArray(_81b)){_818[i]=_807.toJson(_805.map(_81b,function(item){return this._gpEncode({item:item},true).item;},this));}else{if(_81b instanceof Date){_818[i]=_81b.getTime();}}}return this._encode(_818,_819,_81a);},_decode:function(_81c){var _81d=_81c.dataType,_81e,_81f=new _813(_81c);if(_805.indexOf(["GPBoolean","GPDouble","GPLong","GPString"],_81d)!==-1){return _81f;}if(_81d==="GPLinearUnit"){_81f.value=new _80f(_81f.value);}else{if(_81d==="GPFeatureRecordSetLayer"||_81d==="GPRecordSet"){_81f.value=new _80c(_81f.value);}else{if(_81d==="GPDataFile"){_81f.value=new _810(_81f.value);}else{if(_81d==="GPDate"){_81e=_81f.value;if(lang.isString(_81e)){_81f.value=new _812({date:_81e});}else{_81f.value=new Date(_81e);}}else{if(_81d==="GPRasterData"||_81d==="GPRasterDataLayer"){var _820=_81c.value.mapImage;if(_820){_81f.value=new _815(_820);}else{_81f.value=new _811(_81f.value);}}else{if(_81d.indexOf("GPMultiValue:")!==-1){var type=_81d.split(":")[1];_81e=_81f.value;_81f.value=_805.map(_81e,function(item){return this._decode({paramName:"_name",dataType:type,value:item}).value;},this);}else{console.log(this.declaredClass+" : "+"GP Data type not handled."+" : "+_81f.dataType);_81f=null;}}}}}}return _81f;},submitJob:function(_821,_822,_823,_824,_825){var _826=this._getOutSR();var _827=_825.assembly,_828=this._gpEncode(lang.mixin({},this._url.query,{f:"json","env:outSR":(_826?(_826.wkid||_807.toJson(_826.toJson())):null),"env:processSR":(this.processSpatialReference?(this.processSpatialReference.wkid||_807.toJson(this.processSpatialReference.toJson())):null)},_821),null,_827&&_827[0]),_829=this._jobUpdateHandler,_82a=this._errorHandler;return _809({url:this._url.path+"/submitJob",content:_828,callbackParamName:"callback",load:function(r,i){_829(r,i,false,_822,_823,_825.dfd);},error:function(r){_82a(r,_824,_825.dfd);}});},_jobUpdateHandler:function(_82b,io,_82c,_82d,_82e,dfd){var _82f=_82b.jobId,_830=new _80d(_82b);this._successHandler([_830],"onStatusUpdate",_82e,_82c&&dfd);if(!_82c){clearTimeout(this._updateTimers[_82f]);this._updateTimers[_82f]=null;if(dfd){dfd.progress(_830);}switch(_82b.jobStatus){case _80d.STATUS_SUBMITTED:case _80d.STATUS_EXECUTING:case _80d.STATUS_WAITING:case _80d.STATUS_NEW:var _831=this._getJobStatus;this._updateTimers[_82f]=setTimeout(function(){_831(_82f,_82c,_82d,_82e,dfd);},this.updateDelay);break;default:this._successHandler([_830],"onJobComplete",_82d,dfd);}}},_getJobStatus:function(_832,_833,_834,_835,dfd){var _836=this._jobUpdateHandler;_809({url:this._url.path+"/jobs/"+_832,content:lang.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:function(){_836(arguments[0],arguments[1],_833,_834,_835,dfd);},error:this._errorHandler});},_getResultDataHandler:function(_837,io,_838,_839,dfd){try{var _83a=this._decode(_837);this._successHandler([_83a],"onGetResultDataComplete",_838,dfd);}catch(err){this._errorHandler(err,_839,dfd);}},getResultData:function(_83b,_83c,_83d,_83e){var _83f=this._getResultDataHandler,_840=this._errorHandler;var dfd=new _806(_80a._dfdCanceller);dfd._pendingDfd=_809({url:this._url.path+"/jobs/"+_83b+"/results/"+_83c,content:lang.mixin({},this._url.query,{f:"json",returnType:"data"}),callbackParamName:"callback",load:function(r,i){_83f(r,i,_83d,_83e,dfd);},error:function(r){_840(r,_83e,dfd);}});return dfd;},checkJobStatus:function(_841,_842,_843){var _844=this._jobUpdateHandler,_845=this._errorHandler;var dfd=new _806(_80a._dfdCanceller);dfd._pendingDfd=_809({url:this._url.path+"/jobs/"+_841,content:lang.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:function(r,i){_844(r,i,true,null,_842,dfd);},error:function(r){_845(r,_843,dfd);}});return dfd;},cancelJob:function(_846,_847,_848){var _849=this._errorHandler;var dfd=new _806(_80a._dfdCanceller);dfd._pendingDfd=_809({url:this._url.path+"/jobs/"+_846+"/cancel",content:lang.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:lang.hitch(this,function(r,i){this._successHandler([r],"onJobCancel",_847,dfd);}),error:function(r){_849(r,_848,dfd);}});return dfd;},execute:function(_84a,_84b,_84c,_84d){var _84e=this._getOutSR();var _84f=_84d.assembly,_850=this._gpEncode(lang.mixin({},this._url.query,{f:"json","env:outSR":(_84e?(_84e.wkid||_807.toJson(_84e.toJson())):null),"env:processSR":(this.processSpatialReference?(this.processSpatialReference.wkid||_807.toJson(this.processSpatialReference.toJson())):null)},_84a),null,_84f&&_84f[0]),_851=this._executeHandler,_852=this._errorHandler;return _809({url:this._url.path+"/execute",content:_850,callbackParamName:"callback",load:function(r,i){_851(r,i,_84b,_84c,_84d.dfd);},error:function(r){_852(r,_84c,_84d.dfd);}});},_executeHandler:function(_853,io,_854,_855,dfd){try{var _856=_853.results,i,il,_857=_853.messages;for(i=0,il=_856.length;i<il;i++){_856[i]=this._decode(_856[i]);}for(i=0,il=_857.length;i<il;i++){_857[i]=new _80e(_857[i]);}this._successHandler([_856,_857],"onExecuteComplete",_854,dfd);}catch(err){this._errorHandler(err,_855,dfd);}},_getResultImageHandler:function(_858,io,_859,_85a,dfd){try{var _85b=this._decode(_858);this._successHandler([_85b],"onGetResultImageComplete",_859,dfd);}catch(err){this._errorHandler(err,_85a,dfd);}},getResultImage:function(_85c,_85d,_85e,_85f,_860){var _861=this._getResultImageHandler,_862=this._errorHandler,_863=this._gpEncode(lang.mixin({},this._url.query,{f:"json"},_85e.toJson()));var dfd=new _806(_80a._dfdCanceller);dfd._pendingDfd=_809({url:this._url.path+"/jobs/"+_85c+"/results/"+_85d,content:_863,callbackParamName:"callback",load:function(r,i){_861(r,i,_85f,_860,dfd);},error:function(r){_862(r,_860,dfd);}});return dfd;},cancelJobStatusUpdates:function(_864){clearTimeout(this._updateTimers[_864]);this._updateTimers[_864]=null;},getResultImageLayer:function(_865,_866,_867,_868){var url=this._url.path+"/jobs/"+_865+"/results/"+_866;if(this._url.query){url+="?"+ioq.objectToQuery(this._url.query);}var _869=new _814(url,{imageParameters:_867},true);this.onGetResultImageLayerComplete(_869);if(_868){_868(_869);}return _869;},onStatusUpdate:function(){},onJobComplete:function(){},onExecuteComplete:function(){},onGetResultDataComplete:function(){},onGetResultImageComplete:function(){},onGetResultImageLayerComplete:function(){},onJobCancel:function(){}});_80b._createWrappers(_816);if(has("extend-esri")){lang.setObject("tasks.Geoprocessor",_816,_808);}return _816;});},"esri/geometry/jsonUtils":function(){define(["dojo/_base/lang","dojo/has","esri/kernel","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Multipoint","esri/geometry/Extent"],function(lang,has,_86a,_86b,_86c,_86d,_86e,_86f){function _870(json){if(json.x!==undefined&&json.y!==undefined){return new _86b(json);}else{if(json.paths!==undefined){return new _86c(json);}else{if(json.rings!==undefined){return new _86d(json);}else{if(json.points!==undefined){return new _86e(json);}else{if(json.xmin!==undefined&&json.ymin!==undefined&&json.xmax!==undefined&&json.ymax!==undefined){return new _86f(json);}}}}}};function _871(_872){if(_872 instanceof _86b){return "esriGeometryPoint";}else{if(_872 instanceof _86c){return "esriGeometryPolyline";}else{if(_872 instanceof _86d){return "esriGeometryPolygon";}else{if(_872 instanceof _86f){return "esriGeometryEnvelope";}else{if(_872 instanceof _86e){return "esriGeometryMultipoint";}}}}}return null;};function _873(_874){if(_874==="esriGeometryPoint"){return _86b;}else{if(_874==="esriGeometryPolyline"){return _86c;}else{if(_874==="esriGeometryPolygon"){return _86d;}else{if(_874==="esriGeometryEnvelope"){return _86f;}else{if(_874==="esriGeometryMultipoint"){return _86e;}}}}}return null;};var _875={fromJson:_870,getJsonType:_871,getGeometryType:_873};if(has("extend-esri")){lang.mixin(lang.getObject("geometry",true,_86a),_875);}return _875;});},"esri/geometry/screenUtils":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/sniff","esri/kernel","esri/geometry/Point","esri/geometry/ScreenPoint","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Multipoint","esri/geometry/Extent"],function(_876,lang,has,_877,_878,_879,_87a,_87b,_87c,_87d){function _87e(ext,wd,ht,pt,_87f){var _880=ext.spatialReference,ptSR=pt.spatialReference,x=pt.x,y=pt.y,_881;if(_880&&ptSR&&!_880.equals(ptSR)&&_880._canProject(ptSR)){_881=_880.isWebMercator()?_878.lngLatToXY(x,y):_878.xyToLngLat(x,y,true);x=_881[0];y=_881[1];}x=(x-ext.xmin)*(wd/ext.getWidth());y=(ext.ymax-y)*(ht/ext.getHeight());if(!_87f){x=Math.round(x);y=Math.round(y);}return new _879(x,y);};function _882(ext,wd,ht,g){var x=ext.xmin,y=ext.ymax,rwd=wd/ext.getWidth(),rht=ht/ext.getHeight(),_883=_876.forEach,_884=Math.round;if(g instanceof _878){return new _878(_884((g.x-x)*rwd),_884((y-g.y)*rht));}else{if(g instanceof _87c){var mp=new _87c(),mpp=mp.points;_883(g.points,function(pt,i){mpp[i]=[_884((pt[0]-x)*rwd),_884((y-pt[1])*rht)];});return mp;}else{if(g instanceof _87d){return new _87d(_884((g.xmin-x)*rwd),_884((y-g.ymin)*rht),_884((g.xmax-x)*rwd),_884((y-g.ymax)*rwd));}else{if(g instanceof _87a){var _885=new _87a(),_886=_885.paths,_887;_883(g.paths,function(path,i){_887=(_886[i]=[]);_883(path,function(pt,j){_887[j]=[_884((pt[0]-x)*rwd),_884((y-pt[1])*rht)];});});return _885;}else{if(g instanceof _87b){var pgon=new _87b(),_888=pgon.rings,_889;_883(g.rings,function(ring,i){_889=(_888[i]=[]);_883(ring,function(pt,j){_889[j]=[_884((pt[0]-x)*rwd),_884((y-pt[1])*rht)];});});return pgon;}}}}}};var _88a=(function(){if(has("ie")<9){return function(x,y,rwd,rht,dx,dy,_88b,_88c,_88d){var _88e=[],_88f=Math.round,p,pl=_88b.length,path,_890,_891,pt,x1,y1,x2,y2;for(p=0;p<pl;p++){path=_88b[p];pt=_88c?_88c(path[0][0],path[0][1],_88d):path[0];if((_891=path.length)>1){x1=_88f(((pt[0]-x)*rwd)+dx);y1=_88f(((y-pt[1])*rht)+dy);pt=_88c?_88c(path[1][0],path[1][1],_88d):path[1];x2=_88f(((pt[0]-x)*rwd)+dx);y2=_88f(((y-pt[1])*rht)+dy);_88e.push("M",x1+","+y1,"L",x2+","+y2);for(_890=2;_890<_891;_890++){pt=_88c?_88c(path[_890][0],path[_890][1],_88d):path[_890];x1=_88f(((pt[0]-x)*rwd)+dx);y1=_88f(((y-pt[1])*rht)+dy);_88e.push(x1+","+y1);}}else{x1=_88f(((pt[0]-x)*rwd)+dx);y1=_88f(((y-pt[1])*rht)+dy);_88e.push("M",x1+","+y1);}}return _88e;};}else{return function(x,y,rwd,rht,dx,dy,_892,_893,_894){var _895=[],i,j,il,jl,path,pt,_896=Math.round;for(i=0,il=_892?_892.length:0;i<il;i++){path=_892[i];_895.push("M");for(j=0,jl=path?path.length:0;j<jl;j++){pt=_893?_893(path[j][0],path[j][1],_894):path[j];_895.push(_896(((pt[0]-x)*rwd)+dx)+","+_896(((y-pt[1])*rht)+dy));}}return _895;};}}());function _897(ext,wd,ht,g,dx,dy){var _898=g instanceof _87a,_899=ext.spatialReference,_89a=g.spatialReference,_89b,_89c;if(_899&&_89a&&!_899.equals(_89a)&&_899._canProject(_89a)){if(_899.isWebMercator()){_89b=_878.lngLatToXY;}else{_89b=_878.xyToLngLat;_89c=true;}}return _88a(ext.xmin,ext.ymax,wd/ext.getWidth(),ht/ext.getHeight(),dx,dy,_898?g.paths:g.rings,_89b,_89c);};function _89d(ext,wd,ht,pt){return new _878(ext.xmin+(pt.x/(wd/ext.getWidth())),ext.ymax-(pt.y/(ht/ext.getHeight())),ext.spatialReference);};function _89e(ext,wd,ht,g){var x=ext.xmin,y=ext.ymax,sr=ext.spatialReference,rwd=wd/ext.getWidth(),rht=ht/ext.getHeight(),_89f=_876.forEach;if(g instanceof _878){return new _878(x+(g.x/rwd),y-(g.y/rht),sr);}else{if(g instanceof _87c){var mp=new _87c(sr),mpp=mp.points;_89f(g.points,function(pt,i){mpp[i]=[x+(pt[0]/rwd),y-(pt[1]/rht)];});return mp;}else{if(g instanceof _87d){return new _87d(x+(g.xmin/rwd),y-(g.ymin/rht),x+(g.xmax/rwd),y-(g.ymax/rht),sr);}else{if(g instanceof _87a){var _8a0=new _87a(sr),_8a1=_8a0.paths,_8a2;_89f(g.paths,function(path,i){_8a2=(_8a1[i]=[]);_89f(path,function(pt,j){_8a2[j]=[x+(pt[0]/rwd),y-(pt[1]/rht)];});});return _8a0;}else{if(g instanceof _87b){var pgon=new _87b(sr),_8a3=pgon.rings,_8a4;_89f(g.rings,function(ring,i){_8a4=(_8a3[i]=[]);_89f(ring,function(pt,j){_8a4[j]=[x+(pt[0]/rwd),y-(pt[1]/rht)];});});return pgon;}}}}}};var _8a5={toScreenPoint:_87e,toScreenGeometry:_882,_toScreenPath:_897,toMapPoint:_89d,toMapGeometry:_89e};if(has("extend-esri")){lang.mixin(lang.getObject("geometry",true,_877),_8a5);}return _8a5;});},"esri/tasks/identify":function(){define(["esri/tasks/IdentifyTask","esri/tasks/IdentifyParameters","esri/tasks/IdentifyResult"],function(){return {};});},"dijit/main":function(){define("dijit/main",["dojo/_base/kernel"],function(dojo){return dojo.dijit;});},"esri/tasks/ImageServiceIdentifyResult":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/geometry/jsonUtils","esri/tasks/FeatureSet"],function(_8a6,lang,has,_8a7,_8a8,_8a9){var _8aa=_8a6(null,{declaredClass:"esri.tasks.ImageServiceIdentifyResult",constructor:function(json){if(json.catalogItems){this.catalogItems=new _8a9(json.catalogItems);}if(json.location){this.location=_8a8.fromJson(json.location);}this.catalogItemVisibilities=json.catalogItemVisibilities;this.name=json.name;this.objectId=json.objectId;this.value=json.value;this.properties=json.properties;}});if(has("extend-esri")){lang.setObject("tasks.ImageServiceIdentifyResult",_8aa,_8a7);}return _8aa;});},"esri/layers/TimeInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/TimeExtent","esri/layers/TimeReference","esri/layers/LayerTimeOptions"],function(_8ab,lang,has,_8ac,_8ad,_8ae,_8af){var _8b0=_8ab(null,{declaredClass:"esri.layers.TimeInfo",constructor:function(json){if(json!==null){lang.mixin(this,json);if(json.exportOptions){this.exportOptions=new _8af(json.exportOptions);}this.timeExtent=new _8ad(json.timeExtent);this.timeReference=new _8ae(json.timeReference);}}});lang.mixin(_8b0,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",UNIT_YEARS:"esriTimeUnitsYears"});if(has("extend-esri")){lang.setObject("layers.TimeInfo",_8b0,_8ac);}return _8b0;});},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(_8b1,lang,has,_8b2,_8b3){var LOD=_8b1(null,{declaredClass:"esri.layers.LOD",constructor:function(json){lang.mixin(this,json);},toJson:function(){return _8b3.fixJson({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale});}});if(has("extend-esri")){lang.setObject("layers.LOD",LOD,_8b2);}return LOD;});},"dijit/_OnDijitClickMixin":function(){define("dijit/_OnDijitClickMixin",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","dojo/_base/unload","dojo/_base/window","./a11yclick"],function(on,_8b4,keys,_8b5,has,_8b6,win,_8b7){var ret=_8b5("dijit._OnDijitClickMixin",null,{connect:function(obj,_8b8,_8b9){return this.inherited(arguments,[obj,_8b8=="ondijitclick"?_8b7:_8b8,_8b9]);}});ret.a11yclick=_8b7;return ret;});},"dojo/dnd/autoscroll":function(){define(["../_base/lang","../sniff","../_base/window","../dom-geometry","../dom-style","../window"],function(lang,has,win,_8ba,_8bb,_8bc){var _8bd={};lang.setObject("dojo.dnd.autoscroll",_8bd);_8bd.getViewport=_8bc.getBox;_8bd.V_TRIGGER_AUTOSCROLL=32;_8bd.H_TRIGGER_AUTOSCROLL=32;_8bd.V_AUTOSCROLL_VALUE=16;_8bd.H_AUTOSCROLL_VALUE=16;var _8be,doc=win.doc,_8bf=Infinity,_8c0=Infinity;_8bd.autoScrollStart=function(d){doc=d;_8be=_8bc.getBox(doc);var html=win.body(doc).parentNode;_8bf=Math.max(html.scrollHeight-_8be.h,0);_8c0=Math.max(html.scrollWidth-_8be.w,0);};_8bd.autoScroll=function(e){var v=_8be||_8bc.getBox(doc),html=win.body(doc).parentNode,dx=0,dy=0;if(e.clientX<_8bd.H_TRIGGER_AUTOSCROLL){dx=-_8bd.H_AUTOSCROLL_VALUE;}else{if(e.clientX>v.w-_8bd.H_TRIGGER_AUTOSCROLL){dx=Math.min(_8bd.H_AUTOSCROLL_VALUE,_8c0-html.scrollLeft);}}if(e.clientY<_8bd.V_TRIGGER_AUTOSCROLL){dy=-_8bd.V_AUTOSCROLL_VALUE;}else{if(e.clientY>v.h-_8bd.V_TRIGGER_AUTOSCROLL){dy=Math.min(_8bd.V_AUTOSCROLL_VALUE,_8bf-html.scrollTop);}}window.scrollBy(dx,dy);};_8bd._validNodes={"div":1,"p":1,"td":1};_8bd._validOverflow={"auto":1,"scroll":1};_8bd.autoScrollNodes=function(e){var b,t,w,h,rx,ry,dx=0,dy=0,_8c1,_8c2;for(var n=e.target;n;){if(n.nodeType==1&&(n.tagName.toLowerCase() in _8bd._validNodes)){var s=_8bb.getComputedStyle(n),_8c3=(s.overflow.toLowerCase() in _8bd._validOverflow),_8c4=(s.overflowX.toLowerCase() in _8bd._validOverflow),_8c5=(s.overflowY.toLowerCase() in _8bd._validOverflow);if(_8c3||_8c4||_8c5){b=_8ba.getContentBox(n,s);t=_8ba.position(n,true);}if(_8c3||_8c4){w=Math.min(_8bd.H_TRIGGER_AUTOSCROLL,b.w/2);rx=e.pageX-t.x;if(has("webkit")||has("opera")){rx+=win.body().scrollLeft;}dx=0;if(rx>0&&rx<b.w){if(rx<w){dx=-w;}else{if(rx>b.w-w){dx=w;}}_8c1=n.scrollLeft;n.scrollLeft=n.scrollLeft+dx;}}if(_8c3||_8c5){h=Math.min(_8bd.V_TRIGGER_AUTOSCROLL,b.h/2);ry=e.pageY-t.y;if(has("webkit")||has("opera")){ry+=win.body().scrollTop;}dy=0;if(ry>0&&ry<b.h){if(ry<h){dy=-h;}else{if(ry>b.h-h){dy=h;}}_8c2=n.scrollTop;n.scrollTop=n.scrollTop+dy;}}if(dx||dy){return;}}try{n=n.parentNode;}catch(x){n=null;}}_8bd.autoScroll(e);};return _8bd;});},"esri/tasks/TrimExtendParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel"],function(_8c6,lang,_8c7,_8c8,has,_8c9){var _8ca=_8c6(null,{declaredClass:"esri.tasks.TrimExtendParameters",polylines:null,trimExtendTo:null,extendHow:null,toJson:function(){var _8cb=_8c7.map(this.polylines,function(geom){return geom.toJson();});var json={};json.polylines=_8c8.toJson(_8cb);json.trimExtendTo=_8c8.toJson(this.trimExtendTo.toJson());json.sr=_8c8.toJson(this.polylines[0].spatialReference.toJson());json.extendHow=this.extendHow||0;return json;}});lang.mixin(_8ca,{DEFAULT_CURVE_EXTENSION:0,RELOCATE_ENDS:1,KEEP_END_ATTRIBUTES:2,NO_END_ATTRIBUTES:4,NO_EXTEND_AT_FROM:8,NO_EXTEND_AT_TO:16});if(has("extend-esri")){lang.setObject("tasks.TrimExtendParameters",_8ca,_8c9);}return _8ca;});},"esri/symbols/jsonUtils":function(){define(["dojo/_base/lang","dojo/has","esri/kernel","esri/symbols/SimpleMarkerSymbol","esri/symbols/PictureMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/CartographicLineSymbol","esri/symbols/SimpleFillSymbol","esri/symbols/PictureFillSymbol","esri/symbols/TextSymbol"],function(lang,has,_8cc,_8cd,_8ce,_8cf,_8d0,_8d1,_8d2,_8d3){var _8d4={fromJson:function(json){var type=json.type,_8d5=null;switch(type.substring(0,"esriXX".length)){case "esriSM":_8d5=new _8cd(json);break;case "esriPM":_8d5=new _8ce(json);break;case "esriTS":_8d5=new _8d3(json);break;case "esriSL":if(json.cap!==undefined){_8d5=new _8d0(json);}else{_8d5=new _8cf(json);}break;case "esriSF":_8d5=new _8d1(json);break;case "esriPF":_8d5=new _8d2(json);break;}return _8d5;},getShapeDescriptors:function(_8d6){return (_8d6&&_8d6.getShapeDescriptors)?_8d6.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null};}};if(has("extend-esri")){lang.mixin(lang.getObject("symbol",true,_8cc),_8d4);}return _8d4;});},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(_8d7,_8d8){var _8d9=_8d8.prototype.onMove;return _8d7("dojo.dnd.TimedMoveable",_8d8,{timeout:40,constructor:function(node,_8da){if(!_8da){_8da={};}if(_8da.timeout&&typeof _8da.timeout=="number"&&_8da.timeout>=0){this.timeout=_8da.timeout;}},onMoveStop:function(_8db){if(_8db._timer){clearTimeout(_8db._timer);_8d9.call(this,_8db,_8db._leftTop);}_8d8.prototype.onMoveStop.apply(this,arguments);},onMove:function(_8dc,_8dd){_8dc._leftTop=_8dd;if(!_8dc._timer){var _8de=this;_8dc._timer=setTimeout(function(){_8dc._timer=null;_8d9.call(_8de,_8dc,_8dc._leftTop);},this.timeout);}}});});},"esri/geometry/geodesicUtils":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/SpatialReference","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon"],function(_8df,lang,has,_8e0,_8e1,_8e2,_8e3,_8e4){var _8e5={"esriMiles":1,"esriKilometers":1.609344,"esriFeet":5280,"esriMeters":1609.34,"esriYards":1760,"esriNauticalMiles":0.869,"esriCentimeters":160934,"esriDecimeters":16093.4,"esriInches":63360,"esriMillimeters":1609340,"esriAcres":1,"esriAres":40.4685642,"esriSquareKilometers":0.00404685642,"esriSquareMiles":0.0015625,"esriSquareFeet":43560,"esriSquareMeters":4046.85642,"esriHectares":0.404685642,"esriSquareYards":4840,"esriSquareInches":6272640,"esriSquareMillimeters":4046856420,"esriSquareCentimeters":40468564.2,"esriSquareDecimeters":404685.642};function _8e6(pt){var _8e7=Math.PI/180;var a=6378137;var eSq=0.006694379990197414,e=0.0818191908429643;var sinY=Math.sin(pt.y*_8e7);var q=(1-eSq)*((sinY/(1-eSq*(sinY*sinY))-(1/(2*e))*Math.log((1-e*sinY)/(1+e*sinY))));var x=a*pt.x*_8e7;var y=a*q*0.5;var _8e8=new _8e2(x,y);return _8e8;};function _8e9(lat1,lon1,_8ea,s){var a=6378137,b=6356752.31424518,f=1/298.257223563;var _8eb=Math.sin(_8ea);var _8ec=Math.cos(_8ea);var _8ed=(1-f)*Math.tan(lat1);var _8ee=1/Math.sqrt((1+_8ed*_8ed)),_8ef=_8ed*_8ee;var _8f0=Math.atan2(_8ed,_8ec);var _8f1=_8ee*_8eb;var _8f2=1-_8f1*_8f1;var uSq=_8f2*(a*a-b*b)/(b*b);var A=1+uSq/16384*(4096+uSq*(-768+uSq*(320-175*uSq)));var B=uSq/1024*(256+uSq*(-128+uSq*(74-47*uSq)));var _8f3=s/(b*A),_8f4=2*Math.PI;var _8f5,_8f6,_8f7;while(Math.abs(_8f3-_8f4)>1e-12){_8f7=Math.cos(2*_8f0+_8f3);_8f5=Math.sin(_8f3);_8f6=Math.cos(_8f3);var _8f8=B*_8f5*(_8f7+B/4*(_8f6*(-1+2*_8f7*_8f7)-B/6*_8f7*(-3+4*_8f5*_8f5)*(-3+4*_8f7*_8f7)));_8f4=_8f3;_8f3=s/(b*A)+_8f8;}var tmp=_8ef*_8f5-_8ee*_8f6*_8ec;var lat2=Math.atan2(_8ef*_8f6+_8ee*_8f5*_8ec,(1-f)*Math.sqrt(_8f1*_8f1+tmp*tmp));var _8f9=Math.atan2(_8f5*_8eb,_8ee*_8f6-_8ef*_8f5*_8ec);var C=f/16*_8f2*(4+f*(4-3*_8f2));var L=_8f9-(1-C)*f*_8f1*(_8f3+C*_8f5*(_8f7+C*_8f6*(-1+2*_8f7*_8f7)));var _8fa=lat2/(Math.PI/180);var _8fb=(lon1+L)/(Math.PI/180);var pt=new _8e2(_8fb,_8fa,new _8e1({wkid:4326}));return pt;};function _8fc(lat1,lon1,lat2,lon2){var a=6378137,b=6356752.31424518,f=1/298.257223563;var L=(lon2-lon1);var U1=Math.atan((1-f)*Math.tan(lat1));var U2=Math.atan((1-f)*Math.tan(lat2));var _8fd=Math.sin(U1),_8fe=Math.cos(U1);var _8ff=Math.sin(U2),_900=Math.cos(U2);var _901=L,_902,_903=1000;var _904,_905,_906,_907,_908;do{var _909=Math.sin(_901),_90a=Math.cos(_901);_905=Math.sqrt((_900*_909)*(_900*_909)+(_8fe*_8ff-_8fd*_900*_90a)*(_8fe*_8ff-_8fd*_900*_90a));if(_905===0){return 0;}_907=_8fd*_8ff+_8fe*_900*_90a;_908=Math.atan2(_905,_907);var _90b=_8fe*_900*_909/_905;_904=1-_90b*_90b;_906=_907-2*_8fd*_8ff/_904;if(isNaN(_906)){_906=0;}var C=f/16*_904*(4+f*(4-3*_904));_902=_901;_901=L+(1-C)*f*_90b*(_908+C*_905*(_906+C*_907*(-1+2*_906*_906)));}while(Math.abs(_901-_902)>1e-12&&--_903>0);if(_903===0){var _90c=6371009;var _90d=Math.acos(Math.sin(lat1)*Math.sin(lat2)+Math.cos(lat1)*Math.cos(lat2)*Math.cos(lon2-lon1))*_90c;var dLon=lon2-lon1;var y=Math.sin(dLon)*Math.cos(lat2);var x=Math.cos(lat1)*Math.sin(lat2)-Math.sin(lat1)*Math.cos(lat2)*Math.cos(dLon);var brng=Math.atan2(y,x);return {"azimuth":brng,"geodesicDistance":_90d};}var uSq=_904*(a*a-b*b)/(b*b);var A=1+uSq/16384*(4096+uSq*(-768+uSq*(320-175*uSq)));var B=uSq/1024*(256+uSq*(-128+uSq*(74-47*uSq)));var _90e=B*_905*(_906+B/4*(_907*(-1+2*_906*_906)-B/6*_906*(-3+4*_905*_905)*(-3+4*_906*_906)));var s=b*A*(_908-_90e);var _90f=Math.atan2(_900*Math.sin(_901),_8fe*_8ff-_8fd*_900*Math.cos(_901));var _910=Math.atan2(_8fe*Math.sin(_901),_8fe*_8ff*Math.cos(_901)-_8fd*_900);var _911={azimuth:_90f,geodesicDistance:s,reverseAzimuth:_910};return _911;};function _912(geom,_913){var _914=Math.PI/180;var _915=6371008.771515059;if(_913<_915/10000){_913=_915/10000;}if(!(geom instanceof _8e3||geom instanceof _8e4)){var msg="_geodesicDensify: the input geometry is neither polyline nor polygon";console.error(msg);throw new Error(msg);}var _916=geom instanceof _8e3,_917=_916?geom.paths:geom.rings,_918=[],_919;_8df.forEach(_917,function(ring){_918.push(_919=[]);_919.push([ring[0][0],ring[0][1]]);var lon1,lat1,lon2,lat2,i,j;lon1=ring[0][0]*_914;lat1=ring[0][1]*_914;for(i=0;i<ring.length-1;i++){lon2=ring[i+1][0]*_914;lat2=ring[i+1][1]*_914;var _91a=_8fc(lat1,lon1,lat2,lon2);var _91b=_91a.azimuth;var _91c=_91a.geodesicDistance;var _91d=_91c/_913;if(_91d>1){for(j=1;j<=_91d-1;j++){var _91e=j*_913;var pt=_8e9(lat1,lon1,_91b,_91e);_919.push([pt.x,pt.y]);}var _91f=(_91c+Math.floor(_91d-1)*_913)/2;var _920=_8e9(lat1,lon1,_91b,_91f);_919.push([_920.x,_920.y]);}var _921=_8e9(lat1,lon1,_91b,_91c);_919.push([_921.x,_921.y]);lon1=_921.x*_914;lat1=_921.y*_914;}});if(_916){return new _8e3({paths:_918,spatialReference:geom.spatialReference});}else{return new _8e4({rings:_918,spatialReference:geom.spatialReference});}};function _922(_923,_924){var _925=Math.PI/180;var _926=[];_8df.forEach(_923,function(_927,idx){var _928=0;_8df.forEach(_927.paths,function(path,idx){var _929=0;var i,lon1,lon2,lat1,lat2,_92a;for(i=1;i<path.length;i++){lon1=path[i-1][0]*_925;lon2=path[i][0]*_925;lat1=path[i-1][1]*_925;lat2=path[i][1]*_925;_92a=_8fc(lat1,lon1,lat2,lon2);_929+=_92a.geodesicDistance/1609.344;}_928+=_929;});_928*=_8e5[_924];_926.push(_928);});return _926;};function _92b(_92c,_92d){var _92e=[];_8df.forEach(_92c,function(_92f,idx){var _930=_912(_92f,10000);_92e.push(_930);});var _931=[];var _932,_933;_8df.forEach(_92e,function(_934,idx){var area=0;_8df.forEach(_934.rings,function(ring,idx){_932=_8e6(new _8e2(ring[0][0],ring[0][1]));_933=_8e6(new _8e2(ring[ring.length-1][0],ring[ring.length-1][1]));var _935=_933.x*_932.y-_932.x*_933.y;var i;for(i=0;i<ring.length-1;i++){_932=_8e6(new _8e2(ring[i+1][0],ring[i+1][1]));_933=_8e6(new _8e2(ring[i][0],ring[i][1]));_935+=_933.x*_932.y-_932.x*_933.y;}_935/=4046.87;area+=_935;});area*=_8e5[_92d];_931.push(area/(-2));});return _931;};var _936={geodesicDensify:_912,geodesicLengths:_922,geodesicAreas:_92b,_unitsDictionary:_8e5,_toEqualAreaPoint:_8e6,_directGeodeticSolver:_8e9,_inverseGeodeticSolver:_8fc};if(has("extend-esri")){lang.mixin(lang.getObject("geometry",true,_8e0),_936);}return _936;});},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(dojo,_937){dojo.cookie=function(name,_938,_939){var c=document.cookie,ret;if(arguments.length==1){var _93a=c.match(new RegExp("(?:^|; )"+_937.escapeString(name)+"=([^;]*)"));ret=_93a?decodeURIComponent(_93a[1]):undefined;}else{_939=_939||{};var exp=_939.expires;if(typeof exp=="number"){var d=new Date();d.setTime(d.getTime()+exp*24*60*60*1000);exp=_939.expires=d;}if(exp&&exp.toUTCString){_939.expires=exp.toUTCString();}_938=encodeURIComponent(_938);var _93b=name+"="+_938,_93c;for(_93c in _939){_93b+="; "+_93c;var _93d=_939[_93c];if(_93d!==true){_93b+="="+_93d;}}document.cookie=_93b;}return ret;};dojo.cookie.isSupported=function(){if(!("cookieEnabled" in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";if(navigator.cookieEnabled){this("__djCookieTest__","",{expires:-1});}}return navigator.cookieEnabled;};return dojo.cookie;});},"dojo/cache":function(){define(["./_base/kernel","./text"],function(dojo){return dojo.cache;});},"dijit/_base/popup":function(){define("dijit/_base/popup",["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(_93e,win,_93f){var _940=_93f._createWrapper;_93f._createWrapper=function(_941){if(!_941.declaredClass){_941={_popupWrapper:(_941.parentNode&&_93e.contains(_941.parentNode,"dijitPopup"))?_941.parentNode:null,domNode:_941,destroy:function(){},ownerDocument:_941.ownerDocument,ownerDocumentBody:win.body(_941.ownerDocument)};}return _940.call(this,_941);};var _942=_93f.open;_93f.open=function(args){if(args.orient&&typeof args.orient!="string"&&!("length" in args.orient)){var ary=[];for(var key in args.orient){ary.push({aroundCorner:key,corner:args.orient[key]});}args.orient=ary;}return _942.call(this,args);};return _93f;});},"esri/layers/ArcGISMapServiceLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/lang","esri/request","esri/SpatialReference","esri/geometry/Extent","esri/layers/LayerInfo"],function(_943,lang,_944,has,_945,_946,_947,_948,_949,_94a){var _94b=_943(null,{declaredClass:"esri.layers.ArcGISMapServiceLayer",constructor:function(url,_94c){this.layerInfos=[];var _94d=(this._params={}),_94e=this._url.query?this._url.query.token:null;if(_94e){_94d.token=_94e;}},_load:function(){_947({url:this._url.path,content:lang.mixin({f:"json"},this._params),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});},spatialReference:null,initialExtent:null,fullExtent:null,description:null,units:null,_initLayer:function(_94f,io){try{this._findCredential();var ssl=(this.credential&&this.credential.ssl)||(_94f&&_94f._ssl);if(ssl){this._useSSL();}this.description=_94f.description;this.copyright=_94f.copyrightText;this.spatialReference=_94f.spatialReference&&new _948(_94f.spatialReference);this.initialExtent=_94f.initialExtent&&new _949(_94f.initialExtent);this.fullExtent=_94f.fullExtent&&new _949(_94f.fullExtent);this.units=_94f.units;this.maxRecordCount=_94f.maxRecordCount;this.maxImageHeight=_94f.maxImageHeight;this.maxImageWidth=_94f.maxImageWidth;this.supportsDynamicLayers=_94f.supportsDynamicLayers;var _950=(this.layerInfos=[]),lyrs=_94f.layers,dvl=(this._defaultVisibleLayers=[]);_944.forEach(lyrs,function(lyr,i){_950[i]=new _94a(lyr);if(lyr.defaultVisibility){dvl.push(lyr.id);}});if(!this.visibleLayers){this.visibleLayers=dvl;}this.version=_94f.currentVersion;if(!this.version){var ver;if("capabilities" in _94f||"tables" in _94f){ver=10;}else{if("supportedImageFormatTypes" in _94f){ver=9.31;}else{ver=9.3;}}this.version=ver;}this.capabilities=_94f.capabilities;if(_946.isDefined(_94f.minScale)&&!this._hasMin){this.setMinScale(_94f.minScale);}if(_946.isDefined(_94f.maxScale)&&!this._hasMax){this.setMaxScale(_94f.maxScale);}}catch(e){this._errorHandler(e);}}});if(has("extend-esri")){lang.setObject("layers.ArcGISMapServiceLayer",_94b,_945);}return _94b;});},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(_951,lang,has,_952,_953){var _954=_951(null,{declaredClass:"esri.layers.Domain",constructor:function(json){if(json&&lang.isObject(json)){this.name=json.name;this.type=json.type;}},toJson:function(){return _953.fixJson({name:this.name,type:this.type});}});if(has("extend-esri")){lang.setObject("layers.Domain",_954,_952);}return _954;});},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","esri/kernel","esri/geometry/Point"],function(lang,has,_955,_956){function _957(pt1,pt2){var dx=pt2.x-pt1.x,dy=pt2.y-pt1.y;return Math.sqrt(dx*dx+dy*dy);};function _958(pt1,pt2){var dx=pt2[0]-pt1[0],dy=pt2[1]-pt1[1];return Math.sqrt(dx*dx+dy*dy);};function _959(pt0,pt1,_95a){if(pt0 instanceof _956){return new _956(pt0.x+_95a*(pt1.x-pt0.x),pt0.y+_95a*(pt1.y-pt0.y));}else{return [pt0[0]+_95a*(pt1[0]-pt0[0]),pt0[1]+_95a*(pt1[1]-pt0[1])];}};function _95b(pt0,pt1){return _959(pt0,pt1,0.5);};function _95c(n1,n2){return Math.abs(n1-n2)<1e-8;};function _95d(p0,p1,p2,p3){var _95e=10000000000,x,y,a0=_95c(p0[0],p1[0])?_95e:(p0[1]-p1[1])/(p0[0]-p1[0]),a1=_95c(p2[0],p3[0])?_95e:(p2[1]-p3[1])/(p2[0]-p3[0]),b0=p0[1]-a0*p0[0],b1=p2[1]-a1*p2[0];if(_95c(a0,a1)){if(!_95c(b0,b1)){return null;}else{if(_95c(p0[0],p1[0])){if(Math.min(p0[1],p1[1])<Math.max(p2[1],p3[1])||Math.max(p0[1],p1[1])>Math.min(p2[1],p3[1])){y=(p0[1]+p1[1]+p2[1]+p3[1]-Math.min(p0[1],p1[1],p2[1],p3[1])-Math.max(p0[1],p1[1],p2[1],p3[1]))/2;x=(y-b0)/a0;}else{return null;}}else{if(Math.min(p0[0],p1[0])<Math.max(p2[0],p3[0])||Math.max(p0[0],p1[0])>Math.min(p2[0],p3[0])){x=(p0[0]+p1[0]+p2[0]+p3[0]-Math.min(p0[0],p1[0],p2[0],p3[0])-Math.max(p0[0],p1[0],p2[0],p3[0]))/2;y=a0*x+b0;}else{return null;}}return [x,y];}}if(_95c(a0,_95e)){x=p0[0];y=a1*x+b1;}else{if(_95c(a1,_95e)){x=p2[0];y=a0*x+b0;}else{x=-(b0-b1)/(a0-a1);y=a0*x+b0;}}return [x,y];};function _95f(_960,_961,_962,_963,sr){var pt=_95d([_960.x,_960.y],[_961.x,_961.y],[_962.x,_962.y],[_963.x,_963.y]);if(pt){pt=new _956(pt[0],pt[1],sr);}return pt;};function _964(_965,_966){var p1=_965[0],p2=_965[1],p3=_966[0],p4=_966[1],x1=p1[0],y1=p1[1],x2=p2[0],y2=p2[1],x3=p3[0],y3=p3[1],x4=p4[0],y4=p4[1],x43=x4-x3,x13=x1-x3,x21=x2-x1,y43=y4-y3,y13=y1-y3,y21=y2-y1,_967=(y43*x21)-(x43*y21),ua,ub,px,py;if(_967===0){return false;}ua=((x43*y13)-(y43*x13))/_967;ub=((x21*y13)-(y21*x13))/_967;if(ua>=0&&ua<=1&&ub>=0&&ub<=1){px=x1+(ua*(x2-x1));py=y1+(ua*(y2-y1));return [px,py];}else{return false;}};function _968(_969,line){var p1=line[0],p2=line[1],x1=p1[0],y1=p1[1],x2=p2[0],y2=p2[1],x3=_969[0],y3=_969[1],x21=x2-x1,y21=y2-y1,x31=x3-x1,y31=y3-y1,sqrt=Math.sqrt,pow=Math.pow,mag=sqrt(pow(x21,2)+pow(y21,2)),u=((x31*x21)+(y31*y21))/(mag*mag),x=x1+u*x21,y=y1+u*y21;return sqrt(pow(x3-x,2)+pow(y3-y,2));};var _96a={getLength:_957,_getLength:_958,getPointOnLine:_959,getMidpoint:_95b,_equals:_95c,_getLineIntersection:_95d,getLineIntersection:_95f,_getLineIntersection2:_964,_pointLineDistance:_968};if(has("extend-esri")){lang.mixin(lang.getObject("geometry",true,_955),_96a);}return _96a;});},"esri/tasks/BufferParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/geometry/Polygon","esri/geometry/jsonUtils"],function(_96b,lang,_96c,_96d,has,_96e,_96f,_970){var _971=_96b(null,{declaredClass:"esri.tasks.BufferParameters",geometries:null,outSpatialReference:null,bufferSpatialReference:null,distances:null,unit:null,unionResults:false,geodesic:false,toJson:function(){var json={unit:this.unit,unionResults:this.unionResults,geodesic:this.geodesic},dt=this.distances,_972=this.outSpatialReference,_973=this.bufferSpatialReference;var _974=_96c.map(this.geometries,function(geom){geom=(geom.type==="extent")?this._extentToPolygon(geom):geom;return geom.toJson();},this);var _975=this.geometries;if(_975&&_975.length>0){var _976=_975[0].type==="extent"?"esriGeometryPolygon":_970.getJsonType(_975[0]);json.geometries=_96d.toJson({geometryType:_976,geometries:_974});json.inSR=_975[0].spatialReference.wkid?_975[0].spatialReference.wkid:_96d.toJson(_975[0].spatialReference.toJson());}if(dt){json.distances=dt.join(",");}if(_972){json.outSR=_972.wkid?_972.wkid:_96d.toJson(_972.toJson());}if(_973){json.bufferSR=_973.wkid?_973.wkid:_96d.toJson(_973.toJson());}return json;},_extentToPolygon:function(_977){var xmin=_977.xmin,ymin=_977.ymin,xmax=_977.xmax,ymax=_977.ymax;return new _96f({"rings":[[[xmin,ymin],[xmin,ymax],[xmax,ymax],[xmax,ymin],[xmin,ymin]]],"spatialReference":_977.spatialReference.toJson()});}});if(has("extend-esri")){lang.setObject("tasks.BufferParameters",_971,_96e);}return _971;});},"esri/tasks/FindParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/layerUtils"],function(_978,lang,_979,_97a,has,_97b,_97c){var _97d=_978(null,{declaredClass:"esri.tasks.FindParameters",searchText:null,contains:true,searchFields:null,outSpatialReference:null,layerIds:null,returnGeometry:false,layerDefinitions:null,dynamicLayerInfos:null,toJson:function(){var json={searchText:this.searchText,contains:this.contains,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset},_97e=this.layerIds,_97f=this.searchFields,_980=this.outSpatialReference;if(_97e){json.layers=_97e.join(",");}if(_97f){json.searchFields=_97f.join(",");}if(_980){json.sr=_980.wkid||_97a.toJson(_980.toJson());}json.layerDefs=_97c._serializeLayerDefinitions(this.layerDefinitions);if(this.dynamicLayerInfos&&this.dynamicLayerInfos.length>0){var _981,_982=[];_979.forEach(this.dynamicLayerInfos,function(info){if(!info.subLayerIds){var _983=info.id;if(this.layerIds&&_979.indexOf(this.layerIds,_983)!==-1){var _984={id:_983};_984.source=info.source&&info.source.toJson();var _985;if(this.layerDefinitions&&this.layerDefinitions[_983]){_985=this.layerDefinitions[_983];}if(_985){_984.definitionExpression=_985;}_982.push(_984);}}},this);_981=_97a.toJson(_982);if(_981==="[]"){_981="[{}]";}json.dynamicLayers=_981;}return json;}});if(has("extend-esri")){lang.setObject("tasks.FindParameters",_97d,_97b);}return _97d;});},"url:dijit/form/templates/Button.html":"<span class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><span class=\"dijitReset dijitInline dijitButtonNode\"\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" role=\"presentation\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\n\t\ttabIndex=\"-1\" role=\"presentation\" data-dojo-attach-point=\"valueNode\"\n/></span>\n","esri/tasks/AddressCandidate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/geometry/Point"],function(_986,lang,has,_987,_988){var _989=_986(null,{declaredClass:"esri.tasks.AddressCandidate",constructor:function(json){lang.mixin(this,json);this.location=new _988(this.location);}});if(has("extend-esri")){lang.setObject("tasks.AddressCandidate",_989,_987);}return _989;});},"esri/MouseEvents":function(){define(["dojo/_base/declare","dojo/_base/html","dojo/_base/lang","dojo/_base/sniff","dojo/_base/connect","dojo/_base/event","esri/kernel","esri/Evented","esri/geometry/Point","esri/geometry/ScreenPoint"],function(_98a,html,lang,has,_98b,_98c,_98d,_98e,_98f,_990){var _991=_98b.connect,_992=_98b.disconnect;var _993=_98a([_98e],{declaredClass:"esri.MouseEvents",doubleClickDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:has("mac")!==-1?1:3,wheelDivisor:has("chrome")<2?360:120,preventPageScroll:true,map:null,constructor:function(node,_994){this.node=node;lang.mixin(this,_994);var _995=function(evt){_98c.stop(evt);return false;};if(has("mozilla")){html.style(node,"MozUserSelect","none");}this._handles=[_991(node,"onselectstart",_995),_991(node,"ondragstart",_995),_991(node,"onmouseenter",this,this._onMouseEnterHandler),_991(node,"onmouseleave",this,this._onMouseLeaveHandler),_991(node,"onmousedown",this,this._onMouseDownHandler),_991(node,"onclick",this,this._onClickHandler),_991(node,"ondblclick",this,this._onDblClickHandler)];this._onMouseMoveHandler_connect=_991(node,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=_991(node,"onmouseup",this,this._onMouseUpHandler);this._fireClickEvent=lang.hitch(this,this._fireClickEvent);this._initialDuration=this.doubleClickDuration;var map=this.map;this.preventPageScroll=map?(map.isScrollWheelZoom||map.isScrollWheelPan):this.preventPageScroll;this.enableMouseWheel(false);},_fire:function(_996,evt){if(this[_996]){this[_996](evt);}if(this.map){if(this.map[_996]){this.map[_996](evt);}}},_processEvent:function(evt){evt=_98c.fix(evt,evt.target);var map=this.map,pos=map&&map.position;if(pos){if(evt.type==="DOMMouseScroll"&&has("ff")<3){evt.screenPoint=new _990(window.scrollX+evt.screenX-pos.x,window.scrollY+evt.screenY-pos.y);}else{evt.screenPoint=new _990(evt.pageX-pos.x,evt.pageY-pos.y);}evt.mapPoint=map.extent?map.toMap(evt.screenPoint):new _98f();}evt.numPoints=0;return evt;},_onMouseEnterHandler:function(evt){_992(this._onKeyDown_connect);_992(this._onKeyUp_connect);this._onKeyDown_connect=_991(document,"onkeydown",this,this._onKeyDownHandler);this._onKeyUp_connect=_991(document,"onkeyup",this,this._onKeyUpHandler);this._fire("onMouseOver",this._processEvent(evt));},_onMouseLeaveHandler:function(evt){_992(this._onKeyDown_connect);_992(this._onKeyUp_connect);this._onKeyDown_connect=this._onKeyUp_connect=null;this._fire("onMouseOut",this._processEvent(evt));},_onMouseMoveHandler:function(evt){if(this._dragEnd){this._dragEnd=false;return;}this._fire("onMouseMove",this._processEvent(evt));},_onMouseDownHandler:function(evt){_992(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=null;if(this.node.setCapture){this.node.setCapture(false);}this._onMouseDragHandler_connect=_991(document,"onmousemove",this,this._onMouseDragHandler);this._startX=evt.pageX;this._startY=evt.pageY;this._fire("onMouseDown",this._processEvent(evt));},_onMouseUpHandler:function(evt){var node=this.node;if(node.releaseCapture){node.releaseCapture();}_992(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=null;_992(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=_991(node,"onmousemove",this,this._onMouseMoveHandler);this._fire("onMouseUp",this._processEvent(evt));},_onMouseDragHandler:function(evt){_992(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=_991(document,"onmousemove",this,this._onMouseDraggingHandler);_992(this._onMouseUpHandler_connect);this._onMouseUpHandler_connect=_991(document,"onmouseup",this,this._onDragMouseUpHandler);this._docLeaveConnect=_991(document,"onmouseout",this,this._onDocMouseOut);this._fire("onMouseDragStart",this._processEvent(evt));},_onMouseDraggingHandler:function(evt){_98c.stop(evt);this._fire("onMouseDrag",this._processEvent(evt));},_onDragMouseUpHandler:function(evt){var node=this.node;if(node.releaseCapture){node.releaseCapture();}this._dragEnd=true;_992(this._docLeaveConnect);_992(this._onMouseDragHandler_connect);_992(this._onMouseUpHandler_connect);this._docLeaveConnect=this._onMouseDragHandler_connect=null;this._onMouseMoveHandler_connect=_991(node,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=_991(node,"onmouseup",this,this._onMouseUpHandler);evt=this._processEvent(evt);this._fire("onMouseDragEnd",evt);this._fire("onMouseUp",evt);},_onDocMouseOut:function(evt){var _997=evt.relatedTarget,_998=evt.relatedTarget&&evt.relatedTarget.nodeName.toLowerCase();if(!_997||(has("chrome")&&_998==="html")){this._onDragMouseUpHandler(evt);}},_onClickHandler:function(evt){evt=this._processEvent(evt);if(evt.pageX!==this._startX||evt.pageY!==this._startY){return;}clearTimeout(this._clickTimer);this._clickEvent=lang.mixin({},evt);this._clickTimer=setTimeout(this._fireClickEvent,this.doubleClickDuration);},_fireClickEvent:function(){clearTimeout(this._clickTimer);if(has("ie")<9){this._clickEvent.graphic=_98d._ieGraphic;delete _98d._ieGraphic;}this._fire("onClick",this._clickEvent);},_onDblClickHandler:function(evt){clearTimeout(this._clickTimer);this._fire("onDblClick",this._processEvent(evt));},_onMouseWheelHandler:function(evt){var map=this.map,_999=map?(map.isScrollWheelZoom||map.isScrollWheelPan):this.preventPageScroll;if(_999){_98c.stop(evt);}var _99a=has("ie")||has("webkit")?evt.wheelDelta/this.wheelDivisor:-evt.detail/this.mozWheelDivisor,_99b=Math.abs(_99a);if(_99b<=this.minWheelValue){_99b=this.minWheelValue;}else{_99b=this.maxWheelValue;}evt.value=_99a<0?-_99b:_99b;this._fire("onMouseWheel",this._processEvent(evt));},_onKeyDownHandler:function(evt){this._fire("onKeyDown",evt);},_onKeyUpHandler:function(evt){this._fire("onKeyUp",evt);},enableMouseWheel:function(_99c){_992(this._scrollHandle);this._scrollHandle=_991(this.node,(has("ff")||has("mozilla"))?(_99c?"MozMousePixelScroll":"DOMMouseScroll"):"onmousewheel",this,this._onMouseWheelHandler);},setImmediateClick:function(_99d){this.doubleClickDuration=_99d?0:this._initialDuration;},destroy:function(){var _99e=this._handles.concat([this._onMouseMoveHandler_connect,this._onMouseUpHandler_connect,this._onMouseDragHandler_connect,this._scrollHandle,this._onKeyDown_connect,this._onKeyUp_connect,this._docLeaveConnect]),i;for(i=0;i<_99e.length;i++){_992(_99e[i]);}clearTimeout(this._clickTimer);this.node=this.map=this._handles=this._clickEvent=this._onMouseMoveHandler_connect=this._onMouseUpHandler_connect=this._onMouseDragHandler_connect=this._scrollHandle=this._onKeyDown_connect=this._onKeyUp_connect=this._docLeaveConnect=null;}});if(has("extend-esri")){_98d.MouseEvents=_993;}return _993;});},"dojo/_base/url":function(){define(["./kernel"],function(dojo){var ore=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),ire=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$"),_99f=function(){var n=null,_9a0=arguments,uri=[_9a0[0]];for(var i=1;i<_9a0.length;i++){if(!_9a0[i]){continue;}var _9a1=new _99f(_9a0[i]+""),_9a2=new _99f(uri[0]+"");if(_9a1.path==""&&!_9a1.scheme&&!_9a1.authority&&!_9a1.query){if(_9a1.fragment!=n){_9a2.fragment=_9a1.fragment;}_9a1=_9a2;}else{if(!_9a1.scheme){_9a1.scheme=_9a2.scheme;if(!_9a1.authority){_9a1.authority=_9a2.authority;if(_9a1.path.charAt(0)!="/"){var path=_9a2.path.substring(0,_9a2.path.lastIndexOf("/")+1)+_9a1.path;var segs=path.split("/");for(var j=0;j<segs.length;j++){if(segs[j]=="."){if(j==segs.length-1){segs[j]="";}else{segs.splice(j,1);j--;}}else{if(j>0&&!(j==1&&segs[0]=="")&&segs[j]==".."&&segs[j-1]!=".."){if(j==(segs.length-1)){segs.splice(j,1);segs[j-1]="";}else{segs.splice(j-1,2);j-=2;}}}}_9a1.path=segs.join("/");}}}}uri=[];if(_9a1.scheme){uri.push(_9a1.scheme,":");}if(_9a1.authority){uri.push("//",_9a1.authority);}uri.push(_9a1.path);if(_9a1.query){uri.push("?",_9a1.query);}if(_9a1.fragment){uri.push("#",_9a1.fragment);}}this.uri=uri.join("");var r=this.uri.match(ore);this.scheme=r[2]||(r[1]?"":n);this.authority=r[4]||(r[3]?"":n);this.path=r[5];this.query=r[7]||(r[6]?"":n);this.fragment=r[9]||(r[8]?"":n);if(this.authority!=n){r=this.authority.match(ire);this.user=r[3]||n;this.password=r[4]||n;this.host=r[6]||r[7];this.port=r[9]||n;}};_99f.prototype.toString=function(){return this.uri;};return dojo._Url=_99f;});},"esri/layers/MosaicRule":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","esri/kernel","esri/lang","esri/geometry/Point"],function(_9a3,lang,_9a4,has,_9a5,_9a6,_9a7){var _9a8=_9a3(null,{declaredClass:"esri.layers.MosaicRule",method:null,where:null,sortField:null,sortValue:null,ascending:false,lockRasterIds:null,viewpoint:null,objectIds:null,operation:null,constructor:function(_9a9){if(!lang.isObject(_9a9)){return;}lang.mixin(this,_9a9);if(_9a9.mosaicMethod){this.method=_9a9.mosaicMethod;}if(this.method&&this.method.toLowerCase().substring(0,4)!=="esri"){this.method=this._getMethodEnum(this.method);}if(_9a9.mosaicOperation){this.operation=_9a9.mosaicOperation;}if(this.operation&&this.operation.toUpperCase().substring(0,3)!=="MT_"){this.operation=this._getOperatorEnum(this.operation);}if(_9a9.fids){this.objectIds=_9a9.fids;}if(_9a9.viewpoint){this.viewpoint=new _9a7(_9a9.viewpoint);}},toJson:function(){var json={mosaicMethod:this.method,where:this.where,sortField:this.sortField,sortValue:this.sortValue,ascending:this.ascending,lockRasterIds:this.lockRasterIds,viewpoint:this.viewpoint?this.viewpoint.toJson():null,fids:this.objectIds,mosaicOperation:this.operation};return _9a6.filter(json,function(_9aa){if(_9aa!==null){return true;}});},_getMethodEnum:function(_9ab){if(!_9ab){return;}var _9ac=_9a8.METHOD_NONE;switch(_9ab.toLowerCase()){case "byattribute":_9ac=_9a8.METHOD_ATTRIBUTE;break;case "center":_9ac=_9a8.METHOD_CENTER;break;case "lockraster":_9ac=_9a8.METHOD_LOCKRASTER;break;case "nadir":_9ac=_9a8.METHOD_NADIR;break;case "northwest":_9ac=_9a8.METHOD_NORTHWEST;break;case "seamline":_9ac=_9a8.METHOD_SEAMLINE;break;case "viewpoint":_9ac=_9a8.METHOD_VIEWPOINT;break;}return _9ac;},_getOperatorEnum:function(_9ad){if(!_9ad){return;}switch(_9ad.toLowerCase()){case "first":return _9a8.OPERATION_FIRST;case "last":return _9a8.OPERATION_LAST;case "max":return _9a8.OPERATION_MAX;case "min":return _9a8.OPERATION_MIN;case "blend":return _9a8.OPERATION_BLEND;case "mean":return _9a8.OPERATION_MEAN;}}});lang.mixin(_9a8,{METHOD_NONE:"esriMosaicNone",METHOD_CENTER:"esriMosaicCenter",METHOD_NADIR:"esriMosaicNadir",METHOD_VIEWPOINT:"esriMosaicViewpoint",METHOD_ATTRIBUTE:"esriMosaicAttribute",METHOD_LOCKRASTER:"esriMosaicLockRaster",METHOD_NORTHWEST:"esriMosaicNorthwest",METHOD_SEAMLINE:"esriMosaicSeamline",OPERATION_FIRST:"MT_FIRST",OPERATION_LAST:"MT_LAST",OPERATION_MIN:"MT_MIN",OPERATION_MAX:"MT_MAX",OPERATION_MEAN:"MT_MEAN",OPERATION_BLEND:"MT_BLEND"});if(has("extend-esri")){lang.setObject("layers.MosaicRule",_9a8,_9a5);}return _9a8;});},"esri/layers/DynamicMapServiceLayer":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/dom-construct","dojo/dom-style","dojox/xml/parser","dojox/gfx/matrix","esri/kernel","esri/config","esri/sniff","esri/request","esri/domUtils","esri/layers/layer","esri/layers/MapImage"],function(_9ae,_9af,lang,_9b0,_9b1,_9b2,_9b3,_9b4,_9b5,has,_9b6,_9b7,_9b8,_9b9){var _9ba=_9b5.defaults.map.zoomDuration;var _9bb=_9ae(_9b8,{declaredClass:"esri.layers.DynamicMapServiceLayer",_eventMap:{"map-image-export":["mapImage"]},constructor:function(url,_9bc){this.useMapTime=(_9bc&&_9bc.hasOwnProperty("useMapTime"))?(!!_9bc.useMapTime):true;var _9bd=lang.hitch;this._exportMapImageHandler=_9bd(this,this._exportMapImageHandler);this._imgSrcFunc=_9bd(this,this._imgSrcFunc);this._divAlphaImageFunc=_9bd(this,this._divAlphaImageFunc);this._tileLoadHandler=_9bd(this,this._tileLoadHandler);this._tileErrorHandler=_9bd(this,this._tileErrorHandler);this.registerConnectEvents();},opacity:1,isPNG32:false,_setMap:function(map,_9be,_9bf){this.inherited(arguments);this._map=map;var d=(this._div=_9b0.create("div",null,_9be)),_9c0=_9b4._css.names,css={position:"absolute",width:map.width+"px",height:map.height+"px",overflow:"visible",opacity:this.opacity},isIE=has("ie"),_9c1=_9af.connect,vd=map.__visibleDelta;if(isIE&&isIE>7){delete css.opacity;}if(map.navigationMode==="css-transforms"){css[_9c0.transform]=_9b4._css.translate(vd.x,vd.y);_9b1.set(d,css);this._left=vd.x;this._top=vd.y;}else{css.left="0px";css.top="0px";_9b1.set(d,css);this._left=this._top=0;}_9b1.set(d,css);this._onResizeHandler_connect=_9c1(map,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=_9c1(this,"onOpacityChange",this,"_opacityChangeHandler");this._img_loading=null;this._dragOrigin={x:0,y:0};this.evaluateSuspension();if(this.suspended&&!map.loaded){var _9c2=_9af.connect(map,"onLoad",this,function(){_9af.disconnect(_9c2);_9c2=null;this.evaluateSuspension();});}return d;},_unsetMap:function(map,_9c3){_9b0.destroy(this._div);this._map=this._div=null;var _9c4=_9af.disconnect;_9c4(this._onResizeHandler_connect);_9c4(this._opacityChangeHandler_connect);this._onResizeHandler_connect=this._opacityChangeHandler_connect=null;this._fireUpdateEnd();this._toggleTime();clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments);},_onResizeHandler:function(_9c5,_9c6,_9c7){_9b1.set(this._div,{width:_9c6+"px",height:_9c7+"px"});this._onExtentChangeHandler(_9c5);},onSuspend:function(){this.inherited(arguments);this._fireUpdateEnd();this._toggleTime();_9b7.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();},onResume:function(){this.inherited(arguments);var map=this._map;this._toggleTime();if(map.navigationMode==="css-transforms"){var vd=map.__visibleDelta;this._left=vd.x;this._top=vd.y;_9b1.set(this._div,_9b4._css.names.transform,_9b4._css.translate(this._left,this._top));}this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(lang.hitch(this,function(){if(!this.suspended){this._onExtentChangeHandler(this._map.extent);}}),0);},_enableDrawConnectors:function(){var _9c8=_9af.connect,map=this._map;if(map){this._onPanHandler_connect=_9c8(map,"onPan",this,"_onPanHandler");this._onExtentChangeHandler_connect=_9c8(map,"onExtentChange",this,"_onExtentChangeHandler");if(map.navigationMode==="css-transforms"){this._onScaleHandler_connect=_9c8(map,"onScale",this,this._onScaleHandler);}else{this._onZoomHandler_connect=_9c8(map,"onZoom",this,"_onZoomHandler");}}},_disableDrawConnectors:function(){var _9c9=_9af.disconnect;_9c9(this._onPanHandler_connect);_9c9(this._onExtentChangeHandler_connect);_9c9(this._onZoomHandler_connect);_9c9(this._onScaleHandler_connect);this._onPanHandler_connect=this._onExtentChangeHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=null;},_toggleTime:function(){var map=this._map;if(this.timeInfo&&this.useMapTime&&map&&!this.suspended){if(!this._timeConnect){this._timeConnect=_9af.connect(map,"onTimeExtentChange",this,this._onTimeExtentChangeHandler);}this._setTime(map.timeExtent);}else{_9af.disconnect(this._timeConnect);this._timeConnect=null;this._setTime(null);}},_setTime:function(_9ca){if(this._params){this._params.time=_9ca?_9ca.toJson().join(","):null;}},_onPanHandler:function(_9cb,_9cc){this._panDx=_9cc.x;this._panDy=_9cc.y;var _9cd=this._dragOrigin,vd=this._map.__visibleDelta,img=this._img;if(img){if(this._map.navigationMode==="css-transforms"){this._left=vd.x+_9cc.x;this._top=vd.y+_9cc.y;_9b1.set(this._div,_9b4._css.names.transform,_9b4._css.translate(this._left,this._top));}else{_9b1.set(img,{left:(_9cd.x+_9cc.x)+"px",top:(_9cd.y+_9cc.y)+"px"});}}},_onExtentChangeHandler:function(_9ce,_9cf,_9d0){if(this.suspended){return;}clearTimeout(this._wakeTimer);this._wakeTimer=null;var _9d1=this._map,_9d2=this._img,_9d3=_9d2&&_9d2.style,_9d4=this._dragOrigin;if(_9cf&&!_9d0&&_9d2&&(_9cf.x!==this._panDx||_9cf.y!==this._panDy)){if(_9d1.navigationMode==="css-transforms"){var vd=_9d1.__visibleDelta;this._left=vd.x;this._top=vd.y;_9b1.set(this._div,_9b4._css.names.transform,_9b4._css.translate(this._left,this._top));}else{_9b1.set(_9d2,{left:(_9d4.x+_9cf.x)+"px",top:(_9d4.y+_9cf.y)+"px"});}}if(_9d2){_9d4.x=parseInt(_9d3.left,10);_9d4.y=parseInt(_9d3.top,10);}else{_9d4.x=(_9d4.y=0);}if(_9d1.navigationMode==="css-transforms"){if(_9d0&&_9d2){_9b1.set(_9d2,_9b4._css.names.transition,"none");_9d2._multiply=_9d2._multiply?_9b3.multiply(_9d2._matrix,_9d2._multiply):_9d2._matrix;}}this._fireUpdateStart();var _9d5=this._img_loading;if(_9d5){_9af.disconnect(_9d5._onload_connect);_9af.disconnect(_9d5._onerror_connect);_9af.disconnect(_9d5._onabort_connect);_9b0.destroy(_9d5);this._img_loading=null;var _9d6=this._jsonRequest;if(_9d6){try{_9d6.cancel();}catch(e){}this._jsonRequest=null;}}if(this.version>=10&&_9d1.wrapAround180){_9ce=_9ce._normalize(true);}if(this.isPNG32){var div=(this._img_loading=_9b0.create("div"));div.id=_9d1.id+"_"+this.id+"_"+new Date().getTime();_9b1.set(div,{position:"absolute",left:"0px",top:"0px",width:_9d1.width+"px",height:_9d1.height+"px"});var _9d7=div.appendChild(_9b0.create("div"));_9b1.set(_9d7,{opacity:0,width:_9d1.width+"px",height:_9d1.height+"px"});this.getImageUrl(_9ce,_9d1.width,_9d1.height,this._divAlphaImageFunc);div=null;}else{var img=(this._img_loading=_9b0.create("img")),_9d8=_9b4._css.names,isIE=has("ie"),css={position:"absolute",width:_9d1.width+"px",height:_9d1.height+"px"};if(isIE&&isIE>7){css.opacity=this.opacity;}if(_9d1.navigationMode==="css-transforms"){css[_9d8.transform]=_9b4._css.translate(-this._left,-this._top);img._tdx=-this._left;img._tdy=-this._top;css[_9d8.transition]=_9d8.transformName+" "+_9ba+"ms ease";}else{css.left="0px";css.top="0px";}img.id=_9d1.id+"_"+this.id+"_"+new Date().getTime();_9b1.set(img,css);img._onload_connect=_9af.connect(img,"onload",this,"_onLoadHandler");img._onerror_connect=_9af.connect(img,"onerror",this,"_onErrorHandler");img._onabort_connect=_9af.connect(img,"onabort",this,"_onErrorHandler");this._startRect={left:_9d4.x,top:_9d4.y,width:_9d2?parseInt(_9d3.width,10):_9d1.width,height:_9d2?parseInt(_9d3.height,10):_9d1.height,zoom:(_9d3&&_9d3.zoom)?parseFloat(_9d3.zoom):1};this.getImageUrl(_9ce,_9d1.width,_9d1.height,this._imgSrcFunc);img=null;}},_onTimeExtentChangeHandler:function(_9d9){if(this.suspended){return;}this._setTime(_9d9);this.refresh(true);},getImageUrl:function(_9da,wd,ht,_9db){},_imgSrcFunc:function(src){this._img_loading.src=src;},_divAlphaImageFunc:function(src){_9b1.set(this._img_loading,"filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+src+"', sizingMethod='scale')");this._onLoadHandler({currentTarget:this._img_loading});},_onLoadHandler:function(evt){var img=evt.currentTarget,_9dc=_9af.disconnect,_9dd=this._map;_9dc(img._onload_connect);_9dc(img._onerror_connect);_9dc(img._onabort_connect);if(!_9dd||_9dd.__panning||_9dd.__zooming){_9b0.destroy(img);this._fireUpdateEnd();return;}_9b2.removeChildren(this._div);this._img=img;this._startRect={left:0,top:0,width:_9dd.width,height:_9dd.height,zoom:1};this._div.appendChild(img);if(!this.suspended){_9b7.show(this._div);}img._onload_connect=img._onerror_connect=img._onabort_connect=this._img_loading=null;var _9de=this._dragOrigin;_9de.x=(_9de.y=0);this.onUpdate();this._fireUpdateEnd();},_onErrorHandler:function(evt){var img=evt.currentTarget,_9df=_9af.disconnect;_9b1.set(img,"visibility","hidden");_9df(img._onload_connect);_9df(img._onerror_connect);_9df(img._onabort_connect);img._onload_connect=img._onerror_connect=img._onabort_connect=null;var _9e0=new Error("Unable to load image: "+img.src);this.onError(_9e0);this._fireUpdateEnd(_9e0);},setUseMapTime:function(use,_9e1){this.useMapTime=use;this._toggleTime();if(!_9e1){this.refresh(true);}},refresh:function(){if(this._map){this._onExtentChangeHandler(this._map.extent);}},_onScaleHandler:function(mtx,_9e2){var css={},_9e3=_9b4._css.names,img=this._img;if(!img){return;}_9b1.set(img,_9e3.transition,_9e2?"none":(_9e3.transformName+" "+_9ba+"ms ease"));img._matrix=mtx;mtx=img._multiply?_9b3.multiply(mtx,img._multiply):mtx;if(img._tdx||img._tdy){mtx=_9b3.multiply(mtx,{"xx":1,"xy":0,"yx":0,"yy":1,"dx":img._tdx,"dy":img._tdy});}css[_9e3.transform]=_9b4._css.matrix(mtx);_9b1.set(img,css);},_onZoomHandler:function(_9e4,_9e5,_9e6){var _9e7=this._startRect,_9e8=_9e7.width*_9e5,_9e9=_9e7.height*_9e5,img=this._img,isIE=has("ie");if(img){if(isIE&&isIE<8){_9b1.set(img,{left:(_9e7.left-((_9e8-_9e7.width)*(_9e6.x-_9e7.left)/_9e7.width))+"px",top:(_9e7.top-((_9e9-_9e7.height)*(_9e6.y-_9e7.top)/_9e7.height))+"px",zoom:_9e5*_9e7.zoom});}else{_9b1.set(img,{left:(_9e7.left-((_9e8-_9e7.width)*(_9e6.x-_9e7.left)/_9e7.width))+"px",top:(_9e7.top-((_9e9-_9e7.height)*(_9e6.y-_9e7.top)/_9e7.height))+"px",width:_9e8+"px",height:_9e9+"px"});}}},_exportMapImage:function(url,_9ea,_9eb){var _9ec=this._exportMapImageHandler;_9ea.token=this._getToken();_9b6({url:url,content:_9ea,callbackParamName:"callback",load:function(){_9ec(arguments[0],arguments[1],_9eb);},error:_9b5.defaults.io.errorHandler});},_exportMapImageHandler:function(_9ed,io,_9ee){var _9ef=new _9b9(_9ed);this.onMapImageExport(_9ef);if(_9ee){_9ee(_9ef);}},onMapImageExport:function(){},setOpacity:function(o){if(this.opacity!=o){this.onOpacityChange(this.opacity=o);}},onOpacityChange:function(){},_opacityChangeHandler:function(_9f0){_9b1.set(this._div,"opacity",_9f0);}});if(has("extend-esri")){lang.setObject("layers.DynamicMapServiceLayer",_9bb,_9b4);}return _9bb;});},"esri/lang":function(){define(["dojo/_base/array","dojo/_base/json","dojo/_base/kernel","dojo/_base/lang","dojo/date","dojo/has","dojo/number","dojo/date/locale","esri/kernel"],function(_9f1,json,_9f2,lang,_9f3,has,_9f4,_9f5,_9f6){function _9f7(arr,obj,cb){return [lang.isString(arr)?arr.split(""):arr,obj||_9f2.global,lang.isString(cb)?new Function("item","index","array",cb):cb];};function _9f8(_9f9){return (_9f9!==undefined)&&(_9f9!==null);};var _9fa="${*}",_9fb=["NumberFormat","DateString","DateFormat"];function _9fc(_9fd){return _9f8(_9fd)?_9fd:"";};function exec(key,data,_9fe){var _9ff=_9fe.match(/([^\(]+)(\([^\)]+\))?/i),_a00=lang.trim(_9ff[1]),_a01=data[key],_a02,args=json.fromJson((_9ff[2]?lang.trim(_9ff[2]):"()").replace(/^\(/,"({").replace(/\)$/,"})")),_a03=args.utcOffset;if(_9f1.indexOf(_9fb,_a00)===-1){var ref=lang.getObject(_a00);if(lang.isFunction(ref)){_a01=ref(_a01,key,data);}}else{if(typeof _a01==="number"||(typeof _a01==="string"&&_a01&&!isNaN(Number(_a01)))){_a01=Number(_a01);switch(_a00){case "NumberFormat":return _9f4.format(_a01,args);break;case "DateString":_a02=new Date(_a01);if(args.local||args.systemLocale){if(args.systemLocale){return _a02.toLocaleDateString()+(args.hideTime?"":(" "+_a02.toLocaleTimeString()));}else{return _a02.toDateString()+(args.hideTime?"":(" "+_a02.toTimeString()));}}else{_a02=_a02.toUTCString();if(args.hideTime){_a02=_a02.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,"");}return _a02;}break;case "DateFormat":_a02=new Date(_a01);if(_9f8(_a03)){_a02=_9f3.add(_a02,"minute",(_a02.getTimezoneOffset()-_a03));}return _9f5.format(_a02,args);break;}}}return _9fc(_a01);};function _a04(obj,_a05){var prop;if(_a05){for(prop in obj){if(obj.hasOwnProperty(prop)){if(obj[prop]===undefined||obj[prop]===null){delete obj[prop];}else{if(obj[prop] instanceof Object){_a04(obj[prop],true);}}}}}else{for(prop in obj){if(obj.hasOwnProperty(prop)){if(obj[prop]===undefined){delete obj[prop];}}}}return obj;};var _a06={valueOf:function(_a07,_a08){var i;for(i in _a07){if(_a07[i]==_a08){return i;}}return null;},substitute:function(data,_a09,_a0a){var _a0b,_a0c,_a0d;if(_9f8(_a0a)){if(lang.isObject(_a0a)){_a0b=_a0a.first;_a0c=_a0a.dateFormat;_a0d=_a0a.numberFormat;}else{_a0b=_a0a;}}if(!_a09||_a09===_9fa){var s=[],val,i;for(i in data){val=data[i];if(_a0c&&_9f1.indexOf(_a0c.properties||"",i)!==-1){val=exec(i,data,_a0c.formatter||"DateString");}else{if(_a0d&&_9f1.indexOf(_a0d.properties||"",i)!==-1){val=exec(i,data,_a0d.formatter||"NumberFormat");}}s.push(i+" = "+_9fc(val)+"<br/>");if(_a0b){break;}}return s.join("");}else{return lang.replace(_a09,lang.hitch({obj:data},function(_a0e,key){var _a0f=key.split(":");if(_a0f.length>1){key=_a0f[0];_a0f.shift();return exec(key,this.obj,_a0f.join(":"));}else{if(_a0c&&_9f1.indexOf(_a0c.properties||"",key)!==-1){return exec(key,this.obj,_a0c.formatter||"DateString");}if(_a0d&&_9f1.indexOf(_a0d.properties||"",key)!==-1){return exec(key,this.obj,_a0d.formatter||"NumberFormat");}}return _9fc(this.obj[key]);}),/\$\{([^\}]+)\}/g);}},filter:function(arr,_a10,_a11){var _a12=_9f7(arr,_a11,_a10),_a13={},i;arr=_a12[0];for(i in arr){if(_a12[2].call(_a12[i],arr[i],i,arr)){_a13[i]=arr[i];}}return _a13;},isDefined:_9f8,fixJson:_a04};if(has("extend-esri")){lang.mixin(_9f6,_a06);_9f6._isDefined=_9f8;_9f6._getParts=_9f7;_9f6._sanitize=_a04;}return _a06;});},"esri/renderers/jsonUtils":function(){define(["dojo/_base/lang","dojo/has","esri/kernel","esri/renderers/SimpleRenderer","esri/renderers/UniqueValueRenderer","esri/renderers/ClassBreaksRenderer"],function(lang,has,_a14,_a15,_a16,_a17){var _a18={fromJson:function(json){var type=json.type||"",_a19;switch(type){case "simple":_a19=new _a15(json);break;case "uniqueValue":_a19=new _a16(json);break;case "classBreaks":_a19=new _a17(json);break;}return _a19;}};if(has("extend-esri")){lang.mixin(lang.getObject("renderer",true,_a14),_a18);}return _a18;});},"esri/tasks/FeatureSet":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/lang","esri/graphic","esri/SpatialReference","esri/graphicsUtils","esri/geometry/jsonUtils","esri/symbols/jsonUtils"],function(_a1a,lang,_a1b,has,_a1c,_a1d,_a1e,_a1f,_a20,_a21,_a22){var _a23=_a1a(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(json){if(json){lang.mixin(this,json);var _a24=this.features,sr=json.spatialReference,_a25=_a21.getGeometryType(json.geometryType);sr=(this.spatialReference=new _a1f(sr));this.geometryType=json.geometryType;if(json.fields){this.fields=json.fields;}_a1b.forEach(_a24,function(_a26,i){var _a27=_a26.geometry&&_a26.geometry.spatialReference;_a24[i]=new _a1e((_a25&&_a26.geometry)?new _a25(_a26.geometry):null,_a26.symbol&&_a22.fromJson(_a26.symbol),_a26.attributes);if(_a24[i].geometry&&!_a27){_a24[i].geometry.setSpatialReference(sr);}});}else{this.features=[];}},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(_a28){var json={};if(this.displayFieldName){json.displayFieldName=this.displayFieldName;}if(this.fields){json.fields=this.fields;}if(this.spatialReference){json.spatialReference=this.spatialReference.toJson();}else{if(this.features[0]&&this.features[0].geometry){json.spatialReference=this.features[0].geometry.spatialReference.toJson();}}if(this.features[0]){if(this.features[0].geometry){json.geometryType=_a21.getJsonType(this.features[0].geometry);}json.features=_a20._encodeGraphics(this.features,_a28);}json.exceededTransferLimit=this.exceededTransferLimit;return _a1d.fixJson(json);}});if(has("extend-esri")){lang.setObject("tasks.FeatureSet",_a23,_a1c);}return _a23;});},"esri/renderers/Renderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_a29,lang,has,_a2a){var _a2b=_a29(null,{declaredClass:"esri.renderer.Renderer",constructor:function(){this.getSymbol=lang.hitch(this,this.getSymbol);},getSymbol:function(_a2c){},toJson:function(){}});if(has("extend-esri")){lang.setObject("renderer.Renderer",_a2b,_a2a);}return _a2b;});},"esri/tasks/LengthsParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel"],function(_a2d,lang,_a2e,_a2f,has,_a30){var _a31=_a2d(null,{declaredClass:"esri.tasks.LengthsParameters",polylines:null,lengthUnit:null,geodesic:null,calculationType:null,toJson:function(){var _a32=_a2e.map(this.polylines,function(geom){return geom.toJson();});var json={};json.polylines=_a2f.toJson(_a32);var _a33=this.polylines[0].spatialReference;json.sr=_a33.wkid?_a33.wkid:_a2f.toJson(_a33.toJson());if(this.lengthUnit){json.lengthUnit=this.lengthUnit;}if(this.geodesic){json.geodesic=this.geodesic;}if(this.calculationType){json.calculationType=this.calculationType;}return json;}});if(has("extend-esri")){lang.setObject("tasks.LengthsParameters",_a31,_a30);}return _a31;});},"esri/symbols/CartographicLineSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","dojox/gfx/_base","esri/kernel","esri/lang","esri/symbols/SimpleLineSymbol"],function(_a34,lang,_a35,has,_a36,_a37,_a38,_a39){var _a3a={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"};var _a3b={color:[0,0,0,1],style:_a3a.STYLE_SOLID,width:1,cap:_a3a.CAP_BUTT,join:_a3a.JOIN_MITER,miterLimit:10};var CLS=_a34(_a39,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",bevel:"esriLJSBevel"},constructor:function(json,_a3c,_a3d,cap,join,_a3e){if(json){if(lang.isString(json)){this.style=json;if(_a3c){this.color=_a3c;}if(_a3d!==undefined){this.width=_a3d;}if(cap){this.cap=cap;}if(join){this.join=join;}if(_a3e!==undefined){this.miterLimit=_a3e;}}else{this.cap=_a38.valueOf(this._caps,json.cap);this.join=_a38.valueOf(this._joins,json.join);this.width=_a36.pt2px(json.width);this.miterLimit=_a36.pt2px(json.miterLimit);}}else{lang.mixin(this,_a3b);this.color=new _a35(this.color);this.width=_a36.pt2px(this.width);this.miterLimit=_a36.pt2px(this.miterLimit);}},setCap:function(cap){this.cap=cap;return this;},setJoin:function(join){this.join=join;return this;},setMiterLimit:function(_a3f){this.miterLimit=_a3f;return this;},getStroke:function(){return lang.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:(this.join===_a3a.JOIN_MITER?this.miterLimit:this.join)});},getFill:function(){return null;},getShapeDescriptors:function(){return {defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()};},toJson:function(){var _a40=_a36.px2pt(this.miterLimit);_a40=isNaN(_a40)?undefined:_a40;return _a38.fixJson(lang.mixin(this.inherited("toJson",arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:_a40}));}});lang.mixin(CLS,_a3a);CLS.defaultProps=_a3b;if(has("extend-esri")){lang.setObject("symbol.CartographicLineSymbol",CLS,_a37);_a37.symbol.defaultCartographicLineSymbol=_a3b;}return CLS;});},"esri/geometry/Multipoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/SpatialReference","esri/geometry/Geometry","esri/geometry/Point","esri/geometry/Extent"],function(_a41,lang,has,_a42,_a43,_a44,_a45,_a46){var _a47={type:"multipoint",points:null};var _a48=_a41(_a44,{declaredClass:"esri.geometry.Multipoint",constructor:function(obj){lang.mixin(this,_a47);this.points=[];if(obj){if(obj.points){lang.mixin(this,obj);}else{this.spatialReference=obj;}if(this.spatialReference){this.spatialReference=new _a43(this.spatialReference);}}this.verifySR();},_extent:null,addPoint:function(_a49){this._extent=null;if(lang.isArray(_a49)){this.points.push(_a49);}else{this.points.push([_a49.x,_a49.y]);}return this;},removePoint:function(_a4a){if(this._validateInputs(_a4a)){this._extent=null;return new _a45(this.points.splice(_a4a,1)[0],this.spatialReference);}},getExtent:function(){if(this._extent){return new _a46(this._extent);}var _a4b=this.points,il=_a4b.length;if(!il){return;}var _a4c=_a4b[0],xmax,ymax,xmin=(xmax=_a4c[0]),ymin=(ymax=_a4c[1]),min=Math.min,max=Math.max,sr=this.spatialReference,x,y,i;for(i=0;i<il;i++){_a4c=_a4b[i];x=_a4c[0];y=_a4c[1];xmin=min(xmin,x);ymin=min(ymin,y);xmax=max(xmax,x);ymax=max(ymax,y);}this._extent={xmin:xmin,ymin:ymin,xmax:xmax,ymax:ymax,spatialReference:sr?sr.toJson():null};return new _a46(this._extent);},_validateInputs:function(_a4d){if(_a4d===null||_a4d<0||_a4d>=this.points.length){return false;}return true;},getPoint:function(_a4e){if(this._validateInputs(_a4e)){var _a4f=this.points[_a4e];return new _a45(_a4f[0],_a4f[1],this.spatialReference);}},setPoint:function(_a50,_a51){if(this._validateInputs(_a50)){this._extent=null;this.points[_a50]=[_a51.x,_a51.y];return this;}},toJson:function(){var json={points:lang.clone(this.points)},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});_a48.defaultProps=_a47;if(has("extend-esri")){lang.setObject("geometry.Multipoint",_a48,_a42);_a42.geometry.defaultMultipoint=_a47;}return _a48;});},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","esri/kernel"],function(lang,has,_a52){var _a53={_dfdCanceller:function(dfd){dfd.canceled=true;var _a54=dfd._pendingDfd;if(dfd.fired===-1&&_a54&&_a54.fired===-1){_a54.cancel();}dfd._pendingDfd=null;},_fixDfd:function(dfd){var _a55=dfd.then;dfd.then=function(_a56,b,c){if(_a56){var _a57=_a56;_a56=function(_a58){if(_a58&&_a58._argsArray){return _a57.apply(null,_a58);}return _a57(_a58);};}return _a55.call(this,_a56,b,c);};return dfd;},_resDfd:function(dfd,args,_a59){var _a5a=args.length;if(_a5a===1){if(_a59){dfd.errback(args[0]);}else{dfd.callback(args[0]);}}else{if(_a5a>1){args._argsArray=true;dfd.callback(args);}else{dfd.callback();}}}};if(has("extend-esri")){lang.mixin(_a52,_a53);}return _a53;});},"esri/layers/ImageServiceParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","esri/kernel","esri/lang"],function(_a5b,lang,_a5c,has,_a5d,_a5e){var _a5f=_a5b(null,{declaredClass:"esri.layers.ImageServiceParameters",extent:null,width:null,height:null,imageSpatialReference:null,format:null,interpolation:null,compressionQuality:null,bandIds:null,timeExtent:null,mosaicRule:null,renderingRule:null,noData:null,toJson:function(_a60){var ext=this.bbox||this.extent;ext=ext&&_a60&&ext._normalize(true);var wkid=ext?(ext.spatialReference.wkid||_a5c.toJson(ext.spatialReference.toJson())):null,_a61=this.imageSpatialReference,json={bbox:ext?(ext.xmin+","+ext.ymin+","+ext.xmax+","+ext.ymax):null,bboxSR:wkid,size:(this.width!==null&&this.height!==null?this.width+","+this.height:null),imageSR:(_a61?(_a61.wkid||_a5c.toJson(_a61.toJson())):wkid),format:this.format,interpolation:this.interpolation,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null,mosaicRule:this.mosaicRule?_a5c.toJson(this.mosaicRule.toJson()):null,renderingRule:this.renderingRule?_a5c.toJson(this.renderingRule.toJson()):null,noData:this.noData,noDataInterpretation:this.noDataInterpretation};var _a62=this.timeExtent;json.time=_a62?_a62.toJson().join(","):null;return _a5e.filter(json,function(_a63){if(_a63!==null&&_a63!==undefined){return true;}});}});lang.mixin(_a5f,{INTERPOLATION_BILINEAR:"RSP_BilinearInterpolation",INTERPOLATION_CUBICCONVOLUTION:"RSP_CubicConvolution",INTERPOLATION_MAJORITY:"RSP_Majority",INTERPOLATION_NEARESTNEIGHBOR:"RSP_NearestNeighbor",NODATA_MATCH_ALL:"esriNoDataMatchAll",NODATA_MATCH_ANY:"esriNoDataMatchAny"});if(has("extend-esri")){lang.setObject("layers.ImageServiceParameters",_a5f,_a5d);}return _a5f;});},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./ready","./sniff","./_base/window"],function(_a64,lang,_a65,has,_a66){var html=_a66.doc.documentElement,ie=has("ie"),_a67=has("opera"),maj=Math.floor,ff=has("ff"),_a68=_a64.boxModel.replace(/-/,""),_a69={"dj_quirks":has("quirks"),"dj_opera":_a67,"dj_khtml":has("khtml"),"dj_webkit":has("webkit"),"dj_safari":has("safari"),"dj_chrome":has("chrome"),"dj_gecko":has("mozilla")};if(ie){_a69["dj_ie"]=true;_a69["dj_ie"+maj(ie)]=true;_a69["dj_iequirks"]=has("quirks");}if(ff){_a69["dj_ff"+maj(ff)]=true;}_a69["dj_"+_a68]=true;var _a6a="";for(var clz in _a69){if(_a69[clz]){_a6a+=clz+" ";}}html.className=lang.trim(html.className+" "+_a6a);_a65(90,function(){if(!_a64.isBodyLtr()){var _a6b="dj_rtl dijitRtl "+_a6a.replace(/ /g,"-rtl ");html.className=lang.trim(html.className+" "+_a6b+"dj_rtl dijitRtl "+_a6a.replace(/ /g,"-rtl "));}});return has;});},"esri/layers/RasterDataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/DataSource"],function(_a6c,lang,has,_a6d,_a6e,_a6f){var _a70=_a6c(_a6f,{declaredClass:"esri.layers.RasterDataSource",toJson:function(){var json={type:"raster",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName};return _a6e.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.RasterDataSource",_a70,_a6d);}return _a70;});},"esri/request":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/Deferred","dojo/_base/lang","dojo/_base/url","dojo/_base/xhr","dojo/io/script","dojo/io/iframe","dojo/dom-construct","dojo/io-query","esri/kernel","esri/config","esri/sniff","esri/lang","esri/urlUtils","esri/deferredUtils"],function(_a71,_a72,_a73,lang,Url,xhr,_a74,_a75,_a76,ioq,_a77,_a78,has,_a79,_a7a,_a7b){var _a7c;function _a7d(req,_a7e,_a7f,_a80){var _a81=false,_a82=false,_a83=true;if(_a79.isDefined(_a7e)){if(lang.isObject(_a7e)){_a81=!!_a7e.useProxy;_a82=!!_a7e.usePost;_a83=_a79.isDefined(_a7e.crossOrigin)?_a7e.crossOrigin:_a83;}else{_a81=!!_a7e;}}req=lang.mixin({},req);if(req._ssl){req.url=req.url.replace(/^http:/i,"https:");}var _a84=req.content,path=req.url,form=_a7f&&req.form,_a85=_a78.defaults.io;req.load=function(_a86){var err;if(_a86){if(_a86.error){err=lang.mixin(new Error(),_a86.error);err.log=_a72.isDebug;}else{if(_a86.status==="error"){err=lang.mixin(new Error(),_a86);err.log=_a72.isDebug;}}if(err&&!_a79.isDefined(err.httpCode)){err.httpCode=err.code;}}return err||_a86;};req.error=function(_a87,io){if(io&&io.xhr){io.xhr.abort();}if(!(_a87 instanceof Error)){_a87=lang.mixin(new Error(),_a87);}_a87.log=_a72.isDebug;_a85.errorHandler(_a87,io);return _a87;};if(req._token){req.content=req.content||{};req.content.token=req._token;}var len=0;if(_a84&&path){len=ioq.objectToQuery(_a84).length+path.length+1;}req.timeout=_a79.isDefined(req.timeout)?req.timeout:_a85.timeout;req.handleAs=req.handleAs||"json";try{var _a88,_a89,_a8a=_a83&&_a7a.canUseXhr(req.url)&&!(/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(req.url)),_a8b=(_a7a.hasSameOrigin(req.url,window.location.href)||_a8a),_a8c=(_a82||_a7f||len>_a85.postLength)?true:false,_a8d=(!_a8b&&req.handleAs.indexOf("json")!==-1&&req.callbackParamName&&!_a7f)?true:false,_a8e=(!!_a7a.getProxyRule(req.url)||_a85.alwaysUseProxy||_a81||((!_a8d||_a8c)&&!_a8b))?true:false;if(_a7f&&!has("esri-file-upload")&&!_a8e&&_a8a){_a8e=true;}if(_a8e){_a88=_a7a.getProxyUrl(path,_a83);_a89=_a88.path;if(_a88._xo){_a8a=true;}if(!_a8c&&(_a89.length+1+len)>_a85.postLength){_a8c=true;}req.url=_a89+"?"+path;if(_a8c){req.content=lang.mixin(_a88.query||{},_a84);}else{var _a8f=ioq.objectToQuery(lang.mixin(_a88.query||{},_a84));if(_a8f){req.url+=("?"+_a8f);}req.content=null;}}if(_a8d&&!_a8c){if(!_a79.isDefined(req.isAsync)&&has("ff")<4){req.isAsync=true;}return _a74.get(_a7c?_a7c(req):req);}else{var hdrs=req.headers;if(_a8a&&(!hdrs||!hdrs.hasOwnProperty("X-Requested-With"))){hdrs=req.headers=(hdrs||{});hdrs["X-Requested-With"]=null;}if(_a7f){var _a90=req.callbackParamName||"callback.html",_a91=req.callbackElementName||"textarea",_a92,_a93,_a94,i,il=form.elements?form.elements.length:0,el;_a84=req.content;if(_a84){for(_a92 in _a84){_a94=_a84[_a92];if(_a79.isDefined(_a94)){_a93=null;for(i=0;i<il;i++){el=form.elements[i];if(el.name===_a92){_a93=el;break;}}if(_a93){_a93.value=_a94;}else{if(_a80){form.append(_a92,_a94);}else{form.appendChild(_a76.create("input",{type:"hidden",name:_a92,value:_a94}));}}}}}if(has("esri-file-upload")){_a71.forEach(form.elements,function(el){if(el.name===_a90){form.removeChild(el);}});req.contentType=false;req.postData=_a80?form:new FormData(form);delete req.form;}else{form.enctype="multipart/form-data";if(has("ie")<9){form.encoding="multipart/form-data";}form.method="post";if(!_a71.some(form.elements,function(el){return el.name===_a90;})){form.appendChild(_a76.create("input",{type:"hidden",name:_a90,value:_a91}));}if(path.toLowerCase().indexOf("addattachment")!==-1||path.toLowerCase().indexOf("updateattachment")!==-1){req.url=path+((path.indexOf("?")===-1)?"?":"&")+_a90+"="+_a91;if(_a8e){req.url=_a89+"?"+req.url;}}delete req.content;}}if(_a8a&&!req.hasOwnProperty("withCredentials")&&_a77.id){var _a95=_a77.id.findServerInfo(_a8e?_a89:path);if(_a95&&_a95.webTierAuth){req.withCredentials=true;}}req=_a7c?_a7c(req):req;if(_a8c){if(_a7f&&!has("esri-file-upload")){return _a75.send(req);}else{return xhr.post(req);}}else{return xhr.get(req);}}}catch(e){var dfd=new _a73();dfd.errback(req.error(e));return dfd;}};function _a96(url){var _a97=_a78.defaults.io,_a98=_a97._processedCorsServers,_a99=new Url(url),_a9a=-1;_a99=(_a99.host+(_a99.port?(":"+_a99.port):"")).toLowerCase();_a9a=_a7a.canUseXhr(url,true);if(_a9a>-1){_a97.corsEnabledServers.splice(_a9a,1);}_a98[_a99]=1;return _a9a;};function _a9b(url){var _a9c=_a78.defaults.io,_a9d=_a9c._processedCorsServers;if(!_a9c.corsDetection){return;}try{var _a9e=new Url(url);_a9e=(_a9e.host+(_a9e.port?(":"+_a9e.port):"")).toLowerCase();if(has("esri-cors")&&(url&&url.toLowerCase().indexOf("/rest/services")!==-1)&&(!_a7a.hasSameOrigin(url,window.location.href)&&!_a7a.canUseXhr(url))&&!_a9d[_a9e]){_a9d[_a9e]=-1;xhr.get({url:url.substring(0,url.toLowerCase().indexOf("/rest/")+"/rest/".length)+"info",content:{f:"json"},failOk:true,handleAs:"json",headers:{"X-Requested-With":null}}).then(function(_a9f){if(_a9f){_a9d[_a9e]=2;if(!_a7a.canUseXhr(url)){_a9c.corsEnabledServers.push(_a9e);}}else{_a9d[_a9e]=1;}},function(_aa0){_a9d[_a9e]=1;});}}catch(e){console.log("esri._detectCors: an unknown error occurred while detecting CORS support");}};function _aa1(_aa2){_a7c=_aa2;};function _aa3(req,_aa4){var dfd,form=req.form,_aa5=_aa4&&_aa4.disableIdentityLookup,_aa6=_aa4&&_aa4._preLookup,_aa7=form&&form.append,_aa8=form&&(form.elements?_a71.some(form.elements,function(el){return el.type==="file";}):_aa7),_aa9=(req.url.toLowerCase().indexOf("token=")!==-1||(req.content&&req.content.token)||(_aa8&&_a71.some(form.elements,function(el){return el.name==="token";})))?1:0;_a9b(req.url);if(req._usrDfd){dfd=req._usrDfd;}else{dfd=new _a73(_a7b._dfdCanceller);dfd.addCallback(function(){var _aaa=req._credential;if(_aaa){var _aab=_a77.id.findServerInfo(_aaa.server),_aac=_aab&&_aab.owningSystemUrl,_aad;if(_aac){_aac=_aac.replace(/\/?$/,"/sharing");_aad=_a77.id.findCredential(_aac,_aaa.userId);if(_aad){if(_a77.id._getIdenticalSvcIdx(_aac,_aad)===-1){_aad.resources.splice(0,0,_aac);}}}}});dfd.addBoth(function(_aae){delete req._credential;if(_aae&&(!has("ie")||!_aae.nodeType)){_aae._ssl=req._ssl;}});var ld=req.load,_aaf=req.error;if(ld){dfd.addCallback(function(_ab0){var _ab1=dfd._pendingDfd,_ab2=_ab1&&_ab1.ioArgs,args=_ab2&&_ab2.args;return ld.call(args,_ab0,_ab2);});}if(_aaf){dfd.addErrback(function(_ab3){var _ab4=dfd._pendingDfd,_ab5=_ab4&&_ab4.ioArgs,args=_ab5&&_ab5.args;return _aaf.call(args,_ab3,_ab5);});}}if(_a77.id&&!_aa9&&!req._token&&!_a77.id._isPublic(req.url)&&(!_aa5||_aa6)){var _ab6=_a77.id.findCredential(req.url);if(_ab6){req._token=_ab6.token;req._ssl=_ab6.ssl;}}dfd._pendingDfd=_a7d(req,_aa4,_aa8,_aa7);if(!dfd._pendingDfd){dfd.ioArgs=dfd._pendingDfd&&dfd._pendingDfd.ioArgs;var err=new Error("Deferred object is missing");err.log=_a72.isDebug;req._usrDfd=null;dfd.errback(err);dfd._pendingDfd=null;return dfd;}dfd._pendingDfd.addCallback(function(_ab7){dfd.ioArgs=dfd._pendingDfd&&dfd._pendingDfd.ioArgs;req._usrDfd=null;dfd.callback(_ab7);dfd._pendingDfd=null;}).addErrback(function(_ab8){if(_ab8&&_ab8.code==403&&(_ab8.subcode==4||(_ab8.message&&_ab8.message.toLowerCase().indexOf("ssl")>-1&&_ab8.message.toLowerCase().indexOf("permission")===-1))){if(!req._ssl){req._ssl=req._sslFromServer=true;req._usrDfd=dfd;_aa3(req,_aa4);return;}}else{if(_ab8&&_ab8.status==415){var _ab9=_a96(req.url);if(!req._err415){req._err415=1;req._usrDfd=dfd;_aa3(req,_aa4);return;}}else{if(_a77.id&&_a71.indexOf(_a77.id._errorCodes,_ab8.code)!==-1&&!_a77.id._isPublic(req.url)&&!_aa5&&(_ab8.code!=403||!_a79.isDefined(_ab8.subcode)||_ab8.subcode==2)){dfd._pendingDfd=_a77.id.getCredential(req.url,{token:req._token,error:_ab8});dfd._pendingDfd.addCallback(function(_aba){req._token=_aba.token;req._usrDfd=dfd;req._credential=_aba;req._ssl=req._sslFromServer||_aba.ssl;_aa3(req,_aa4);}).addErrback(function(_abb){req._usrDfd=null;dfd.errback(_abb);dfd._pendingDfd=null;});return;}}}dfd.ioArgs=dfd._pendingDfd&&dfd._pendingDfd.ioArgs;req._usrDfd=null;dfd.errback(_ab8);dfd._pendingDfd=null;});return dfd;};_aa3._request=_a7d;_aa3._disableCors=_a96;_aa3._detectCors=_a9b;_aa3.setRequestPreCallback=_aa1;if(has("extend-esri")){_a77.request=_aa3;_a77._request=_a7d;_a77._disableCors=_a96;_a77._detectCors=_a9b;_a77.setRequestPreCallback=_aa1;}return _aa3;});},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(_abc,lang){var _abd={};lang.setObject("dojo.string",_abd);_abd.rep=function(str,num){if(num<=0||!str){return "";}var buf=[];for(;;){if(num&1){buf.push(str);}if(!(num>>=1)){break;}str+=str;}return buf.join("");};_abd.pad=function(text,size,ch,end){if(!ch){ch="0";}var out=String(text),pad=_abd.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out;};_abd.substitute=function(_abe,map,_abf,_ac0){_ac0=_ac0||_abc.global;_abf=_abf?lang.hitch(_ac0,_abf):function(v){return v;};return _abe.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_ac1,key,_ac2){var _ac3=lang.getObject(key,false,map);if(_ac2){_ac3=lang.getObject(_ac2,false,_ac0).call(_ac0,_ac3,key);}return _abf(_ac3,key).toString();});};_abd.trim=String.prototype.trim?lang.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;};return _abd;});},"esri/layers/InheritedDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/layers/Domain"],function(_ac4,lang,has,_ac5,_ac6){var _ac7=_ac4([_ac6],{declaredClass:"esri.layers.InheritedDomain"});if(has("extend-esri")){lang.setObject("layers.InheritedDomain",_ac7,_ac5);}return _ac7;});},"dijit/Tooltip":function(){require({cache:{"url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\n></div>\n"}});define("dijit/Tooltip",["dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","./_base/manager","./place","./_Widget","./_TemplatedMixin","./BackgroundIframe","dojo/text!./templates/Tooltip.html","./main"],function(_ac8,_ac9,fx,dom,_aca,_acb,_acc,lang,_acd,on,has,_ace,_acf,_ad0,_ad1,_ad2,_ad3,_ad4){var _ad5=_ac9("dijit._MasterTooltip",[_ad0,_ad1],{duration:_ace.defaultDuration,templateString:_ad3,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new _ad2(this.domNode);this.fadeIn=fx.fadeIn({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onShow")});this.fadeOut=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onHide")});},show:function(_ad6,_ad7,_ad8,rtl,_ad9){if(this.aroundNode&&this.aroundNode===_ad7&&this.containerNode.innerHTML==_ad6){return;}if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_ad6;if(_ad9){this.set("textDir",_ad9);}this.containerNode.align=rtl?"right":"left";var pos=_acf.around(this.domNode,_ad7,_ad8&&_ad8.length?_ad8:_ada.defaultPosition,!rtl,lang.hitch(this,"orient"));var _adb=pos.aroundNodePos;if(pos.corner.charAt(0)=="M"&&pos.aroundCorner.charAt(0)=="M"){this.connectorNode.style.top=_adb.y+((_adb.h-this.connectorNode.offsetHeight)>>1)-pos.y+"px";this.connectorNode.style.left="";}else{if(pos.corner.charAt(1)=="M"&&pos.aroundCorner.charAt(1)=="M"){this.connectorNode.style.left=_adb.x+((_adb.w-this.connectorNode.offsetWidth)>>1)-pos.x+"px";}else{this.connectorNode.style.left="";this.connectorNode.style.top="";}}_acc.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_ad7;},orient:function(node,_adc,_add,_ade,_adf){this.connectorNode.style.top="";var _ae0=_ade.h,_ae1=_ade.w;node.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_adc+"-"+_add];this.domNode.style.width="auto";var size=_acb.position(this.domNode);if(has("ie")==9){size.w+=2;}var _ae2=Math.min((Math.max(_ae1,1)),size.w);_acb.setMarginBox(this.domNode,{w:_ae2});if(_add.charAt(0)=="B"&&_adc.charAt(0)=="B"){var bb=_acb.position(node);var _ae3=this.connectorNode.offsetHeight;if(bb.h>_ae0){var _ae4=_ae0-((_adf.h+_ae3)>>1);this.connectorNode.style.top=_ae4+"px";this.connectorNode.style.bottom="";}else{this.connectorNode.style.bottom=Math.min(Math.max(_adf.h/2-_ae3/2,0),bb.h-_ae3)+"px";this.connectorNode.style.top="";}}else{this.connectorNode.style.top="";this.connectorNode.style.bottom="";}return Math.max(0,size.w-_ae1);},_onShow:function(){if(has("ie")){this.domNode.style.filter="";}},hide:function(_ae5){if(this._onDeck&&this._onDeck[1]==_ae5){this._onDeck=null;}else{if(this.aroundNode===_ae5){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();}else{}}},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}},_setAutoTextDir:function(node){this.applyTextDir(node,has("ie")?node.outerText:node.textContent);_ac8.forEach(node.children,function(_ae6){this._setAutoTextDir(_ae6);},this);},_setTextDirAttr:function(_ae7){this._set("textDir",_ae7);if(_ae7=="auto"){this._setAutoTextDir(this.containerNode);}else{this.containerNode.dir=this.textDir;}}});_ad4.showTooltip=function(_ae8,_ae9,_aea,rtl,_aeb){if(_aea){_aea=_ac8.map(_aea,function(val){return {after:"after-centered",before:"before-centered"}[val]||val;});}if(!_ada._masterTT){_ad4._masterTT=_ada._masterTT=new _ad5();}return _ada._masterTT.show(_ae8,_ae9,_aea,rtl,_aeb);};_ad4.hideTooltip=function(_aec){return _ada._masterTT&&_ada._masterTT.hide(_aec);};var _ada=_ac9("dijit.Tooltip",_ad0,{label:"",showDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(_aed){_ac8.forEach(this._connections||[],function(_aee){_ac8.forEach(_aee,function(_aef){_aef.remove();});},this);this._connectIds=_ac8.filter(lang.isArrayLike(_aed)?_aed:(_aed?[_aed]:[]),function(id){return dom.byId(id,this.ownerDocument);},this);this._connections=_ac8.map(this._connectIds,function(id){var node=dom.byId(id,this.ownerDocument),_af0=this.selector,_af1=_af0?function(_af2){return on.selector(_af0,_af2);}:function(_af3){return _af3;},self=this;return [on(node,_af1(_acd.enter),function(){self._onHover(this);}),on(node,_af1("focusin"),function(){self._onHover(this);}),on(node,_af1(_acd.leave),lang.hitch(self,"_onUnHover")),on(node,_af1("focusout"),lang.hitch(self,"_onUnHover"))];},this);this._set("connectId",_aed);},addTarget:function(node){var id=node.id||node;if(_ac8.indexOf(this._connectIds,id)==-1){this.set("connectId",this._connectIds.concat(id));}},removeTarget:function(node){var id=node.id||node,idx=_ac8.indexOf(this._connectIds,id);if(idx>=0){this._connectIds.splice(idx,1);this.set("connectId",this._connectIds);}},buildRendering:function(){this.inherited(arguments);_aca.add(this.domNode,"dijitTooltipData");},startup:function(){this.inherited(arguments);var ids=this.connectId;_ac8.forEach(lang.isArrayLike(ids)?ids:[ids],this.addTarget,this);},getContent:function(node){return this.label||this.domNode.innerHTML;},_onHover:function(_af4){if(!this._showTimer){this._showTimer=this.defer(function(){this.open(_af4);},this.showDelay);}},_onUnHover:function(){if(this._showTimer){this._showTimer.remove();delete this._showTimer;}this.close();},open:function(_af5){if(this._showTimer){this._showTimer.remove();delete this._showTimer;}var _af6=this.getContent(_af5);if(!_af6){return;}_ada.show(_af6,_af5,this.position,!this.isLeftToRight(),this.textDir);this._connectNode=_af5;this.onShow(_af5,this.position);},close:function(){if(this._connectNode){_ada.hide(this._connectNode);delete this._connectNode;this.onHide();}if(this._showTimer){this._showTimer.remove();delete this._showTimer;}},onShow:function(){},onHide:function(){},destroy:function(){this.close();_ac8.forEach(this._connections||[],function(_af7){_ac8.forEach(_af7,function(_af8){_af8.remove();});},this);this.inherited(arguments);}});_ada._MasterTooltip=_ad5;_ada.show=_ad4.showTooltip;_ada.hide=_ad4.hideTooltip;_ada.defaultPosition=["after-centered","before-centered"];return _ada;});},"esri/symbols/PictureMarkerSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/sniff","dojox/gfx/_base","esri/kernel","esri/lang","esri/urlUtils","esri/symbols/MarkerSymbol"],function(_af9,lang,has,_afa,_afb,_afc,_afd,_afe){var _aff={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};var PMS=_af9(_afe,{declaredClass:"esri.symbol.PictureMarkerSymbol",type:"picturemarkersymbol",constructor:function(json,_b00,_b01){if(json){if(lang.isString(json)){this.url=json;if(_b00){this.width=_b00;}if(_b01){this.height=_b01;}}else{this.width=_afa.pt2px(json.width);this.height=_afa.pt2px(json.height);var _b02=json.imageData;if((!(has("ie")<9))&&_b02){var temp=this.url;this.url="data:"+(json.contentType||"image")+";base64,"+_b02;this.imageData=temp;}}}else{lang.mixin(this,_aff);this.width=_afa.pt2px(this.width);this.height=_afa.pt2px(this.height);}},getStroke:function(){return null;},getFill:function(){return null;},setWidth:function(_b03){this.width=_b03;return this;},setHeight:function(_b04){this.height=_b04;return this;},setUrl:function(url){if(url!==this.url){delete this.imageData;delete this.contentType;}this.url=url;return this;},getShapeDescriptors:function(){var _b05={type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""};return {defaultShape:_b05,fill:null,stroke:null};},toJson:function(){var url=this.url,_b06=this.imageData;if(url.indexOf("data:")===0){var temp=url;url=_b06;var _b07=temp.indexOf(";base64,")+8;_b06=temp.substr(_b07);}url=_afd.getAbsoluteUrl(url);var _b08=_afa.px2pt(this.width);_b08=isNaN(_b08)?undefined:_b08;var _b09=_afa.px2pt(this.height);_b09=isNaN(_b09)?undefined:_b09;var _b0a=_afc.fixJson(lang.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:url,imageData:_b06,contentType:this.contentType,width:_b08,height:_b09}));delete _b0a.color;delete _b0a.size;if(!_b0a.imageData){delete _b0a.imageData;}return _b0a;}});PMS.defaultProps=_aff;if(has("extend-esri")){lang.setObject("symbol.PictureMarkerSymbol",PMS,_afb);_afb.symbol.defaultPictureMarkerSymbol=_aff;}return PMS;});},"esri/layers/LayerMapSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/LayerSource"],function(_b0b,lang,has,_b0c,_b0d,_b0e){var _b0f=_b0b(_b0e,{declaredClass:"esri.layers.LayerMapSource",type:"mapLayer",toJson:function(){var json={type:"mapLayer",mapLayerId:this.mapLayerId,gdbVersion:this.gdbVersion};return _b0d.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.LayerMapSource",_b0f,_b0c);}return _b0f;});},"esri/tasks/find":function(){define(["esri/tasks/FindTask","esri/tasks/FindParameters","esri/tasks/FindResult"],function(){return {};});},"dijit/form/DropDownButton":function(){require({cache:{"url:dijit/form/templates/DropDownButton.html":"<span class=\"dijit dijitReset dijitInline\"\n\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" data-dojo-attach-point=\"_buttonNode\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"focusNode,titleNode,_arrowWrapperNode\"\n\t\t\trole=\"button\" aria-haspopup=\"true\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\"\n\t\t\t\tdata-dojo-attach-point=\"iconNode\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode,_popupStateNode\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\"></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" tabIndex=\"-1\"\n\t\tdata-dojo-attach-point=\"valueNode\" role=\"presentation\"\n/></span>\n"}});define("dijit/form/DropDownButton",["dojo/_base/declare","dojo/_base/lang","dojo/query","../registry","../popup","./Button","../_Container","../_HasDropDown","dojo/text!./templates/DropDownButton.html"],function(_b10,lang,_b11,_b12,_b13,_b14,_b15,_b16,_b17){return _b10("dijit.form.DropDownButton",[_b14,_b15,_b16],{baseClass:"dijitDropDownButton",templateString:_b17,_fillContent:function(){if(this.srcNodeRef){var _b18=_b11("*",this.srcNodeRef);this.inherited(arguments,[_b18[0]]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}if(!this.dropDown&&this.dropDownContainer){var _b19=_b11("[widgetId]",this.dropDownContainer)[0];this.dropDown=_b12.byNode(_b19);delete this.dropDownContainer;}if(this.dropDown){_b13.hide(this.dropDown);}this.inherited(arguments);},isLoaded:function(){var _b1a=this.dropDown;return (!!_b1a&&(!_b1a.href||_b1a.isLoaded));},loadDropDown:function(_b1b){var _b1c=this.dropDown;var _b1d=_b1c.on("load",lang.hitch(this,function(){_b1d.remove();_b1b();}));_b1c.refresh();},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown;}});});},"dijit/form/_FormValueMixin":function(){define("dijit/form/_FormValueMixin",["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/sniff","./_FormWidgetMixin"],function(_b1e,_b1f,keys,has,_b20){return _b1e("dijit.form._FormValueMixin",_b20,{readOnly:false,_setReadOnlyAttr:function(_b21){_b1f.set(this.focusNode,"readOnly",_b21);this._set("readOnly",_b21);},postCreate:function(){this.inherited(arguments);if(has("ie")){this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);}if(this._resetValue===undefined){this._lastValueReported=this._resetValue=this.value;}},_setValueAttr:function(_b22,_b23){this._handleOnChange(_b22,_b23);},_handleOnChange:function(_b24,_b25){this._set("value",_b24);this.inherited(arguments);},undo:function(){this._setValueAttr(this._lastValueReported,false);},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true);},_onKeyDown:function(e){if(e.keyCode==keys.ESCAPE&&!(e.ctrlKey||e.altKey||e.metaKey)){if(has("ie")<9||(has("ie")&&has("quirks"))){e.preventDefault();var node=e.srcElement,te=node.ownerDocument.createEventObject();te.keyCode=keys.ESCAPE;te.shiftKey=e.shiftKey;node.fireEvent("onkeypress",te);}}}});});},"dijit/form/_FormWidgetMixin":function(){define("dijit/form/_FormWidgetMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/sniff","dojo/window","../a11y"],function(_b26,_b27,_b28,_b29,lang,_b2a,has,_b2b,a11y){return _b27("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:false,intermediateChanges:false,scrollOnFocus:true,_setIdAttr:"focusNode",_setDisabledAttr:function(_b2c){this._set("disabled",_b2c);_b28.set(this.focusNode,"disabled",_b2c);if(this.valueNode){_b28.set(this.valueNode,"disabled",_b2c);}this.focusNode.setAttribute("aria-disabled",_b2c?"true":"false");if(_b2c){this._set("hovering",false);this._set("active",false);var _b2d="tabIndex" in this.attributeMap?this.attributeMap.tabIndex:("_setTabIndexAttr" in this)?this._setTabIndexAttr:"focusNode";_b26.forEach(lang.isArray(_b2d)?_b2d:[_b2d],function(_b2e){var node=this[_b2e];if(has("webkit")||a11y.hasDefaultTabStop(node)){node.setAttribute("tabIndex","-1");}else{node.removeAttribute("tabIndex");}},this);}else{if(this.tabIndex!=""){this.set("tabIndex",this.tabIndex);}}},_onFocus:function(by){if(by=="mouse"&&this.isFocusable()){var _b2f=this.connect(this.focusNode,"onfocus",function(){this.disconnect(_b30);this.disconnect(_b2f);});var _b30=this.connect(this.ownerDocumentBody,"onmouseup",function(){this.disconnect(_b30);this.disconnect(_b2f);if(this.focused){this.focus();}});}if(this.scrollOnFocus){this.defer(function(){_b2b.scrollIntoView(this.domNode);});}this.inherited(arguments);},isFocusable:function(){return !this.disabled&&this.focusNode&&(_b29.get(this.domNode,"display")!="none");},focus:function(){if(!this.disabled&&this.focusNode.focus){try{this.focusNode.focus();}catch(e){}}},compare:function(val1,val2){if(typeof val1=="number"&&typeof val2=="number"){return (isNaN(val1)&&isNaN(val2))?0:val1-val2;}else{if(val1>val2){return 1;}else{if(val1<val2){return -1;}else{return 0;}}}},onChange:function(){},_onChangeActive:false,_handleOnChange:function(_b31,_b32){if(this._lastValueReported==undefined&&(_b32===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=_b31;}this._pendingOnChange=this._pendingOnChange||(typeof _b31!=typeof this._lastValueReported)||(this.compare(_b31,this._lastValueReported)!=0);if((this.intermediateChanges||_b32||_b32===undefined)&&this._pendingOnChange){this._lastValueReported=_b31;this._pendingOnChange=false;if(this._onChangeActive){if(this._onChangeHandle){this._onChangeHandle.remove();}this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(_b31);});}}},create:function(){this.inherited(arguments);this._onChangeActive=true;},destroy:function(){if(this._onChangeHandle){this._onChangeHandle.remove();this.onChange(this._lastValueReported);}this.inherited(arguments);}});});},"dijit/a11yclick":function(){define("dijit/a11yclick",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","dojo/_base/unload","dojo/_base/window"],function(on,_b33,keys,_b34,has,_b35,win){var _b36=null;if(has("dom-addeventlistener")){win.doc.addEventListener("keydown",function(evt){_b36=evt.target;},true);}else{(function(){var _b37=function(evt){_b36=evt.srcElement;};win.doc.attachEvent("onkeydown",_b37);_b35.addOnWindowUnload(function(){win.doc.detachEvent("onkeydown",_b37);});})();}function _b38(e){return (e.keyCode===keys.ENTER||e.keyCode===keys.SPACE)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey;};return function(node,_b39){if(/input|button/i.test(node.nodeName)){return on(node,"click",_b39);}else{var _b3a=[on(node,"keydown",function(e){if(_b38(e)){_b36=e.target;e.preventDefault();}}),on(node,"keyup",function(e){if(_b38(e)&&e.target==_b36){_b36=null;on.emit(e.target,"click",{cancelable:true,bubbles:true});}}),on(node,"click",function(e){_b39.call(this,e);})];if(has("touch")){var _b3b;_b3a.push(on(node,"touchend",function(e){var _b3c=e.target;_b3b=setTimeout(function(){_b3b=null;on.emit(_b3c,"click",{cancelable:true,bubbles:true});},600);}),on(node,"click",function(e){if(_b3b){clearTimeout(_b3b);}}));}return {remove:function(){_b33.forEach(_b3a,function(h){h.remove();});if(_b3b){clearTimeout(_b3b);_b3b=null;}}};}};return ret;});},"esri/toolbars/draw":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/Color","dojo/_base/window","dojo/has","dojo/keys","dojo/dom-construct","dojo/dom-style","esri/kernel","esri/sniff","esri/toolbars/_toolbar","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/graphic","esri/geometry/jsonUtils","esri/geometry/webMercatorUtils","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Multipoint","esri/geometry/Rect","dojo/i18n!esri/nls/jsapi"],function(_b3d,lang,_b3e,_b3f,_b40,win,has,keys,_b41,_b42,_b43,_b44,_b45,_b46,_b47,_b48,_b49,_b4a,_b4b,_b4c,_b4d,_b4e,Rect,_b4f){var DRAW=_b3d(_b45,{declaredClass:"esri.toolbars.Draw",_eventMap:{"draw-complete":true,"draw-end":["geometry"]},constructor:function(map,_b50){this.markerSymbol=new _b46(_b46.STYLE_SOLID,10,new _b47(_b47.STYLE_SOLID,new _b40([255,0,0]),2),new _b40([0,0,0,0.25]));this.lineSymbol=new _b47(_b47.STYLE_SOLID,new _b40([255,0,0]),2);this.fillSymbol=new _b48(_b48.STYLE_SOLID,new _b47(_b47.STYLE_SOLID,new _b40([255,0,0]),2),new _b40([0,0,0,0.25]));this._points=[];this._defaultOptions={showTooltips:true,drawTime:75,tolerance:8,tooltipOffset:15};this._options=lang.mixin(lang.mixin({},this._defaultOptions),_b50||{});this._mouse=!has("esri-touch")&&!has("esri-pointer");if(!this._mouse){this._options.showTooltips=false;}this._onKeyDownHandler=lang.hitch(this,this._onKeyDownHandler);this._onMouseDownHandler=lang.hitch(this,this._onMouseDownHandler);this._onMouseUpHandler=lang.hitch(this,this._onMouseUpHandler);this._onClickHandler=lang.hitch(this,this._onClickHandler);this._onMouseMoveHandler=lang.hitch(this,this._onMouseMoveHandler);this._onMouseDragHandler=lang.hitch(this,this._onMouseDragHandler);this._onDblClickHandler=lang.hitch(this,this._onDblClickHandler);this._updateTooltip=lang.hitch(this,this._updateTooltip);this._hideTooltip=lang.hitch(this,this._hideTooltip);this._redrawGraphic=lang.hitch(this,this._redrawGraphic);},_geometryType:null,respectDrawingVertexOrder:false,setRespectDrawingVertexOrder:function(set){this.respectDrawingVertexOrder=set;},setMarkerSymbol:function(_b51){this.markerSymbol=_b51;},setLineSymbol:function(_b52){this.lineSymbol=_b52;},setFillSymbol:function(_b53){this.fillSymbol=_b53;},activate:function(_b54,_b55){if(this._geometryType){this.deactivate();}var map=this.map,dc=_b3f.connect,Draw=DRAW;this._options=lang.mixin(lang.mixin({},this._options),_b55||{});map.navigationManager.setImmediateClick(false);switch(_b54){case Draw.ARROW:case Draw.LEFT_ARROW:case Draw.RIGHT_ARROW:case Draw.UP_ARROW:case Draw.DOWN_ARROW:case Draw.TRIANGLE:case Draw.CIRCLE:case Draw.ELLIPSE:case Draw.RECTANGLE:this._deactivateMapTools(true,false,false,true);this._onClickHandler_connect=dc(map,"onClick",this._onClickHandler);this._onMouseDownHandler_connect=dc(map,!this._mouse?"onSwipeStart":"onMouseDown",this._onMouseDownHandler);this._onMouseDragHandler_connect=dc(map,!this._mouse?"onSwipeMove":"onMouseDrag",this._onMouseDragHandler);this._onMouseUpHandler_connect=dc(map,!this._mouse?"onSwipeEnd":"onMouseUp",this._onMouseUpHandler);if(has("esri-touch")&&!has("esri-pointer")){this._onMouseDownHandler2_connect=dc(map,"onMouseDown",this._onMouseDownHandler);this._onMouseDragHandler2_connect=dc(map,"onMouseDrag",this._onMouseDragHandler);this._onMouseUpHandler2_connect=dc(map,"onMouseUp",this._onMouseUpHandler);}break;case Draw.POINT:this._onClickHandler_connect=dc(map,"onClick",this._onClickHandler);break;case Draw.LINE:case Draw.EXTENT:case Draw.FREEHAND_POLYLINE:case Draw.FREEHAND_POLYGON:this._deactivateMapTools(true,false,false,true);this._onMouseDownHandler_connect=dc(map,!this._mouse?"onSwipeStart":"onMouseDown",this._onMouseDownHandler);this._onMouseDragHandler_connect=dc(map,!this._mouse?"onSwipeMove":"onMouseDrag",this._onMouseDragHandler);this._onMouseUpHandler_connect=dc(map,!this._mouse?"onSwipeEnd":"onMouseUp",this._onMouseUpHandler);if(has("esri-touch")&&!has("esri-pointer")){this._onMouseDownHandler2_connect=dc(map,"onMouseDown",this._onMouseDownHandler);this._onMouseDragHandler2_connect=dc(map,"onMouseDrag",this._onMouseDragHandler);this._onMouseUpHandler2_connect=dc(map,"onMouseUp",this._onMouseUpHandler);}break;case Draw.POLYLINE:case Draw.POLYGON:case Draw.MULTI_POINT:map.navigationManager.setImmediateClick(true);this._onClickHandler_connect=dc(map,"onClick",this._onClickHandler);this._onDblClickHandler_connect=dc(map,"onDblClick",this._onDblClickHandler);map.disableDoubleClickZoom();break;default:console.error("Unsupported geometry type: "+_b54);return;}this._onKeyDown_connect=dc(map,"onKeyDown",this._onKeyDownHandler);this._redrawConnect=dc(map,"onExtentChange",this._redrawGraphic);this._geometryType=_b54;this._toggleTooltip(true);if(map.snappingManager&&this._geometryType!=="freehandpolyline"&&this._geometryType!=="freehandpolygon"&&this._mouse){map.snappingManager._startSelectionLayerQuery();map.snappingManager._setUpSnapping();}this.onActivate(this._geometryType);},deactivate:function(){var map=this.map;this._clear();var ddc=_b3f.disconnect;ddc(this._onMouseMoveHandler_connect);ddc(this._onMouseDownHandler_connect);ddc(this._onMouseDragHandler_connect);ddc(this._onMouseUpHandler_connect);ddc(this._onMouseDownHandler2_connect);ddc(this._onMouseDragHandler2_connect);ddc(this._onMouseUpHandler2_connect);ddc(this._onClickHandler_connect);ddc(this._onDblClickHandler_connect);ddc(this._onKeyDown_connect);ddc(this._redrawConnect);this._onMouseDownHandler_connect=this._onMouseMoveHandler_connect=this._onMouseDragHandler_connect=this._onMouseUpHandler_connect=this._onMouseDownHandler2_connect=this._onMouseDragHandler2_connect=this._onMouseUpHandler2_connect=this._onClickHandler_connect=this._onDblClickHandler_connect=this._onKeyDown_connect=this._redrawConnect=null;if(map.snappingManager){map.snappingManager._stopSelectionLayerQuery();map.snappingManager._killOffSnapping();}switch(this._geometryType){case DRAW.CIRCLE:case DRAW.ELLIPSE:case DRAW.TRIANGLE:case DRAW.ARROW:case DRAW.LEFT_ARROW:case DRAW.RIGHT_ARROW:case DRAW.UP_ARROW:case DRAW.DOWN_ARROW:case DRAW.RECTANGLE:case DRAW.LINE:case DRAW.EXTENT:case DRAW.FREEHAND_POLYLINE:case DRAW.FREEHAND_POLYGON:this._activateMapTools(true,false,false,true);break;case this.POLYLINE:case this.POLYGON:case this.MULTI_POINT:map.enableDoubleClickZoom();break;}var _b56=this._geometryType;this._geometryType=null;map.navigationManager.setImmediateClick(false);this._toggleTooltip(false);this.onDeactivate(_b56);},_clear:function(){if(this._graphic){this.map.graphics.remove(this._graphic,true);}if(this._tGraphic){this.map.graphics.remove(this._tGraphic,true);}this._graphic=this._tGraphic=null;if(this.map.snappingManager){this.map.snappingManager._setGraphic(null);}this._points=[];},finishDrawing:function(){var _b57,_b58=this._points,map=this.map,_b59=map.spatialReference,Draw=DRAW;_b58=_b58.slice(0,_b58.length);switch(this._geometryType){case Draw.POLYLINE:if(!this._graphic||_b58.length<2){return;}_b57=new _b4c(_b59);_b57.addPath([].concat(_b58));break;case Draw.POLYGON:if(!this._graphic||_b58.length<3){return;}_b57=new _b4d(_b59);var ring=[].concat(_b58,[_b58[0].offset(0,0)]);if(!_b4d.prototype.isClockwise(ring)&&!this.respectDrawingVertexOrder){console.debug(this.declaredClass+" :  Polygons drawn in anti-clockwise direction will be reversed to be clockwise.");ring.reverse();}_b57.addRing(ring);break;case Draw.MULTI_POINT:_b57=new _b4e(_b59);_b3e.forEach(_b58,function(pt){_b57.addPoint(pt);});break;}_b3f.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);this._drawEnd(_b57);},_drawEnd:function(_b5a){if(_b5a){var _b5b=this.map.spatialReference,geo;this.onDrawEnd(_b5a);if(_b5b){if(_b5b.isWebMercator()){geo=_b4b.webMercatorToGeographic(_b5a,true);}else{if(_b5b.wkid===4326){geo=_b4a.fromJson(_b5a.toJson());}}}this.onDrawComplete({geometry:_b5a,geographicGeometry:geo});}},_normalizeRect:function(_b5c,end,_b5d){var sx=_b5c.x,sy=_b5c.y,ex=end.x,ey=end.y,_b5e=Math.abs(sx-ex),_b5f=Math.abs(sy-ey);return {x:Math.min(sx,ex),y:Math.max(sy,ey),width:_b5e,height:_b5f,spatialReference:_b5d};},_onMouseDownHandler:function(evt){this._dragged=false;var _b60;if(this.map.snappingManager){_b60=this.map.snappingManager._snappingPoint;}var _b61=_b60||evt.mapPoint,Draw=DRAW,map=this.map,_b62=map.spatialReference;this._points.push(_b61.offset(0,0));switch(this._geometryType){case Draw.LINE:this._graphic=map.graphics.add(new _b49(new _b4c({paths:[[[_b61.x,_b61.y],[_b61.x,_b61.y]]],spatialReference:_b62}),this.lineSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}break;case Draw.EXTENT:break;case Draw.FREEHAND_POLYLINE:this._oldPoint=evt.screenPoint;var _b63=new _b4c(_b62);_b63.addPath(this._points);this._graphic=map.graphics.add(new _b49(_b63,this.lineSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}break;case Draw.CIRCLE:case Draw.ELLIPSE:case Draw.TRIANGLE:case Draw.ARROW:case Draw.LEFT_ARROW:case Draw.RIGHT_ARROW:case Draw.UP_ARROW:case Draw.DOWN_ARROW:case Draw.RECTANGLE:case Draw.FREEHAND_POLYGON:this._oldPoint=evt.screenPoint;var _b64=new _b4d(_b62);_b64.addRing(this._points);this._graphic=map.graphics.add(new _b49(_b64,this.fillSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}break;}if(has("esri-touch")){evt.preventDefault();}},_onMouseMoveHandler:function(evt){var _b65;if(this.map.snappingManager){_b65=this.map.snappingManager._snappingPoint;}var _b66=this._points[this._points.length-1],end=_b65||evt.mapPoint,_b67=this._tGraphic,geom=_b67.geometry;switch(this._geometryType){case DRAW.POLYLINE:case DRAW.POLYGON:geom.setPoint(0,0,{x:_b66.x,y:_b66.y});geom.setPoint(0,1,{x:end.x,y:end.y});_b67.setGeometry(geom);break;}},_onMouseDragHandler:function(evt){if(has("esri-touch")&&!this._points.length){evt.preventDefault();return;}this._dragged=true;var _b68;if(this.map.snappingManager){_b68=this.map.snappingManager._snappingPoint;}var _b69=this._points[0],end=_b68||evt.mapPoint,map=this.map,_b6a=map.spatialReference,_b6b=this._graphic,Draw=DRAW,_b6c=map.toScreen(_b69),_b6d=map.toScreen(end),pts=[],a=_b6d.x-_b6c.x,b=_b6d.y-_b6c.y,_b6e=60,d=Math.sqrt(a*a+b*b);switch(this._geometryType){case Draw.CIRCLE:this._hideTooltip();_b6b.geometry=_b4d.createCircle({center:_b6c,r:d,numberOfPoints:_b6e,map:map});_b6b.setGeometry(_b6b.geometry);break;case Draw.ELLIPSE:this._hideTooltip();_b6b.geometry=_b4d.createEllipse({center:_b6c,longAxis:a,shortAxis:b,numberOfPoints:_b6e,map:map});_b6b.setGeometry(_b6b.geometry);break;case Draw.TRIANGLE:this._hideTooltip();pts=[[0,-d],[0.8660254037844386*d,0.5*d],[-0.8660254037844386*d,0.5*d],[0,-d]];_b6b.geometry=this._toPolygon(pts,_b6c.x,_b6c.y);_b6b.setGeometry(_b6b.geometry);break;case Draw.ARROW:this._hideTooltip();var sina=b/d,cosa=a/d,tana=b/a;var f=cosa*0.25*d,e=0.25*d/tana,g=sina*0.25*d;pts=[[a,b],[a-f*(1+24/e),b+24*cosa-g],[a-f*(1+12/e),b+12*cosa-g],[-12*sina,12*cosa],[12*sina,-12*cosa],[a-f*(1-12/e),b-12*cosa-g],[a-f*(1-24/e),b-24*cosa-g],[a,b]];_b6b.geometry=this._toPolygon(pts,_b6c.x,_b6c.y);_b6b.setGeometry(_b6b.geometry);break;case Draw.LEFT_ARROW:this._hideTooltip();if(a<=0){pts=[[a,0],[0.75*a,b],[0.75*a,0.5*b],[0,0.5*b],[0,-0.5*b],[0.75*a,-0.5*b],[0.75*a,-b],[a,0]];}else{pts=[[0,0],[0.25*a,b],[0.25*a,0.5*b],[a,0.5*b],[a,-0.5*b],[0.25*a,-0.5*b],[0.25*a,-b],[0,0]];}_b6b.geometry=this._toPolygon(pts,_b6c.x,_b6c.y);_b6b.setGeometry(_b6b.geometry);break;case Draw.RIGHT_ARROW:this._hideTooltip();if(a>=0){pts=[[a,0],[0.75*a,b],[0.75*a,0.5*b],[0,0.5*b],[0,-0.5*b],[0.75*a,-0.5*b],[0.75*a,-b],[a,0]];}else{pts=[[0,0],[0.25*a,b],[0.25*a,0.5*b],[a,0.5*b],[a,-0.5*b],[0.25*a,-0.5*b],[0.25*a,-b],[0,0]];}_b6b.geometry=this._toPolygon(pts,_b6c.x,_b6c.y);_b6b.setGeometry(_b6b.geometry);break;case Draw.UP_ARROW:this._hideTooltip();if(b<=0){pts=[[0,b],[-a,0.75*b],[-0.5*a,0.75*b],[-0.5*a,0],[0.5*a,0],[0.5*a,0.75*b],[a,0.75*b],[0,b]];}else{pts=[[0,0],[-a,0.25*b],[-0.5*a,0.25*b],[-0.5*a,b],[0.5*a,b],[0.5*a,0.25*b],[a,0.25*b],[0,0]];}_b6b.geometry=this._toPolygon(pts,_b6c.x,_b6c.y);_b6b.setGeometry(_b6b.geometry);break;case Draw.DOWN_ARROW:this._hideTooltip();if(b>=0){pts=[[0,b],[-a,0.75*b],[-0.5*a,0.75*b],[-0.5*a,0],[0.5*a,0],[0.5*a,0.75*b],[a,0.75*b],[0,b]];}else{pts=[[0,0],[-a,0.25*b],[-0.5*a,0.25*b],[-0.5*a,b],[0.5*a,b],[0.5*a,0.25*b],[a,0.25*b],[0,0]];}_b6b.geometry=this._toPolygon(pts,_b6c.x,_b6c.y);_b6b.setGeometry(_b6b.geometry);break;case Draw.RECTANGLE:this._hideTooltip();pts=[[0,0],[a,0],[a,b],[0,b],[0,0]];_b6b.geometry=this._toPolygon(pts,_b6c.x,_b6c.y);_b6b.setGeometry(_b6b.geometry);break;case Draw.LINE:_b6b.setGeometry(lang.mixin(_b6b.geometry,{paths:[[[_b69.x,_b69.y],[end.x,end.y]]]}));break;case Draw.EXTENT:if(_b6b){map.graphics.remove(_b6b,true);}var rect=new Rect(this._normalizeRect(_b69,end,_b6a));rect._originOnly=true;this._graphic=map.graphics.add(new _b49(rect,this.fillSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}break;case Draw.FREEHAND_POLYLINE:this._hideTooltip();if(this._canDrawFreehandPoint(evt)===false){if(has("esri-touch")){evt.preventDefault();}return;}this._points.push(evt.mapPoint.offset(0,0));_b6b.geometry._insertPoints([end.offset(0,0)],0);_b6b.setGeometry(_b6b.geometry);break;case Draw.FREEHAND_POLYGON:this._hideTooltip();if(this._canDrawFreehandPoint(evt)===false){if(has("esri-touch")){evt.preventDefault();}return;}this._points.push(evt.mapPoint.offset(0,0));_b6b.geometry._insertPoints([end.offset(0,0)],0);_b6b.setGeometry(_b6b.geometry);break;}if(has("esri-touch")){evt.preventDefault();}},_canDrawFreehandPoint:function(evt){if(!this._oldPoint){return false;}var dx=this._oldPoint.x-evt.screenPoint.x;dx=(dx<0)?dx*-1:dx;var dy=this._oldPoint.y-evt.screenPoint.y;dy=(dy<0)?dy*-1:dy;var _b6f=this._options.tolerance;if(dx<_b6f&&dy<_b6f){return false;}var now=new Date();var _b70=now-this._startTime;if(_b70<this._options.drawTime){return false;}this._startTime=now;this._oldPoint=evt.screenPoint;return true;},_onMouseUpHandler:function(evt){if(!this._dragged){this._clear();return;}if(this._points.length===0){this._points.push(evt.mapPoint.offset(0,0));}var _b71;if(this.map.snappingManager){_b71=this.map.snappingManager._snappingPoint;}var _b72=this._points[0],end=_b71||evt.mapPoint,map=this.map,_b73=map.spatialReference,Draw=DRAW,_b74;switch(this._geometryType){case Draw.CIRCLE:case Draw.ELLIPSE:case Draw.TRIANGLE:case Draw.ARROW:case Draw.LEFT_ARROW:case Draw.RIGHT_ARROW:case Draw.UP_ARROW:case Draw.DOWN_ARROW:case Draw.RECTANGLE:_b74=this._graphic.geometry;break;case Draw.LINE:_b74=new _b4c({paths:[[[_b72.x,_b72.y],[end.x,end.y]]],spatialReference:_b73});break;case Draw.EXTENT:_b74=(new Rect(this._normalizeRect(_b72,end,_b73))).getExtent();break;case Draw.FREEHAND_POLYLINE:_b74=new _b4c(_b73);_b74.addPath([].concat(this._points,[end.offset(0,0)]));break;case Draw.FREEHAND_POLYGON:_b74=new _b4d(_b73);var ring=[].concat(this._points,[end.offset(0,0),this._points[0].offset(0,0)]);if(!_b4d.prototype.isClockwise(ring)&&!this.respectDrawingVertexOrder){console.debug(this.declaredClass+" :  Polygons drawn in anti-clockwise direction will be reversed to be clockwise.");ring.reverse();}_b74.addRing(ring);break;}if(has("esri-touch")){evt.preventDefault();}this._clear();this._drawEnd(_b74);},_onClickHandler:function(evt){var _b75;if(this.map.snappingManager){_b75=this.map.snappingManager._snappingPoint;}var _b76=_b75||evt.mapPoint,map=this.map,_b77=map.toScreen(_b76),Draw=DRAW,pts,dx,dy,_b78,geom,_b79;this._points.push(_b76.offset(0,0));switch(this._geometryType){case Draw.POINT:this._drawEnd(_b76.offset(0,0));this._setTooltipMessage(0);break;case Draw.POLYLINE:if(this._points.length===1){var _b7a=new _b4c(map.spatialReference);_b7a.addPath(this._points);this._graphic=map.graphics.add(new _b49(_b7a,this.lineSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}this._onMouseMoveHandler_connect=_b3f.connect(map,"onMouseMove",this._onMouseMoveHandler);this._tGraphic=map.graphics.add(new _b49(new _b4c({paths:[[[_b76.x,_b76.y],[_b76.x,_b76.y]]],spatialReference:map.spatialReference}),this.lineSymbol),true);}else{this._graphic.geometry._insertPoints([_b76.offset(0,0)],0);this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.lineSymbol);_b78=this._tGraphic;geom=_b78.geometry;geom.setPoint(0,0,_b76.offset(0,0));geom.setPoint(0,1,_b76.offset(0,0));_b78.setGeometry(geom);}break;case Draw.POLYGON:if(this._points.length===1){_b79=new _b4d(map.spatialReference);_b79.addRing(this._points);this._graphic=map.graphics.add(new _b49(_b79,this.fillSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}this._onMouseMoveHandler_connect=_b3f.connect(map,"onMouseMove",this._onMouseMoveHandler);this._tGraphic=map.graphics.add(new _b49(new _b4c({paths:[[[_b76.x,_b76.y],[_b76.x,_b76.y]]],spatialReference:map.spatialReference}),this.fillSymbol),true);}else{this._graphic.geometry._insertPoints([_b76.offset(0,0)],0);this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.fillSymbol);_b78=this._tGraphic;geom=_b78.geometry;geom.setPoint(0,0,_b76.offset(0,0));geom.setPoint(0,1,_b76.offset(0,0));_b78.setGeometry(geom);}break;case Draw.MULTI_POINT:var tps=this._points;if(tps.length===1){var _b7b=new _b4e(map.spatialReference);_b7b.addPoint(tps[tps.length-1]);this._graphic=map.graphics.add(new _b49(_b7b,this.markerSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}}else{this._graphic.geometry.addPoint(tps[tps.length-1]);this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.markerSymbol);}break;case Draw.ARROW:pts=[[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]];dx=_b77.x;dy=_b77.y;this._addShape(pts,dx,dy);break;case Draw.LEFT_ARROW:pts=[[0,0],[24,24],[24,12],[96,12],[96,-12],[24,-12],[24,-24],[0,0]];dx=_b77.x;dy=_b77.y;this._addShape(pts,dx,dy);break;case Draw.RIGHT_ARROW:pts=[[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]];dx=_b77.x;dy=_b77.y;this._addShape(pts,dx,dy);break;case Draw.UP_ARROW:pts=[[0,0],[-24,24],[-12,24],[-12,96],[12,96],[12,24],[24,24],[0,0]];dx=_b77.x;dy=_b77.y;this._addShape(pts,dx,dy);break;case Draw.DOWN_ARROW:pts=[[0,0],[-24,-24],[-12,-24],[-12,-96],[12,-96],[12,-24],[24,-24],[0,0]];dx=_b77.x;dy=_b77.y;this._addShape(pts,dx,dy);break;case Draw.TRIANGLE:pts=[[0,-48],[41.56921938165306,24],[-41.56921938165306,24],[0,-48]];dx=_b77.x;dy=_b77.y;this._addShape(pts,dx,dy);break;case Draw.RECTANGLE:pts=[[0,-96],[96,-96],[96,0],[0,0],[0,-96]];dx=_b77.x-48;dy=_b77.y+48;this._addShape(pts,dx,dy);break;case Draw.CIRCLE:_b79=new _b4d(map.spatialReference);this._graphic=map.graphics.add(new _b49(_b79,this.fillSymbol),true);this._graphic.geometry=_b4d.createCircle({center:_b77,r:48,numberOfPoints:60,map:map});this._graphic.setGeometry(this._graphic.geometry);this._drawEnd(this._graphic.geometry);break;case Draw.ELLIPSE:_b79=new _b4d(map.spatialReference);this._graphic=map.graphics.add(new _b49(_b79,this.fillSymbol),true);this._graphic.geometry=_b4d.createEllipse({center:_b77,longAxis:48,shortAxis:24,numberOfPoints:60,map:map});this._graphic.setGeometry(this._graphic.geometry);this._drawEnd(this._graphic.geometry);break;}this._setTooltipMessage(this._points.length);},_addShape:function(path,dx,dy){var _b7c=this.map.graphics.add(new _b49(this._toPolygon(path,dx,dy),this.fillSymbol),true);this._setTooltipMessage(0);var geom;if(_b7c){geom=_b4a.fromJson(_b7c.geometry.toJson());this.map.graphics.remove(_b7c,true);}this._drawEnd(geom);_b7c=geom=null;},_toPolygon:function(path,dx,dy){var map=this.map;var _b7d=new _b4d(map.spatialReference);_b7d.addRing(_b3e.map(path,function(pt){return map.toMap({x:pt[0]+dx,y:pt[1]+dy});}));return _b7d;},_onDblClickHandler:function(evt){var _b7e,_b7f=this._points,map=this.map,_b80=map.spatialReference,Draw=DRAW;if(has("esri-touch")){_b7f.push(evt.mapPoint);}_b7f=_b7f.slice(0,_b7f.length);switch(this._geometryType){case Draw.POLYLINE:if(!this._graphic||_b7f.length<2){_b3f.disconnect(this._onMouseMoveHandler_connect);this._clear();this._onClickHandler(evt);return;}_b7e=new _b4c(_b80);_b7e.addPath([].concat(_b7f));break;case Draw.POLYGON:if(!this._graphic||_b7f.length<2){_b3f.disconnect(this._onMouseMoveHandler_connect);this._clear();this._onClickHandler(evt);return;}_b7e=new _b4d(_b80);var ring=[].concat(_b7f,[_b7f[0].offset(0,0)]);if(!_b4d.prototype.isClockwise(ring)&&!this.respectDrawingVertexOrder){console.debug(this.declaredClass+" :  Polygons drawn in anti-clockwise direction will be reversed to be clockwise.");ring.reverse();}_b7e.addRing(ring);break;case Draw.MULTI_POINT:_b7e=new _b4e(_b80);_b3e.forEach(_b7f,function(pt){_b7e.addPoint(pt);});break;}_b3f.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);this._drawEnd(_b7e);},_onKeyDownHandler:function(evt){if(evt.keyCode===keys.ESCAPE){_b3f.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);}},_toggleTooltip:function(show){if(!this._options.showTooltips){return;}if(show){if(this._tooltip){return;}var _b81=this.map.container;this._tooltip=_b41.create("div",{"class":"tooltip"},_b81);this._tooltip.style.display="none";this._tooltip.style.position="fixed";this._setTooltipMessage(0);this._onTooltipMouseEnterHandler_connect=_b3f.connect(this.map,"onMouseOver",this._updateTooltip);this._onTooltipMouseLeaveHandler_connect=_b3f.connect(this.map,"onMouseOut",this._hideTooltip);this._onTooltipMouseMoveHandler_connect=_b3f.connect(this.map,"onMouseMove",this._updateTooltip);}else{if(this._tooltip){_b3f.disconnect(this._onTooltipMouseEnterHandler_connect);_b3f.disconnect(this._onTooltipMouseLeaveHandler_connect);_b3f.disconnect(this._onTooltipMouseMoveHandler_connect);_b41.destroy(this._tooltip);this._tooltip=null;}}},_hideTooltip:function(){var _b82=this._tooltip;if(!_b82){return;}_b82.style.display="none";},_setTooltipMessage:function(_b83){var _b84=this._tooltip;if(!_b84){return;}var _b85=_b83;var _b86="";switch(this._geometryType){case DRAW.POINT:_b86=_b4f.toolbars.draw.addPoint;break;case DRAW.ARROW:case DRAW.LEFT_ARROW:case DRAW.RIGHT_ARROW:case DRAW.UP_ARROW:case DRAW.DOWN_ARROW:case DRAW.TRIANGLE:case DRAW.RECTANGLE:case DRAW.CIRCLE:case DRAW.ELLIPSE:_b86=_b4f.toolbars.draw.addShape;break;case DRAW.LINE:case DRAW.EXTENT:case DRAW.FREEHAND_POLYLINE:case DRAW.FREEHAND_POLYGON:_b86=_b4f.toolbars.draw.freehand;break;case DRAW.POLYLINE:case DRAW.POLYGON:_b86=_b4f.toolbars.draw.start;if(_b85===1){_b86=_b4f.toolbars.draw.resume;}else{if(_b85>=2){_b86=_b4f.toolbars.draw.complete;}}break;case DRAW.MULTI_POINT:_b86=_b4f.toolbars.draw.addMultipoint;if(_b85>=1){_b86=_b4f.toolbars.draw.finish;}break;}_b84.innerHTML=_b86;},_updateTooltip:function(evt){var _b87=this._tooltip;if(!_b87){return;}var px,py;if(evt.clientX||evt.pageY){px=evt.clientX;py=evt.clientY;}else{px=evt.clientX+win.body().scrollLeft-win.body().clientLeft;py=evt.clientY+win.body().scrollTop-win.body().clientTop;}_b87.style.display="none";_b42.set(_b87,{left:(px+this._options.tooltipOffset)+"px",top:py+"px"});_b87.style.display="";},_redrawGraphic:function(_b88,_b89,_b8a,lod){if(_b8a||this.map.wrapAround180){var g=this._graphic;if(g){g.setGeometry(g.geometry);}g=this._tGraphic;if(g){g.setGeometry(g.geometry);}}},onActivate:function(){},onDeactivate:function(){},onDrawComplete:function(){},onDrawEnd:function(){}});lang.mixin(DRAW,{POINT:"point",MULTI_POINT:"multipoint",LINE:"line",EXTENT:"extent",POLYLINE:"polyline",POLYGON:"polygon",FREEHAND_POLYLINE:"freehandpolyline",FREEHAND_POLYGON:"freehandpolygon",ARROW:"arrow",LEFT_ARROW:"leftarrow",RIGHT_ARROW:"rightarrow",UP_ARROW:"uparrow",DOWN_ARROW:"downarrow",TRIANGLE:"triangle",CIRCLE:"circle",ELLIPSE:"ellipse",RECTANGLE:"rectangle"});if(has("extend-esri")){lang.setObject("toolbars.Draw",DRAW,_b43);}return DRAW;});},"esri/geometry/Polyline":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/SpatialReference","esri/geometry/Geometry","esri/geometry/Point","esri/geometry/Extent"],function(_b8b,_b8c,lang,has,_b8d,_b8e,_b8f,_b90,_b91,_b92){var _b93={type:"polyline",paths:null};var _b94=_b8b(_b90,{declaredClass:"esri.geometry.Polyline",constructor:function(obj){lang.mixin(this,_b93);this.paths=[];this._path=0;if(obj){if(obj.paths){lang.mixin(this,obj);}else{this.spatialReference=obj;}if(this.spatialReference){this.spatialReference=new _b8f(this.spatialReference);}}this.verifySR();},_extent:null,addPath:function(_b95){this._extent=null;this._path=this.paths.length;this.paths[this._path]=[];if(lang.isArray(_b95[0])){_b8c.forEach(_b95,this._addPointArr,this);}else{_b8c.forEach(_b95,this._addPoint,this);}return this;},_addPointArr:function(_b96){this.paths[this._path].push(_b96);},_addPoint:function(_b97){this.paths[this._path].push([_b97.x,_b97.y]);},_insertPoints:function(_b98,_b99){this._extent=null;this._path=_b99;if(!this.paths[this._path]){this.paths[this._path]=[];}_b8c.forEach(_b98,this._addPoint,this);},_validateInputs:function(_b9a,_b9b){if((_b9a!==null&&_b9a!==undefined)&&(_b9a<0||_b9a>=this.paths.length)){return false;}if((_b9b!==null&&_b9a!==undefined)&&(_b9b<0||_b9b>=this.paths[_b9a].length)){return false;}return true;},getPoint:function(_b9c,_b9d){if(this._validateInputs(_b9c,_b9d)){return new _b91(this.paths[_b9c][_b9d],this.spatialReference);}},setPoint:function(_b9e,_b9f,_ba0){if(this._validateInputs(_b9e,_b9f)){this._extent=null;this.paths[_b9e][_b9f]=[_ba0.x,_ba0.y];return this;}},insertPoint:function(_ba1,_ba2,_ba3){if(this._validateInputs(_ba1)&&_b8e.isDefined(_ba2)&&(_ba2>=0&&_ba2<=this.paths[_ba1].length)){this._extent=null;this.paths[_ba1].splice(_ba2,0,[_ba3.x,_ba3.y]);return this;}},removePath:function(_ba4){if(this._validateInputs(_ba4,null)){this._extent=null;var arr=this.paths.splice(_ba4,1)[0],i,il=arr.length,sr=this.spatialReference;for(i=0;i<il;i++){arr[i]=new _b91(arr[i],sr);}return arr;}},removePoint:function(_ba5,_ba6){if(this._validateInputs(_ba5,_ba6)){this._extent=null;return new _b91(this.paths[_ba5].splice(_ba6,1)[0],this.spatialReference);}},getExtent:function(){var _ba7;if(this._extent){_ba7=new _b92(this._extent);_ba7._partwise=this._partwise;return _ba7;}var _ba8=this.paths,pal=_ba8.length;if(!pal||!_ba8[0].length){return;}var path,_ba9,x,y,xmax,ymax,pa,pt,ptl,xmin=(xmax=_ba8[0][0][0]),ymin=(ymax=_ba8[0][0][1]),min=Math.min,max=Math.max,sr=this.spatialReference,_baa=[],_bab,_bac,_bad,_bae;for(pa=0;pa<pal;pa++){path=_ba8[pa];_bab=(_bac=path[0]&&path[0][0]);_bad=(_bae=path[0]&&path[0][1]);ptl=path.length;for(pt=0;pt<ptl;pt++){_ba9=path[pt];x=_ba9[0];y=_ba9[1];xmin=min(xmin,x);ymin=min(ymin,y);xmax=max(xmax,x);ymax=max(ymax,y);_bab=min(_bab,x);_bad=min(_bad,y);_bac=max(_bac,x);_bae=max(_bae,y);}_baa.push(new _b92({xmin:_bab,ymin:_bad,xmax:_bac,ymax:_bae,spatialReference:(sr?sr.toJson():null)}));}this._extent={xmin:xmin,ymin:ymin,xmax:xmax,ymax:ymax,spatialReference:sr?sr.toJson():null};this._partwise=_baa.length>1?_baa:null;_ba7=new _b92(this._extent);_ba7._partwise=this._partwise;return _ba7;},toJson:function(){var json={paths:lang.clone(this.paths)},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});_b94.defaultProps=_b93;if(has("extend-esri")){lang.setObject("geometry.Polyline",_b94,_b8d);_b8d.geometry.defaultPolyline=_b93;}return _b94;});},"esri/layers/agsdynamic":function(){define(["esri/layers/agscommon","esri/layers/ArcGISDynamicMapServiceLayer","esri/_time"],function(){return {};});},"esri/layers/graphics":function(){define(["esri/layers/GraphicsLayer","esri/graphic","esri/renderer"],function(){return {};});},"dojo/date":function(){define(["./has","./_base/lang"],function(has,lang){var date={};date.getDaysInMonth=function(_baf){var _bb0=_baf.getMonth();var days=[31,28,31,30,31,30,31,31,30,31,30,31];if(_bb0==1&&date.isLeapYear(_baf)){return 29;}return days[_bb0];};date.isLeapYear=function(_bb1){var year=_bb1.getFullYear();return !(year%400)||(!(year%4)&&!!(year%100));};date.getTimezoneName=function(_bb2){var str=_bb2.toString();var tz="";var _bb3;var pos=str.indexOf("(");if(pos>-1){tz=str.substring(++pos,str.indexOf(")"));}else{var pat=/([A-Z\/]+) \d{4}$/;if((_bb3=str.match(pat))){tz=_bb3[1];}else{str=_bb2.toLocaleString();pat=/ ([A-Z\/]+)$/;if((_bb3=str.match(pat))){tz=_bb3[1];}}}return (tz=="AM"||tz=="PM")?"":tz;};date.compare=function(_bb4,_bb5,_bb6){_bb4=new Date(+_bb4);_bb5=new Date(+(_bb5||new Date()));if(_bb6=="date"){_bb4.setHours(0,0,0,0);_bb5.setHours(0,0,0,0);}else{if(_bb6=="time"){_bb4.setFullYear(0,0,0);_bb5.setFullYear(0,0,0);}}if(_bb4>_bb5){return 1;}if(_bb4<_bb5){return -1;}return 0;};date.add=function(date,_bb7,_bb8){var sum=new Date(+date);var _bb9=false;var _bba="Date";switch(_bb7){case "day":break;case "weekday":var days,_bbb;var mod=_bb8%5;if(!mod){days=(_bb8>0)?5:-5;_bbb=(_bb8>0)?((_bb8-5)/5):((_bb8+5)/5);}else{days=mod;_bbb=parseInt(_bb8/5);}var strt=date.getDay();var adj=0;if(strt==6&&_bb8>0){adj=1;}else{if(strt==0&&_bb8<0){adj=-1;}}var trgt=strt+days;if(trgt==0||trgt==6){adj=(_bb8>0)?2:-2;}_bb8=(7*_bbb)+days+adj;break;case "year":_bba="FullYear";_bb9=true;break;case "week":_bb8*=7;break;case "quarter":_bb8*=3;case "month":_bb9=true;_bba="Month";break;default:_bba="UTC"+_bb7.charAt(0).toUpperCase()+_bb7.substring(1)+"s";}if(_bba){sum["set"+_bba](sum["get"+_bba]()+_bb8);}if(_bb9&&(sum.getDate()<date.getDate())){sum.setDate(0);}return sum;};date.difference=function(_bbc,_bbd,_bbe){_bbd=_bbd||new Date();_bbe=_bbe||"day";var _bbf=_bbd.getFullYear()-_bbc.getFullYear();var _bc0=1;switch(_bbe){case "quarter":var m1=_bbc.getMonth();var m2=_bbd.getMonth();var q1=Math.floor(m1/3)+1;var q2=Math.floor(m2/3)+1;q2+=(_bbf*4);_bc0=q2-q1;break;case "weekday":var days=Math.round(date.difference(_bbc,_bbd,"day"));var _bc1=parseInt(date.difference(_bbc,_bbd,"week"));var mod=days%7;if(mod==0){days=_bc1*5;}else{var adj=0;var aDay=_bbc.getDay();var bDay=_bbd.getDay();_bc1=parseInt(days/7);mod=days%7;var _bc2=new Date(_bbc);_bc2.setDate(_bc2.getDate()+(_bc1*7));var _bc3=_bc2.getDay();if(days>0){switch(true){case aDay==6:adj=-1;break;case aDay==0:adj=0;break;case bDay==6:adj=-1;break;case bDay==0:adj=-2;break;case (_bc3+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==6:adj=0;break;case aDay==0:adj=1;break;case bDay==6:adj=2;break;case bDay==0:adj=1;break;case (_bc3+mod)<0:adj=2;}}}days+=adj;days-=(_bc1*2);}_bc0=days;break;case "year":_bc0=_bbf;break;case "month":_bc0=(_bbd.getMonth()-_bbc.getMonth())+(_bbf*12);break;case "week":_bc0=parseInt(date.difference(_bbc,_bbd,"day")/7);break;case "day":_bc0/=24;case "hour":_bc0/=60;case "minute":_bc0/=60;case "second":_bc0/=1000;case "millisecond":_bc0*=_bbd.getTime()-_bbc.getTime();}return Math.round(_bc0);};1&&lang.mixin(lang.getObject("dojo.date",true),date);return date;});},"esri/symbols/SimpleLineSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","dojox/gfx/_base","esri/kernel","esri/lang","esri/symbols/LineSymbol"],function(_bc4,lang,_bc5,has,_bc6,_bc7,_bc8,_bc9){var _bca={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"};var _bcb={color:[0,0,0,1],style:_bca.STYLE_SOLID,width:1};var SLS=_bc4(_bc9,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",_styles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(json,_bcc,_bcd){if(json){if(lang.isString(json)){this.style=json;if(_bcc){this.color=_bcc;}if(_bcd){this.width=_bcd;}}else{this.style=_bc8.valueOf(this._styles,json.style)||_bca.STYLE_SOLID;}}else{lang.mixin(this,_bcb);this.color=new _bc5(this.color);this.width=_bc6.pt2px(this.width);}},setStyle:function(_bce){this.style=_bce;return this;},getStroke:function(){return (this.style===_bca.STYLE_NULL||this.width===0)?null:{color:this.color,style:this.style,width:this.width};},getFill:function(){return null;},getShapeDescriptors:function(){return {defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()};},toJson:function(){return _bc8.fixJson(lang.mixin(this.inherited("toJson",arguments),{type:"esriSLS",style:this._styles[this.style]}));}});lang.mixin(SLS,_bca);SLS.defaultProps=_bcb;if(has("extend-esri")){lang.setObject("symbol.SimpleLineSymbol",SLS,_bc7);_bc7.symbol.defaultSimpleLineSymbol=_bcb;}return SLS;});},"esri/layers/OpenStreetMapLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/urlUtils","esri/SpatialReference","esri/geometry/Extent","esri/layers/TiledMapServiceLayer","esri/layers/TileInfo"],function(_bcf,lang,has,_bd0,_bd1,_bd2,_bd3,_bd4,_bd5){var OSM=_bcf(_bd4,{declaredClass:"esri.layers.OpenStreetMapLayer",constructor:function(_bd6){this.spatialReference=new _bd2({wkid:102100});this.tileInfo=new _bd5({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-20037508.342787,y:20037508.342787},spatialReference:{wkid:102100},lods:[{level:0,scale:591657527.591555,resolution:156543.033928},{level:1,scale:295828763.795777,resolution:78271.5169639999},{level:2,scale:147914381.897889,resolution:39135.7584820001},{level:3,scale:73957190.948944,resolution:19567.8792409999},{level:4,scale:36978595.474472,resolution:9783.93962049996},{level:5,scale:18489297.737236,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:0.597164283559817}]});this.fullExtent=new _bd3({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}});this.initialExtent=new _bd3({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}});this.tileServers=(_bd6&&_bd6.tileServers)||["http://a.tile.openstreetmap.org","http://b.tile.openstreetmap.org","http://c.tile.openstreetmap.org"];this.serversLength=this.tileServers.length;this._displayLevels=_bd6?_bd6.displayLevels:null;this.copyright=(_bd6&&_bd6.copyright)||"Map data &copy; OpenStreetMap contributors, CC-BY-SA";this.loaded=true;this.onLoad(this);var _bd7=_bd6&&_bd6.loadCallback;if(_bd7){_bd7(this);}},getTileUrl:function(_bd8,row,col){return _bd1.addProxy(this.tileServers[row%this.serversLength]+"/"+_bd8+"/"+col+"/"+row+".png");}});if(has("extend-esri")){lang.setObject("layers.OpenStreetMapLayer",OSM,_bd0);}return OSM;});},"esri/geometry/Rect":function(){define("esri/geometry/Rect",["dojo/_base/declare","dojo/_base/lang","dojo/has","dojox/gfx/_base","esri/kernel","esri/SpatialReference","esri/geometry/Geometry","esri/geometry/Point","esri/geometry/Extent"],function(_bd9,lang,has,_bda,_bdb,_bdc,_bdd,_bde,_bdf){function _be0(rect){return new _bdf(parseFloat(rect.x),parseFloat(rect.y)-parseFloat(rect.height),parseFloat(rect.x)+parseFloat(rect.width),parseFloat(rect.y),rect.spatialReference);};var Rect=_bd9(_bdd,{declaredClass:"esri.geometry.Rect",constructor:function(json,y,_be1,_be2,_be3){lang.mixin(this,_bda.defaultRect);if(lang.isObject(json)&&json.type==="extent"){y=json.ymax;_be1=json.getWidth();_be2=json.getHeight();_be3=json.spatialReference;json=json.xmin;}if(lang.isObject(json)){lang.mixin(this,json);if(this.spatialReference){this.spatialReference=new _bdc(this.spatialReference);}}else{this.x=json;this.y=y;this.width=_be1;this.height=_be2;this.spatialReference=_be3;}this.verifySR();},getCenter:function(){return new _bde(this.x+this.width/2,this.y+this.height/2,this.spatialReference);},offset:function(ox,oy){return new Rect(this.x+ox,this.y+oy,this.width,this.height,this.spatialReference);},intersects:function(rect){if((rect.x+rect.width)<=this.x){return false;}if((rect.y+rect.height)<=this.y){return false;}if(rect.y>=(this.y+this.height)){return false;}if(rect.x>=(this.x+this.width)){return false;}return true;},getExtent:function(){return _be0(this);},update:function(x,y,_be4,_be5,_be6){this.x=x;this.y=y;this.width=_be4;this.height=_be5;this.spatialReference=_be6;return this;}});if(has("extend-esri")){lang.setObject("geometry.Rect",Rect,_bdb);_bdb.geometry._rectToExtent=_be0;_bdb.geometry._extentToRect=function(_be7){return new Rect(_be7);};}return Rect;});},"dijit/Destroyable":function(){define("dijit/Destroyable",["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(_be8,_be9,_bea){return _bea("dijit.Destroyable",null,{destroy:function(_beb){this._destroyed=true;},own:function(){_be8.forEach(arguments,function(_bec){var _bed="destroyRecursive" in _bec?"destroyRecursive":"destroy" in _bec?"destroy":"remove";var odh=_be9.before(this,"destroy",function(_bee){_bec[_bed](_bee);});var hdh=_be9.after(_bec,_bed,function(){odh.remove();hdh.remove();},true);},this);return arguments;}});});},"esri/MapNavigationManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/event","dojo/mouse","dojo/keys","esri/kernel","esri/MouseEvents","esri/TouchEvents","esri/PointerEvents","esri/config","esri/sniff","esri/lang","esri/fx","esri/graphic","esri/tileUtils","esri/geometry/ScreenPoint","esri/geometry/Extent","esri/geometry/Rect","esri/geometry/mathUtils","esri/symbols/SimpleFillSymbol"],function(_bef,lang,_bf0,_bf1,_bf2,_bf3,keys,_bf4,_bf5,_bf6,_bf7,_bf8,has,_bf9,_bfa,_bfb,_bfc,_bfd,_bfe,Rect,_bff,_c00){var _c01=_bf1.connect,_c02=_bf1.disconnect,_c03=1,_c04=-1,_c05=100,_c06=10,_c07=[keys.NUMPAD_PLUS,61,keys.NUMPAD_MINUS,keys.UP_ARROW,keys.NUMPAD_8,keys.RIGHT_ARROW,keys.NUMPAD_6,keys.DOWN_ARROW,keys.NUMPAD_2,keys.LEFT_ARROW,keys.NUMPAD_4,keys.PAGE_UP,keys.NUMPAD_9,keys.PAGE_DOWN,keys.NUMPAD_3,keys.END,keys.NUMPAD_1,keys.HOME,keys.NUMPAD_7];var _c08=_bef(null,{declaredClass:"esri.MapNavigationManager",eventModel:"",constructor:function(map,_c09){this.map=map;lang.mixin(this,_c09);var node=map.__container;if(has("esri-pointer")){this.pointerEvents=new _bf7(node,{map:map});this.eventModel="pointer";}else{if(has("esri-touch")){this.touchEvents=new _bf6(node,{map:map});this.mouseEvents=new _bf5(node,{map:map});this.eventModel="touch";}else{this.mouseEvents=new _bf5(node,{map:map});this.eventModel="mouse";}}this._zoomRect=new _bfb(null,new _c00(_bf8.defaults.map.zoomSymbol));this._keyDx=this._keyDy=0;this._adjustPinch=lang.hitch(this,this._adjustPinch);this._adjustPinchEnd=lang.hitch(this,this._adjustPinchEnd);},_panInit:function(evt){var _c0a=this.mouseEvents;if(_bf3.isLeft(evt)&&this.map.isPan&&!evt.shiftKey){this._dragOrigin=new _bfd(0,0);lang.mixin(this._dragOrigin,evt.screenPoint);this._panStartHandle=_c01(_c0a,"onMouseDragStart",this,this._panStart);this._panHandle=_c01(_c0a,"onMouseDrag",this,this._pan);this._panEndHandle=_c01(_c0a,"onMouseUp",this,this._panEnd);if(has("chrome")){evt.preventDefault();}}},_panStart:function(evt){this.map.setCursor("move");this.map.__panStart(evt.screenPoint.x,evt.screenPoint.y);},_pan:function(evt){this.map.__pan(evt.screenPoint.x-this._dragOrigin.x,evt.screenPoint.y-this._dragOrigin.y);},_panEnd:function(evt){_c02(this._panStartHandle);_c02(this._panHandle);_c02(this._panEndHandle);this._panStartHandle=this._panHandle=this._panEndHandle=null;var map=this.map;if(map.__panning){map.__panEnd(evt.screenPoint.x-this._dragOrigin.x,evt.screenPoint.y-this._dragOrigin.y);map.resetMapCursor();}},_zoomInit:function(evt){var map=this.map,_c0b=this.pointerEvents||this.mouseEvents;if((_bf3.isLeft(evt)||evt.pointerType)&&map.isRubberBandZoom&&evt.shiftKey){map.setCursor("crosshair");this._dragOrigin=lang.mixin({},evt.screenPoint);this._zoomDir=(evt.ctrlKey||evt.metaKey)?_c04:_c03;if(this.pointerEvents){this._zoomHandle=_c01(_c0b,"onSwipeMove",this,this._zoom);this._zoomEndHandle=_c01(_c0b,"onSwipeEnd",this,this._zoomEnd);}else{this._zoomHandle=_c01(_c0b,"onMouseDrag",this,this._zoom);this._zoomEndHandle=_c01(_c0b,"onMouseUp",this,this._zoomEnd);}if(has("chrome")){evt.preventDefault();}}},_zoom:function(evt){var map=this.map,rect=this._normalizeRect(evt).offset(map.__visibleRect.x,map.__visibleRect.y),g=map.graphics,_c0c=this._zoomRect;if(!_c0c.geometry){map.setCursor("crosshair");}if(_c0c.geometry){g.remove(_c0c,true);}var tl=map.toMap(new _bfd(rect.x,rect.y)),br=map.toMap(new _bfd(rect.x+rect.width,rect.y+rect.height));rect=new Rect(tl.x,tl.y,br.x-tl.x,tl.y-br.y,map.spatialReference);rect._originOnly=true;_c0c.setGeometry(rect);g.add(_c0c,true);},_zoomEnd:function(evt){var _c0d=this._zoomRect,map=this.map,ext=map.extent,sr=map.spatialReference;_c02(this._zoomHandle);_c02(this._zoomEndHandle);this._zoomHandle=this._zoomEndHandle=null;if(map._canZoom(this._zoomDir)&&_c0d.getDojoShape()){map.graphics.remove(_c0d);_c0d.geometry=null;var rect=this._normalizeRect(evt);rect.x+=map.__visibleRect.x;rect.y+=map.__visibleRect.y;var _c0e;if(this._zoomDir===_c04){var _c0f=ext.getWidth(),_c10=(_c0f*map.width)/rect.width,_c11=(_c10-_c0f)/2;_c0e=new _bfe(ext.xmin-_c11,ext.ymin-_c11,ext.xmax+_c11,ext.ymax+_c11,sr);}else{var min=map.toMap({x:rect.x,y:(rect.y+rect.height)}),max=map.toMap({x:(rect.x+rect.width),y:rect.y});_c0e=new _bfe(min.x,min.y,max.x,max.y,sr);}map._extentUtil(null,null,_c0e);}if(_c0d.getDojoShape()){map.graphics.remove(_c0d,true);}this._zoomDir=0;map.resetMapCursor();},_wheelZoom:function(evt,_c12){var map=this.map;if(!_c12){if(map.smartNavigation&&!evt.shiftKey&&!map._isPanningOrZooming()){map.disableScrollWheelZoom();this._setScrollWheelPan(true);this._wheelPan(evt);return;}var _c13=evt.timeStamp;if(!_bf9.isDefined(_c13)||_c13<=0){_c13=(new Date()).getTime();}var _c14=this._mwts?(_c13-this._mwts):_c13;if(_c14<_c05){return;}this._mwts=_c13;}if(!map._canZoom(evt.value)){return;}map._extentUtil({numLevels:evt.value,mapAnchor:evt.mapPoint,screenAnchor:evt.screenPoint});},_wheelPan:function(evt){var map=this.map;if(evt.shiftKey&&!map._isPanningOrZooming()){this._setScrollWheelPan(false);map.enableScrollWheelZoom();this._wheelZoom(evt);return;}var dx=0,dy=0;if(has("ff")){if(evt.axis===evt.HORIZONTAL_AXIS){dx=-evt.detail;}else{dy=-evt.detail;}}else{dx=evt.wheelDeltaX;dy=evt.wheelDeltaY;}map.translate(dx,dy);},_setScrollWheelPan:function(_c15){var map=this.map;map.isScrollWheelPan=_c15;this.mouseEvents.enableMouseWheel(_c15);_c02(this._mwMacHandle);this._mwMacHandle=null;if(_c15){this._mwMacHandle=_c01(this.mouseEvents,"onMouseWheel",this,this._wheelPan);}},_recenter:function(evt){if(evt.shiftKey&&!this.map._isPanningOrZooming()){this.map.centerAt(evt.mapPoint);}},_recenterZoom:function(evt){if(evt.shiftKey&&!this.map._isPanningOrZooming()){evt.value=(evt.ctrlKey||evt.metaKey)?_c04:_c03;this._wheelZoom(evt,true);}},_dblClickZoom:function(evt){if(!this.map._isPanningOrZooming()){evt.value=1;this._wheelZoom(evt,true);}},_twoFingerTap:function(evt){if(!this.map._isPanningOrZooming()){evt.value=-1;this._wheelZoom(evt,true);}},_keyDown:function(evt){var code=evt.keyCode,map=this.map;if(_bf0.indexOf(_c07,code)!==-1){if(code===keys.NUMPAD_PLUS||code===61){map._extentUtil({numLevels:1});}else{if(code===keys.NUMPAD_MINUS){map._extentUtil({numLevels:-1});}else{if(!map.__panning){map.__panStart(0,0);}switch(code){case keys.UP_ARROW:case keys.NUMPAD_8:this._keyDy+=_c06;break;case keys.RIGHT_ARROW:case keys.NUMPAD_6:this._keyDx-=_c06;break;case keys.DOWN_ARROW:case keys.NUMPAD_2:this._keyDy-=_c06;break;case keys.LEFT_ARROW:case keys.NUMPAD_4:this._keyDx+=_c06;break;case keys.PAGE_UP:case keys.NUMPAD_9:this._keyDx-=_c06;this._keyDy+=_c06;break;case keys.PAGE_DOWN:case keys.NUMPAD_3:this._keyDx-=_c06;this._keyDy-=_c06;break;case keys.END:case keys.NUMPAD_1:this._keyDx+=_c06;this._keyDy-=_c06;break;case keys.HOME:case keys.NUMPAD_7:this._keyDx+=_c06;this._keyDy+=_c06;break;default:return;}map.__pan(this._keyDx,this._keyDy);}}_bf2.stop(evt);}},_keyEnd:function(evt){var map=this.map;if(map.__panning&&(evt.keyCode!==keys.SHIFT)){map.__panEnd(this._keyDx,this._keyDy);this._keyDx=this._keyDy=0;}},_swipeInit:function(evt){var map=this.map,_c16=map._zoomAnim||map._panAnim;if(evt.shiftKey){return false;}if(_c16&&_c16._active){_c16.stop();_c16._fire("onEnd",[_c16.node]);}this._dragOrigin=new _bfd(0,0);lang.mixin(this._dragOrigin,evt.screenPoint);_c02(this._swipeHandle);_c02(this._swipeEndHandle);this._swipeHandle=_c01(this.touchEvents||this.pointerEvents,"onSwipeMove",this,this._swipe);this._swipeEndHandle=_c01(this.touchEvents||this.pointerEvents,"onSwipeEnd",this,this._swipeEnd);},_swipe:function(evt){var map=this.map;if(map.__panning){this._panX=evt.screenPoint.x;this._panY=evt.screenPoint.y;map.__pan(evt.screenPoint.x-this._dragOrigin.x,evt.screenPoint.y-this._dragOrigin.y);}else{map.setCursor("move");map.__panStart(evt.screenPoint.x,evt.screenPoint.y);}},_swipeEnd:function(evt){_c02(this._swipeHandle);_c02(this._swipeEndHandle);this._swipeHandle=this._swipeEndHandle=null;var map=this.map;if(map.__panning){map.resetMapCursor();map.__panEnd(evt.screenPoint.x-this._dragOrigin.x,evt.screenPoint.y-this._dragOrigin.y);}},_pinchInit:function(evt){var map=this.map,_c17=map._zoomAnim||map._panAnim;if(_c17&&_c17._active){_c17.stop();_c17._fire("onEnd",[_c17.node]);}else{if(map.__panning){evt.screenPoint=new _bfd(this._panX,this._panY);evt.mapPoint=map.toMap(evt.screenPoint);this._swipeEnd(evt);}}_c02(this._pinchHandle);_c02(this._pinchEndHandle);this._pinchHandle=_c01(this.touchEvents||this.pointerEvents,"onPinchMove",this,this._pinch);this._pinchEndHandle=_c01(this.touchEvents||this.pointerEvents,"onPinchEnd",this,this._pinchEnd);},_pinch:function(evt){var map=this.map;if(evt.screenPoints){this.currLength=_bff.getLength(evt.screenPoints[0],evt.screenPoints[1]);if(map.__zooming){var _c18=this.currLength/this._length;this._zoomStartExtent=this.__scaleExtent(map.extent,_c18,this._dragOrigin);map.__zoom(this._zoomStartExtent,_c18,this._dragOrigin);}else{this._dragOrigin=new _bfd((evt.screenPoints[0].x+evt.screenPoints[1].x)/2,(evt.screenPoints[0].y+evt.screenPoints[1].y)/2);this._length=this.currLength;map.__zoomStart(map.extent,this._dragOrigin);}map._fireOnScale(this.currLength/this._length,this._dragOrigin,true);}},_pinchEnd:function(evt){var map=this.map;_c02(this._pinchHandle);_c02(this._pinchEndHandle);this._pinchHandle=this._pinchEndHandle=null;if(map.__zooming&&map._zoomAnim===null){var _c19=this.currLength/this._length,_c1a=map.extent.getWidth();this._zoomAnimAnchor=map.toMap(this._dragOrigin);this._zoomStartExtent=this.__scaleExtent(map.extent,1/_c19,this._zoomAnimAnchor);if(map.__tileInfo){var ct=_bfc.getCandidateTileInfo(map,map.__tileInfo,this._zoomStartExtent),_c1b=map.__getExtentForLevel(ct.lod.level,this._zoomAnimAnchor),_c1c=map.getMinZoom(),_c1d=map.getMaxZoom(),_c1e=_c1b.extent,_c1f=_c1b.lod,_c20=_c1a/_c1e.getWidth(),_c21=ct.lod.level;if(_c19<1){if(_c20>_c19){_c21--;}}else{if(_c20<_c19){_c21++;}}if(_c21<_c1c){_c21=_c1c;}else{if(_c21>_c1d){_c21=_c1d;}}if(_c21!==ct.lod.level){_c1b=map.__getExtentForLevel(_c21,this._zoomAnimAnchor);_c1e=_c1b.extent;_c1f=_c1b.lod;}this._zoomEndExtent=_c1e;this._zoomEndLod=_c1f;map._zoomAnim=_bfa.animateRange({range:{start:(_c1a/this._zoomStartExtent.getWidth()),end:_c20},duration:_bf8.defaults.map.zoomDuration,rate:_bf8.defaults.map.zoomRate,onAnimate:this._adjustPinch,onEnd:this._adjustPinchEnd});map._zoomAnim.play();map._fireOnScale(map.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin);}else{this._zoomEndExtent=this._zoomStartExtent;map._fireOnScale(map.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin);this._adjustPinchEnd();}}},_adjustPinch:function(_c22){var _c23=this.__scaleExtent(this.map.extent,_c22,this._zoomAnimAnchor);this.map.__zoom(_c23,_c22,this._dragOrigin);},_adjustPinchEnd:function(){var map=this.map,_c24=map.extent.getWidth()/this._zoomEndExtent.getWidth(),_c25=this.__scaleExtent(map.extent,1/_c24,this._zoomAnimAnchor),_c26=this._dragOrigin,lod=this._zoomEndLod;this._zoomStartExtent=this._zoomEndExtent=this._zoomEndLod=this._dragOrigin=map._zoomAnim=this._zoomAnimAnchor=null;map.__zoomEnd(_c25,_c24,_c26,lod,true);},__scaleExtent:function(_c27,_c28,_c29){var _c2a=_c29||_c27.getCenter(),_c2b=_c27.expand(_c28),xmin=_c27.xmin-((_c2b.getWidth()-_c27.getWidth())*(_c2a.x-_c27.xmin)/_c27.getWidth()),ymax=_c27.ymax-((_c2b.getHeight()-_c27.getHeight())*(_c2a.y-_c27.ymax)/_c27.getHeight());return new _bfe(xmin,ymax-_c2b.getHeight(),xmin+_c2b.getWidth(),ymax,_c27.spatialReference);},_normalizeRect:function(evt){var xy=evt.screenPoint,dx=this._dragOrigin.x,dy=this._dragOrigin.y,rect=new Rect((xy.x<dx?xy.x:dx)-this.map.__visibleRect.x,(xy.y<dy?xy.y:dy)-this.map.__visibleRect.y,Math.abs(xy.x-dx),Math.abs(xy.y-dy));delete rect.spatialReference;if(rect.width===0){rect.width=1;}if(rect.height===0){rect.height=1;}return rect;},setImmediateClick:function(_c2c){switch(this.eventModel){case "mouse":this.mouseEvents.setImmediateClick(_c2c);break;case "touch":case "pointer":(this.touchEvents||this.pointerEvents).setImmediateTap(_c2c);break;}},enablePan:function(){this.disablePan();switch(this.eventModel){case "mouse":this._panInitHandle=_c01(this.mouseEvents,"onMouseDown",this,this._panInit);break;case "touch":this._panInitHandle=_c01(this.mouseEvents,"onMouseDown",this,this._panInit);this._swipeInitHandle=_c01(this.touchEvents,"onSwipeStart",this,this._swipeInit);break;case "pointer":this._swipeInitHandle=_c01(this.pointerEvents,"onSwipeStart",this,this._swipeInit);break;}},disablePan:function(){_c02(this._panInitHandle);this._panInitHandle=null;_c02(this._swipeInitHandle);this._swipeInitHandle=null;},enableRubberBandZoom:function(){this.disableRubberBandZoom();this._zoomInitHandle=this.pointerEvents?_c01(this.pointerEvents,"onSwipeStart",this,this._zoomInit):_c01(this.mouseEvents,"onMouseDown",this,this._zoomInit);},disableRubberBandZoom:function(){_c02(this._zoomInitHandle);this._zoomInitHandle=null;},enablePinchZoom:function(){this.disablePinchZoom();if(this.eventModel==="touch"||this.eventModel==="pointer"){this._pinchInitHandle=_c01(this.touchEvents||this.pointerEvents,"onPinchStart",this,this._pinchInit);}},disablePinchZoom:function(){_c02(this._pinchInitHandle);this._pinchInitHandle=null;},enableScrollWheelZoom:function(){this.disableScrollWheelZoom();this._wheelHandle=_c01(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelZoom);},disableScrollWheelZoom:function(){_c02(this._wheelHandle);this._wheelHandle=null;},enableDoubleClickZoom:function(){this.disableDoubleClickZoom();switch(this.eventModel){case "mouse":this._dblClickHandle=_c01(this.mouseEvents,"onDblClick",this,this._dblClickZoom);break;case "touch":this._dblClickHandle=_c01(this.mouseEvents,"onDblClick",this,this._dblClickZoom);this._dblTapHandle=_c01(this.touchEvents,"onDoubleTap",this,this._dblClickZoom);this._zoomOutHandle=_c01(this.touchEvents,"onTwoFingerTap",this,this._twoFingerTap);break;case "pointer":this._dblTapHandle=_c01(this.pointerEvents,"onDoubleTap",this,this._dblClickZoom);this._zoomOutHandle=_c01(this.pointerEvents,"onTwoFingerTap",this,this._twoFingerTap);break;}},disableDoubleClickZoom:function(){_c02(this._dblClickHandle);_c02(this._zoomOutHandle);if(this._dblTapHandle){_c02(this._dblTapHandle);}this._dblClickHandle=this._zoomOutHandle=this._dblTapHandle=null;},enableShiftDoubleClickZoom:function(){this.disableShiftDoubleClickZoom();this._sDblClickHandle=_c01(this.pointerEvents||this.mouseEvents,"onDblClick",this,this._recenterZoom);},disableShiftDoubleClickZoom:function(){_c02(this._sDblClickHandle);this._sDblClickHandle=null;},enableClickRecenter:function(){this.disableClickRecenter();this._recenterHandle=_c01(this.pointerEvents||this.mouseEvents,"onClick",this,this._recenter);},disableClickRecenter:function(){_c02(this._recenterHandle);this._recenterHandle=null;},enableKeyboardNavigation:function(){this.disableKeyboardNavigation();this._keyHandle=_c01(this.pointerEvents||this.mouseEvents,"onKeyDown",this,this._keyDown);this._keyEndHandle=_c01(this.pointerEvents||this.mouseEvents,"onKeyUp",this,this._keyEnd);},disableKeyboardNavigation:function(){_c02(this._keyHandle);_c02(this._keyEndHandle);this._keyHandle=this._keyEndHandle=null;},enableNavigation:function(){var map=this.map;if(map&&map.loaded){map.enableDoubleClickZoom();map.enableClickRecenter();map.enablePan();map.enableRubberBandZoom();this.enablePinchZoom();map.enableKeyboardNavigation();if(map.smartNavigation){this._setScrollWheelPan(true);}else{map.enableScrollWheelZoom();}}},disableNavigation:function(){var map=this.map;if(map&&map.loaded){map.disableDoubleClickZoom();map.disableClickRecenter();map.disablePan();map.disableRubberBandZoom();this.disablePinchZoom();map.disableKeyboardNavigation();map.disableScrollWheelZoom();if(map.smartNavigation){this._setScrollWheelPan(false);}}},destroy:function(){if(this.touchEvents){this.touchEvents.destroy();}if(this.mouseEvents){this.mouseEvents.destroy();}if(this.pointerEvents){this.pointerEvents.destroy();}var i,_c2d=[this._panInitHandle,this._panStartHandle,this._panHandle,this._panEndHandle,this._zoomInitHandle,this._zoomHandle,this._zoomEndHandle,this._wheelHandle,this._mwMacHandle,this._dblClickHandle,this._zoomOutHandle,this._recenterHandle,this._sDblClickHandle,this._dblTapHandle,this._keyHandle,this._keyEndHandle,this._swipeInitHandle,this._swipeHandle,this._swipeEndHandle,this._pinchInitHandle,this._pinchHandle,this._pinchEndHandle];for(i=0;i<_c2d.length;i++){_c02(_c2d[i]);}this.map=this.touchEvents=this.mouseEvents=this.eventModel=this.pointerEvents=this._zoomRect=this._dragOrigin=this._panInitHandle=this._panStartHandle=this._panHandle=this._panEndHandle=this._zoomInitHandle=this._zoomHandle=this._zoomEndHandle=this._wheelHandle=this._mwMacHandle=this._dblClickHandle=this._zoomOutHandle=this._recenterHandle=this._sDblClickHandle=this._dblTapHandle=this._keyHandle=this._keyEndHandle=this._swipeInitHandle=this._swipeHandle=this._swipeEndHandle=this._pinchInitHandle=this._pinchHandle=this._pinchEndHandle=null;}});if(has("extend-esri")){_bf4.MapNavigationManager=_c08;}return _c08;});},"dijit/WidgetSet":function(){define("dijit/WidgetSet",["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","./registry"],function(_c2e,_c2f,_c30,_c31){var _c32=_c2f("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0;},add:function(_c33){if(this._hash[_c33.id]){throw new Error("Tried to register widget with id=="+_c33.id+" but that id is already registered");}this._hash[_c33.id]=_c33;this.length++;},remove:function(id){if(this._hash[id]){delete this._hash[id];this.length--;}},forEach:function(func,_c34){_c34=_c34||_c30.global;var i=0,id;for(id in this._hash){func.call(_c34,this._hash[id],i++,this._hash);}return this;},filter:function(_c35,_c36){_c36=_c36||_c30.global;var res=new _c32(),i=0,id;for(id in this._hash){var w=this._hash[id];if(_c35.call(_c36,w,i++,this._hash)){res.add(w);}}return res;},byId:function(id){return this._hash[id];},byClass:function(cls){var res=new _c32(),id,_c37;for(id in this._hash){_c37=this._hash[id];if(_c37.declaredClass==cls){res.add(_c37);}}return res;},toArray:function(){var ar=[];for(var id in this._hash){ar.push(this._hash[id]);}return ar;},map:function(func,_c38){return _c2e.map(this.toArray(),func,_c38);},every:function(func,_c39){_c39=_c39||_c30.global;var x=0,i;for(i in this._hash){if(!func.call(_c39,this._hash[i],x++,this._hash)){return false;}}return true;},some:function(func,_c3a){_c3a=_c3a||_c30.global;var x=0,i;for(i in this._hash){if(func.call(_c3a,this._hash[i],x++,this._hash)){return true;}}return false;}});_c2e.forEach(["forEach","filter","byClass","map","every","some"],function(func){_c31[func]=_c32.prototype[func];});return _c32;});},"dijit/layout/_ContentPaneResizeMixin":function(){define("dijit/layout/_ContentPaneResizeMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/query","dojo/sniff","../registry","../Viewport","./utils"],function(_c3b,_c3c,_c3d,_c3e,_c3f,lang,_c40,has,_c41,_c42,_c43){return _c3c("dijit.layout._ContentPaneResizeMixin",null,{doLayout:true,isLayoutContainer:true,startup:function(){if(this._started){return;}var _c44=this.getParent();this._childOfLayoutWidget=_c44&&_c44.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);if(this._isShown()){this._onShow();}if(!this._childOfLayoutWidget){this.own(_c42.on("resize",lang.hitch(this,"resize")));}},_checkIfSingleChild:function(){var _c45=[],_c46=false;_c40("> *",this.containerNode).some(function(node){var _c47=_c41.byNode(node);if(_c47&&_c47.resize){_c45.push(_c47);}else{if(node.offsetHeight){_c46=true;}}});this._singleChild=_c45.length==1&&!_c46?_c45[0]:null;_c3d.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild);},resize:function(_c48,_c49){this._resizeCalled=true;this._scheduleLayout(_c48,_c49);},_scheduleLayout:function(_c4a,_c4b){if(this._isShown()){this._layout(_c4a,_c4b);}else{this._needLayout=true;this._changeSize=_c4a;this._resultSize=_c4b;}},_layout:function(_c4c,_c4d){delete this._needLayout;if(!this._wasShown&&this.open!==false){this._onShow();}if(_c4c){_c3e.setMarginBox(this.domNode,_c4c);}var cn=this.containerNode;if(cn===this.domNode){var mb=_c4d||{};lang.mixin(mb,_c4c||{});if(!("h" in mb)||!("w" in mb)){mb=lang.mixin(_c3e.getMarginBox(cn),mb);}this._contentBox=_c43.marginBox2contentBox(cn,mb);}else{this._contentBox=_c3e.getContentBox(cn);}this._layoutChildren();},_layoutChildren:function(){if(this.doLayout){this._checkIfSingleChild();}if(this._singleChild&&this._singleChild.resize){var cb=this._contentBox||_c3e.getContentBox(this.containerNode);this._singleChild.resize({w:cb.w,h:cb.h});}else{_c3b.forEach(this.getChildren(),function(_c4e){if(_c4e.resize){_c4e.resize();}});}},_isShown:function(){if(this._childOfLayoutWidget){if(this._resizeCalled&&"open" in this){return this.open;}return this._resizeCalled;}else{if("open" in this){return this.open;}else{var node=this.domNode,_c4f=this.domNode.parentNode;return (node.style.display!="none")&&(node.style.visibility!="hidden")&&!_c3d.contains(node,"dijitHidden")&&_c4f&&_c4f.style&&(_c4f.style.display!="none");}}},_onShow:function(){this._wasShown=true;if(this._needLayout){this._layout(this._changeSize,this._resultSize);}this.inherited(arguments);}});});},"esri/virtualearth/VEGeocoder":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/has","esri/kernel","esri/urlUtils","esri/tasks/Task","esri/virtualearth/VEGeocodeResult","esri/deferredUtils","esri/request"],function(_c50,lang,_c51,_c52,has,_c53,_c54,Task,_c55,_c56,_c57){var _c58=_c50(Task,{declaredClass:"esri.virtualearth.VEGeocoder",constructor:function(_c59){try{_c59=lang.mixin({bingMapsKey:null},_c59||{});this.url="http://serverapi.arcgisonline.com/veadaptor/production/services/geocode/geocode";this._url=_c54.urlToObject(this.url);this._queue=[];this.bingMapsKey=_c59.bingMapsKey;this.culture=_c59.culture||"en-US";this._errorHandler=lang.hitch(this,this._errorHandler);this._addressToLocationsHandler=lang.hitch(this,this._addressToLocationsHandler);if(!this.bingMapsKey){throw new Error("BingMapsKey must be provided.");}}catch(e){this.onError(e);throw e;}},addressToLocations:function(_c5a,_c5b,_c5c){if(!this.bingMapsKey){console.debug("Server token not retrieved. Queing request to be executed after server token retrieved.");this._queue.push(arguments);return;}var _c5d=lang.mixin({},this._url.query,{query:_c5a,token:this.bingMapsKey,culture:this.culture}),_c5e=this._addressToLocationsHandler,_c5f=this._errorHandler;var dfd=new _c52(_c56._dfdCanceller);dfd._pendingDfd=_c57({url:this._url.path,content:_c5d,callbackParamName:"callback",load:function(r,i){_c5e(r,i,_c5b,_c5c,dfd);},error:function(r){_c5f(r,_c5c,dfd);}});return dfd;},_addressToLocationsHandler:function(_c60,io,_c61,_c62,dfd){try{_c51.forEach(_c60,function(_c63,i){_c60[i]=new _c55(_c63);});this._successHandler([_c60],"onAddressToLocationsComplete",_c61,dfd);}catch(err){this._errorHandler(err,_c62,dfd);}},onAddressToLocationsComplete:function(){},setBingMapsKey:function(_c64){this.bingMapsKey=_c64;},setCulture:function(_c65){this.culture=_c65;}});if(has("extend-esri")){lang.setObject("virtualearth.VEGeocoder",_c58,_c53);}return _c58;});},"esri/tasks/AreasAndLengthsParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel"],function(_c66,lang,_c67,_c68,has,_c69){var _c6a=_c66(null,{declaredClass:"esri.tasks.AreasAndLengthsParameters",polygons:null,lengthUnit:null,areaUnit:null,calculationType:null,toJson:function(){var _c6b=_c67.map(this.polygons,function(geom){return geom.toJson();});var json={};json.polygons=_c68.toJson(_c6b);var _c6c=this.polygons[0].spatialReference;json.sr=_c6c.wkid?_c6c.wkid:_c68.toJson(_c6c.toJson());if(this.lengthUnit){json.lengthUnit=this.lengthUnit;}if(this.areaUnit){if(lang.isString(this.areaUnit)){json.areaUnit=_c68.toJson({"areaUnit":this.areaUnit});}else{json.areaUnit=this.areaUnit;}}if(this.calculationType){json.calculationType=this.calculationType;}return json;}});if(has("extend-esri")){lang.setObject("tasks.AreasAndLengthsParameters",_c6a,_c69);}return _c6a;});},"dojo/dnd/Moveable":function(){define(["../_base/array","../_base/declare","../_base/event","../_base/lang","../dom","../dom-class","../Evented","../on","../topic","../touch","./common","./Mover","../_base/window"],function(_c6d,_c6e,_c6f,lang,dom,_c70,_c71,on,_c72,_c73,dnd,_c74,win){var _c75=_c6e("dojo.dnd.Moveable",[_c71],{handle:"",delay:0,skip:false,constructor:function(node,_c76){this.node=dom.byId(node);if(!_c76){_c76={};}this.handle=_c76.handle?dom.byId(_c76.handle):null;if(!this.handle){this.handle=this.node;}this.delay=_c76.delay>0?_c76.delay:0;this.skip=_c76.skip;this.mover=_c76.mover?_c76.mover:_c74;this.events=[on(this.handle,_c73.press,lang.hitch(this,"onMouseDown")),on(this.handle,"dragstart",lang.hitch(this,"onSelectStart")),on(this.handle,"selectstart",lang.hitch(this,"onSelectStart"))];},markupFactory:function(_c77,node,Ctor){return new Ctor(node,_c77);},destroy:function(){_c6d.forEach(this.events,function(_c78){_c78.remove();});this.events=this.node=this.handle=null;},onMouseDown:function(e){if(this.skip&&dnd.isFormElement(e)){return;}if(this.delay){this.events.push(on(this.handle,_c73.move,lang.hitch(this,"onMouseMove")),on(this.handle,_c73.release,lang.hitch(this,"onMouseUp")));this._lastX=e.pageX;this._lastY=e.pageY;}else{this.onDragDetected(e);}_c6f.stop(e);},onMouseMove:function(e){if(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay){this.onMouseUp(e);this.onDragDetected(e);}_c6f.stop(e);},onMouseUp:function(e){for(var i=0;i<2;++i){this.events.pop().remove();}_c6f.stop(e);},onSelectStart:function(e){if(!this.skip||!dnd.isFormElement(e)){_c6f.stop(e);}},onDragDetected:function(e){new this.mover(this.node,e,this);},onMoveStart:function(_c79){_c72.publish("/dnd/move/start",_c79);_c70.add(win.body(),"dojoMove");_c70.add(this.node,"dojoMoveItem");},onMoveStop:function(_c7a){_c72.publish("/dnd/move/stop",_c7a);_c70.remove(win.body(),"dojoMove");_c70.remove(this.node,"dojoMoveItem");},onFirstMove:function(){},onMove:function(_c7b,_c7c){this.onMoving(_c7b,_c7c);var s=_c7b.node.style;s.left=_c7c.l+"px";s.top=_c7c.t+"px";this.onMoved(_c7b,_c7c);},onMoving:function(){},onMoved:function(){}});return _c75;});},"esri/tasks/NATypes":function(){define(["dojo/_base/lang","dojo/has","esri/kernel"],function(lang,has,_c7d){var _c7e={esriFeet:"esriNAUFeet",esriKilometers:"esriNAUKilometers",esriMeters:"esriNAUMeters",esriMiles:"esriNAUMiles",esriNauticalMiles:"esriNAUNauticalMiles",esriYards:"esriNAUYards"},_c7f={NONE:"esriNAOutputLineNone",STRAIGHT:"esriNAOutputLineStraight",TRUE_SHAPE:"esriNAOutputLineTrueShape",TRUE_SHAPE_WITH_MEASURE:"esriNAOutputLineTrueShapeWithMeasure"},_c80={ALLOW_BACKTRACK:"esriNFSBAllowBacktrack",AT_DEAD_ENDS_ONLY:"esriNFSBAtDeadEndsOnly",NO_BACKTRACK:"esriNFSBNoBacktrack",AT_DEAD_ENDS_AND_INTERSECTIONS:"esriNFSBAtDeadEndsAndIntersections"},_c81={NONE:"esriNAOutputPolygonNone",SIMPLIFIED:"esriNAOutputPolygonSimplified",DETAILED:"esriNAOutputPolygonDetailed"},_c82={FROM_FACILITY:"esriNATravelDirectionFromFacility",TO_FACILITY:"esriNATravelDirectionToFacility"},_c83={LengthUnit:_c7e,OutputLine:_c7f,UTurn:_c80,OutputPolygon:_c81,TravelDirection:_c82};if(has("extend-esri")){lang.setObject("tasks._NALengthUnit",_c7e,_c7d);lang.setObject("tasks.NAOutputLine",_c7f,_c7d);lang.setObject("tasks.NAUTurn",_c80,_c7d);lang.setObject("tasks.NAOutputPolygon",_c81,_c7d);lang.setObject("tasks.NATravelDirection",_c82,_c7d);}return _c83;});},"dijit/TooltipDialog":function(){require({cache:{"url:dijit/templates/TooltipDialog.html":"<div role=\"presentation\" tabIndex=\"-1\">\n\t<div class=\"dijitTooltipContainer\" role=\"presentation\">\n\t\t<div class =\"dijitTooltipContents dijitTooltipFocusNode\" data-dojo-attach-point=\"containerNode\" role=\"dialog\"></div>\n\t</div>\n\t<div class=\"dijitTooltipConnector\" role=\"presentation\" data-dojo-attach-point=\"connectorNode\"></div>\n</div>\n"}});define("dijit/TooltipDialog",["dojo/_base/declare","dojo/dom-class","dojo/_base/event","dojo/keys","dojo/_base/lang","./focus","./layout/ContentPane","./_DialogMixin","./form/_FormMixin","./_TemplatedMixin","dojo/text!./templates/TooltipDialog.html","./main"],function(_c84,_c85,_c86,keys,lang,_c87,_c88,_c89,_c8a,_c8b,_c8c,_c8d){return _c84("dijit.TooltipDialog",[_c88,_c8b,_c8a,_c89],{title:"",doLayout:false,autofocus:true,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:_c8c,_setTitleAttr:function(_c8e){this.containerNode.title=_c8e;this._set("title",_c8e);},postCreate:function(){this.inherited(arguments);this.connect(this.containerNode,"onkeypress","_onKey");},orient:function(node,_c8f,_c90){var newC={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_c8f+"-"+_c90];_c85.replace(this.domNode,newC,this._currentOrientClass||"");this._currentOrientClass=newC;},focus:function(){this._getFocusItems(this.containerNode);_c87.focus(this._firstFocusItem);},onOpen:function(pos){this.orient(this.domNode,pos.aroundCorner,pos.corner);var _c91=pos.aroundNodePos;if(pos.corner.charAt(0)=="M"&&pos.aroundCorner.charAt(0)=="M"){this.connectorNode.style.top=_c91.y+((_c91.h-this.connectorNode.offsetHeight)>>1)-pos.y+"px";this.connectorNode.style.left="";}else{if(pos.corner.charAt(1)=="M"&&pos.aroundCorner.charAt(1)=="M"){this.connectorNode.style.left=_c91.x+((_c91.w-this.connectorNode.offsetWidth)>>1)-pos.x+"px";}}this._onShow();},onClose:function(){this.onHide();},_onKey:function(evt){var node=evt.target;if(evt.charOrCode===keys.TAB){this._getFocusItems(this.containerNode);}var _c92=(this._firstFocusItem==this._lastFocusItem);if(evt.charOrCode==keys.ESCAPE){this.defer("onCancel");_c86.stop(evt);}else{if(node==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===keys.TAB){if(!_c92){_c87.focus(this._lastFocusItem);}_c86.stop(evt);}else{if(node==this._lastFocusItem&&evt.charOrCode===keys.TAB&&!evt.shiftKey){if(!_c92){_c87.focus(this._firstFocusItem);}_c86.stop(evt);}else{if(evt.charOrCode===keys.TAB){evt.stopPropagation();}}}}}});});},"esri/renderers/TimeRampAger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","esri/kernel","esri/symbols/jsonUtils","esri/renderers/SymbolAger"],function(_c93,lang,_c94,has,_c95,_c96,_c97){var _c98=_c93(_c97,{declaredClass:"esri.renderer.TimeRampAger",constructor:function(_c99,_c9a,_c9b){this.colorRange=_c99;this.sizeRange=_c9a;this.alphaRange=_c9b;},getAgedSymbol:function(_c9c,_c9d){var _c9e=_c9d.getLayer(),_c9f=_c9d.attributes;_c9c=_c96.fromJson(_c9c.toJson());var _ca0=_c9e._map.timeExtent;var _ca1=_ca0.startTime,_ca2=_ca0.endTime;if(!_ca1||!_ca2){return _c9c;}_ca1=_ca1.getTime();_ca2=_ca2.getTime();var _ca3=new Date(_c9f[_c9e._startTimeField]);_ca3=_ca3.getTime();if(_ca3<_ca1){_ca3=_ca1;}var _ca4=(_ca2===_ca1)?1:(_ca3-_ca1)/(_ca2-_ca1);var _ca5=this.sizeRange,_ca6,_ca7;if(_ca5){var from=_ca5[0],to=_ca5[1];_ca7=Math.abs(to-from)*_ca4;this._setSymbolSize(_c9c,(from<to)?(from+_ca7):(from-_ca7));}_ca5=this.colorRange;if(_ca5){var _ca8=_ca5[0],_ca9=_ca5[1],_caa=Math.round;_ca6=new _c94();var _cab=_ca8.r,toR=_ca9.r;_ca7=Math.abs(toR-_cab)*_ca4;_ca6.r=_caa((_cab<toR)?(_cab+_ca7):(_cab-_ca7));var _cac=_ca8.g,toG=_ca9.g;_ca7=Math.abs(toG-_cac)*_ca4;_ca6.g=_caa((_cac<toG)?(_cac+_ca7):(_cac-_ca7));var _cad=_ca8.b,toB=_ca9.b;_ca7=Math.abs(toB-_cad)*_ca4;_ca6.b=_caa((_cad<toB)?(_cad+_ca7):(_cad-_ca7));var _cae=_ca8.a,toA=_ca9.a;_ca7=Math.abs(toA-_cae)*_ca4;_ca6.a=(_cae<toA)?(_cae+_ca7):(_cae-_ca7);_c9c.setColor(_ca6);}_ca6=_c9c.color;_ca5=this.alphaRange;if(_ca5&&_ca6){var _caf=_ca5[0],_cb0=_ca5[1];_ca7=Math.abs(_cb0-_caf)*_ca4;_ca6.a=(_caf<_cb0)?(_caf+_ca7):(_caf-_ca7);}return _c9c;}});if(has("extend-esri")){lang.setObject("renderer.TimeRampAger",_c98,_c95);}return _c98;});},"dijit/typematic":function(){define("dijit/typematic",["dojo/_base/array","dojo/_base/connect","dojo/_base/event","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/sniff","./main"],function(_cb1,_cb2,_cb3,_cb4,lang,on,has,_cb5){var _cb6=(_cb5.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:(this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay)),this._minDelay);this._timer=setTimeout(lang.hitch(this,"_fireEventAndReload"),this._currentTimeout);},trigger:function(evt,_cb7,node,_cb8,obj,_cb9,_cba,_cbb){if(obj!=this._obj){this.stop();this._initialDelay=_cba||500;this._subsequentDelay=_cb9||0.9;this._minDelay=_cbb||10;this._obj=obj;this._node=node;this._currentTimeout=-1;this._count=-1;this._callback=lang.hitch(_cb7,_cb8);this._evt={faux:true};for(var attr in evt){if(attr!="layerX"&&attr!="layerY"){var v=evt[attr];if(typeof v!="function"&&typeof v!="undefined"){this._evt[attr]=v;}}}this._fireEventAndReload();}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null;}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null;}},addKeyListener:function(node,_cbc,_cbd,_cbe,_cbf,_cc0,_cc1){if(_cbc.keyCode){_cbc.charOrCode=_cbc.keyCode;_cb4.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}else{if(_cbc.charCode){_cbc.charOrCode=String.fromCharCode(_cbc.charCode);_cb4.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}}var _cc2=[on(node,_cb2._keypress,lang.hitch(this,function(evt){if(evt.charOrCode==_cbc.charOrCode&&(_cbc.ctrlKey===undefined||_cbc.ctrlKey==evt.ctrlKey)&&(_cbc.altKey===undefined||_cbc.altKey==evt.altKey)&&(_cbc.metaKey===undefined||_cbc.metaKey==(evt.metaKey||false))&&(_cbc.shiftKey===undefined||_cbc.shiftKey==evt.shiftKey)){_cb3.stop(evt);_cb6.trigger(evt,_cbd,node,_cbe,_cbc,_cbf,_cc0,_cc1);}else{if(_cb6._obj==_cbc){_cb6.stop();}}})),on(node,"keyup",lang.hitch(this,function(){if(_cb6._obj==_cbc){_cb6.stop();}}))];return {remove:function(){_cb1.forEach(_cc2,function(h){h.remove();});}};},addMouseListener:function(node,_cc3,_cc4,_cc5,_cc6,_cc7){var _cc8=[on(node,"mousedown",lang.hitch(this,function(evt){evt.preventDefault();_cb6.trigger(evt,_cc3,node,_cc4,node,_cc5,_cc6,_cc7);})),on(node,"mouseup",lang.hitch(this,function(evt){if(this._obj){evt.preventDefault();}_cb6.stop();})),on(node,"mouseout",lang.hitch(this,function(evt){if(this._obj){evt.preventDefault();}_cb6.stop();})),on(node,"dblclick",lang.hitch(this,function(evt){evt.preventDefault();if(has("ie")<9){_cb6.trigger(evt,_cc3,node,_cc4,node,_cc5,_cc6,_cc7);setTimeout(lang.hitch(this,_cb6.stop),50);}}))];return {remove:function(){_cb1.forEach(_cc8,function(h){h.remove();});}};},addListener:function(_cc9,_cca,_ccb,_ccc,_ccd,_cce,_ccf,_cd0){var _cd1=[this.addKeyListener(_cca,_ccb,_ccc,_ccd,_cce,_ccf,_cd0),this.addMouseListener(_cc9,_ccc,_ccd,_cce,_ccf,_cd0)];return {remove:function(){_cb1.forEach(_cd1,function(h){h.remove();});}};}});return _cb6;});},"dojox/gfx":function(){define("dojox/gfx",["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(lang,_cd2,_cd3){_cd2.switchTo(_cd3);return _cd2;});},"esri/WKIDUnitConversion":function(){define(["dojo/has","esri/kernel"],function(has,_cd4){var obj={values:[1,0.2011661949,0.3047997101815088,0.3048006096012192,0.3048,0.304797265,0.9143985307444408,20.11678249437587,0.9143984146160287,20.11676512155263,0.3047994715386762,0.91439523,50000,150000],2000:0,2001:0,2002:0,2003:0,2004:0,2005:0,2006:0,2007:0,2008:0,2009:0,2010:0,2011:0,2012:0,2013:0,2014:0,2015:0,2016:0,2017:0,2018:0,2019:0,2020:0,2021:0,2022:0,2023:0,2024:0,2025:0,2026:0,2027:0,2028:0,2029:0,2030:0,2031:0,2032:0,2033:0,2034:0,2035:0,2036:0,2037:0,2038:0,2039:0,2040:0,2041:0,2042:0,2043:0,2044:0,2045:0,2056:0,2057:0,2058:0,2059:0,2060:0,2061:0,2062:0,2063:0,2064:0,2065:0,2066:1,2067:0,2068:0,2069:0,2070:0,2071:0,2072:0,2073:0,2074:0,2075:0,2076:0,2077:0,2078:0,2079:0,2080:0,2081:0,2082:0,2083:0,2084:0,2085:0,2086:0,2087:0,2088:0,2089:0,2090:0,2091:0,2092:0,2093:0,2094:0,2095:0,2096:0,2097:0,2098:0,2099:0,2100:0,2101:0,2102:0,2103:0,2104:0,2105:0,2106:0,2107:0,2108:0,2109:0,2110:0,2111:0,2112:0,2113:0,2114:0,2115:0,2116:0,2117:0,2118:0,2119:0,2120:0,2121:0,2122:0,2123:0,2124:0,2125:0,2126:0,2127:0,2128:0,2129:0,2130:0,2131:0,2132:0,2133:0,2134:0,2135:0,2136:2,2137:0,2138:0,2139:0,2140:0,2141:0,2142:0,2143:0,2144:0,2145:0,2146:0,2147:0,2148:0,2149:0,2150:0,2151:0,2152:0,2153:0,2154:0,2155:3,2157:0,2158:0,2159:2,2160:2,2161:0,2162:0,2163:0,2164:0,2165:0,2166:0,2167:0,2168:0,2169:0,2170:0,2172:0,2173:0,2174:0,2175:0,2176:0,2177:0,2178:0,2179:0,2180:0,2181:0,2182:0,2183:0,2184:0,2185:0,2186:0,2187:0,2188:0,2189:0,2190:0,2192:0,2193:0,2195:0,2196:0,2197:0,2198:0,2200:0,2201:0,2202:0,2203:0,2204:3,2205:0,2206:0,2207:0,2208:0,2209:0,2210:0,2211:0,2212:0,2213:0,2214:0,2215:0,2216:0,2217:0,2219:0,2220:0,2222:4,2223:4,2224:4,2225:3,2226:3,2227:3,2228:3,2229:3,2230:3,2231:3,2232:3,2233:3,2234:3,2235:3,2236:3,2237:3,2238:3,2239:3,2240:3,2241:3,2242:3,2243:3,2244:3,2245:3,2246:3,2247:3,2248:3,2249:3,2250:3,2251:4,2252:4,2253:4,2254:3,2255:3,2256:4,2257:3,2258:3,2259:3,2260:3,2261:3,2262:3,2263:3,2264:3,2265:4,2266:4,2267:3,2268:3,2269:4,2270:4,2271:3,2272:3,2273:4,2274:3,2275:3,2276:3,2277:3,2278:3,2279:3,2280:4,2281:4,2282:4,2283:3,2284:3,2285:3,2286:3,2287:3,2288:3,2289:3,2290:0,2291:0,2292:0,2294:0,2295:0,2308:0,2309:0,2310:0,2311:0,2312:0,2313:0,2314:5,2315:0,2316:0,2317:0,2318:0,2319:0,2320:0,2321:0,2322:0,2323:0,2324:0,2325:0,2326:0,2327:0,2328:0,2329:0,2330:0,2331:0,2332:0,2333:0,2334:0,2335:0,2336:0,2337:0,2338:0,2339:0,2340:0,2341:0,2342:0,2343:0,2344:0,2345:0,2346:0,2347:0,2348:0,2349:0,2350:0,2351:0,2352:0,2353:0,2354:0,2355:0,2356:0,2357:0,2358:0,2359:0,2360:0,2361:0,2362:0,2363:0,2364:0,2365:0,2366:0,2367:0,2368:0,2369:0,2370:0,2371:0,2372:0,2373:0,2374:0,2375:0,2376:0,2377:0,2378:0,2379:0,2380:0,2381:0,2382:0,2383:0,2384:0,2385:0,2386:0,2387:0,2388:0,2389:0,2390:0,2391:0,2392:0,2393:0,2394:0,2395:0,2396:0,2397:0,2398:0,2399:0,2400:0,2401:0,2402:0,2403:0,2404:0,2405:0,2406:0,2407:0,2408:0,2409:0,2410:0,2411:0,2412:0,2413:0,2414:0,2415:0,2416:0,2417:0,2418:0,2419:0,2420:0,2421:0,2422:0,2423:0,2424:0,2425:0,2426:0,2427:0,2428:0,2429:0,2430:0,2431:0,2432:0,2433:0,2434:0,2435:0,2436:0,2437:0,2438:0,2439:0,2440:0,2441:0,2442:0,2443:0,2444:0,2445:0,2446:0,2447:0,2448:0,2449:0,2450:0,2451:0,2452:0,2453:0,2454:0,2455:0,2456:0,2457:0,2458:0,2459:0,2460:0,2461:0,2462:0,2523:0,2524:0,2525:0,2526:0,2527:0,2528:0,2529:0,2530:0,2531:0,2532:0,2533:0,2534:0,2535:0,2536:0,2537:0,2538:0,2539:0,2540:0,2541:0,2542:0,2543:0,2544:0,2545:0,2546:0,2547:0,2548:0,2549:0,2550:0,2551:0,2552:0,2553:0,2554:0,2555:0,2556:0,2557:0,2558:0,2559:0,2560:0,2561:0,2562:0,2563:0,2564:0,2565:0,2566:0,2567:0,2568:0,2569:0,2570:0,2571:0,2572:0,2573:0,2574:0,2575:0,2576:0,2577:0,2578:0,2579:0,2580:0,2581:0,2582:0,2583:0,2584:0,2585:0,2586:0,2587:0,2588:0,2589:0,2590:0,2591:0,2592:0,2593:0,2594:0,2595:0,2596:0,2597:0,2598:0,2599:0,2600:0,2601:0,2602:0,2603:0,2604:0,2605:0,2606:0,2607:0,2608:0,2609:0,2610:0,2611:0,2612:0,2613:0,2614:0,2615:0,2616:0,2617:0,2618:0,2619:0,2620:0,2621:0,2622:0,2623:0,2624:0,2625:0,2626:0,2627:0,2628:0,2629:0,2630:0,2631:0,2632:0,2633:0,2634:0,2635:0,2636:0,2637:0,2638:0,2639:0,2640:0,2641:0,2642:0,2643:0,2644:0,2645:0,2646:0,2647:0,2648:0,2649:0,2650:0,2651:0,2652:0,2653:0,2654:0,2655:0,2656:0,2657:0,2658:0,2659:0,2660:0,2661:0,2662:0,2663:0,2664:0,2665:0,2666:0,2667:0,2668:0,2669:0,2670:0,2671:0,2672:0,2673:0,2674:0,2675:0,2676:0,2677:0,2678:0,2679:0,2680:0,2681:0,2682:0,2683:0,2684:0,2685:0,2686:0,2687:0,2688:0,2689:0,2690:0,2691:0,2692:0,2693:0,2694:0,2695:0,2696:0,2697:0,2698:0,2699:0,2700:0,2701:0,2702:0,2703:0,2704:0,2705:0,2706:0,2707:0,2708:0,2709:0,2710:0,2711:0,2712:0,2713:0,2714:0,2715:0,2716:0,2717:0,2718:0,2719:0,2720:0,2721:0,2722:0,2723:0,2724:0,2725:0,2726:0,2727:0,2728:0,2729:0,2730:0,2731:0,2732:0,2733:0,2734:0,2735:0,2736:0,2737:0,2738:0,2739:0,2740:0,2741:0,2742:0,2743:0,2744:0,2745:0,2746:0,2747:0,2748:0,2749:0,2750:0,2751:0,2752:0,2753:0,2754:0,2755:0,2756:0,2757:0,2758:0,2759:0,2760:0,2761:0,2762:0,2763:0,2764:0,2765:0,2766:0,2767:0,2768:0,2769:0,2770:0,2771:0,2772:0,2773:0,2774:0,2775:0,2776:0,2777:0,2778:0,2779:0,2780:0,2781:0,2782:0,2783:0,2784:0,2785:0,2786:0,2787:0,2788:0,2789:0,2790:0,2791:0,2792:0,2793:0,2794:0,2795:0,2796:0,2797:0,2798:0,2799:0,2800:0,2801:0,2802:0,2803:0,2804:0,2805:0,2806:0,2807:0,2808:0,2809:0,2810:0,2811:0,2812:0,2813:0,2814:0,2815:0,2816:0,2817:0,2818:0,2819:0,2820:0,2821:0,2822:0,2823:0,2824:0,2825:0,2826:0,2827:0,2828:0,2829:0,2830:0,2831:0,2832:0,2833:0,2834:0,2835:0,2836:0,2837:0,2838:0,2839:0,2840:0,2841:0,2842:0,2843:0,2844:0,2845:0,2846:0,2847:0,2848:0,2849:0,2850:0,2851:0,2852:0,2853:0,2854:0,2855:0,2856:0,2857:0,2858:0,2859:0,2860:0,2861:0,2862:0,2863:0,2864:0,2865:0,2866:0,2867:4,2868:4,2869:4,2870:3,2871:3,2872:3,2873:3,2874:3,2875:3,2876:3,2877:3,2878:3,2879:3,2880:3,2881:3,2882:3,2883:3,2884:3,2885:3,2886:3,2887:3,2888:3,2891:3,2892:3,2893:3,2894:3,2895:3,2896:4,2897:4,2898:4,2899:3,2900:3,2901:4,2902:3,2903:3,2904:3,2905:3,2906:3,2907:3,2908:3,2909:4,2910:4,2911:3,2912:3,2913:4,2914:4,2915:3,2916:3,2917:3,2918:3,2919:3,2920:3,2921:4,2922:4,2923:4,2924:3,2925:3,2926:3,2927:3,2928:3,2929:3,2930:3,2931:0,2932:0,2933:0,2935:0,2936:0,2937:0,2938:0,2939:0,2940:0,2941:0,2942:0,2943:0,2944:0,2945:0,2946:0,2947:0,2948:0,2949:0,2950:0,2951:0,2952:0,2953:0,2954:0,2955:0,2956:0,2957:0,2958:0,2959:0,2960:0,2961:0,2962:0,2964:3,2965:3,2966:3,2967:3,2968:3,2969:0,2970:0,2971:0,2972:0,2973:0,2975:0,2976:0,2977:0,2978:0,2979:0,2980:0,2981:0,2982:0,2984:0,2985:0,2986:0,2987:0,2988:0,2989:0,2991:0,2992:4,2993:0,2994:4,2995:0,2996:0,2997:0,2998:0,2999:0,3000:0,3001:0,3002:0,3003:0,3004:0,3005:0,3006:0,3007:0,3008:0,3009:0,3010:0,3011:0,3012:0,3013:0,3014:0,3015:0,3016:0,3017:0,3018:0,3019:0,3020:0,3021:0,3022:0,3023:0,3024:0,3025:0,3026:0,3027:0,3028:0,3029:0,3030:0,3031:0,3032:0,3033:0,3034:0,3035:0,3036:0,3037:0,3054:0,3055:0,3056:0,3057:0,3058:0,3059:0,3060:0,3061:0,3062:0,3063:0,3064:0,3065:0,3066:0,3067:0,3068:0,3069:0,3070:0,3071:0,3072:0,3073:0,3074:0,3075:0,3076:0,3077:0,3078:0,3079:0,3080:4,3081:0,3082:0,3083:0,3084:0,3085:0,3086:0,3087:0,3088:0,3089:3,3090:0,3091:3,3092:0,3093:0,3094:0,3095:0,3096:0,3097:0,3098:0,3099:0,3100:0,3101:0,3102:3,3106:0,3107:0,3108:0,3109:0,3110:0,3111:0,3112:0,3113:0,3114:0,3115:0,3116:0,3117:0,3118:0,3119:0,3120:0,3121:0,3122:0,3123:0,3124:0,3125:0,3126:0,3127:0,3128:0,3129:0,3130:0,3131:0,3132:0,3133:0,3134:0,3135:0,3136:0,3137:0,3138:0,3141:0,3142:0,3148:0,3149:0,3153:0,3154:0,3155:0,3156:0,3157:0,3158:0,3159:0,3160:0,3161:0,3162:0,3163:0,3164:0,3165:0,3166:0,3169:0,3170:0,3171:0,3172:0,3174:0,3175:0,3176:0,3177:0,3178:0,3179:0,3180:0,3181:0,3182:0,3183:0,3184:0,3185:0,3186:0,3187:0,3188:0,3189:0,3190:0,3191:0,3192:0,3193:0,3194:0,3195:0,3196:0,3197:0,3198:0,3199:0,3200:0,3201:0,3202:0,3203:0,3294:0,3296:0,3297:0,3298:0,3299:0,3300:0,3301:0,3302:0,3303:0,3304:0,3305:0,3306:0,3307:0,3308:0,3309:0,3310:0,3311:0,3312:0,3313:0,3314:0,3315:0,3316:0,3317:0,3318:0,3319:0,3320:0,3321:0,3322:0,3323:0,3324:0,3325:0,3326:0,3327:0,3328:0,3329:0,3330:0,3331:0,3332:0,3333:0,3334:0,3335:0,3336:0,3337:0,3338:0,3339:0,3340:0,3341:0,3342:0,3343:0,3344:0,3345:0,3346:0,3347:0,3348:0,3349:0,3350:0,3351:0,3352:0,3353:0,3354:0,3355:0,3356:0,3357:0,3358:0,3359:3,3360:0,3361:4,3362:0,3363:3,3364:0,3365:3,3366:5,3367:0,3368:0,3369:0,3370:0,3371:0,3372:0,3373:0,3374:0,3375:0,3376:0,3377:0,3378:0,3379:0,3380:0,3381:0,3382:0,3383:0,3384:0,3385:0,3386:0,3387:0,3388:0,3391:0,3392:0,3393:0,3394:0,3395:0,3396:0,3397:0,3398:0,3399:0,3400:0,3401:0,3402:0,3403:0,3404:3,3405:0,3406:0,3407:5,3408:0,3409:0,3410:0,3411:0,3412:0,3413:0,3414:0,3415:0,3416:0,3417:3,3418:3,3419:3,3420:3,3421:3,3422:3,3423:3,3424:3,3425:3,3426:3,3427:3,3428:3,3429:3,3430:3,3431:3,3432:3,3433:3,3434:3,3435:3,3436:3,3437:3,3438:3,3439:0,3440:0,3441:3,3442:3,3443:3,3444:3,3445:3,3446:3,3447:0,3448:0,3449:0,3450:0,3453:3,3456:3,3457:3,3458:3,3459:3,3460:0,3461:0,3462:0,3463:0,3464:0,3560:3,3561:3,3562:3,3563:3,3564:3,3565:3,3566:3,3567:3,3568:3,3569:3,3570:3,3571:0,3572:0,3573:0,3574:0,3575:0,3576:0,3577:0,3578:0,3579:0,3580:0,3581:0,3582:3,3583:0,3584:3,3585:0,3586:3,3587:0,3588:4,3589:0,3590:4,3591:0,3592:0,3593:4,3594:0,3595:0,3596:0,3597:0,3598:3,3599:0,3600:3,3601:0,3602:0,3603:0,3604:0,3605:4,3606:0,3607:0,3608:3,3609:0,3610:3,3611:0,3612:3,3613:0,3614:3,3615:0,3616:3,3617:0,3618:3,3619:0,3620:3,3621:0,3622:3,3623:0,3624:3,3625:0,3626:3,3627:0,3628:3,3629:0,3630:3,3631:0,3632:3,3633:0,3634:4,3635:0,3636:4,3637:0,3638:0,3639:0,3640:3,3641:0,3642:3,3643:0,3644:4,3645:0,3646:4,3647:0,3648:4,3649:0,3650:3,3651:0,3652:3,3653:0,3654:3,3655:0,3656:4,3657:0,3658:3,3659:0,3660:3,3661:0,3662:3,3663:0,3664:3,3665:0,3666:0,3667:0,3668:3,3669:0,3670:3,3671:0,3672:3,3673:0,3674:3,3675:0,3676:4,3677:3,3678:0,3679:4,3680:3,3681:0,3682:4,3683:3,3684:0,3685:0,3686:3,3687:0,3688:3,3689:0,3690:3,3691:0,3692:3,3693:0,3694:0,3695:0,3696:3,3697:0,3698:3,3699:0,3700:3,3701:0,3702:0,3703:0,3704:0,3705:0,3706:0,3707:0,3708:0,3709:0,3710:0,3711:0,3712:0,3713:0,3714:0,3715:0,3716:0,3717:0,3718:0,3719:0,3720:0,3721:0,3722:0,3723:0,3724:0,3725:0,3726:0,3727:0,3728:3,3729:3,3730:3,3731:3,3732:3,3733:3,3734:3,3735:3,3736:3,3737:3,3738:3,3739:3,3753:3,3754:3,3755:3,3756:3,3757:3,3758:3,3759:3,3760:3,3761:0,3762:0,3763:0,3764:0,3765:0,3766:0,3767:0,3768:0,3769:0,3770:0,3771:0,3772:0,3773:0,3775:0,3776:0,3777:0,3779:0,3780:0,3781:0,3783:0,3784:0,3788:0,3789:0,3790:0,3791:0,3793:0,3794:0,3797:0,3798:0,3799:0,3800:0,3801:0,3802:0,3812:0,3814:0,3815:0,3816:0,3832:0,3833:0,3834:0,3835:0,3836:0,3837:0,3838:0,3839:0,3840:0,3841:0,3851:0,3852:0,3857:0,3890:0,3891:0,3892:0,3893:0,3912:0,3920:0,3942:0,3943:0,3944:0,3945:0,3946:0,3947:0,3948:0,3949:0,3950:0,3968:0,3969:0,3970:0,3973:0,3974:0,3975:0,3976:0,3978:0,3979:0,3986:0,3987:0,3988:0,3989:0,3991:3,3992:3,3994:0,3995:0,3996:0,3997:0,20002:0,20003:0,20004:0,20005:0,20006:0,20007:0,20008:0,20009:0,20010:0,20011:0,20012:0,20013:0,20014:0,20015:0,20016:0,20017:0,20018:0,20019:0,20020:0,20021:0,20022:0,20023:0,20024:0,20025:0,20026:0,20027:0,20028:0,20029:0,20030:0,20031:0,20032:0,20062:0,20063:0,20064:0,20065:0,20066:0,20067:0,20068:0,20069:0,20070:0,20071:0,20072:0,20073:0,20074:0,20075:0,20076:0,20077:0,20078:0,20079:0,20080:0,20081:0,20082:0,20083:0,20084:0,20085:0,20086:0,20087:0,20088:0,20089:0,20090:0,20091:0,20092:0,20135:0,20136:0,20137:0,20138:0,20248:0,20249:0,20250:0,20251:0,20252:0,20253:0,20254:0,20255:0,20256:0,20257:0,20258:0,20348:0,20349:0,20350:0,20351:0,20352:0,20353:0,20354:0,20355:0,20356:0,20357:0,20358:0,20436:0,20437:0,20438:0,20439:0,20440:0,20499:0,20538:0,20539:0,20790:0,20822:0,20823:0,20824:0,20934:0,20935:0,20936:0,21035:0,21036:0,21037:0,21095:0,21096:0,21097:0,21148:0,21149:0,21150:0,21291:0,21292:0,21413:0,21414:0,21415:0,21416:0,21417:0,21418:0,21419:0,21420:0,21421:0,21422:0,21423:0,21473:0,21474:0,21475:0,21476:0,21477:0,21478:0,21479:0,21480:0,21481:0,21482:0,21483:0,21500:0,21780:0,21781:0,21817:0,21818:0,21891:0,21892:0,21893:0,21894:0,21896:0,21897:0,21898:0,21899:0,22032:0,22033:0,22091:0,22092:0,22171:0,22172:0,22173:0,22174:0,22175:0,22176:0,22177:0,22181:0,22182:0,22183:0,22184:0,22185:0,22186:0,22187:0,22191:0,22192:0,22193:0,22194:0,22195:0,22196:0,22197:0,22234:0,22235:0,22236:0,22332:0,22391:0,22392:0,22521:0,22522:0,22523:0,22524:0,22525:0,22700:0,22770:0,22780:0,22832:0,22991:0,22992:0,22993:0,22994:0,23028:0,23029:0,23030:0,23031:0,23032:0,23033:0,23034:0,23035:0,23036:0,23037:0,23038:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,23830:0,23831:0,23832:0,23833:0,23834:0,23835:0,23836:0,23837:0,23838:0,23839:0,23840:0,23841:0,23842:0,23843:0,23844:0,23845:0,23846:0,23847:0,23848:0,23849:0,23850:0,23851:0,23852:0,23853:0,23866:0,23867:0,23868:0,23869:0,23870:0,23871:0,23872:0,23877:0,23878:0,23879:0,23880:0,23881:0,23882:0,23883:0,23884:0,23886:0,23887:0,23888:0,23889:0,23890:0,23891:0,23892:0,23893:0,23894:0,23946:0,23947:0,23948:0,24047:0,24048:0,24100:0,24200:0,24305:0,24306:0,24311:0,24312:0,24313:0,24342:0,24343:0,24344:0,24345:0,24346:0,24347:0,24370:6,24371:6,24372:6,24373:6,24374:6,24375:0,24376:0,24377:0,24378:0,24379:0,24380:0,24381:0,24382:6,24383:0,24500:0,24547:0,24548:0,24571:7,24600:0,24718:0,24719:0,24720:0,24721:0,24817:0,24818:0,24819:0,24820:0,24821:0,24877:0,24878:0,24879:0,24880:0,24881:0,24882:0,24891:0,24892:0,24893:0,25000:0,25231:0,25391:0,25392:0,25393:0,25394:0,25395:0,25828:0,25829:0,25830:0,25831:0,25832:0,25833:0,25834:0,25835:0,25836:0,25837:0,25838:0,25884:0,25932:0,26191:0,26192:0,26193:0,26194:0,26195:0,26237:0,26331:0,26332:0,26391:0,26392:0,26393:0,26432:0,26591:0,26592:0,26632:0,26692:0,26701:0,26702:0,26703:0,26704:0,26705:0,26706:0,26707:0,26708:0,26709:0,26710:0,26711:0,26712:0,26713:0,26714:0,26715:0,26716:0,26717:0,26718:0,26719:0,26720:0,26721:0,26722:0,26729:3,26730:3,26731:3,26732:3,26733:3,26734:3,26735:3,26736:3,26737:3,26738:3,26739:3,26740:3,26741:3,26742:3,26743:3,26744:3,26745:3,26746:3,26747:3,26748:3,26749:3,26750:3,26751:3,26752:3,26753:3,26754:3,26755:3,26756:3,26757:3,26758:3,26759:3,26760:3,26761:3,26762:3,26763:3,26764:3,26765:3,26766:3,26767:3,26768:3,26769:3,26770:3,26771:3,26772:3,26773:3,26774:3,26775:3,26776:3,26777:3,26778:3,26779:3,26780:3,26781:3,26782:3,26783:3,26784:3,26785:3,26786:3,26787:3,26788:3,26789:3,26790:3,26791:3,26792:3,26793:3,26794:3,26795:3,26796:3,26797:3,26798:3,26799:3,26801:3,26802:3,26803:3,26811:3,26812:3,26813:3,26901:0,26902:0,26903:0,26904:0,26905:0,26906:0,26907:0,26908:0,26909:0,26910:0,26911:0,26912:0,26913:0,26914:0,26915:0,26916:0,26917:0,26918:0,26919:0,26920:0,26921:0,26922:0,26923:0,26929:0,26930:0,26931:0,26932:0,26933:0,26934:0,26935:0,26936:0,26937:0,26938:0,26939:0,26940:0,26941:0,26942:0,26943:0,26944:0,26945:0,26946:0,26948:0,26949:0,26950:0,26951:0,26952:0,26953:0,26954:0,26955:0,26956:0,26957:0,26958:0,26959:0,26960:0,26961:0,26962:0,26963:0,26964:0,26965:0,26966:0,26967:0,26968:0,26969:0,26970:0,26971:0,26972:0,26973:0,26974:0,26975:0,26976:0,26977:0,26978:0,26979:0,26980:0,26981:0,26982:0,26983:0,26984:0,26985:0,26986:0,26987:0,26988:0,26989:0,26990:0,26991:0,26992:0,26993:0,26994:0,26995:0,26996:0,26997:0,26998:0,27037:0,27038:0,27039:0,27040:0,27120:0,27200:0,27205:0,27206:0,27207:0,27208:0,27209:0,27210:0,27211:0,27212:0,27213:0,27214:0,27215:0,27216:0,27217:0,27218:0,27219:0,27220:0,27221:0,27222:0,27223:0,27224:0,27225:0,27226:0,27227:0,27228:0,27229:0,27230:0,27231:0,27232:0,27258:0,27259:0,27260:0,27291:8,27292:8,27391:0,27392:0,27393:0,27394:0,27395:0,27396:0,27397:0,27398:0,27429:0,27492:0,27500:0,27561:0,27562:0,27563:0,27564:0,27571:0,27572:0,27573:0,27574:0,27581:0,27582:0,27583:0,27584:0,27591:0,27592:0,27593:0,27594:0,27700:0,28191:0,28192:0,28193:0,28232:0,28348:0,28349:0,28350:0,28351:0,28352:0,28353:0,28354:0,28355:0,28356:0,28357:0,28358:0,28402:0,28403:0,28404:0,28405:0,28406:0,28407:0,28408:0,28409:0,28410:0,28411:0,28412:0,28413:0,28414:0,28415:0,28416:0,28417:0,28418:0,28419:0,28420:0,28421:0,28422:0,28423:0,28424:0,28425:0,28426:0,28427:0,28428:0,28429:0,28430:0,28431:0,28432:0,28462:0,28463:0,28464:0,28465:0,28466:0,28467:0,28468:0,28469:0,28470:0,28471:0,28472:0,28473:0,28474:0,28475:0,28476:0,28477:0,28478:0,28479:0,28480:0,28481:0,28482:0,28483:0,28484:0,28485:0,28486:0,28487:0,28488:0,28489:0,28490:0,28491:0,28492:0,28600:0,28991:0,28992:0,29100:0,29101:0,29118:0,29119:0,29120:0,29121:0,29122:0,29168:0,29169:0,29170:0,29171:0,29172:0,29177:0,29178:0,29179:0,29180:0,29181:0,29182:0,29183:0,29184:0,29185:0,29187:0,29188:0,29189:0,29190:0,29191:0,29192:0,29193:0,29194:0,29195:0,29220:0,29221:0,29333:0,29635:0,29636:0,29738:0,29739:0,29849:0,29850:0,29871:9,29872:10,29873:0,29900:0,29901:0,29902:0,29903:0,30161:0,30162:0,30163:0,30164:0,30165:0,30166:0,30167:0,30168:0,30169:0,30170:0,30171:0,30172:0,30173:0,30174:0,30175:0,30176:0,30177:0,30178:0,30179:0,30200:1,30339:0,30340:0,30491:0,30492:0,30493:0,30494:0,30591:0,30592:0,30729:0,30730:0,30731:0,30732:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31251:0,31252:0,31253:0,31254:0,31255:0,31256:0,31257:0,31258:0,31259:0,31265:0,31266:0,31267:0,31268:0,31275:0,31276:0,31277:0,31278:0,31279:0,31281:0,31282:0,31283:0,31284:0,31285:0,31286:0,31287:0,31288:0,31289:0,31290:0,31291:0,31292:0,31293:0,31294:0,31295:0,31296:0,31297:0,31370:0,31461:0,31462:0,31463:0,31464:0,31465:0,31466:0,31467:0,31468:0,31469:0,31491:0,31492:0,31493:0,31494:0,31495:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31901:0,31917:0,31918:0,31919:0,31920:0,31921:0,31922:0,31971:0,31972:0,31973:0,31974:0,31975:0,31976:0,31977:0,31978:0,31979:0,31980:0,31981:0,31982:0,31983:0,31984:0,31985:0,31986:0,31987:0,31988:0,31989:0,31990:0,31991:0,31992:0,31993:0,31994:0,31995:0,31996:0,31997:0,31998:0,31999:0,32000:0,32001:3,32002:3,32003:3,32005:3,32006:3,32007:3,32008:3,32009:3,32010:3,32011:3,32012:3,32013:3,32014:3,32015:3,32016:3,32017:3,32018:3,32019:3,32020:3,32021:3,32022:3,32023:3,32024:3,32025:3,32026:3,32027:3,32028:3,32029:3,32030:3,32031:3,32033:3,32034:3,32035:3,32036:3,32037:3,32038:3,32039:3,32040:3,32041:3,32042:3,32043:3,32044:3,32045:3,32046:3,32047:3,32048:3,32049:3,32050:3,32051:3,32052:3,32053:3,32054:3,32055:3,32056:3,32057:3,32058:3,32059:3,32060:3,32061:0,32062:0,32064:3,32065:3,32066:3,32067:3,32074:3,32075:3,32076:3,32077:3,32081:0,32082:0,32083:0,32084:0,32085:0,32086:0,32098:0,32099:3,32100:0,32104:0,32107:0,32108:0,32109:0,32110:0,32111:0,32112:0,32113:0,32114:0,32115:0,32116:0,32117:0,32118:0,32119:0,32120:0,32121:0,32122:0,32123:0,32124:0,32125:0,32126:0,32127:0,32128:0,32129:0,32130:0,32133:0,32134:0,32135:0,32136:0,32137:0,32138:0,32139:0,32140:0,32141:0,32142:0,32143:0,32144:0,32145:0,32146:0,32147:0,32148:0,32149:0,32150:0,32151:0,32152:0,32153:0,32154:0,32155:0,32156:0,32157:0,32158:0,32161:0,32164:3,32165:3,32166:3,32167:3,32180:0,32181:0,32182:0,32183:0,32184:0,32185:0,32186:0,32187:0,32188:0,32189:0,32190:0,32191:0,32192:0,32193:0,32194:0,32195:0,32196:0,32197:0,32198:0,32199:0,32201:0,32202:0,32203:0,32204:0,32205:0,32206:0,32207:0,32208:0,32209:0,32210:0,32211:0,32212:0,32213:0,32214:0,32215:0,32216:0,32217:0,32218:0,32219:0,32220:0,32221:0,32222:0,32223:0,32224:0,32225:0,32226:0,32227:0,32228:0,32229:0,32230:0,32231:0,32232:0,32233:0,32234:0,32235:0,32236:0,32237:0,32238:0,32239:0,32240:0,32241:0,32242:0,32243:0,32244:0,32245:0,32246:0,32247:0,32248:0,32249:0,32250:0,32251:0,32252:0,32253:0,32254:0,32255:0,32256:0,32257:0,32258:0,32259:0,32260:0,32301:0,32302:0,32303:0,32304:0,32305:0,32306:0,32307:0,32308:0,32309:0,32310:0,32311:0,32312:0,32313:0,32314:0,32315:0,32316:0,32317:0,32318:0,32319:0,32320:0,32321:0,32322:0,32323:0,32324:0,32325:0,32326:0,32327:0,32328:0,32329:0,32330:0,32331:0,32332:0,32333:0,32334:0,32335:0,32336:0,32337:0,32338:0,32339:0,32340:0,32341:0,32342:0,32343:0,32344:0,32345:0,32346:0,32347:0,32348:0,32349:0,32350:0,32351:0,32352:0,32353:0,32354:0,32355:0,32356:0,32357:0,32358:0,32359:0,32360:0,32601:0,32602:0,32603:0,32604:0,32605:0,32606:0,32607:0,32608:0,32609:0,32610:0,32611:0,32612:0,32613:0,32614:0,32615:0,32616:0,32617:0,32618:0,32619:0,32620:0,32621:0,32622:0,32623:0,32624:0,32625:0,32626:0,32627:0,32628:0,32629:0,32630:0,32631:0,32632:0,32633:0,32634:0,32635:0,32636:0,32637:0,32638:0,32639:0,32640:0,32641:0,32642:0,32643:0,32644:0,32645:0,32646:0,32647:0,32648:0,32649:0,32650:0,32651:0,32652:0,32653:0,32654:0,32655:0,32656:0,32657:0,32658:0,32659:0,32660:0,32661:0,32662:0,32664:3,32665:3,32666:3,32667:3,32701:0,32702:0,32703:0,32704:0,32705:0,32706:0,32707:0,32708:0,32709:0,32710:0,32711:0,32712:0,32713:0,32714:0,32715:0,32716:0,32717:0,32718:0,32719:0,32720:0,32721:0,32722:0,32723:0,32724:0,32725:0,32726:0,32727:0,32728:0,32729:0,32730:0,32731:0,32732:0,32733:0,32734:0,32735:0,32736:0,32737:0,32738:0,32739:0,32740:0,32741:0,32742:0,32743:0,32744:0,32745:0,32746:0,32747:0,32748:0,32749:0,32750:0,32751:0,32752:0,32753:0,32754:0,32755:0,32756:0,32757:0,32758:0,32759:0,32760:0,32761:0,32766:0,53001:0,53002:0,53003:0,53004:0,53008:0,53009:0,53010:0,53011:0,53012:0,53013:0,53014:0,53015:0,53016:0,53017:0,53018:0,53019:0,53021:0,53022:0,53023:0,53024:0,53025:0,53026:0,53027:0,53028:0,53029:0,53030:0,53031:0,53032:0,53034:0,53042:0,53043:0,53044:0,53045:0,53046:0,53048:0,53049:0,54001:0,54002:0,54003:0,54004:0,54008:0,54009:0,54010:0,54011:0,54012:0,54013:0,54014:0,54015:0,54016:0,54017:0,54018:0,54019:0,54021:0,54022:0,54023:0,54024:0,54025:0,54026:0,54027:0,54028:0,54029:0,54030:0,54031:0,54032:0,54034:0,54042:0,54043:0,54044:0,54045:0,54046:0,54048:0,54049:0,54050:0,54051:0,54052:0,54053:0,65061:3,65062:3,65161:0,65163:0,102001:0,102002:0,102003:0,102004:0,102005:0,102006:0,102007:0,102008:0,102009:0,102010:0,102011:0,102012:0,102013:0,102014:0,102015:0,102016:0,102017:0,102018:0,102019:0,102020:0,102021:0,102022:0,102023:0,102024:0,102025:0,102026:0,102027:0,102028:0,102029:0,102030:0,102031:0,102032:0,102033:0,102034:0,102035:0,102036:0,102037:0,102038:0,102039:0,102060:0,102061:0,102062:0,102063:0,102064:11,102065:0,102066:0,102067:0,102068:12,102069:13,102070:0,102071:0,102072:0,102073:0,102074:0,102075:0,102076:0,102077:0,102078:0,102079:0,102090:0,102091:0,102092:0,102093:0,102094:0,102095:0,102096:0,102097:0,102098:0,102099:0,102100:0,102101:0,102102:0,102103:0,102104:0,102105:0,102106:0,102107:0,102108:0,102109:0,102110:0,102111:0,102112:0,102113:0,102114:0,102115:0,102116:0,102117:0,102118:3,102119:4,102120:3,102121:3,102122:0,102123:0,102124:0,102125:0,102126:0,102127:0,102128:0,102129:0,102130:0,102131:0,102132:0,102133:0,102134:0,102135:0,102136:0,102137:0,102138:0,102139:0,102140:0,102141:0,102142:0,102143:0,102144:0,102145:0,102146:0,102147:0,102148:0,102149:0,102150:0,102151:0,102152:0,102153:0,102154:0,102155:0,102156:0,102157:0,102158:0,102159:0,102160:0,102161:0,102162:0,102163:0,102164:0,102165:0,102166:0,102167:0,102168:0,102169:0,102170:0,102171:0,102172:0,102173:0,102174:0,102175:0,102176:0,102177:0,102178:0,102179:0,102180:0,102181:0,102182:0,102183:0,102184:0,102185:0,102186:0,102187:0,102188:0,102189:0,102190:0,102191:0,102192:0,102193:0,102194:0,102195:0,102196:0,102197:0,102198:0,102199:0,102200:0,102201:0,102202:0,102203:0,102205:0,102206:0,102207:0,102208:0,102209:0,102210:0,102211:0,102218:0,102219:3,102220:3,102221:0,102222:0,102223:0,102224:0,102225:0,102226:0,102227:0,102228:0,102229:0,102230:0,102231:0,102232:0,102233:0,102234:0,102235:0,102236:0,102237:0,102238:0,102239:0,102240:0,102241:0,102242:0,102243:0,102244:0,102245:0,102246:0,102248:0,102249:0,102250:0,102251:0,102252:0,102253:0,102254:0,102255:0,102256:0,102257:0,102258:0,102259:0,102260:0,102261:0,102262:0,102263:0,102264:0,102265:0,102266:0,102267:0,102268:0,102269:0,102270:0,102271:0,102272:0,102273:0,102274:0,102275:0,102276:0,102277:0,102278:0,102279:0,102280:0,102281:0,102282:0,102283:0,102284:0,102285:0,102286:0,102287:0,102288:0,102289:0,102290:0,102291:0,102292:0,102293:0,102294:0,102295:0,102296:0,102297:0,102298:0,102300:0,102304:0,102307:0,102308:0,102309:0,102310:0,102311:0,102312:0,102313:0,102314:0,102315:0,102316:0,102317:0,102318:0,102320:0,102321:0,102322:0,102323:0,102324:0,102325:0,102326:0,102327:0,102330:0,102334:0,102335:0,102336:0,102337:0,102338:0,102339:0,102340:0,102341:0,102342:0,102343:0,102344:0,102345:0,102346:0,102347:0,102348:0,102349:0,102350:0,102351:0,102352:0,102353:0,102354:0,102355:0,102356:0,102357:0,102358:0,102361:0,102363:0,102421:0,102422:0,102423:0,102424:0,102425:0,102426:0,102427:0,102428:0,102429:0,102430:0,102431:0,102432:0,102433:0,102434:0,102435:0,102436:0,102437:0,102438:0,102440:0,102441:0,102442:0,102443:0,102444:0,102461:3,102462:3,102463:3,102464:3,102465:3,102466:3,102467:3,102468:3,102469:0,102491:0,102492:0,102570:0,102571:0,102572:0,102573:0,102574:0,102575:0,102576:0,102577:0,102578:0,102579:0,102580:0,102581:0,102582:0,102583:0,102584:0,102591:0,102592:0,102601:0,102602:0,102603:0,102604:3,102605:0,102606:0,102607:0,102608:0,102609:0,102629:3,102630:3,102631:3,102632:3,102633:3,102634:3,102635:3,102636:3,102637:3,102638:3,102639:3,102640:3,102641:3,102642:3,102643:3,102644:3,102645:3,102646:3,102648:3,102649:3,102650:3,102651:3,102652:3,102653:3,102654:3,102655:3,102656:3,102657:3,102658:3,102659:3,102660:3,102661:3,102662:3,102663:3,102664:3,102665:3,102666:3,102667:3,102668:3,102669:3,102670:3,102671:3,102672:3,102673:3,102674:3,102675:3,102676:3,102677:3,102678:3,102679:3,102680:3,102681:3,102682:3,102683:3,102684:3,102685:3,102686:3,102687:3,102688:3,102689:3,102690:3,102691:3,102692:3,102693:3,102694:3,102695:3,102696:3,102697:3,102698:3,102700:3,102704:3,102707:3,102708:3,102709:3,102710:3,102711:3,102712:3,102713:3,102714:3,102715:3,102716:3,102717:3,102718:3,102719:3,102720:3,102721:3,102722:3,102723:3,102724:3,102725:3,102726:3,102727:3,102728:3,102729:3,102730:3,102733:3,102734:3,102735:3,102736:3,102737:3,102738:3,102739:3,102740:3,102741:3,102742:3,102743:3,102744:3,102745:3,102746:3,102747:3,102748:3,102749:3,102750:3,102751:3,102752:3,102753:3,102754:3,102755:3,102756:3,102757:3,102758:3,102761:3,102763:3,102766:3,103300:0,103301:0,103302:0,103303:0,103304:0,103305:0,103306:0,103307:0,103308:0,103309:0,103310:0,103311:0,103312:0,103313:0,103314:0,103315:0,103316:0,103317:0,103318:0,103319:0,103320:0,103321:0,103322:0,103323:0,103324:0,103325:0,103326:0,103327:0,103328:0,103329:0,103330:0,103331:0,103332:0,103333:0,103334:0,103335:0,103336:0,103337:0,103338:0,103339:0,103340:0,103341:0,103342:0,103343:0,103344:0,103345:0,103346:0,103347:0,103348:0,103349:0,103350:0,103351:0,103352:0,103353:0,103354:0,103355:0,103356:0,103357:0,103358:0,103359:0,103360:0,103361:0,103362:0,103363:0,103364:0,103365:0,103366:0,103367:0,103368:0,103369:0,103370:0,103371:0,103400:3,103401:3,103402:3,103403:3,103404:3,103405:3,103406:3,103407:3,103408:3,103409:3,103410:3,103411:3,103412:3,103413:3,103414:3,103415:3,103416:3,103417:3,103418:3,103419:3,103420:3,103421:3,103422:3,103423:3,103424:3,103425:3,103426:3,103427:3,103428:3,103429:3,103430:3,103431:3,103432:3,103433:3,103434:3,103435:3,103436:3,103437:3,103438:3,103439:3,103440:3,103441:3,103442:3,103443:3,103444:3,103445:3,103446:3,103447:3,103448:3,103449:3,103450:3,103451:3,103452:3,103453:3,103454:3,103455:3,103456:3,103457:3,103458:3,103459:3,103460:3,103461:3,103462:3,103463:3,103464:3,103465:3,103466:3,103467:3,103468:3,103469:3,103470:3,103471:3,103528:0,103529:0,103530:0,103531:0,103532:0,103533:0,103534:0,103535:0,103536:0,103537:0,103538:0,103584:0,103600:0,103601:0,103602:0,103603:0,103604:0,103605:0,103606:0,103607:0,103608:0,103609:0,103610:0,103611:0,103612:0,103613:0,103614:0,103615:0,103616:0,103617:0,103618:0,103619:0,103620:0,103621:0,103622:0,103623:0,103624:0,103625:0,103626:0,103627:0,103628:0,103629:0,103630:0,103631:0,103632:0,103633:0,103634:0,103635:0,103636:0,103637:0,103638:0,103639:0,103640:0,103641:0,103642:0,103643:0,103644:0,103645:0,103646:0,103647:0,103648:0,103649:0,103650:0,103651:0,103652:0,103653:0,103654:0,103655:0,103656:0,103657:0,103658:0,103659:0,103660:0,103661:0,103662:0,103663:0,103664:0,103665:0,103666:0,103667:0,103668:0,103669:0,103670:0,103671:0,103672:0,103673:0,103674:0,103675:0,103676:0,103677:0,103678:0,103679:0,103680:0,103681:0,103682:0,103683:0,103684:0,103685:0,103686:0,103687:0,103688:0,103689:0,103690:0,103691:0,103692:0,103693:0,103700:3,103701:3,103702:3,103703:3,103704:3,103705:3,103706:3,103707:3,103708:3,103709:3,103710:3,103711:3,103712:3,103713:3,103714:3,103715:3,103716:3,103717:3,103718:3,103719:3,103720:3,103721:3,103722:3,103723:3,103724:3,103725:3,103726:3,103727:3,103728:3,103729:3,103730:3,103731:3,103732:3,103733:3,103734:3,103735:3,103736:3,103737:3,103738:3,103739:3,103740:3,103741:3,103742:3,103743:3,103744:3,103745:3,103746:3,103747:3,103748:3,103749:3,103750:3,103751:3,103752:3,103753:3,103754:3,103755:3,103756:3,103757:3,103758:3,103759:3,103760:3,103761:3,103762:3,103763:3,103764:3,103765:3,103766:3,103767:3,103768:3,103769:3,103770:3,103771:3,103772:3,103773:3,103774:3,103775:3,103776:3,103777:3,103778:3,103779:3,103780:3,103781:3,103782:3,103783:3,103784:3,103785:3,103786:3,103787:3,103788:3,103789:3,103790:3,103791:3,103792:3,103793:3,103800:0,103801:0,103802:0,103803:0,103804:0,103805:0,103806:0,103807:0,103808:0,103809:0,103810:0,103811:0,103812:0,103813:0,103814:0,103815:0,103816:0,103817:0,103818:0,103819:0,103820:0,103821:0,103822:0,103823:0,103824:0,103825:0,103826:0,103827:0,103828:0,103829:0,103830:0,103831:0,103832:0,103833:0,103834:0,103835:0,103836:0,103837:0,103838:0,103839:0,103840:0,103841:0,103842:0,103843:0,103844:0,103845:0,103846:0,103847:0,103848:0,103849:0,103850:0,103851:0,103852:0,103853:0,103854:0,103855:0,103856:0,103857:0,103858:0,103859:0,103860:0,103861:0,103862:0,103863:0,103864:0,103865:0,103866:0,103867:0,103868:0,103869:0,103870:0,103871:0,103900:3,103901:3,103902:3,103903:3,103904:3,103905:3,103906:3,103907:3,103908:3,103909:3,103910:3,103911:3,103912:3,103913:3,103914:3,103915:3,103916:3,103917:3,103918:3,103919:3,103920:3,103921:3,103922:3,103923:3,103924:3,103925:3,103926:3,103927:3,103928:3,103929:3,103930:3,103931:3,103932:3,103933:3,103934:3,103935:3,103936:3,103937:3,103938:3,103939:3,103940:3,103941:3,103942:3,103943:3,103944:3,103945:3,103946:3,103947:3,103948:3,103949:3,103950:3,103951:3,103952:3,103953:3,103954:3,103955:3,103956:3,103957:3,103958:3,103959:3,103960:3,103961:3,103962:3,103963:3,103964:3,103965:3,103966:3,103967:3,103968:3,103969:3,103970:3,103971:3};if(has("extend-esri")){_cd4.WKIDUnitConversion=obj;}return obj;});},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(lang,i18n){var _cd5={};lang.setObject("dojo.cldr.supplemental",_cd5);_cd5.getFirstDayOfWeek=function(_cd6){var _cd7={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0};var _cd8=_cd5._region(_cd6);var dow=_cd7[_cd8];return (dow===undefined)?1:dow;};_cd5._region=function(_cd9){_cd9=i18n.normalizeLocale(_cd9);var tags=_cd9.split("-");var _cda=tags[1];if(!_cda){_cda={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",he:"il",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[tags[0]];}else{if(_cda.length==4){_cda=tags[2];}}return _cda;};_cd5.getWeekend=function(_cdb){var _cdc={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5},_cdd={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6},_cde=_cd5._region(_cdb),_cdf=_cdc[_cde],end=_cdd[_cde];if(_cdf===undefined){_cdf=6;}if(end===undefined){end=0;}return {start:_cdf,end:end};};return _cd5;});},"esri/layers/CodedValueDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/Domain"],function(_ce0,lang,has,_ce1,_ce2,_ce3){var _ce4=_ce0([_ce3],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(json){if(json&&lang.isObject(json)){this.codedValues=json.codedValues;}},toJson:function(){var json=this.inherited(arguments);json.codedValues=lang.clone(this.codedValues);return _ce2.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.CodedValueDomain",_ce4,_ce1);}return _ce4;});},"esri/layers/TileInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/lang","esri/SpatialReference","esri/geometry/Point","esri/layers/LOD"],function(_ce5,lang,_ce6,has,_ce7,_ce8,_ce9,_cea,LOD){var _ceb=_ce5(null,{declaredClass:"esri.layers.TileInfo",constructor:function(json){lang.mixin(this,json);this.width=this.cols;this.height=this.rows;var sr=this.spatialReference,ori=this.origin;if(sr){sr=(this.spatialReference=new _ce9(sr.toJson?sr.toJson():sr));}if(ori){this.origin=new _cea(ori.toJson?ori.toJson():ori);if(!ori.spatialReference&&sr){this.origin.setSpatialReference(new _ce9(sr.toJson()));}}this.lods=_ce6.map(this.lods,function(lod){return new LOD(lod);});},toJson:function(){return _ce8.fixJson({rows:this.rows,cols:this.cols,dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&_ce6.map(this.lods,function(lod){return lod.toJson();})});}});if(has("extend-esri")){lang.setObject("layers.TileInfo",_ceb,_ce7);}return _ceb;});},"dojo/request/script":function(){define(["module","./watch","./util","../_base/array","../_base/lang","../on","../dom","../dom-construct","../has","../_base/window"],function(_cec,_ced,util,_cee,lang,on,dom,_cef,has,win){has.add("script-readystatechange",function(_cf0,_cf1){var _cf2=_cf1.createElement("script");return typeof _cf2["onreadystatechange"]!=="undefined"&&(typeof _cf0["opera"]==="undefined"||_cf0["opera"].toString()!=="[object Opera]");});var mid=_cec.id.replace(/[\/\.\-]/g,"_"),_cf3=0,_cf4=has("script-readystatechange")?"readystatechange":"load",_cf5=/complete|loaded/,_cf6=this[mid+"_callbacks"]={},_cf7=[];function _cf8(id,url,_cf9){var doc=(_cf9||win.doc),_cfa=doc.createElement("script");_cfa.type="text/javascript";_cfa.src=url;_cfa.id=id;_cfa.async=true;_cfa.charset="utf-8";return doc.getElementsByTagName("head")[0].appendChild(_cfa);};function _cfb(id,_cfc,_cfd){_cef.destroy(dom.byId(id,_cfc));if(_cf6[id]){if(_cfd){_cf6[id]=function(){delete _cf6[id];};}else{delete _cf6[id];}}};function _cfe(dfd){var _cff=dfd.response.options,_d00=_cff.ioArgs?_cff.ioArgs.frameDoc:_cff.frameDoc;_cf7.push({id:dfd.id,frameDoc:_d00});if(_cff.ioArgs){_cff.ioArgs.frameDoc=null;}_cff.frameDoc=null;};function _d01(dfd,_d02){if(dfd.canDelete){_d03._remove(dfd.id,_d02.options.frameDoc,true);}};function _d04(_d05){if(_cf7&&_cf7.length){_cee.forEach(_cf7,function(_d06){_d03._remove(_d06.id,_d06.frameDoc);_d06.frameDoc=null;});_cf7=[];}return _d05.options.jsonp?!_d05.data:true;};function _d07(_d08){return !!this.scriptLoaded;};function _d09(_d0a){var _d0b=_d0a.options.checkString;return _d0b&&eval("typeof("+_d0b+") !== \"undefined\"");};function _d0c(_d0d,_d0e){if(this.canDelete){_cfe(this);}if(_d0e){this.reject(_d0e);}else{this.resolve(_d0d);}};function _d03(url,_d0f,_d10){var _d11=util.parseArgs(url,util.deepCopy({},_d0f));url=_d11.url;_d0f=_d11.options;var dfd=util.deferred(_d11,_d01,_d04,_d0f.jsonp?null:(_d0f.checkString?_d09:_d07),_d0c);lang.mixin(dfd,{id:mid+(_cf3++),canDelete:false});if(_d0f.jsonp){var _d12=new RegExp("[?&]"+_d0f.jsonp+"=");if(!_d12.test(url)){url+=_d12+(_d0f.frameDoc?"parent.":"")+mid+"_callbacks."+dfd.id;}dfd.canDelete=true;_cf6[dfd.id]=function(json){_d11.data=json;dfd.handleResponse(_d11);};}if(util.notify){util.notify.emit("send",_d11,dfd.promise.cancel);}if(!_d0f.canAttach||_d0f.canAttach(dfd)){var node=_d03._attach(dfd.id,url,_d0f.frameDoc);if(!_d0f.jsonp&&!_d0f.checkString){var _d13=on(node,_cf4,function(evt){if(evt.type==="load"||_cf5.test(node.readyState)){_d13.remove();dfd.scriptLoaded=evt;}});}}_ced(dfd);return _d10?dfd:dfd.promise;};_d03.get=_d03;_d03._attach=_cf8;_d03._remove=_cfb;_d03._callbacksProperty=mid+"_callbacks";return _d03;});},"dijit/_base/manager":function(){define("dijit/_base/manager",["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(_d14,_d15,lang,_d16,_d17){var _d18={};_d14.forEach(["byId","getUniqueId","findWidgets","_destroyAll","byNode","getEnclosingWidget"],function(name){_d18[name]=_d16[name];});lang.mixin(_d18,{defaultDuration:_d15["defaultDuration"]||200});lang.mixin(_d17,_d18);return _d17;});},"dijit/popup":function(){define("dijit/popup",["dojo/_base/array","dojo/aspect","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./place","./BackgroundIframe","./main"],function(_d19,_d1a,_d1b,_d1c,dom,_d1d,_d1e,_d1f,_d20,_d21,keys,lang,on,has,_d22,_d23,_d24){function _d25(){if(this._popupWrapper){_d1e.destroy(this._popupWrapper);delete this._popupWrapper;}};var _d26=_d1c(null,{_stack:[],_beginZIndex:1000,_idGen:1,_createWrapper:function(_d27){var _d28=_d27._popupWrapper,node=_d27.domNode;if(!_d28){_d28=_d1e.create("div",{"class":"dijitPopup",style:{display:"none"},role:"presentation"},_d27.ownerDocumentBody);_d28.appendChild(node);var s=node.style;s.display="";s.visibility="";s.position="";s.top="0px";_d27._popupWrapper=_d28;_d1a.after(_d27,"destroy",_d25,true);}return _d28;},moveOffScreen:function(_d29){var _d2a=this._createWrapper(_d29);_d20.set(_d2a,{visibility:"hidden",top:"-9999px",display:""});},hide:function(_d2b){var _d2c=this._createWrapper(_d2b);_d20.set(_d2c,"display","none");},getTopPopup:function(){var _d2d=this._stack;for(var pi=_d2d.length-1;pi>0&&_d2d[pi].parent===_d2d[pi-1].widget;pi--){}return _d2d[pi];},open:function(args){var _d2e=this._stack,_d2f=args.popup,_d30=args.orient||["below","below-alt","above","above-alt"],ltr=args.parent?args.parent.isLeftToRight():_d1f.isBodyLtr(_d2f.ownerDocument),_d31=args.around,id=(args.around&&args.around.id)?(args.around.id+"_dropdown"):("popup_"+this._idGen++);while(_d2e.length&&(!args.parent||!dom.isDescendant(args.parent.domNode,_d2e[_d2e.length-1].widget.domNode))){this.close(_d2e[_d2e.length-1].widget);}var _d32=this._createWrapper(_d2f);_d1d.set(_d32,{id:id,style:{zIndex:this._beginZIndex+_d2e.length},"class":"dijitPopup "+(_d2f.baseClass||_d2f["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:args.parent?args.parent.id:""});if(has("ie")||has("mozilla")){if(!_d2f.bgIframe){_d2f.bgIframe=new _d23(_d32);}}var best=_d31?_d22.around(_d32,_d31,_d30,ltr,_d2f.orient?lang.hitch(_d2f,"orient"):null):_d22.at(_d32,args,_d30=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],args.padding);_d32.style.display="";_d32.style.visibility="visible";_d2f.domNode.style.visibility="visible";var _d33=[];_d33.push(on(_d32,_d1b._keypress,lang.hitch(this,function(evt){if(evt.charOrCode==keys.ESCAPE&&args.onCancel){_d21.stop(evt);args.onCancel();}else{if(evt.charOrCode===keys.TAB){_d21.stop(evt);var _d34=this.getTopPopup();if(_d34&&_d34.onCancel){_d34.onCancel();}}}})));if(_d2f.onCancel&&args.onCancel){_d33.push(_d2f.on("cancel",args.onCancel));}_d33.push(_d2f.on(_d2f.onExecute?"execute":"change",lang.hitch(this,function(){var _d35=this.getTopPopup();if(_d35&&_d35.onExecute){_d35.onExecute();}})));_d2e.push({widget:_d2f,parent:args.parent,onExecute:args.onExecute,onCancel:args.onCancel,onClose:args.onClose,handlers:_d33});if(_d2f.onOpen){_d2f.onOpen(best);}return best;},close:function(_d36){var _d37=this._stack;while((_d36&&_d19.some(_d37,function(elem){return elem.widget==_d36;}))||(!_d36&&_d37.length)){var top=_d37.pop(),_d38=top.widget,_d39=top.onClose;if(_d38.onClose){_d38.onClose();}var h;while(h=top.handlers.pop()){h.remove();}if(_d38&&_d38.domNode){this.hide(_d38);}if(_d39){_d39();}}}});return (_d24.popup=new _d26());});},"esri/symbols/TextSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","dojox/gfx/_base","esri/kernel","esri/lang","esri/symbols/Symbol","esri/symbols/Font"],function(_d3a,lang,_d3b,has,_d3c,_d3d,_d3e,_d3f,Font){var _d40={ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"};var _d41={color:[0,0,0,1],font:_d3c.defaultFont,angle:0,xoffset:0,yoffset:0};lang.mixin(_d41,_d3c.defaultText,{type:"textsymbol",align:"middle"});var _d42=_d3a(_d3f,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(json,font,_d43){lang.mixin(this,_d41);this.font=new Font(this.font);this.color=new _d3b(this.color);if(json){if(lang.isObject(json)){lang.mixin(this,json);if(this.color&&_d3e.isDefined(this.color[0])){this.color=_d3f.toDojoColor(this.color);}this.type="textsymbol";this.font=new Font(this.font);this.xoffset=_d3c.pt2px(this.xoffset);this.yoffset=_d3c.pt2px(this.yoffset);}else{this.text=json;if(font){this.font=font;}if(_d43){this.color=_d43;}}}},setFont:function(font){this.font=font;return this;},setAngle:function(_d44){this.angle=_d44;return this;},setOffset:function(x,y){this.xoffset=x;this.yoffset=y;return this;},setAlign:function(_d45){this.align=_d45;return this;},setDecoration:function(_d46){this.decoration=_d46;return this;},setRotated:function(_d47){this.rotated=_d47;return this;},setKerning:function(_d48){this.kerning=_d48;return this;},setText:function(text){this.text=text;return this;},getStroke:function(){return null;},getFill:function(){return this.color;},toJson:function(){var xoff=_d3c.px2pt(this.xoffset);xoff=isNaN(xoff)?undefined:xoff;var yoff=_d3c.px2pt(this.yoffset);yoff=isNaN(yoff)?undefined:yoff;return _d3e.fixJson(lang.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle,xoffset:xoff,yoffset:yoff,text:this.text,align:this.align,decoration:this.decoration,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}));}});lang.mixin(_d42,_d40);_d42.defaultProps=_d41;if(has("extend-esri")){lang.setObject("symbol.TextSymbol",_d42,_d3d);_d3d.symbol.defaultTextSymbol=_d41;}return _d42;});},"esri/tasks/RouteResult":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/graphic","esri/tasks/DirectionsFeatureSet"],function(_d49,lang,_d4a,has,_d4b,_d4c,_d4d){var _d4e=_d49(null,{declaredClass:"esri.tasks.RouteResult",constructor:function(json){var sr=json.spatialReference,_d4f=json.route;if(json.directions){var _d50=[],cgs=[];_d4a.forEach(json.directions.features,function(f,i){cgs[i]=f.compressedGeometry;_d50[i]=f.strings;});json.directions.strings=_d50;this.directions=new _d4d(json.directions,cgs);}this.routeName=json.routeName;if(_d4f){if(_d4f.geometry){_d4f.geometry.spatialReference=sr;}this.route=new _d4c(_d4f);}if(json.stops){var ss=(this.stops=[]);_d4a.forEach(json.stops,function(stop,i){if(stop.geometry){stop.geometry.spatialReference=sr;}ss[stop.attributes.Sequence-1]=new _d4c(stop);});}},routeName:null,directions:null,route:null,stops:null});if(has("extend-esri")){lang.setObject("tasks.RouteResult",_d4e,_d4b);}return _d4e;});},"esri/tasks/RouteParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","esri/kernel","esri/lang","esri/graphicsUtils","esri/tasks/NATypes"],function(_d51,lang,_d52,has,_d53,_d54,_d55,_d56){var _d57=_d51(null,{declaredClass:"esri.tasks.RouteParameters",accumulateAttributes:null,attributeParameterValues:null,barriers:null,directionsLanguage:null,directionsLengthUnits:null,directionsOutputType:null,directionsStyleName:null,directionsTimeAttribute:null,doNotLocateOnRestrictedElements:true,findBestSequence:null,ignoreInvalidLocations:null,impedanceAttribute:null,outputLines:"esriNAOutputLineTrueShape",outputGeometryPrecision:null,outputGeometryPrecisionUnits:null,outSpatialReference:null,polygonBarriers:null,polylineBarriers:null,preserveFirstStop:null,preserveLastStop:null,restrictionAttributes:null,restrictUTurns:null,returnBarriers:false,returnDirections:false,returnPolygonBarriers:false,returnPolylineBarriers:false,returnRoutes:true,returnStops:false,startTime:null,stops:null,useHierarchy:null,useTimeWindows:null,toJson:function(_d58){var json={returnDirections:this.returnDirections,returnRoutes:this.returnRoutes,returnStops:this.returnStops,returnBarriers:this.returnBarriers,returnPolygonBarriers:this.returnPolygonBarriers,returnPolylineBarriers:this.returnPolylineBarriers,attributeParameterValues:this.attributeParameterValues&&_d52.toJson(this.attributeParameterValues),outSR:this.outSpatialReference?(this.outSpatialReference.wkid||_d52.toJson(this.outSpatialReference.toJson())):null,outputLines:this.outputLines,findBestSequence:this.findBestSequence,preserveFirstStop:this.preserveFirstStop,preserveLastStop:this.preserveLastStop,useTimeWindows:this.useTimeWindows,startTime:this.startTime?this.startTime.getTime():null,accumulateAttributeNames:this.accumulateAttributes?this.accumulateAttributes.join(","):null,ignoreInvalidLocations:this.ignoreInvalidLocations,impedanceAttributeName:this.impedanceAttribute,restrictionAttributeNames:this.restrictionAttributes?this.restrictionAttributes.join(","):null,restrictUTurns:this.restrictUTurns,useHierarchy:this.useHierarchy,directionsLanguage:this.directionsLanguage,outputGeometryPrecision:this.outputGeometryPrecision,outputGeometryPrecisionUnits:this.outputGeometryPrecisionUnits,directionsLengthUnits:_d56.LengthUnit[this.directionsLengthUnits],directionsTimeAttributeName:this.directionsTimeAttribute,directionsStyleName:this.directionsStyleName},_d59=this.stops;if(_d59.declaredClass==="esri.tasks.FeatureSet"&&_d59.features.length>0){json.stops=_d52.toJson({type:"features",features:_d55._encodeGraphics(_d59.features,_d58&&_d58["stops.features"]),doNotLocateOnRestrictedElements:this.doNotLocateOnRestrictedElements});}else{if(_d59.declaredClass==="esri.tasks.DataLayer"){json.stops=_d59;}else{if(_d59.declaredClass==="esri.tasks.DataFile"){json.stops=_d52.toJson({type:"features",url:_d59.url,doNotLocateOnRestrictedElements:this.doNotLocateOnRestrictedElements});}}}if(this.directionsOutputType){switch(this.directionsOutputType.toLowerCase()){case "complete":json.directionsOutputType="esriDOTComplete";break;case "complete-no-events":json.directionsOutputType="esriDOTCompleteNoEvents";break;case "instructions-only":json.directionsOutputType="esriDOTInstructionsOnly";break;case "standard":json.directionsOutputType="esriDOTStandard";break;case "summary-only":json.directionsOutputType="esriDOTSummaryOnly";break;default:json.directionsOutputType=this.directionsOutputType;}}var _d5a=function(_d5b,_d5c){if(!_d5b){return null;}if(_d5b.declaredClass==="esri.tasks.FeatureSet"){if(_d5b.features.length>0){return _d52.toJson({type:"features",features:_d55._encodeGraphics(_d5b.features,_d58&&_d58[_d5c])});}else{return null;}}else{if(_d5b.declaredClass==="esri.tasks.DataLayer"){return _d5b;}else{if(_d5b.declaredClass==="esri.tasks.DataFile"){return _d52.toJson({type:"features",url:_d5b.url});}}}return _d52.toJson(_d5b);};if(this.barriers){json.barriers=_d5a(this.barriers,"barriers.features");}if(this.polygonBarriers){json.polygonBarriers=_d5a(this.polygonBarriers,"polygonBarriers.features");}if(this.polylineBarriers){json.polylineBarriers=_d5a(this.polylineBarriers,"polylineBarriers.features");}return _d54.filter(json,function(_d5d){if(_d5d!==null){return true;}});}});if(has("extend-esri")){lang.setObject("tasks.RouteParameters",_d57,_d53);}return _d57;});},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_d5e,lang,has,_d5f){var _d60=_d5e(null,{declaredClass:"esri.tasks.StatisticDefinition",statisticType:null,onStatisticField:null,outStatisticFieldName:null,toJson:function(){var json={statisticType:this.statisticType,onStatisticField:this.onStatisticField};if(this.outStatisticFieldName){json.outStatisticFieldName=this.outStatisticFieldName;}return json;}});if(has("extend-esri")){lang.setObject("tasks.StatisticDefinition",_d60,_d5f);}return _d60;});},"url:dijit/templates/TooltipDialog.html":"<div role=\"presentation\" tabIndex=\"-1\">\n\t<div class=\"dijitTooltipContainer\" role=\"presentation\">\n\t\t<div class =\"dijitTooltipContents dijitTooltipFocusNode\" data-dojo-attach-point=\"containerNode\" role=\"dialog\"></div>\n\t</div>\n\t<div class=\"dijitTooltipConnector\" role=\"presentation\" data-dojo-attach-point=\"connectorNode\"></div>\n</div>\n","dojo/dnd/Mover":function(){define(["../_base/array","../_base/declare","../_base/event","../_base/lang","../sniff","../_base/window","../dom","../dom-geometry","../dom-style","../Evented","../on","../touch","./common","./autoscroll"],function(_d61,_d62,_d63,lang,has,win,dom,_d64,_d65,_d66,on,_d67,dnd,_d68){return _d62("dojo.dnd.Mover",[_d66],{constructor:function(node,e,host){this.node=dom.byId(node);this.marginBox={l:e.pageX,t:e.pageY};this.mouseButton=e.button;var h=(this.host=host),d=node.ownerDocument;this.events=[on(d,_d67.move,lang.hitch(this,"onFirstMove")),on(d,_d67.move,lang.hitch(this,"onMouseMove")),on(d,_d67.release,lang.hitch(this,"onMouseUp")),on(d,"dragstart",_d63.stop),on(d.body,"selectstart",_d63.stop)];_d68.autoScrollStart(d);if(h&&h.onMoveStart){h.onMoveStart(this);}},onMouseMove:function(e){_d68.autoScroll(e);var m=this.marginBox;this.host.onMove(this,{l:m.l+e.pageX,t:m.t+e.pageY},e);_d63.stop(e);},onMouseUp:function(e){if(has("webkit")&&has("mac")&&this.mouseButton==2?e.button==0:this.mouseButton==e.button){this.destroy();}_d63.stop(e);},onFirstMove:function(e){var s=this.node.style,l,t,h=this.host;switch(s.position){case "relative":case "absolute":l=Math.round(parseFloat(s.left))||0;t=Math.round(parseFloat(s.top))||0;break;default:s.position="absolute";var m=_d64.getMarginBox(this.node);var b=win.doc.body;var bs=_d65.getComputedStyle(b);var bm=_d64.getMarginBox(b,bs);var bc=_d64.getContentBox(b,bs);l=m.l-(bc.l-bm.l);t=m.t-(bc.t-bm.t);break;}this.marginBox.l=l-this.marginBox.l;this.marginBox.t=t-this.marginBox.t;if(h&&h.onFirstMove){h.onFirstMove(this,e);}this.events.shift().remove();},destroy:function(){_d61.forEach(this.events,function(_d69){_d69.remove();});var h=this.host;if(h&&h.onMoveStop){h.onMoveStop(this);}this.events=this.node=this.host=null;}});});},"esri/fx":function(){define(["dojo/_base/connect","dojo/_base/fx","dojo/_base/lang","dojo/dom","dojo/dom-geometry","dojo/dom-style","dojo/fx","dojo/has","esri/kernel"],function(_d6a,_d6b,lang,dom,_d6c,_d6d,_d6e,has,_d6f){var fx={animateRange:function(args){var _d70=args.range;return new _d6b.Animation(lang.mixin({curve:new _d6b._Line(_d70.start,_d70.end)},args));},resize:function(args){var node=(args.node=dom.byId(args.node)),_d71=args.start,end=args.end;if(!_d71){var mb=_d6c.getMarginBox(node),pb=_d6c.getPadBorderExtents(node);_d71=(args.start={left:mb.l+pb.l,top:mb.t+pb.t,width:mb.w-pb.w,height:mb.h-pb.h});}if(!end){var _d72=args.anchor?args.anchor:{x:_d71.left,y:_d71.top},size=args.size;end=args.end={left:(_d71.left-((size.width-_d71.width)*(_d72.x-_d71.left)/_d71.width)),top:(_d71.top-((size.height-_d71.height)*(_d72.y-_d71.top)/_d71.height)),width:size.width,height:size.height};}return _d6b.animateProperty(lang.mixin({properties:{left:{start:_d71.left,end:end.left},top:{start:_d71.top,end:end.top},width:{start:_d71.width,end:end.width},height:{start:_d71.height,end:end.height}}},args));},slideTo:function(args){var node=(args.node=dom.byId(args.node)),_d73=_d6d.getComputedStyle,top=null,left=null,init=(function(){var _d74=node;return function(){var pos=_d74.style.position=="absolute"?"absolute":"relative";top=(pos=="absolute"?node.offsetTop:parseInt(_d73(node).top)||0);left=(pos=="absolute"?node.offsetLeft:parseInt(_d73(node).left)||0);if(pos!="absolute"&&pos!="relative"){var ret=_d6c.position(_d74,true);top=ret.y;left=ret.x;_d74.style.position="absolute";_d74.style.top=top+"px";_d74.style.left=left+"px";}};}());init();var anim=_d6b.animateProperty(lang.mixin({properties:{top:{start:top,end:args.top||0},left:{start:left,end:args.left||0}}},args));_d6a.connect(anim,"beforeBegin",anim,init);return anim;},flash:function(args){args=lang.mixin({end:"#f00",duration:500,count:1},args);args.duration/=args.count*2;var node=dom.byId(args.node),_d75=args.start;if(!_d75){_d75=_d6d.getComputedStyle(node).backgroundColor;}var end=args.end,_d76=args.duration,_d77=[],i,il=args.count,base={node:node,duration:_d76};for(i=0;i<il;i++){_d77.push(_d6b.animateProperty(lang.mixin({properties:{backgroundColor:{start:_d75,end:end}}},base)));_d77.push(_d6b.animateProperty(lang.mixin({properties:{backgroundColor:{start:end,end:_d75}}},base)));}return _d6e.chain(_d77);}};if(has("extend-esri")){lang.mixin(lang.getObject("fx",true,_d6f),fx);}return fx;});},"esri/renderer":function(){define(["esri/renderers/Renderer","esri/renderers/SimpleRenderer","esri/renderers/UniqueValueRenderer","esri/renderers/ClassBreaksRenderer","esri/renderers/TemporalRenderer","esri/renderers/SymbolAger","esri/renderers/TimeClassBreaksAger","esri/renderers/TimeRampAger","esri/renderers/jsonUtils"],function(_d78,_d79,_d7a,_d7b,_d7c,_d7d,_d7e,_d7f,_d80){return {Renderer:_d78,SimpleRenderer:_d79,UniqueValueRenderer:_d7a,ClassBreaksRenderer:_d7b,TemporalRenderer:_d7c,SymbolAger:_d7d,TimeClassBreaksAger:_d7e,TimeRampAger:_d7f,jsonUtils:_d80};});},"esri/tasks/gp":function(){define(["esri/tasks/Geoprocessor","esri/tasks/JobInfo","esri/tasks/GPMessage","esri/tasks/LinearUnit","esri/tasks/DataFile","esri/tasks/RasterData","esri/tasks/Date","esri/tasks/ParameterValue","esri/tasks/GPResultImageLayer"],function(){return {};});},"dijit/BackgroundIframe":function(){define("dijit/BackgroundIframe",["require","./main","dojo/_base/config","dojo/dom-construct","dojo/dom-style","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window"],function(_d81,_d82,_d83,_d84,_d85,lang,on,has,win){var _d86=new function(){var _d87=[];this.pop=function(){var _d88;if(_d87.length){_d88=_d87.pop();_d88.style.display="";}else{if(has("ie")<9){var burl=_d83["dojoBlankHtmlUrl"]||_d81.toUrl("dojo/resources/blank.html")||"javascript:\"\"";var html="<iframe src='"+burl+"' role='presentation'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_d88=win.doc.createElement(html);}else{_d88=_d84.create("iframe");_d88.src="javascript:\"\"";_d88.className="dijitBackgroundIframe";_d88.setAttribute("role","presentation");_d85.set(_d88,"opacity",0.1);}_d88.tabIndex=-1;}return _d88;};this.push=function(_d89){_d89.style.display="none";_d87.push(_d89);};}();_d82.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if(has("ie")||has("mozilla")){var _d8a=(this.iframe=_d86.pop());node.appendChild(_d8a);if(has("ie")<7||has("quirks")){this.resize(node);this._conn=on(node,"resize",lang.hitch(this,function(){this.resize(node);}));}else{_d85.set(_d8a,{width:"100%",height:"100%"});}}};lang.extend(_d82.BackgroundIframe,{resize:function(node){if(this.iframe){_d85.set(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"});}},destroy:function(){if(this._conn){this._conn.remove();this._conn=null;}if(this.iframe){_d86.push(this.iframe);delete this.iframe;}}});return _d82.BackgroundIframe;});},"dijit/form/Button":function(){require({cache:{"url:dijit/form/templates/Button.html":"<span class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><span class=\"dijitReset dijitInline dijitButtonNode\"\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" role=\"presentation\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\n\t\ttabIndex=\"-1\" role=\"presentation\" data-dojo-attach-point=\"valueNode\"\n/></span>\n"}});define("dijit/form/Button",["require","dojo/_base/declare","dojo/dom-class","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/ready","./_FormWidget","./_ButtonMixin","dojo/text!./templates/Button.html"],function(_d8b,_d8c,_d8d,has,_d8e,lang,_d8f,_d90,_d91,_d92){if(has("dijit-legacy-requires")){_d8f(0,function(){var _d93=["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"];_d8b(_d93);});}return _d8c("dijit.form.Button",[_d90,_d91],{showLabel:true,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:_d92,_setValueAttr:"valueNode",_onClick:function(e){var ok=this.inherited(arguments);if(ok){if(this.valueNode){this.valueNode.click();e.preventDefault();e.stopPropagation();}}return ok;},_fillContent:function(_d94){if(_d94&&(!this.params||!("label" in this.params))){var _d95=lang.trim(_d94.innerHTML);if(_d95){this.label=_d95;}}},_setShowLabelAttr:function(val){if(this.containerNode){_d8d.toggle(this.containerNode,"dijitDisplayNone",!val);}this._set("showLabel",val);},setLabel:function(_d96){_d8e.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_d96);},_setLabelAttr:function(_d97){this.inherited(arguments);if(!this.showLabel&&!("title" in this.params)){this.titleNode.title=lang.trim(this.containerNode.innerText||this.containerNode.textContent||"");}}});});},"dijit/_WidgetBase":function(){define("dijit/_WidgetBase",["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./Destroyable","./registry"],function(_d98,_d99,_d9a,_d9b,_d9c,_d9d,dom,_d9e,_d9f,_da0,_da1,_da2,has,_da3,lang,on,_da4,_da5,_da6,win,_da7,_da8){has.add("dijit-legacy-requires",!_da3.isAsync);if(has("dijit-legacy-requires")){_da4(0,function(){var _da9=["dijit/_base/manager"];_d98(_da9);});}var _daa={};function _dab(obj){var ret={};for(var attr in obj){ret[attr.toLowerCase()]=true;}return ret;};function _dac(attr){return function(val){_d9e[val?"set":"remove"](this.domNode,attr,val);this._set(attr,val);};};return _d9d("dijit._WidgetBase",[_da5,_da7],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:_dac("lang"),dir:"",_setDirAttr:_dac("dir"),textDir:"","class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(val){this._set("ownerDocument",val);},attributeMap:{},_blankGif:_d9b.blankGif||_d98.toUrl("dojo/resources/blank.gif"),postscript:function(_dad,_dae){this.create(_dad,_dae);},create:function(_daf,_db0){this.srcNodeRef=dom.byId(_db0);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_daf){this.params=_daf;lang.mixin(this,_daf);}this.postMixInProperties();if(!this.id){this.id=_da8.getUniqueId(this.declaredClass.replace(/\./g,"_"));if(this.params){delete this.params.id;}}this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:win.doc);this.ownerDocumentBody=win.body(this.ownerDocument);_da8.add(this);this.buildRendering();var _db1;if(this.domNode){this._applyAttributes();var _db2=this.srcNodeRef;if(_db2&&_db2.parentNode&&this.domNode!==_db2){_db2.parentNode.replaceChild(this.domNode,_db2);_db1=true;}this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(_db1){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var ctor=this.constructor,list=ctor._setterAttrs;if(!list){list=(ctor._setterAttrs=[]);for(var attr in this.attributeMap){list.push(attr);}var _db3=ctor.prototype;for(var _db4 in _db3){if(_db4 in this.attributeMap){continue;}var _db5="_set"+_db4.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();})+"Attr";if(_db5 in _db3){list.push(_db4);}}}var _db6={};for(var key in this.params||{}){_db6[key]=this[key];}_d99.forEach(list,function(attr){if(attr in _db6){}else{if(this[attr]){this.set(attr,this[attr]);}}},this);for(key in _db6){this.set(key,_db6[key]);}},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode){this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div");}if(this.baseClass){var _db7=this.baseClass.split(" ");if(!this.isLeftToRight()){_db7=_db7.concat(_d99.map(_db7,function(name){return name+"Rtl";}));}_d9f.add(this.domNode,_db7);}},postCreate:function(){},startup:function(){if(this._started){return;}this._started=true;_d99.forEach(this.getChildren(),function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}});},destroyRecursive:function(_db8){this._beingDestroyed=true;this.destroyDescendants(_db8);this.destroy(_db8);},destroy:function(_db9){this._beingDestroyed=true;this.uninitialize();function _dba(w){if(w.destroyRecursive){w.destroyRecursive(_db9);}else{if(w.destroy){w.destroy(_db9);}}};_d99.forEach(this._connects,lang.hitch(this,"disconnect"));_d99.forEach(this._supportingWidgets,_dba);if(this.domNode){_d99.forEach(_da8.findWidgets(this.domNode,this.containerNode),_dba);}this.destroyRendering(_db9);_da8.remove(this.id);this._destroyed=true;},destroyRendering:function(_dbb){if(this.bgIframe){this.bgIframe.destroy(_dbb);delete this.bgIframe;}if(this.domNode){if(_dbb){_d9e.remove(this.domNode,"widgetId");}else{_da0.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_dbb){_da0.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_dbc){_d99.forEach(this.getChildren(),function(_dbd){if(_dbd.destroyRecursive){_dbd.destroyRecursive(_dbc);}});},uninitialize:function(){return false;},_setStyleAttr:function(_dbe){var _dbf=this.domNode;if(lang.isObject(_dbe)){_da2.set(_dbf,_dbe);}else{if(_dbf.style.cssText){_dbf.style.cssText+="; "+_dbe;}else{_dbf.style.cssText=_dbe;}}this._set("style",_dbe);},_attrToDom:function(attr,_dc0,_dc1){_dc1=arguments.length>=3?_dc1:this.attributeMap[attr];_d99.forEach(lang.isArray(_dc1)?_dc1:[_dc1],function(_dc2){var _dc3=this[_dc2.node||_dc2||"domNode"];var type=_dc2.type||"attribute";switch(type){case "attribute":if(lang.isFunction(_dc0)){_dc0=lang.hitch(this,_dc0);}var _dc4=_dc2.attribute?_dc2.attribute:(/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr);if(_dc3.tagName){_d9e.set(_dc3,_dc4,_dc0);}else{_dc3.set(_dc4,_dc0);}break;case "innerText":_dc3.innerHTML="";_dc3.appendChild(this.ownerDocument.createTextNode(_dc0));break;case "innerHTML":_dc3.innerHTML=_dc0;break;case "class":_d9f.replace(_dc3,_dc0,this[attr]);break;}},this);},get:function(name){var _dc5=this._getAttrNames(name);return this[_dc5.g]?this[_dc5.g]():this[name];},set:function(name,_dc6){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _dc7=this._getAttrNames(name),_dc8=this[_dc7.s];if(lang.isFunction(_dc8)){var _dc9=_dc8.apply(this,Array.prototype.slice.call(arguments,1));}else{var _dca=this.focusNode&&!lang.isFunction(this.focusNode)?"focusNode":"domNode",_dcb,map,tag;tag=this[_dca]&&this[_dca].tagName;if(tag){_dcb=_daa[tag]||(_daa[tag]=_dab(this[_dca]));}map=name in this.attributeMap?this.attributeMap[name]:_dc7.s in this?this[_dc7.s]:((_dcb&&_dc7.l in _dcb&&typeof _dc6!="function")||/^aria-|^data-|^role$/.test(name))?_dca:null;if(map!=null){this._attrToDom(name,_dc6,map);}this._set(name,_dc6);}return _dc9||this;},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();});return (apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr",l:uc.toLowerCase()});},_set:function(name,_dcc){var _dcd=this[name];this[name]=_dcc;if(this._created&&_dcc!==_dcd){if(this._watchCallbacks){this._watchCallbacks(name,_dcd,_dcc);}this.emit("attrmodified-"+name,{detail:{prevValue:_dcd,newValue:_dcc}});}},emit:function(type,_dce,_dcf){_dce=_dce||{};if(_dce.bubbles===undefined){_dce.bubbles=true;}if(_dce.cancelable===undefined){_dce.cancelable=true;}if(!_dce.detail){_dce.detail={};}_dce.detail.widget=this;var ret,_dd0=this["on"+type];if(_dd0){ret=_dd0.apply(this,_dcf?_dcf:[_dce]);}if(this._started&&!this._beingDestroyed){on.emit(this.domNode,type.toLowerCase(),_dce);}return ret;},on:function(type,func){var _dd1=this._onMap(type);if(_dd1){return _d9a.after(this,_dd1,func,true);}return this.own(on(this.domNode,type,func))[0];},_onMap:function(type){var ctor=this.constructor,map=ctor._onMap;if(!map){map=(ctor._onMap={});for(var attr in ctor.prototype){if(/^on/.test(attr)){map[attr.replace(/^on/,"").toLowerCase()]=attr;}}}return map[typeof type=="string"&&type.toLowerCase()];},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getChildren:function(){return this.containerNode?_da8.findWidgets(this.containerNode):[];},getParent:function(){return _da8.getEnclosingWidget(this.domNode.parentNode);},connect:function(obj,_dd2,_dd3){return this.own(_d9c.connect(obj,_dd2,this,_dd3))[0];},disconnect:function(_dd4){_dd4.remove();},subscribe:function(t,_dd5){return this.own(_da6.subscribe(t,lang.hitch(this,_dd5)))[0];},unsubscribe:function(_dd6){_dd6.remove();},isLeftToRight:function(){return this.dir?(this.dir=="ltr"):_da1.isBodyLtr(this.ownerDocument);},isFocusable:function(){return this.focus&&(_da2.get(this.domNode,"display")!="none");},placeAt:function(_dd7,_dd8){var _dd9=!_dd7.tagName&&_da8.byId(_dd7);if(_dd9&&_dd9.addChild&&(!_dd8||typeof _dd8==="number")){_dd9.addChild(this,_dd8);}else{var ref=_dd9?(_dd9.containerNode&&!/after|before|replace/.test(_dd8||"")?_dd9.containerNode:_dd9.domNode):dom.byId(_dd7,this.ownerDocument);_da0.place(this.domNode,ref,_dd8);if(!this._started&&(this.getParent()||{})._started){this.startup();}}return this;},getTextDir:function(text,_dda){return _dda;},applyTextDir:function(){},defer:function(fcn,_ddb){var _ddc=setTimeout(lang.hitch(this,function(){_ddc=null;if(!this._destroyed){lang.hitch(this,fcn)();}}),_ddb||0);return {remove:function(){if(_ddc){clearTimeout(_ddc);_ddc=null;}return null;}};}});});},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/geometry/Point"],function(_ddd,lang,has,_dde,_ddf){var _de0=_ddd(_ddf,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}});if(has("extend-esri")){lang.setObject("geometry.ScreenPoint",_de0,_dde);}return _de0;});},"esri/layers/LayerTimeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(_de1,lang,has,_de2,_de3){var _de4=_de1(null,{declaredClass:"esri.layers.LayerTimeOptions",constructor:function(json){if(json){lang.mixin(this,json);}},toJson:function(){var json={timeDataCumulative:this.timeDataCumulative,timeOffset:this.timeOffset,timeOffsetUnits:this.timeOffsetUnits,useTime:this.useTime};return _de3.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.LayerTimeOptions",_de4,_de2);}return _de4;});},"esri/tasks/RelationParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/geometry/jsonUtils"],function(_de5,lang,_de6,_de7,has,_de8,_de9){var _dea=_de5(null,{declaredClass:"esri.tasks.RelationParameters",geometries1:null,geometries2:null,relation:null,relationParam:null,toJson:function(){var _deb=_de6.map(this.geometries1,function(geom){return geom.toJson();});var _dec=_de6.map(this.geometries2,function(geom){return geom.toJson();});var json={};var _ded=this.geometries1;if(_ded&&_ded.length>0){json.geometries1=_de7.toJson({geometryType:_de9.getJsonType(_ded[0]),geometries:_deb});var _dee=this.geometries1[0].spatialReference;json.sr=_dee.wkid?_dee.wkid:_de7.toJson(_dee.toJson());}var _def=this.geometries2;if(_def&&_def.length>0){json.geometries2=_de7.toJson({geometryType:_de9.getJsonType(_def[0]),geometries:_dec});}if(this.relation){json.relation=this.relation;}if(this.relationParam){json.relationParam=_de7.toJson(this.relationParam);}return json;}});lang.mixin(_dea,{SPATIAL_REL_CROSS:"esriGeometryRelationCross",SPATIAL_REL_DISJOINT:"esriGeometryRelationDisjoint",SPATIAL_REL_IN:"esriGeometryRelationIn",SPATIAL_REL_INTERIORINTERSECTION:"esriGeometryRelationInteriorIntersection",SPATIAL_REL_INTERSECTION:"esriGeometryRelationIntersection",SPATIAL_REL_COINCIDENCE:"esriGeometryRelationLineCoincidence",SPATIAL_REL_LINETOUCH:"esriGeometryRelationLineTouch",SPATIAL_REL_OVERLAP:"esriGeometryRelationOverlap",SPATIAL_REL_POINTTOUCH:"esriGeometryRelationPointTouch",SPATIAL_REL_TOUCH:"esriGeometryRelationTouch",SPATIAL_REL_WITHIN:"esriGeometryRelationWithin",SPATIAL_REL_RELATION:"esriGeometryRelationRelation"});if(has("extend-esri")){lang.setObject("tasks.RelationParameters",_dea,_de8);}return _dea;});},"esri/tasks/locator":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/_base/json","dojo/has","esri/kernel","esri/request","esri/deferredUtils","esri/tasks/Task","esri/tasks/AddressCandidate"],function(_df0,lang,_df1,_df2,_df3,has,_df4,_df5,_df6,Task,_df7){var _df8=_df0(Task,{declaredClass:"esri.tasks.Locator",_eventMap:{"address-to-locations-complete":["addresses"],"addresses-to-locations-complete":["addresses"],"location-to-address-complete":["address"]},constructor:function(url){this._geocodeHandler=lang.hitch(this,this._geocodeHandler);this._geocodeAddressesHandler=lang.hitch(this,this._geocodeAddressesHandler);this._reverseGeocodeHandler=lang.hitch(this,this._reverseGeocodeHandler);this.registerConnectEvents();},outSpatialReference:null,setOutSpatialReference:function(sr){this.outSpatialReference=sr;},_geocodeHandler:function(_df9,io,_dfa,_dfb,dfd){try{var _dfc=_df9.candidates,_dfd,out=[],i,il=_dfc.length,sr=_df9.spatialReference,_dfe;for(i=0;i<il;i++){_dfd=_dfc[i];_dfe=_dfd.location;if(_dfe){_dfe.spatialReference=sr;}out[i]=new _df7(_dfd);}this._successHandler([out],"onAddressToLocationsComplete",_dfa,dfd);}catch(err){this._errorHandler(err,_dfb,dfd);}},_geocodeAddressesHandler:function(_dff,io,_e00,_e01,dfd){try{var _e02=_dff.locations,out=[],i,il=_e02.length,sr=_dff.spatialReference,_e03;for(i=0;i<il;i++){_e03=_e02[i].location;if(_e03){_e03.spatialReference=sr;}out[i]=new _df7(_e02[i]);}this._successHandler([out],"onAddressesToLocationsComplete",_e00,dfd);}catch(err){this._errorHandler(err,_e01,dfd);}},addressToLocations:function(_e04,_e05,_e06,_e07,_e08){if(_e04.address){_e07=_e06;_e06=_e05;_e05=_e04.outFields;_e08=_e04.searchExtent;_e04=_e04.address;}if(_e08){_e08=_e08._normalize(true);}var _e09=this.outSpatialReference,_e0a=this._encode(lang.mixin({},this._url.query,_e04,{f:"json",outSR:_e09&&_df3.toJson(_e09.toJson()),outFields:(_e05&&_e05.join(","))||null,searchExtent:_e08&&_df3.toJson(_e08.toJson())})),_e0b=this._geocodeHandler,_e0c=this._errorHandler,dfd=new _df2(_df6._dfdCanceller);dfd._pendingDfd=_df5({url:this._url.path+"/findAddressCandidates",content:_e0a,callbackParamName:"callback",load:function(r,i){_e0b(r,i,_e06,_e07,dfd);},error:function(r){_e0c(r,_e07,dfd);}});return dfd;},addressesToLocations:function(_e0d,_e0e,_e0f){var _e10=this.outSpatialReference,_e11=[],_e12=_e0d.addresses;_df1.forEach(_e12,function(_e13,idx){_e11.push({attributes:_e13});});var _e14=this._encode(lang.mixin({},this._url.query,{addresses:_df3.toJson({records:_e11})},{f:"json",outSR:_e10&&_df3.toJson(_e10.toJson())})),_e15=this._geocodeAddressesHandler,_e16=this._errorHandler,dfd=new _df2(_df6._dfdCanceller);dfd._pendingDfd=_df5({url:this._url.path+"/geocodeAddresses",content:_e14,callbackParamName:"callback",load:function(r,i){_e15(r,i,_e0e,_e0f,dfd);},error:function(r){_e16(r,_e0f,dfd);}});return dfd;},_reverseGeocodeHandler:function(_e17,io,_e18,_e19,dfd){try{var _e1a=new _df7({address:_e17.address,location:_e17.location,score:100});this._successHandler([_e1a],"onLocationToAddressComplete",_e18,dfd);}catch(err){this._errorHandler(err,_e19,dfd);}},locationToAddress:function(_e1b,_e1c,_e1d,_e1e){if(_e1b&&this.normalization){_e1b=_e1b.normalize();}var _e1f=this.outSpatialReference,_e20=this._encode(lang.mixin({},this._url.query,{outSR:_e1f&&_df3.toJson(_e1f.toJson()),location:_e1b&&_df3.toJson(_e1b.toJson()),distance:_e1c,f:"json"})),_e21=this._reverseGeocodeHandler,_e22=this._errorHandler,dfd=new _df2(_df6._dfdCanceller);dfd._pendingDfd=_df5({url:this._url.path+"/reverseGeocode",content:_e20,callbackParamName:"callback",load:function(r,i){_e21(r,i,_e1d,_e1e,dfd);},error:function(r){_e22(r,_e1e,dfd);}});return dfd;},onAddressToLocationsComplete:function(){},onAddressesToLocationsComplete:function(){},onLocationToAddressComplete:function(){}});if(has("extend-esri")){lang.setObject("tasks.Locator",_df8,_df4);}return _df8;});},"esri/IdentityManagerDialog":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/config","dojo/_base/Deferred","dojo/_base/lang","dojo/has","dojo/dom-attr","dojo/keys","dojo/i18n","dijit/registry","dijit/Dialog","esri/kernel","esri/lang","esri/domUtils","esri/IdentityManagerBase","dojo/i18n!esri/nls/jsapi","dojo/query","dijit/form/Button","dijit/form/ValidationTextBox"],function(_e23,_e24,_e25,_e26,lang,has,_e27,_e28,i18n,_e29,_e2a,_e2b,_e2c,_e2d,_e2e){var _e2f=_e24([_e2e],{declaredClass:"esri.IdentityManager",_eventMap:{"dialog-cancel":["info"]},constructor:function(_e30){lang.mixin(this,_e30);this.registerConnectEvents();},_dialogContent:"<div class='dijitDialogPaneContentArea'>"+"<div style='padding-bottom: 5px; word-wrap: break-word;'>${info}</div>"+"<div style='margin: 0px; padding: 0px; height: 10px;'></div>"+"<div class='esriErrorMsg' style='display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'>${invalidUser}</div>"+"<div style='margin: 0px; padding: 0px; height: 10px;'></div>"+"<table style='width: 100%;'>"+"<tr>"+"<td><label>${lblUser}</label><br/>"+"<input data-dojo-type='dijit.form.ValidationTextBox' data-dojo-props='type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\"' /></td>"+"</tr>"+"<tr>"+"<td><label>${lblPwd}</label><br/>"+"<input data-dojo-type='dijit.form.ValidationTextBox' data-dojo-props='type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /></td>"+"</tr>"+"</table>"+"</div>"+"<div class='dijitDialogPaneActionBar'>"+"<button data-dojo-type='dijit.form.Button' data-dojo-props='type:\"button\", \"class\":\"esriIdSubmit\"'>${lblOk}</button>"+"<button data-dojo-type='dijit.form.Button' data-dojo-props='type:\"button\", \"class\":\"esriIdCancel\"'>${lblCancel}</button>"+"</div>",onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(_e31,_e32,_e33){if(!this._nls){this._nls=i18n.getLocalization("esri","jsapi").identity;}if(!this._loginDialog){this._loginDialog=(this.dialog=this._createLoginDialog());this.onDialogCreate();}var dlg=this._loginDialog,_e34=_e33&&_e33.error,_e35=_e33&&_e33.token,dfd=new _e26(function(){dlg.onCancel();});if(dlg.open){var err=new Error("BUSY");err.code="IdentityManager."+1;err.log=_e25.isDebug;dfd.errback(err);return dfd;}_e2d.hide(dlg.errMsg_);if(_e34){if(_e34.code==403&&_e35){_e27.set(dlg.errMsg_,"innerHTML",this._nls.forbidden);_e2d.show(dlg.errMsg_);}}dlg.dfd_=dfd;dlg.serverInfo_=_e32;dlg.resUrl_=_e31;dlg.admin_=_e33&&_e33.isAdmin;_e27.set(dlg.resLink_,{"title":_e31,"innerHTML":"("+(this.getResourceName(_e31)||this._nls.lblItem)+")"});_e27.set(dlg.serverLink_,{"title":_e32.server,"innerHTML":(_e32.server.toLowerCase().indexOf("arcgis.com")!==-1?"ArcGIS Online":_e32.server)+" "});dlg.txtPwd_.set("value","");dlg.show();return dfd;},_createLoginDialog:function(){var nls=this._nls,_e36=_e2c.substitute(nls,this._dialogContent);_e36=_e2c.substitute({resource:"<span class='resLink' style='word-wrap: break-word;'></span>",server:"<span class='serverLink' style='word-wrap: break-word;'></span>"},_e36);var dlg=new _e2a({title:nls.title,content:_e36,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(evt){if(evt.charOrCode===_e28.ENTER){this.execute_();}},execute_:function(){var usr=this.txtUser_.get("value"),pwd=this.txtPwd_.get("value"),dfd=this.dfd_,dlg=this;if(!usr||!pwd){return;}this.btnSubmit_.set("label",nls.lblSigning);var _e37=_e2b.id.findCredential(dlg.resUrl_,usr),_e38=function(_e39){dlg.btnSubmit_.set("label",nls.lblOk);dlg.btnSubmit_.set("disabled",false);_e2d.hide(dlg.errMsg_);dlg.hide();_e2a._DialogLevelManager.hide(dlg);var _e3a=dlg.serverInfo_;dlg.dfd_=dlg.serverInfo_=dlg.generateDfd_=dlg.resUrl_=null;var _e3b,_e3c,cred=_e37,ssl;if(_e39){_e3b=_e39.token;_e3c=_e2c.isDefined(_e39.expires)?Number(_e39.expires):null;ssl=!!_e39.ssl;if(cred){cred.userId=usr;cred.token=_e3b;cred.expires=_e3c;cred.validity=_e39.validity;cred.ssl=ssl;cred.creationTime=(new Date()).getTime();}else{cred=new _e2e.Credential({userId:usr,server:_e3a.server,token:_e3b,expires:_e3c,ssl:ssl,isAdmin:dlg.admin_,validity:_e39.validity});}}dfd.callback(cred);};if(_e37&&!_e37._enqueued){_e38();return;}dlg.btnSubmit_.set("disabled",true);dlg.generateDfd_=_e2b.id.generateToken(this.serverInfo_,{username:usr,password:pwd},{isAdmin:this.admin_}).addCallback(_e38).addErrback(function(_e3d){dlg.btnSubmit_.set("disabled",false);dlg.generateDfd_=null;dlg.btnSubmit_.set("label",nls.lblOk);_e27.set(dlg.errMsg_,"innerHTML",(_e3d&&_e3d.code)?nls.invalidUser:nls.noAuthService);_e2d.show(dlg.errMsg_);});},cancel_:function(){if(dlg.generateDfd_){dlg.generateDfd_.cancel();}var dfd=dlg.dfd_,_e3e=dlg.resUrl_,_e3f=dlg.serverInfo_;dlg.btnSubmit_.set("disabled",false);dlg.dfd_=dlg.serverInfo_=dlg.generateDfd_=dlg.resUrl_=null;_e2d.hide(dlg.errMsg_);_e2a._DialogLevelManager.hide(dlg);dlg.esriIdMgr_.onDialogCancel({resourceUrl:_e3e,serverInfo:_e3f});var err=new Error("ABORTED");err.code="IdentityManager."+2;err.log=_e25.isDebug;dfd.errback(err);}});var _e40=dlg.domNode;dlg.txtUser_=_e29.byNode(_e23.query(".esriIdUser",_e40)[0]);dlg.txtPwd_=_e29.byNode(_e23.query(".esriIdPwd",_e40)[0]);dlg.btnSubmit_=_e29.byNode(_e23.query(".esriIdSubmit",_e40)[0]);dlg.btnCancel_=_e29.byNode(_e23.query(".esriIdCancel",_e40)[0]);dlg.resLink_=_e23.query(".resLink",_e40)[0];dlg.serverLink_=_e23.query(".serverLink",_e40)[0];dlg.errMsg_=_e23.query(".esriErrorMsg",_e40)[0];dlg.connect(dlg.txtUser_,"onKeyPress",dlg.keypressed_);dlg.connect(dlg.txtPwd_,"onKeyPress",dlg.keypressed_);dlg.connect(dlg.btnSubmit_,"onClick",dlg.execute_);dlg.connect(dlg.btnCancel_,"onClick",dlg.onCancel);dlg.connect(dlg,"onCancel",dlg.cancel_);return dlg;}});if(has("extend-esri")){_e2b.IdentityManagerDialog=_e2b.IdentityManager=_e2f;}return _e2f;});},"url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\n></div>\n","esri/renderers/TemporalRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/renderers/Renderer"],function(_e41,lang,has,_e42,_e43){var _e44=_e41(_e43,{declaredClass:"esri.renderer.TemporalRenderer",constructor:function(_e45,_e46,_e47,_e48){this.observationRenderer=_e45;this.latestObservationRenderer=_e46;this.trackRenderer=_e47;this.observationAger=_e48;},getSymbol:function(_e49){var _e4a=_e49.getLayer();var kind=_e4a._getKind(_e49);var _e4b=(kind===0)?this.observationRenderer:(this.latestObservationRenderer||this.observationRenderer);var _e4c=(_e4b&&_e4b.getSymbol(_e49));var ager=this.observationAger;if(_e4a.timeInfo&&_e4a._map.timeExtent&&(_e4b===this.observationRenderer)&&ager&&_e4c){_e4c=ager.getAgedSymbol(_e4c,_e49);}return _e4c;}});if(has("extend-esri")){lang.setObject("renderer.TemporalRenderer",_e44,_e42);}return _e44;});},"dijit/_base/sniff":function(){define("dijit/_base/sniff",["dojo/uacss"],function(){});},"dojo/request/iframe":function(){define(["module","require","./watch","./util","./handlers","../_base/lang","../io-query","../query","../has","../dom","../dom-construct","../_base/window"],function(_e4d,_e4e,_e4f,util,_e50,lang,_e51,_e52,has,dom,_e53,win){var mid=_e4d.id.replace(/[\/\.\-]/g,"_"),_e54=mid+"_onload";if(!win.global[_e54]){win.global[_e54]=function(){var dfd=_e55._currentDfd;if(!dfd){_e55._fireNextRequest();return;}var _e56=dfd.response,_e57=_e56.options,_e58=dom.byId(_e57.form)||dfd._tmpForm;if(_e58){var _e59=dfd._contentToClean;for(var i=0;i<_e59.length;i++){var key=_e59[i];for(var j=0;j<_e58.childNodes.length;j++){var _e5a=_e58.childNodes[j];if(_e5a.name===key){_e53.destroy(_e5a);break;}}}dfd._originalAction&&_e58.setAttribute("action",dfd._originalAction);if(dfd._originalMethod){_e58.setAttribute("method",dfd._originalMethod);_e58.method=dfd._originalMethod;}if(dfd._originalTarget){_e58.setAttribute("target",dfd._originalTarget);_e58.target=dfd._originalTarget;}}if(dfd._tmpForm){_e53.destroy(dfd._tmpForm);delete dfd._tmpForm;}dfd._finished=true;};}function _e5b(name,_e5c,uri){if(win.global[name]){return win.global[name];}if(win.global.frames[name]){return win.global.frames[name];}if(!uri){if(has("config-useXDomain")&&!has("config-dojoBlankHtmlUrl")){console.warn("dojo/request/iframe: When using cross-domain Dojo builds,"+" please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl"+" to the path on your domain to blank.html");}uri=(has("config-dojoBlankHtmlUrl")||_e4e.toUrl("dojo/resources/blank.html"));}var _e5d=_e53.place("<iframe id=\""+name+"\" name=\""+name+"\" src=\""+uri+"\" onload=\""+_e5c+"\" style=\"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden\">",win.body());win.global[name]=_e5d;return _e5d;};function _e5e(_e5f,src,_e60){var _e61=win.global.frames[_e5f.name];if(_e61.contentWindow){_e61=_e61.contentWindow;}try{if(!_e60){_e61.location=src;}else{_e61.location.replace(src);}}catch(e){console.log("dojo/request/iframe.setSrc: ",e);}};function doc(_e62){if(_e62.contentDocument){return _e62.contentDocument;}var name=_e62.name;if(name){var _e63=win.doc.getElementsByTagName("iframe");if(_e62.document&&_e63[name].contentWindow&&_e63[name].contentWindow.document){return _e63[name].contentWindow.document;}else{if(win.doc.frames[name]&&win.doc.frames[name].document){return win.doc.frames[name].document;}}}return null;};function _e64(){return _e53.create("form",{name:mid+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},win.body());};function _e65(){var dfd;try{if(_e55._currentDfd||!_e55._dfdQueue.length){return;}do{dfd=_e55._currentDfd=_e55._dfdQueue.shift();}while(dfd&&(dfd.canceled||(dfd.isCanceled&&dfd.isCanceled()))&&_e55._dfdQueue.length);if(!dfd||dfd.canceled||(dfd.isCanceled&&dfd.isCanceled())){_e55._currentDfd=null;return;}var _e66=dfd.response,_e67=_e66.options,c2c=dfd._contentToClean=[],_e68=dom.byId(_e67.form),_e69=util.notify,data=_e67.data||null,_e6a;if(!dfd._legacy&&_e67.method==="POST"&&!_e68){_e68=dfd._tmpForm=_e64();}else{if(_e67.method==="GET"&&_e68&&_e66.url.indexOf("?")>-1){_e6a=_e66.url.slice(_e66.url.indexOf("?")+1);data=lang.mixin(_e51.queryToObject(_e6a),data);}}if(_e68){if(!dfd._legacy){var _e6b=_e68;do{_e6b=_e6b.parentNode;}while(_e6b!==win.doc.documentElement);if(!_e6b){_e68.style.position="absolute";_e68.style.left="-1000px";_e68.style.top="-1000px";win.body().appendChild(_e68);}if(!_e68.name){_e68.name=mid+"_form";}}if(data){var _e6c=function(name,_e6d){_e53.create("input",{type:"hidden",name:name,value:_e6d},_e68);c2c.push(name);};for(var x in data){var val=data[x];if(lang.isArray(val)&&val.length>1){for(var i=0;i<val.length;i++){_e6c(x,val[i]);}}else{if(!_e68[x]){_e6c(x,val);}else{_e68[x].value=val;}}}}var _e6e=_e68.getAttributeNode("action"),_e6f=_e68.getAttributeNode("method"),_e70=_e68.getAttributeNode("target");if(_e66.url){dfd._originalAction=_e6e?_e6e.value:null;if(_e6e){_e6e.value=_e66.url;}else{_e68.setAttribute("action",_e66.url);}}if(!dfd._legacy){dfd._originalMethod=_e6f?_e6f.value:null;if(_e6f){_e6f.value=_e67.method;}else{_e68.setAttribute("method",_e67.method);}}else{if(!_e6f||!_e6f.value){if(mthdNode){mthdNode.value=_e67.method;}else{fn.setAttribute("method",_e67.method);}}}dfd._originalTarget=_e70?_e70.value:null;if(_e70){_e70.value=_e55._iframeName;}else{_e68.setAttribute("target",_e55._iframeName);}_e68.target=_e55._iframeName;_e69&&_e69.emit("send",_e66,dfd.promise.cancel);_e55._notifyStart(_e66);_e68.submit();}else{var _e71="";if(_e66.options.data){_e71=_e66.options.data;if(typeof _e71!=="string"){_e71=_e51.objectToQuery(_e71);}}var _e72=_e66.url+(_e66.url.indexOf("?")>-1?"&":"?")+_e71;_e69&&_e69.emit("send",_e66,dfd.promise.cancel);_e55._notifyStart(_e66);_e55.setSrc(_e55._frame,_e72,true);}}catch(e){dfd.reject(e);}};function _e73(_e74){return !this.isFulfilled();};function _e75(_e76){return !!this._finished;};function _e77(_e78,_e79){if(!_e79){try{var _e7a=_e78.options,doc=_e55.doc(_e55._frame),_e7b=_e7a.handleAs;if(_e7b!=="html"){if(_e7b==="xml"){if(doc.documentElement.tagName.toLowerCase()==="html"){_e52("a",doc.documentElement).orphan();var _e7c=doc.documentElement.innerText;_e7c=_e7c.replace(/>\s+</g,"><");_e78.text=lang.trim(_e7c);}else{_e78.data=doc;}}else{_e78.text=doc.getElementsByTagName("textarea")[0].value;}_e50(_e78);}else{_e78.data=doc;}}catch(e){_e79=e;}}if(_e79){this.reject(_e79);}else{if(this._finished){this.resolve(_e78);}else{this.reject(new Error("Invalid dojo/request/iframe request state"));}}};function last(_e7d){this._callNext();};var _e7e={method:"POST"};function _e55(url,_e7f,_e80){var _e81=util.parseArgs(url,util.deepCreate(_e7e,_e7f),true);url=_e81.url;_e7f=_e81.options;if(_e7f.method!=="GET"&&_e7f.method!=="POST"){throw new Error(_e7f.method+" not supported by dojo/request/iframe");}if(!_e55._frame){_e55._frame=_e55.create(_e55._iframeName,_e54+"();");}var dfd=util.deferred(_e81,null,_e73,_e75,_e77,last);dfd._callNext=function(){if(!this._calledNext){this._calledNext=true;_e55._currentDfd=null;_e55._fireNextRequest();}};dfd._legacy=_e80;_e55._dfdQueue.push(dfd);_e55._fireNextRequest();_e4f(dfd);return _e80?dfd:dfd.promise;};_e55.create=_e5b;_e55.doc=doc;_e55.setSrc=_e5e;_e55._iframeName=mid+"_IoIframe";_e55._notifyStart=function(){};_e55._dfdQueue=[];_e55._currentDfd=null;_e55._fireNextRequest=_e65;util.addCommonMethods(_e55,["GET","POST"]);return _e55;});},"esri/tasks/ProjectParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/lang","esri/geometry/jsonUtils"],function(_e82,lang,_e83,_e84,has,_e85,_e86,_e87){var _e88=_e82(null,{declaredClass:"esri.tasks.ProjectParameters",geometries:null,outSR:null,transformation:null,transformForward:null,toJson:function(){var _e89=_e83.map(this.geometries,function(geom){return geom.toJson();});var json={};json.outSR=this.outSR.wkid||_e84.toJson(this.outSR.toJson());json.inSR=this.geometries[0].spatialReference.wkid||_e84.toJson(this.geometries[0].spatialReference.toJson());json.geometries=_e84.toJson({geometryType:_e87.getJsonType(this.geometries[0]),geometries:_e89});if(this.transformation){json.transformation=this.transformation.wkid||_e84.toJson(this.transformation);}if(_e86.isDefined(this.transformForward)){json.transformForward=this.transformForward;}return json;}});if(has("extend-esri")){lang.setObject("tasks.ProjectParameters",_e88,_e85);}return _e88;});},"dojox/collections/_base":function(){define("dojox/collections/_base",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(dojo,lang,arr){var _e8a=lang.getObject("dojox.collections",true);_e8a.DictionaryEntry=function(k,v){this.key=k;this.value=v;this.valueOf=function(){return this.value;};this.toString=function(){return String(this.value);};};_e8a.Iterator=function(a){var _e8b=0;this.element=a[_e8b]||null;this.atEnd=function(){return (_e8b>=a.length);};this.get=function(){if(this.atEnd()){return null;}this.element=a[_e8b++];return this.element;};this.map=function(fn,_e8c){return arr.map(a,fn,_e8c);};this.reset=function(){_e8b=0;this.element=a[_e8b];};};_e8a.DictionaryIterator=function(obj){var a=[];var _e8d={};for(var p in obj){if(!_e8d[p]){a.push(obj[p]);}}var _e8e=0;this.element=a[_e8e]||null;this.atEnd=function(){return (_e8e>=a.length);};this.get=function(){if(this.atEnd()){return null;}this.element=a[_e8e++];return this.element;};this.map=function(fn,_e8f){return arr.map(a,fn,_e8f);};this.reset=function(){_e8e=0;this.element=a[_e8e];};};return _e8a;});},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(dojo,lang){var _e90={};lang.setObject("dojo.regexp",_e90);_e90.escapeString=function(str,_e91){return str.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(_e91&&_e91.indexOf(ch)!=-1){return ch;}return "\\"+ch;});};_e90.buildGroupRE=function(arr,re,_e92){if(!(arr instanceof Array)){return re(arr);}var b=[];for(var i=0;i<arr.length;i++){b.push(re(arr[i]));}return _e90.group(b.join("|"),_e92);};_e90.group=function(_e93,_e94){return "("+(_e94?"?:":"")+_e93+")";};return _e90;});},"esri/_time":function(){define(["esri/TimeExtent"],function(){return {};});},"esri/layers/LayerDataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/LayerSource","esri/layers/TableDataSource","esri/layers/QueryDataSource","esri/layers/JoinDataSource","esri/layers/RasterDataSource"],function(_e95,lang,has,_e96,_e97,_e98,_e99,_e9a,_e9b,_e9c){var _e9d=_e95(_e98,{declaredClass:"esri.layers.LayerDataSource",type:"dataLayer",constructor:function(json){if(json&&json.dataSource){var _e9e;switch(json.dataSource.type){case "table":_e9e=new _e99(json.dataSource);break;case "queryTable":_e9e=new _e9a(json.dataSource);break;case "joinTable":_e9e=new _e9b(json.dataSource);break;case "raster":_e9e=new _e9c(json.dataSource);break;default:_e9e=json.dataSource;}this.dataSource=_e9e;}},toJson:function(){var json={type:"dataLayer",dataSource:this.dataSource&&this.dataSource.toJson()};return _e97.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.LayerDataSource",_e9d,_e96);}return _e9d;});},"esri/layers/LayerDrawingOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/lang","esri/renderers/jsonUtils","esri/layers/LabelClass"],function(_e9f,lang,_ea0,has,_ea1,_ea2,_ea3,_ea4){var _ea5=_e9f(null,{declaredClass:"esri.layers.LayerDrawingOptions",constructor:function(json){if(json){lang.mixin(this,json);if(json.renderer){this.renderer=_ea3.fromJson(json.renderer);}if(json.labelingInfo&&json.labelingInfo.length>0){this.labelingInfo=[];var _ea6;_ea0.forEach(json.labelingInfo,function(_ea7){_ea6=new _ea4(_ea7);this.labelingInfo.push(_ea6);},this);}}},toJson:function(){var json={renderer:this.renderer&&this.renderer.toJson(),transparency:this.transparency,scaleSymbols:this.scaleSymbols,showLabels:this.showLabels};if(this.labelingInfo&&this.labelingInfo.length>0){json.labelingInfo=[];_ea0.forEach(this.labelingInfo,function(_ea8){json.labelingInfo.push(_ea8.toJson());});}return _ea2.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.LayerDrawingOptions",_ea5,_ea1);}return _ea5;});},"esri/renderers/UniqueValueRenderer":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/symbols/jsonUtils","esri/renderers/Renderer"],function(_ea9,_eaa,lang,has,_eab,_eac,_ead,_eae){var _eaf=_ea9(_eae,{declaredClass:"esri.renderer.UniqueValueRenderer",constructor:function(sym,attr,_eb0,_eb1,_eb2){this.values=[];this._symbols={};this.infos=[];if(sym&&!sym.declaredClass){var json=sym;sym=json.defaultSymbol;if(sym){this.defaultSymbol=_ead.fromJson(sym);}this.attributeField=json.field1;this.attributeField2=json.field2;this.attributeField3=json.field3;this.fieldDelimiter=json.fieldDelimiter;this.defaultLabel=json.defaultLabel;_eaa.forEach(json.uniqueValueInfos,this._addValueInfo,this);}else{this.defaultSymbol=sym;this.attributeField=attr;this.attributeField2=_eb0;this.attributeField3=_eb1;this.fieldDelimiter=_eb2;}this._multiple=!!this.attributeField2;},addValue:function(_eb3,_eb4){var info=lang.isObject(_eb3)?_eb3:{value:_eb3,symbol:_eb4};this._addValueInfo(info);},removeValue:function(_eb5){var i=_eaa.indexOf(this.values,_eb5);if(i===-1){return;}this.values.splice(i,1);delete this._symbols[_eb5];this.infos.splice(i,1);},getSymbol:function(_eb6){var _eb7=this.attributeField,_eb8=_eb6.attributes,_eb9,_eba,_ebb;if(this._multiple){_eb9=this.attributeField2;_eba=this.attributeField3;_ebb=[];if(_eb7){_ebb.push(_eb8[_eb7]);}if(_eb9){_ebb.push(_eb8[_eb9]);}if(_eba){_ebb.push(_eb8[_eba]);}return this._symbols[_ebb.join(this.fieldDelimiter||"")]||this.defaultSymbol;}else{_eb7=lang.isFunction(_eb7)?_eb7(_eb6):_eb8[_eb7];return this._symbols[_eb7]||this.defaultSymbol;}},_addValueInfo:function(info){var _ebc=info.value;this.values.push(_ebc);this.infos.push(info);var _ebd=info.symbol;if(_ebd){if(!_ebd.declaredClass){info.symbol=_ead.fromJson(_ebd);}}this._symbols[_ebc]=info.symbol;},toJson:function(){var _ebe=_eac.fixJson;return _ebe({type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:_eaa.map(this.infos||[],function(info){info=lang.mixin({},info);info.symbol=info.symbol&&info.symbol.toJson();info.value=info.value+"";return _ebe(info);})});}});if(has("extend-esri")){lang.setObject("renderer.UniqueValueRenderer",_eaf,_eab);}return _eaf;});},"dijit/form/_FormMixin":function(){define("dijit/form/_FormMixin",["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/window"],function(_ebf,_ec0,_ec1,lang,on,_ec2){return _ec0("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(_ec3){var res=[];_ebf.forEach(_ec3||this.getChildren(),function(_ec4){if("value" in _ec4){res.push(_ec4);}else{res=res.concat(this._getDescendantFormWidgets(_ec4.getChildren()));}},this);return res;},reset:function(){_ebf.forEach(this._getDescendantFormWidgets(),function(_ec5){if(_ec5.reset){_ec5.reset();}});},validate:function(){var _ec6=false;return _ebf.every(_ebf.map(this._getDescendantFormWidgets(),function(_ec7){_ec7._hasBeenBlurred=true;var _ec8=_ec7.disabled||!_ec7.validate||_ec7.validate();if(!_ec8&&!_ec6){_ec2.scrollIntoView(_ec7.containerNode||_ec7.domNode);_ec7.focus();_ec6=true;}return _ec8;}),function(item){return item;});},setValues:function(val){_ec1.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",val);},_setValueAttr:function(obj){var map={};_ebf.forEach(this._getDescendantFormWidgets(),function(_ec9){if(!_ec9.name){return;}var _eca=map[_ec9.name]||(map[_ec9.name]=[]);_eca.push(_ec9);});for(var name in map){if(!map.hasOwnProperty(name)){continue;}var _ecb=map[name],_ecc=lang.getObject(name,false,obj);if(_ecc===undefined){continue;}if(!lang.isArray(_ecc)){_ecc=[_ecc];}if(typeof _ecb[0].checked=="boolean"){_ebf.forEach(_ecb,function(w){w.set("value",_ebf.indexOf(_ecc,w.value)!=-1);});}else{if(_ecb[0].multiple){_ecb[0].set("value",_ecc);}else{_ebf.forEach(_ecb,function(w,i){w.set("value",_ecc[i]);});}}}},getValues:function(){_ec1.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value");},_getValueAttr:function(){var obj={};_ebf.forEach(this._getDescendantFormWidgets(),function(_ecd){var name=_ecd.name;if(!name||_ecd.disabled){return;}var _ece=_ecd.get("value");if(typeof _ecd.checked=="boolean"){if(/Radio/.test(_ecd.declaredClass)){if(_ece!==false){lang.setObject(name,_ece,obj);}else{_ece=lang.getObject(name,false,obj);if(_ece===undefined){lang.setObject(name,null,obj);}}}else{var ary=lang.getObject(name,false,obj);if(!ary){ary=[];lang.setObject(name,ary,obj);}if(_ece!==false){ary.push(_ece);}}}else{var prev=lang.getObject(name,false,obj);if(typeof prev!="undefined"){if(lang.isArray(prev)){prev.push(_ece);}else{lang.setObject(name,[prev,_ece],obj);}}else{lang.setObject(name,_ece,obj);}}});return obj;},isValid:function(){return this.state=="";},onValidStateChange:function(){},_getState:function(){var _ecf=_ebf.map(this._descendants,function(w){return w.get("state")||"";});return _ebf.indexOf(_ecf,"Error")>=0?"Error":_ebf.indexOf(_ecf,"Incomplete")>=0?"Incomplete":"";},disconnectChildren:function(){},connectChildren:function(_ed0){this._descendants=this._getDescendantFormWidgets();_ebf.forEach(this._descendants,function(_ed1){if(!_ed1._started){_ed1.startup();}});if(!_ed0){this._onChildChange();}},_onChildChange:function(attr){if(!attr||attr=="state"||attr=="disabled"){this._set("state",this._getState());}if(!attr||attr=="value"||attr=="disabled"||attr=="checked"){if(this._onChangeDelayTimer){this._onChangeDelayTimer.remove();}this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"));},10);}},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var self=this;this.own(on(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(evt){if(evt.target==self.domNode){return;}self._onChildChange(evt.type.replace("attrmodified-",""));}));this.watch("state",function(attr,_ed2,_ed3){this.onValidStateChange(_ed3=="");});},destroy:function(){this.inherited(arguments);}});});},"esri/ServerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(_ed4,lang,has,_ed5,_ed6){var _ed7=_ed4(null,{declaredClass:"esri.ServerInfo",constructor:function(json){lang.mixin(this,json);},toJson:function(){return _ed6.fixJson({server:this.server,tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth});}});if(has("extend-esri")){_ed5.ServerInfo=_ed7;}return _ed7;});},"esri/tasks/FindTask":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/has","esri/kernel","esri/request","esri/deferredUtils","esri/tasks/Task","esri/tasks/FindResult"],function(_ed8,lang,_ed9,_eda,has,_edb,_edc,_edd,Task,_ede){var _edf=_ed8(Task,{declaredClass:"esri.tasks.FindTask",constructor:function(url,_ee0){this._url.path+="/find";this._handler=lang.hitch(this,this._handler);this.gdbVersion=_ee0&&_ee0.gdbVersion;},_handler:function(_ee1,io,_ee2,_ee3,dfd){try{var _ee4=[];_ed9.forEach(_ee1.results,function(_ee5,i){_ee4[i]=new _ede(_ee5);});this._successHandler([_ee4],"onComplete",_ee2,dfd);}catch(err){this._errorHandler(err,_ee3,dfd);}},execute:function(_ee6,_ee7,_ee8){var _ee9=this._encode(lang.mixin({},this._url.query,{f:"json"},_ee6.toJson())),_eea=this._handler,_eeb=this._errorHandler;if(this.gdbVersion){_ee9.gdbVersion=this.gdbVersion;}var dfd=new _eda(_edd._dfdCanceller);dfd._pendingDfd=_edc({url:this._url.path,content:_ee9,callbackParamName:"callback",load:function(r,i){_eea(r,i,_ee7,_ee8,dfd);},error:function(r){_eeb(r,_ee8,dfd);}});return dfd;},onComplete:function(){}});if(has("extend-esri")){lang.setObject("tasks.FindTask",_edf,_edb);}return _edf;});},"esri/Evented":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/Evented","dojo/on","dojo/has","esri/kernel"],function(_eec,lang,_eed,_eee,on,has,_eef){var _ef0=_eec([_eee],{declaredClass:"esri.Evented",registerConnectEvents:function(){var ctor=this.constructor,_ef1=this.constructor._meta.parents,_ef2=[{}],_ef3={},_ef4,attr,_ef5,_ef6,k,_ef7=function(_ef8,maps){if(!lang.isArray(_ef8)){_ef8=[_ef8];}for(var i=0;i<_ef8.length;i++){var p=_ef8[i],pmap;if(p._meta&&p._meta.parents){_ef7(p._meta.parents,maps);}if(p.prototype._eventMap){maps.push(lang.mixin({},p.prototype._eventMap));}}return maps;};if(!ctor._onMap){_ef7(_ef1,_ef2);_ef2.push(this._eventMap);_ef4=lang.mixin.apply(this,_ef2);for(attr in this){if(/^on\w/.test(attr)&&lang.isFunction(this[attr])){_ef5=this._hyphenLower(attr).toLowerCase();if(!_ef4[_ef5]){_ef3[_ef5]={"method":attr};}}}for(k in _ef4){_ef6=this._onCamelCase(k);_ef3[k]={"method":_ef6,"argKeys":_ef4[k]};}ctor._onMap=_ef3;return ctor._onMap;}},on:function(type,_ef9){var _efa=this.constructor._onMap||this.registerConnectEvents(),_efb=(typeof type=="string")&&type.toLowerCase(),_efc=this._onCamelCase(_efb),_efd=_efa&&_efa[_efb],_efe=(_efd&&_efd.method)||(this[_efc]&&lang.isFunction(this[_efc])&&_efc),_eff;if(_efe){if(_efd&&lang.isArray(_efd.argKeys)){_eff=this._onArr2Obj(_ef9,_efa[_efb].argKeys);return _eed.after(this,_efe,_eff,true);}else{return _eed.after(this,_efe,_ef9,true);}}return this.inherited(arguments);},emit:function(type,_f00){var ret,_f01,_f02,_f03,_f04=type.toLowerCase(),_f05=this._onCamelCase(type),_f06=this.constructor._onMap||this.registerConnectEvents();_f02=(_f06&&_f06[_f04]&&_f06[_f04].method)||(lang.isFunction(this[_f05])&&_f05);_f03=_f02&&this[_f02];if(_f02&&_f06&&_f06[_f04]){this._onObj2Arr(function(){_f01=Array.prototype.slice.call(arguments);},_f06[_f04].argKeys)(_f00);}_f00=_f00||{};if(!_f00.target){_f00.target=this;}if(_f03){ret=_f03.apply(this,_f01||[_f00]);}this.inherited(arguments);return ret;},_onObj2Arr:function(_f07,_f08){if(!_f08){return _f07;}else{var self=this;return function(evt){var i,args=[],_f09=_f08.length;for(i=0;i<_f09;i++){args[i]=evt[_f08[i]];}_f07.apply(self,args);};}},_onArr2Obj:function(_f0a,_f0b){if(!_f0b){return _f0a;}else{var self=this;return function(){var i,evt={},_f0c=arguments.length;for(i=0;i<_f0c;i++){evt[_f0b[i]]=arguments[i];}if(!evt.target){evt.target=self;}_f0a(evt);};}},_hyphenLower:function(type){return type.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(m,off){return (off?"-":"")+m.toLowerCase();});},_onCamelCase:function(type){return "on"+type.substr(0,1).toUpperCase()+type.substr(1).replace(/\-([a-z])/g,function(m,s){return s.toUpperCase();});}});if(has("extend-esri")){_eef.Evented=_ef0;}return _ef0;});},"esri/toolbars/_toolbar":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/Evented"],function(_f0d,lang,has,_f0e,_f0f){var TB=_f0d([_f0f],{declaredClass:"esri.toolbars._Toolbar",constructor:function(map){this.map=map;},_cursors:{"move":"pointer","move-v":"pointer","move-gv":"pointer","box0":"nw-resize","box1":"n-resize","box2":"ne-resize","box3":"e-resize","box4":"se-resize","box5":"s-resize","box6":"sw-resize","box7":"w-resize","box8":"pointer"},_deactivateMapTools:function(nav,_f10,_f11,_f12){var map=this.map;if(nav){this._mapNavState={isDoubleClickZoom:map.isDoubleClickZoom,isClickRecenter:map.isClickRecenter,isPan:map.isPan,isRubberBandZoom:map.isRubberBandZoom,isKeyboardNavigation:map.isKeyboardNavigation,isScrollWheelZoom:map.isScrollWheelZoom};map.disableDoubleClickZoom();map.disableClickRecenter();map.disablePan();map.disableRubberBandZoom();map.disableKeyboardNavigation();}if(_f10){map.hideZoomSlider();}if(_f11){map.hidePanArrows();}if(_f12){map.graphics.disableMouseEvents();}},_activateMapTools:function(nav,_f13,_f14,_f15){var map=this.map,_f16=this._mapNavState;if(nav&&_f16){if(_f16.isDoubleClickZoom){map.enableDoubleClickZoom();}if(_f16.isClickRecenter){map.enableClickRecenter();}if(_f16.isPan){map.enablePan();}if(_f16.isRubberBandZoom){map.enableRubberBandZoom();}if(_f16.isKeyboardNavigation){map.enableKeyboardNavigation();}if(_f16.isScrollWheelZoom){map.enableScrollWheelZoom();}}if(_f13){map.showZoomSlider();}if(_f14){map.showPanArrows();}if(_f15){map.graphics.enableMouseEvents();}}});if(has("extend-esri")){lang.setObject("toolbars._Toolbar",TB,_f0e);}return TB;});},"dijit/layout/ContentPane":function(){define("dijit/layout/ContentPane",["dojo/_base/kernel","dojo/_base/lang","../_Widget","../_Container","./_ContentPaneResizeMixin","dojo/string","dojo/html","dojo/i18n!../nls/loading","dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/_base/xhr","dojo/i18n","dojo/when"],function(_f17,lang,_f18,_f19,_f1a,_f1b,html,_f1c,_f1d,_f1e,_f1f,dom,_f20,_f21,xhr,i18n,when){return _f1e("dijit.layout.ContentPane",[_f18,_f19,_f1a],{href:"",content:"",extractContent:false,parseOnLoad:true,parserScope:_f17._scopeName,preventCache:false,preload:false,refreshOnShow:false,loadingMessage:"<span class='dijitContentPaneLoading'><span class='dijitInline dijitIconLoading'></span>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'><span class='dijitInline dijitIconError'></span>${errorState}</span>",isLoaded:false,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:true,template:false,create:function(_f22,_f23){if((!_f22||!_f22.template)&&_f23&&!("href" in _f22)&&!("content" in _f22)){_f23=dom.byId(_f23);var df=_f23.ownerDocument.createDocumentFragment();while(_f23.firstChild){df.appendChild(_f23.firstChild);}_f22=lang.delegate(_f22,{content:df});}this.inherited(arguments,[_f22,_f23]);},postMixInProperties:function(){this.inherited(arguments);var _f24=i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=_f1b.substitute(this.loadingMessage,_f24);this.errorMessage=_f1b.substitute(this.errorMessage,_f24);},buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}this.domNode.title="";if(!_f20.get(this.domNode,"role")){this.domNode.setAttribute("role","group");}},startup:function(){this.inherited(arguments);if(this._contentSetter){_f1d.forEach(this._contentSetter.parseResults,function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}},this);}},_startChildren:function(){_f1d.forEach(this.getChildren(),function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}});if(this._contentSetter){_f1d.forEach(this._contentSetter.parseResults,function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}},this);}},setHref:function(href){_f17.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",href);},_setHrefAttr:function(href){this.cancel();this.onLoadDeferred=new _f1f(lang.hitch(this,"cancel"));this.onLoadDeferred.then(lang.hitch(this,"onLoad"));this._set("href",href);if(this.preload||(this._created&&this._isShown())){this._load();}else{this._hrefChanged=true;}return this.onLoadDeferred;},setContent:function(data){_f17.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",data);},_setContentAttr:function(data){this._set("href","");this.cancel();this.onLoadDeferred=new _f1f(lang.hitch(this,"cancel"));if(this._created){this.onLoadDeferred.then(lang.hitch(this,"onLoad"));}this._setContent(data||"");this._isDownloaded=false;return this.onLoadDeferred;},_getContentAttr:function(){return this.containerNode.innerHTML;},cancel:function(){if(this._xhrDfd&&(this._xhrDfd.fired==-1)){this._xhrDfd.cancel();}delete this._xhrDfd;this.onLoadDeferred=null;},destroy:function(){this.cancel();this.inherited(arguments);},destroyRecursive:function(_f25){if(this._beingDestroyed){return;}this.inherited(arguments);},_onShow:function(){this.inherited(arguments);if(this.href){if(!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow)){return this.refresh();}}},refresh:function(){this.cancel();this.onLoadDeferred=new _f1f(lang.hitch(this,"cancel"));this.onLoadDeferred.then(lang.hitch(this,"onLoad"));this._load();return this.onLoadDeferred;},_load:function(){this._setContent(this.onDownloadStart(),true);var self=this;var _f26={preventCache:(this.preventCache||this.refreshOnShow),url:this.href,handleAs:"text"};if(lang.isObject(this.ioArgs)){lang.mixin(_f26,this.ioArgs);}var hand=(this._xhrDfd=(this.ioMethod||xhr.get)(_f26)),_f27;hand.then(function(html){_f27=html;try{self._isDownloaded=true;return self._setContent(html,false);}catch(err){self._onError("Content",err);}},function(err){if(!hand.canceled){self._onError("Download",err);}delete self._xhrDfd;return err;}).then(function(){self.onDownloadEnd();delete self._xhrDfd;return _f27;});delete this._hrefChanged;},_onLoadHandler:function(data){this._set("isLoaded",true);try{this.onLoadDeferred.resolve(data);}catch(e){console.error("Error "+this.widgetId+" running custom onLoad code: "+e.message);}},_onUnloadHandler:function(){this._set("isLoaded",false);try{this.onUnload();}catch(e){console.error("Error "+this.widgetId+" running custom onUnload code: "+e.message);}},destroyDescendants:function(_f28){if(this.isLoaded){this._onUnloadHandler();}var _f29=this._contentSetter;_f1d.forEach(this.getChildren(),function(_f2a){if(_f2a.destroyRecursive){_f2a.destroyRecursive(_f28);}else{if(_f2a.destroy){_f2a.destroy(_f28);}}_f2a._destroyed=true;});if(_f29){_f1d.forEach(_f29.parseResults,function(_f2b){if(!_f2b._destroyed){if(_f2b.destroyRecursive){_f2b.destroyRecursive(_f28);}else{if(_f2b.destroy){_f2b.destroy(_f28);}}_f2b._destroyed=true;}});delete _f29.parseResults;}if(!_f28){_f21.empty(this.containerNode);}delete this._singleChild;},_setContent:function(cont,_f2c){this.destroyDescendants();var _f2d=this._contentSetter;if(!(_f2d&&_f2d instanceof html._ContentSetter)){_f2d=this._contentSetter=new html._ContentSetter({node:this.containerNode,_onError:lang.hitch(this,this._onError),onContentError:lang.hitch(this,function(e){var _f2e=this.onContentError(e);try{this.containerNode.innerHTML=_f2e;}catch(e){console.error("Fatal "+this.id+" could not change content due to "+e.message,e);}})});}var _f2f=lang.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!cont.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:false,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});var p=_f2d.set((lang.isObject(cont)&&cont.domNode)?cont.domNode:cont,_f2f);var self=this;return when(p&&p.then?p:_f2d.parseDeferred,function(){delete self._contentSetterParams;if(!_f2c){if(self._started){self._startChildren();self._scheduleLayout();}self._onLoadHandler(cont);}});},_onError:function(type,err,_f30){this.onLoadDeferred.reject(err);var _f31=this["on"+type+"Error"].call(this,err);if(_f30){console.error(_f30,err);}else{if(_f31){this._setContent(_f31,true);}}},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage;},onContentError:function(){},onDownloadError:function(){return this.errorMessage;},onDownloadEnd:function(){}});});},"esri/PopupBase":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Color","dojo/_base/Deferred","dojo/has","esri/kernel","esri/graphic","esri/geometry/Point","esri/geometry/jsonUtils","esri/geometry/mathUtils","esri/geometry/webMercatorUtils","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/CartographicLineSymbol","esri/symbols/SimpleFillSymbol","esri/Evented","dojo/has!extend-esri?esri/PopupInfo"],function(_f32,lang,_f33,_f34,_f35,has,_f36,_f37,_f38,_f39,_f3a,_f3b,_f3c,_f3d,_f3e,_f3f,_f40){var _f41=_f32(_f40,{declaredClass:"esri.PopupBase",_evtMap:{"set-features":true,"clear-features":true,"selection-change":true,"dfd-complete":true},onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){},initialize:function(){this.count=0;this.selectedIndex=-1;},cleanup:function(){this.features=this.deferreds=null;},setFeatures:function(arg){if(!arg||!arg.length){return;}this.clearFeatures();var _f42,_f43;if(arg[0] instanceof _f35){_f43=arg;}else{_f42=arg;}if(_f42){this._updateFeatures(null,_f42);}else{this.deferreds=_f43;_f43=_f43.slice(0);_f33.forEach(_f43,function(dfd){dfd.addBoth(lang.hitch(this,this._updateFeatures,dfd));},this);}},clearFeatures:function(){this.features=this.deferreds=this._marked=null;this.count=0;var _f44=this.selectedIndex;this.selectedIndex=-1;if(_f44>-1){this.onSelectionChange();}this.onClearFeatures();},getSelectedFeature:function(){var _f45=this.features;if(_f45){return _f45[this.selectedIndex];}},select:function(_f46){if(_f46<0||_f46>=this.count){return;}this.selectedIndex=_f46;this.onSelectionChange();},enableHighlight:function(map){this._highlighted=map.graphics.add(new _f37(new _f38(0,0,map.spatialReference)));this._highlighted.hide();if(!this.markerSymbol){var _f47=(this.markerSymbol=new _f3c());_f47.setStyle(_f3c.STYLE_TARGET);_f47._setDim(16,16,7);_f47.setOutline(new _f3e(_f3d.STYLE_SOLID,new _f34([0,255,255]),2,_f3e.CAP_ROUND,_f3e.JOIN_ROUND));_f47.setColor(new _f34([0,0,0,0]));}if(!this.lineSymbol){this.lineSymbol=new _f3d(_f3d.STYLE_SOLID,new _f34([0,255,255]),2);}if(!this.fillSymbol){this.fillSymbol=new _f3f(_f3f.STYLE_NULL,new _f3d(_f3d.STYLE_SOLID,new _f34([0,255,255]),2),new _f34([0,0,0,0]));}},disableHighlight:function(map){var _f48=this._highlighted;if(_f48){_f48.hide();map.graphics.remove(_f48);delete this._highlighted;}this.markerSymbol=this.lineSymbol=this.fillSymbol=null;},showHighlight:function(){var _f49=this.features&&this.features[this.selectedIndex];if(this._highlighted&&_f49&&_f49.geometry){this._highlighted.show();}},hideHighlight:function(){if(this._highlighted){this._highlighted.hide();}},updateHighlight:function(map,_f4a){var _f4b=_f4a.geometry,_f4c=this._highlighted;if(!_f4b||!_f4c){if(_f4c){_f4c.hide();}return;}_f4c.hide();if(!_f4c.getLayer()&&map){map.graphics.add(_f4c);}_f4c.setGeometry(_f39.fromJson(_f4b.toJson()));var _f4d;switch(_f4b.type){case "point":case "multipoint":_f4d=this.markerSymbol;_f4d.setOffset(0,0);_f4d.setAngle(0);var lyr=_f4a.getLayer();if(lyr){var _f4e=lyr._getSymbol(_f4a),_f4f,_f50,xoff=0,yoff=0,_f51=0;if(_f4e){switch(_f4e.type){case "simplemarkersymbol":_f4f=_f50=(_f4e.size||0);break;case "picturemarkersymbol":_f4f=(_f4e.width||0);_f50=(_f4e.height||0);break;}xoff=_f4e.xoffset||0;yoff=_f4e.yoffset||0;_f51=_f4e.angle||0;}if(_f4f&&_f50){_f4d._setDim(_f4f+1,_f50+1,7);}_f4d.setOffset(xoff,yoff);_f4d.setAngle(_f51);}break;case "polyline":_f4d=this.lineSymbol;break;case "polygon":_f4d=this.fillSymbol;break;}_f4c.setSymbol(_f4d);},showClosestFirst:function(_f52){var _f53=this.features;if(_f53&&_f53.length){if(_f53.length>1){var i,_f54=Infinity,_f55=-1,geom,_f56=_f3a.getLength,_f57,_f58=_f52.spatialReference,_f59,_f5a;_f52=_f52.normalize();for(i=_f53.length-1;i>=0;i--){geom=_f53[i].geometry;if(!geom){continue;}_f59=geom.spatialReference;_f57=0;try{_f5a=(geom.type==="point")?geom:geom.getExtent().getCenter();_f5a=_f5a.normalize();if(_f58&&_f59&&!_f58.equals(_f59)&&_f58._canProject(_f59)){_f5a=_f58.isWebMercator()?_f3b.geographicToWebMercator(_f5a):_f3b.webMercatorToGeographic(_f5a);}_f57=_f56(_f52,_f5a);}catch(e){}if(_f57>0&&_f57<_f54){_f54=_f57;_f55=i;}}if(_f55>0){_f53.splice(0,0,_f53.splice(_f55,1)[0]);this.select(0);}}}else{if(this.deferreds){this._marked=_f52;}}},_unbind:function(dfd){var _f5b=_f33.indexOf(this.deferreds,dfd);if(_f5b===-1){return;}this.deferreds.splice(_f5b,1);if(!this.deferreds.length){this.deferreds=null;return 2;}return 1;},_fireComplete:function(_f5c){var _f5d=this._marked;if(_f5d){this._marked=null;this.showClosestFirst(_f5d);}this.onDfdComplete(_f5c);},_updateFeatures:function(dfd,_f5e){if(dfd){if(this.deferreds){var res=this._unbind(dfd);if(!res){return;}if(_f5e&&_f5e instanceof Error){this._fireComplete(_f5e);if(res===2){this.onSetFeatures();}return;}if(_f5e&&_f5e.length){if(!this.features){this.features=_f5e;this.count=_f5e.length;this.selectedIndex=0;this._fireComplete();if(res===2){this.onSetFeatures();}this.select(0);}else{var _f5f=_f33.filter(_f5e,function(_f60){return _f33.indexOf(this.features,_f60)===-1;},this);this.features=this.features.concat(_f5f);this.count=this.features.length;this._fireComplete();if(res===2){this.onSetFeatures();}}}else{this._fireComplete();if(res===2){this.onSetFeatures();}}}}else{this.features=_f5e;this.count=_f5e.length;this.selectedIndex=0;this.onSetFeatures();this.select(0);}}});if(has("extend-esri")){_f36.PopupBase=_f41;}return _f41;});},"esri/TouchEvents":function(){define(["dojo/_base/declare","dojo/_base/html","dojo/_base/lang","dojo/_base/sniff","dojo/dom","esri/kernel","esri/Evented","esri/geometry/Point","esri/geometry/ScreenPoint"],function(_f61,html,lang,has,dom,_f62,_f63,_f64,_f65){var _f66=_f61([_f63],{declaredClass:"esri.TouchEvents",tapRadius:8,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,map:null,constructor:function(node,_f67){this.node=node;lang.mixin(this,_f67);html.setSelectable(node,false);this._touchStart=lang.hitch(this,this._touchStart);this._touchMove=lang.hitch(this,this._touchMove);this._touchEnd=lang.hitch(this,this._touchEnd);this._touchCancel=lang.hitch(this,this._touchCancel);node.addEventListener("touchstart",this._touchStart,false);node.addEventListener("touchmove",this._touchMove,false);node.addEventListener("touchend",this._touchEnd,false);node.addEventListener("touchcancel",this._touchCancel,false);if(this.map){this._mouseOver=lang.hitch(this,this._mouseOver);this._mouseOut=lang.hitch(this,this._mouseOut);this._mouseDown=lang.hitch(this,this._mouseDown);this._mouseUp=lang.hitch(this,this._mouseUp);this._mouseClick=lang.hitch(this,this._mouseClick);node.addEventListener("mouseover",this._mouseOver,false);node.addEventListener("mouseout",this._mouseOut,false);node.addEventListener("mousedown",this._mouseDown,false);node.addEventListener("mouseup",this._mouseUp,false);node.addEventListener("click",this._mouseClick,false);}this._numTouches=0;this._nodeTouches=[];this._touches={};this._touchIds=[];this._taps=[];this._immediate=false;},_touchStart:function(_f68){var _f69=this._touches,i,len=_f68.changedTouches.length,_f6a,info,_f6b,_f6c,ts=(new Date()).getTime();if(has("android")&&has("safari")&&_f68.targetTouches.length===1&&_f68.touches.length===_f68.targetTouches.length&&_f68.targetTouches.length===_f68.changedTouches.length&&_f68.changedTouches[0].identifier===0&&_f69[_f68.changedTouches[0].identifier]){return;}this._addTouch(_f68);for(i=0;i<len;i++){_f6a=_f68.changedTouches[i];info=(_f69[_f6a.identifier]={});info.startX=_f6a.pageX;info.startY=_f6a.pageY;info.startTS=ts;if(this._touchIds.indexOf(_f6a.identifier)===-1){this._touchIds.push(_f6a.identifier);}}if(this._swipeActive){_f6b=this._nodeTouches[0];}if(this._pinchActive){_f6c=this._nodeTouches[1];}if(this._numTouches===1){if(this._swipeActive){this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(_f68,_f6b));}else{if(this._pinchActive){this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(_f68,[_f6b,_f6c]));}}}else{if(this._numTouches===2){if(this._swipeActive){if(_f6b){info=_f69[this._touchIds[0]];info.startX=_f6b.pageX;info.startY=_f6b.pageY;info.moved=false;}this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(_f68,_f6b));}}else{if(this._swipeActive){this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(_f68,_f6b));}else{if(this._pinchActive){this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(_f68,[_f6b,_f6c]));}}}}},_touchMove:function(_f6d){_f6d.preventDefault();this._updateTouch(_f6d);var _f6e=this._touches,i,len=_f6d.changedTouches.length,_f6f,info,dx,dy,_f70;if(has("android")&&has("safari")&&_f6d.targetTouches.length===1&&_f6d.touches.length===_f6d.targetTouches.length&&_f6d.targetTouches.length===_f6d.changedTouches.length&&_f6d.changedTouches[0].identifier===0&&_f6e[_f6d.changedTouches[0].identifier]&&this._touchIds.length>1){return;}for(i=0;i<len;i++){_f6f=_f6d.changedTouches[i];info=_f6e[_f6f.identifier];if(!info){continue;}dx=Math.abs(_f6f.pageX-info.startX);dy=Math.abs(_f6f.pageY-info.startY);if(!info.moved&&((dx>=this.tapRadius)||(dy>=this.tapRadius))){info.moved=info.absMoved=true;}_f70=_f70?_f70:info.moved;}if(this._numTouches===1){var _f71=_f6d.changedTouches[0];if(!this._swipeActive){if(_f70){this._swipeActive=true;this._fire("onSwipeStart",this._processTouchEvent(_f6d,_f71));}}else{this._fire("onSwipeMove",this._processTouchEvent(_f6d,_f71));}}else{if(this._numTouches===2){var _f72=this._nodeTouches[0],_f73=this._nodeTouches[1];if(!this._pinchActive){if(_f70){var _f74=_f6e[_f72.identifier],_f75=_f6e[_f73.identifier],_f76=Math.abs(_f74.startX-_f75.startX),_f77=Math.abs(_f74.startY-_f75.startY),_f78=Math.sqrt((_f76*_f76)+(_f77*_f77)),_f79=Math.abs(_f72.pageX-_f73.pageX),_f7a=Math.abs(_f72.pageY-_f73.pageY),_f7b=Math.sqrt((_f79*_f79)+(_f7a*_f7a));if(Math.abs(_f7b-_f78)>=(2*this.tapRadius)){this._pinchActive=true;this._fire("onPinchStart",this._processTouchEvent(_f6d,[_f72,_f73]));}}}else{this._fire("onPinchMove",this._processTouchEvent(_f6d,[_f72,_f73]));}}}},_touchEnd:function(_f7c){this._removeTouch(_f7c);var _f7d=this._touches,_f7e=_f7c.changedTouches,i,len=_f7e.length,_f7f,info,ts=(new Date()).getTime(),ids=this._touchIds;for(i=0;i<len;i++){info=_f7d[_f7e[i].identifier];if(!info){continue;}if(info.absMoved){_f7f=true;}info.pageX=_f7e[i].pageX;info.pageY=_f7e[i].pageY;info.endTS=ts;}if(this._numTouches===0){this._touches={};this._touchIds=[];if(this._swipeActive){this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(_f7c,_f7e[0]));}else{if(this._pinchActive){this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(_f7c,_f7e));}else{if(!_f7f){var _f80=Infinity,_f81=-Infinity,_f82=Infinity,_f83=-Infinity,_f84=this.tapStartTolerance,_f85=[],_f86=true;for(i=0;i<ids.length;i++){info=_f7d[ids[i]];_f85.push(info);if(info.startTS<_f80){_f80=info.startTS;}if(info.startTS>_f81){_f81=info.startTS;}if(info.endTS<_f82){_f82=info.endTS;}if(info.endTS>_f83){_f83=info.endTS;}delete _f7d[ids[i]];}if(_f85.length===1&&_f7e[0]){var dx=Math.abs(_f7e[0].pageX-_f85[0].startX),dy=Math.abs(_f7e[0].pageY-_f85[0].startY);if((dx>=this.tapRadius)||(dy>=this.tapRadius)){_f86=false;}}if(_f86&&Math.abs(_f81-_f80)<=_f84&&Math.abs(_f83-_f82)<=_f84){this._basicTap(_f7c,_f85);}}}}}else{if(this._numTouches===1){if(this._pinchActive){var _f87=this._nodeTouches[0];info=_f7d[_f87.identifier];info.startX=_f87.pageX;info.startY=_f87.pageY;info.moved=false;this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(_f7c,[_f7e[0],_f87]));}}}},_touchCancel:function(_f88){if(this._numTouches){this._touchEnd(_f88);}},_basicTap:function(_f89,_f8a){var ts=(new Date()).getTime(),self=this;_f89=this._processTouchEvent(_f89,_f8a);this._taps.push({touchInfos:_f8a,ts:ts,event:_f89});if(this._taps.length>2){this._taps.shift();}this._fire("onBasicTap",_f89);clearTimeout(this._tapTimer);if(this._immediate){this._analyzeTap(true);}else{var _f8b=(this._taps.length===2)?(this.doubleTapDuration/2):this.doubleTapDuration;this._tapTimer=setTimeout(function(){var that=self;self=null;clearTimeout(that._tapTimer);that._analyzeTap();},_f8b);}},_analyzeTap:function(_f8c){var taps=this._taps,_f8d=taps[0],_f8e=taps[1],_f8f=_f8d.touchInfos,_f90=_f8e&&_f8e.touchInfos;if(!taps.length){return;}if(!_f8c){this._taps=[];}if(_f8d&&_f8e){if(_f8f.length===_f90.length){if((_f8e.ts-_f8d.ts)<=this.doubleTapDuration){var _f91,dx,dy;if(_f8f.length===1){dx=Math.abs(_f8f[0].startX-_f90[0].startX);dy=Math.abs(_f8f[0].startY-_f90[0].startY);_f91=(dx<=this.doubleTapRadius)&&(dy<=this.doubleTapRadius);}else{_f91=true;}if(_f91){this._processedDoubleTap(taps);}else{this._processedTap(_f8e);}}else{this._processedTap(_f8e);}}else{this._processedTap(_f8e);}}else{this._processedTap(_f8d||_f8e);}},_processedTap:function(tap){var _f92=tap.event;this._fire("onProcessedTap",_f92);if(tap.touchInfos.length===1){this._fire("onTap",this._fixEvent(_f92));}else{if(tap.touchInfos.length===2){this._fire("onTwoFingerTap",_f92);}}},_processedDoubleTap:function(taps){var _f93=(taps[1].touchInfos.length===1),_f94,evts;if(_f93){_f94=[this._fixEvent(taps[0].event),this._fixEvent(taps[1].event)];_f94[1].relatedEvents=_f94;}evts=[taps[0].event,taps[1].event];evts[1].relatedEvents=evts;this._fire("onProcessedDoubleTap",evts[1]);if(_f93){this._fire("onDoubleTap",_f94[1]);this._fire("onDblClick",_f94[1]);}},_addTouch:function(_f95){var i,_f96=_f95.changedTouches,_f97=this._nodeTouches,j,_f98,_f99;this._numTouches+=_f96.length;for(i=0;i<_f96.length;i++){_f98=_f97.length;_f99=false;for(j=0;j<_f98;j++){_f99=(_f97[j].identifier===_f96[i].identifier);if(_f99){break;}}if(_f99){this._numTouches--;}else{_f97.push(_f96[i]);}}for(i=_f97.length-1;i>=0;i--){if(!dom.isDescendant(_f97[i].target,document.body)){_f97.splice(i,1);this._numTouches--;}}if(this._numTouches<0){this._numTouches=0;}},_removeTouch:function(_f9a){var i,_f9b=[],_f9c=[],_f9d=_f9a.changedTouches,_f9e=this._nodeTouches;this._numTouches-=_f9d.length;if(this._numTouches<0){this._numTouches=0;}for(i=0;i<_f9d.length;i++){_f9b.push(_f9d[i].identifier);}for(i=_f9e.length-1;i>=0;i--){if(_f9b.indexOf(_f9e[i].identifier)!==-1){_f9c.push(_f9e.splice(i,1)[0]);}}return _f9c;},_updateTouch:function(_f9f){var i,ids=[],idx,_fa0=_f9f.changedTouches,_fa1=this._nodeTouches;for(i=0;i<_fa0.length;i++){ids.push(_fa0[i].identifier);}for(i=0;i<_fa1.length;i++){idx=ids.indexOf(_fa1[i].identifier);if(idx!==-1){_fa1.splice(i,1,_fa0[idx]);}}},_mouseOver:function(_fa2){this._fire("onMouseOver",this._processMouseEvent(_fa2));},_mouseOut:function(_fa3){this._fire("onMouseOut",this._processMouseEvent(_fa3));},_mouseDown:function(_fa4){this._fire("onMouseDown",this._processMouseEvent(_fa4));},_mouseUp:function(_fa5){this._fire("onMouseUp",this._processMouseEvent(_fa5));},_mouseClick:function(_fa6){this._fire("onClick",this._processMouseEvent(_fa6));},_fire:function(_fa7,evt){if(this[_fa7]){this[_fa7](evt);}if(this.map){if(this.map[_fa7]){this.map[_fa7](evt);}}},_fixEvent:function(_fa8){var _fa9={},i;for(i in _fa8){_fa9[i]=_fa8[i];}if(this.map){_fa9.screenPoint=_fa9.screenPoints[0];_fa9.mapPoint=_fa9.mapPoints[0];}return _fa9;},_processTouchEvent:function(evt,_faa){var map=this.map,pos=map&&map.position,_fab=0;if(pos&&_faa){if(lang.isArray(_faa)){var i,_fac;evt.screenPoints=[];evt.mapPoints=[];for(i=0;i<_faa.length;i++){if(_faa[i]){_fac=new _f65(_faa[i].pageX-pos.x,_faa[i].pageY-pos.y);evt.screenPoints.push(_fac);evt.mapPoints.push(map.extent?map.toMap(_fac):new _f64());}else{_fab++;}}}else{evt.screenPoint=new _f65(_faa.pageX-pos.x,_faa.pageY-pos.y);evt.mapPoint=map.extent?map.toMap(evt.screenPoint):new _f64();}}evt.numPoints=_faa?(lang.isArray(_faa)?(_faa.length-_fab):1):0;return evt;},_processMouseEvent:function(evt){var map=this.map,pos=map&&map.position;if(pos){evt.screenPoint=new _f65(evt.pageX-pos.x,evt.pageY-pos.y);evt.mapPoint=map.extent?map.toMap(evt.screenPoint):new _f64();}return evt;},setImmediateTap:function(_fad){this._immediate=_fad;},destroy:function(){var node=this.node;node.removeEventListener("touchstart",this._touchStart,false);node.removeEventListener("touchmove",this._touchMove,false);node.removeEventListener("touchend",this._touchEnd,false);node.removeEventListener("touchcancel",this._touchCancel,false);if(this.map){node.removeEventListener("mouseover",this._mouseOver,false);node.removeEventListener("mouseout",this._mouseOut,false);node.removeEventListener("mousedown",this._mouseDown,false);node.removeEventListener("mouseup",this._mouseUp,false);node.removeEventListener("click",this._mouseClick,false);}html.setSelectable(node,true);clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._nodeTouches=this._touches=this._touchIds=this._taps=null;}});if(has("extend-esri")){_f62.TouchEvents=_f66;}return _f66;});},"esri/tasks/GeneralizeParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/geometry/jsonUtils"],function(_fae,lang,_faf,_fb0,has,_fb1,_fb2){var _fb3=_fae(null,{declaredClass:"esri.tasks.GeneralizeParameters",geometries:null,deviationUnit:null,maxDeviation:null,toJson:function(){var _fb4=_faf.map(this.geometries,function(geom){return geom.toJson();});var json={};if(this.geometries&&this.geometries.length>0){json.geometries=_fb0.toJson({geometryType:_fb2.getJsonType(this.geometries[0]),geometries:_fb4});json.sr=_fb0.toJson(this.geometries[0].spatialReference.toJson());}if(this.deviationUnit){json.deviationUnit=this.deviationUnit;}if(this.maxDeviation){json.maxDeviation=this.maxDeviation;}return json;}});if(has("extend-esri")){lang.setObject("tasks.GeneralizeParameters",_fb3,_fb1);}return _fb3;});},"url:dijit/form/templates/ValidationTextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n","esri/tasks/GeometryService":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/_base/Deferred","dojo/has","esri/kernel","esri/request","esri/deferredUtils","esri/tasks/Task","esri/geometry/Extent","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Multipoint","esri/geometry/jsonUtils"],function(_fb5,lang,_fb6,_fb7,_fb8,has,_fb9,_fba,_fbb,Task,_fbc,_fbd,_fbe,_fbf,_fc0){var _fc1=_fb5(Task,{declaredClass:"esri.tasks.GeometryService",_eventMap:{"areas-and-lengths-complete":["result"],"auto-complete-complete":["geometries"],"buffer-complete":["geometries"],"convex-hull-complete":["geometry"],"cut-complete":["result"],"difference-complete":["geometries"],"distance-complete":["distance"],"generalize-complete":["geometries"],"intersect-complete":["geometries"],"label-points-complete":["geometries"],"lengths-complete":["result"],"offset-complete":["geometries"],"project-complete":["geometries"],"relation-complete":["relations"],"reshape-complete":["geometry"],"simplify-complete":["geometries"],"trim-extend-complete":["geometries"],"union-complete":["geometry"]},constructor:function(url){var _fc2=lang.hitch;this._projectHandler=_fc2(this,this._projectHandler);this._simplifyHandler=_fc2(this,this._simplifyHandler);this._bufferHandler=_fc2(this,this._bufferHandler);this._areasAndLengthsHandler=_fc2(this,this._areasAndLengthsHandler);this._lengthsHandler=_fc2(this,this._lengthsHandler);this._labelPointsHandler=_fc2(this,this._labelPointsHandler);this._relationHandler=_fc2(this,this._relationHandler);this._convexHullHandler=_fc2(this,this._convexHullHandler);this._unionHandler=_fc2(this,this._unionHandler);this._autoCompleteHandler=_fc2(this,this._autoCompleteHandler);this._reshapeHandler=_fc2(this,this._reshapeHandler);this._cutHandler=_fc2(this,this._cutHandler);this._intersectHandler=_fc2(this,this._intersectHandler);this._differenceHandler=_fc2(this,this._differenceHandler);this._trimExtendHandler=_fc2(this,this._trimExtendHandler);this._densifyHandler=_fc2(this,this._densifyHandler);this._generalizeHandler=_fc2(this,this._densifyHandler);this._offsetHandler=_fc2(this,this._offsetHandler);this._distanceHandler=_fc2(this,this._distanceHandler);this.registerConnectEvents();},_encodeGeometries:function(_fc3){var gs=[],i,il=_fc3.length;for(i=0;i<il;i++){gs.push(_fc3[i].toJson());}return {geometryType:_fc0.getJsonType(_fc3[0]),geometries:gs};},_decodeGeometries:function(_fc4,_fc5,sr){var _fc6=_fc0.getGeometryType(_fc5),_fc7=_fc4.geometries,fs=[],_fc8={spatialReference:sr.toJson()},_fc9=lang.mixin;_fb6.forEach(_fc7,function(g,i){fs[i]=new _fc6(_fc9(g,_fc8));});return fs;},_toProjectGeometry:function(_fca){var sr=_fca.spatialReference.toJson();if(_fca instanceof _fbc){return new _fbe({rings:[[[_fca.xmin,_fca.ymin],[_fca.xmin,_fca.ymax],[_fca.xmax,_fca.ymax],[_fca.xmax,_fca.ymin],[_fca.xmin,_fca.ymin]]],spatialReference:sr});}else{return new _fbd({paths:[[].concat(_fca.points)],spatialReference:sr});}},_fromProjectedGeometry:function(_fcb,_fcc,_fcd){if(_fcc==="esriGeometryEnvelope"){var ring=_fcb.rings[0];return new _fbc(ring[0][0],ring[0][1],ring[2][0],ring[2][1],_fcd);}else{return new _fbf({points:_fcb.paths[0],spatialReference:_fcd.toJson()});}},project:function(_fce,_fcf,_fd0,_fd1){var _fd2=lang.mixin({},this._url.query,{f:"json"}),_fd3;if(!_fce.geometries){_fd3=_fce[0];_fd2=lang.mixin(_fd2,{outSR:_fcf.wkid||_fb7.toJson(_fcf.toJson()),inSR:_fd3.spatialReference.wkid||_fb7.toJson(_fd3.spatialReference.toJson()),geometries:_fb7.toJson(this._encodeGeometries(_fce))});}else{_fd1=_fd0;_fd0=_fcf;_fcf=_fce.outSR;_fd3=_fce.geometries[0];_fd2=lang.mixin(_fd2,_fce.toJson());}var _fd4=_fc0.getJsonType(_fd3),_fd5=this._projectHandler,_fd6=this._errorHandler,dfd=new _fb8(_fbb._dfdCanceller);dfd._pendingDfd=_fba({url:this._url.path+"/project",content:_fd2,callbackParamName:"callback",load:function(r,i){_fd5(r,i,_fd4,_fcf,_fd0,_fd1,dfd);},error:function(r){_fd6(r,_fd1,dfd);}});return dfd;},_projectHandler:function(_fd7,io,_fd8,_fd9,_fda,_fdb,dfd){try{var fs=this._decodeGeometries(_fd7,_fd8,_fd9);this._successHandler([fs],"onProjectComplete",_fda,dfd);}catch(err){this._errorHandler(err,_fdb,dfd);}},onProjectComplete:function(){},simplify:function(_fdc,_fdd,_fde){var _fdf=_fdc[0].spatialReference;var _fe0=lang.mixin({},this._url.query,{f:"json",sr:_fdf.wkid?_fdf.wkid:_fb7.toJson(_fdf.toJson()),geometries:_fb7.toJson(this._encodeGeometries(_fdc))}),_fe1=_fc0.getJsonType(_fdc[0]),_fe2=this._simplifyHandler,_fe3=this._errorHandler,dfd=new _fb8(_fbb._dfdCanceller);dfd._pendingDfd=_fba({url:this._url.path+"/simplify",content:_fe0,callbackParamName:"callback",load:function(r,i){_fe2(r,i,_fe1,_fdf,_fdd,_fde,dfd);},error:function(r){_fe3(r,_fde,dfd);}});return dfd;},_simplifyHandler:function(_fe4,io,_fe5,sr,_fe6,_fe7,dfd){try{var fs=this._decodeGeometries(_fe4,_fe5,sr);this._successHandler([fs],"onSimplifyComplete",_fe6,dfd);}catch(err){this._errorHandler(err,_fe7,dfd);}},onSimplifyComplete:function(){},convexHull:function(_fe8,_fe9,_fea){var _feb=_fe8[0].spatialReference;var _fec=lang.mixin({},this._url.query,{f:"json",sr:_fb7.toJson(_feb.toJson()),geometries:_fb7.toJson(this._encodeGeometries(_fe8))}),_fed=this._convexHullHandler,_fee=this._errorHandler,dfd=new _fb8(_fbb._dfdCanceller);dfd._pendingDfd=_fba({url:this._url.path+"/convexHull",content:_fec,callbackParamName:"callback",load:function(r,i){_fed(r,i,_feb,_fe9,_fea,dfd);},error:function(r){_fee(r,_fea,dfd);}});return dfd;},_convexHullHandler:function(_fef,io,_ff0,_ff1,_ff2,dfd){try{var geom=_fc0.fromJson(_fef.geometry).setSpatialReference(_ff0);this._successHandler([geom],"onConvexHullComplete",_ff1,dfd);}catch(err){this._errorHandler(err,_ff2,dfd);}},onConvexHullComplete:function(){},union:function(_ff3,_ff4,_ff5){var _ff6=_ff3[0].spatialReference;var _ff7=lang.mixin({},this._url.query,{f:"json",sr:_fb7.toJson(_ff6.toJson()),geometries:_fb7.toJson(this._encodeGeometries(_ff3))}),_ff8=this._unionHandler,_ff9=this._errorHandler,dfd=new _fb8(_fbb._dfdCanceller);dfd._pendingDfd=_fba({url:this._url.path+"/union",content:_ff7,callbackParamName:"callback",load:function(r,i){_ff8(r,i,_ff6,_ff4,_ff5,dfd);},error:function(r){_ff9(r,_ff5,dfd);}});return dfd;},_unionHandler:function(_ffa,io,_ffb,_ffc,_ffd,dfd){try{var geom=_fc0.fromJson(_ffa.geometry).setSpatialReference(_ffb);this._successHandler([geom],"onUnionComplete",_ffc,dfd);}catch(err){this._errorHandler(err,_ffd,dfd);}},onUnionComplete:function(){},autoComplete:function(_ffe,_fff,_1000,_1001){var outSR=_ffe[0].spatialReference;var _1002=lang.mixin({},this._url.query,{f:"json",sr:_fb7.toJson(outSR.toJson()),polygons:_fb7.toJson(this._encodeGeometries(_ffe).geometries),polylines:_fb7.toJson(this._encodeGeometries(_fff).geometries)}),_1003=this._autoCompleteHandler,_1004=this._errorHandler,dfd=new _fb8(_fbb._dfdCanceller);dfd._pendingDfd=_fba({url:this._url.path+"/autoComplete",content:_1002,callbackParamName:"callback",load:function(r,i){_1003(r,i,outSR,_1000,_1001,dfd);},error:function(r){_1004(r,_1001,dfd);}});return dfd;},_autoCompleteHandler:function(_1005,io,outSR,_1006,_1007,dfd){try{var geoms=_1005.geometries,_1008=[],i,il=geoms.length;for(i=0;i<il;i++){_1008[i]=new _fbe({spatialReference:outSR,rings:geoms[i].rings});}this._successHandler([_1008],"onAutoCompleteComplete",_1006,dfd);}catch(err){this._errorHandler(err,_1007,dfd);}},onAutoCompleteComplete:function(){},reshape:function(_1009,_100a,_100b,_100c){var outSR=_1009.spatialReference;var _100d=lang.mixin({},this._url.query,{f:"json",sr:_fb7.toJson(outSR.toJson()),target:_fb7.toJson({geometryType:_fc0.getJsonType(_1009),geometry:_1009.toJson()}),reshaper:_fb7.toJson(_100a.toJson())}),_100e=this._reshapeHandler,_100f=this._errorHandler,dfd=new _fb8(_fbb._dfdCanceller);dfd._pendingDfd=_fba({url:this._url.path+"/reshape",content:_100d,callbackParamName:"callback",load:function(r,i){_100e(r,i,outSR,_100b,_100c,dfd);},error:function(r){_100f(r,_100c,dfd);}});return dfd;},_reshapeHandler:function(_1010,io,outSR,_1011,_1012,dfd){try{var geom=_fc0.fromJson(_1010.geometry).setSpatialReference(outSR);this._successHandler([geom],"onReshapeComplete",_1011,dfd);}catch(err){this._errorHandler(err,_1012,dfd);}},onReshapeComplete:function(){},cut:function(_1013,_1014,_1015,_1016){var outSR=_1013[0].spatialReference;var geoms=_fb6.map(_1013,function(_1017){return _1017.toJson();});var _1018=lang.mixin({},this._url.query,{f:"json",sr:_fb7.toJson(outSR.toJson()),target:_fb7.toJson({geometryType:_fc0.getJsonType(_1013[0]),geometries:geoms}),cutter:_fb7.toJson(_1014.toJson())}),_1019=this._cutHandler,_101a=this._errorHandler,dfd=new _fb8(_fbb._dfdCanceller);dfd._pendingDfd=_fba({url:this._url.path+"/cut",content:_1018,callbackParamName:"callback",load:function(r,i){_1019(r,i,outSR,_1015,_1016,dfd);},error:function(r){_101a(r,_1016,dfd);}});return dfd;},_cutHandler:function(_101b,io,outSR,_101c,_101d,dfd){try{var geoms=_101b.geometries;var _101e={};_101e.cutIndexes=_101b.cutIndexes;_101e.geometries=[];_fb6.forEach(geoms,function(geom){_101e.geometries.push(_fc0.fromJson(geom).setSpatialReference(outSR));});this._successHandler([_101e],"onCutComplete",_101c,dfd);}catch(err){this._errorHandler(err,_101d,dfd);}},onCutComplete:function(){},intersect:function(_101f,_1020,_1021,_1022){var outSR=_101f[0].spatialReference;var _1023=lang.mixin({},this._url.query,{f:"json",sr:_fb7.toJson(outSR.toJson()),geometries:_fb7.toJson(this._encodeGeometries(_101f)),geometry:_fb7.toJson({geometryType:_fc0.getJsonType(_1020),geometry:_1020.toJson()})}),_1024=this._intersectHandler,_1025=this._errorHandler,dfd=new _fb8(_fbb._dfdCanceller);dfd._pendingDfd=_fba({url:this._url.path+"/intersect",content:_1023,callbackParamName:"callback",load:function(r,i){_1024(r,i,outSR,_1021,_1022,dfd);},error:function(r){_1025(r,_1022,dfd);}});return dfd;},_intersectHandler:function(_1026,io,outSR,_1027,_1028,dfd){try{var geoms=_1026.geometries,_1029=[];_fb6.forEach(geoms,function(geom){_1029.push(_fc0.fromJson(geom).setSpatialReference(outSR));});this._successHandler([_1029],"onIntersectComplete",_1027,dfd);}catch(err){this._errorHandler(err,_1028,dfd);}},onIntersectComplete:function(){},difference:function(_102a,_102b,_102c,_102d){var outSR=_102a[0].spatialReference;var _102e=lang.mixin({},this._url.query,{f:"json",sr:_fb7.toJson(outSR.toJson()),geometries:_fb7.toJson(this._encodeGeometries(_102a)),geometry:_fb7.toJson({geometryType:_fc0.getJsonType(_102b),geometry:_102b.toJson()})}),_102f=this._differenceHandler,_1030=this._errorHandler,dfd=new _fb8(_fbb._dfdCanceller);dfd._pendingDfd=_fba({url:this._url.path+"/difference",content:_102e,callbackParamName:"callback",load:function(r,i){_102f(r,i,outSR,_102c,_102d,dfd);},error:function(r){_1030(r,_102d,dfd);}});return dfd;},_differenceHandler:function(_1031,io,outSR,_1032,_1033,dfd){try{var geoms=_1031.geometries,_1034=[];_fb6.forEach(geoms,function(geom){_1034.push(_fc0.fromJson(geom).setSpatialReference(outSR));});this._successHandler([_1034],"onDifferenceComplete",_1032,dfd);}catch(err){this._errorHandler(err,_1033,dfd);}},onDifferenceComplete:function(){},buffer:function(_1035,_1036,_1037){var _1038=lang.mixin({},this._url.query,{f:"json"},_1035.toJson()),sr=_1035.outSpatialReference||_1035.geometries[0].spatialReference,_1039=this._bufferHandler,_103a=this._errorHandler,dfd=new _fb8(_fbb._dfdCanceller);dfd._pendingDfd=_fba({url:this._url.path+"/buffer",content:_1038,callbackParamName:"callback",load:function(r,i){_1039(r,i,sr,_1036,_1037,dfd);},error:function(r){_103a(r,_1037,dfd);}});return dfd;},_bufferHandler:function(_103b,io,sr,_103c,_103d,dfd){try{var geoms=_103b.geometries,_103e=[],i,il=geoms.length;for(i=0;i<il;i++){_103e[i]=new _fbe({spatialReference:sr,rings:geoms[i].rings});}this._successHandler([_103e],"onBufferComplete",_103c,dfd);}catch(err){this._errorHandler(err,_103d,dfd);}},onBufferComplete:function(){},areasAndLengths:function(_103f,_1040,_1041){var _1042=lang.mixin({},this._url.query,{f:"json"},_103f.toJson()),_1043=this._areasAndLengthsHandler,_1044=this._errorHandler,dfd=new _fb8(_fbb._dfdCanceller);dfd._pendingDfd=_fba({url:this._url.path+"/areasAndLengths",content:_1042,callbackParamName:"callback",load:function(r,i){_1043(r,i,_1040,_1041,dfd);},error:function(r){_1044(r,_1041,dfd);}});return dfd;},_areasAndLengthsHandler:function(_1045,io,_1046,_1047,dfd){try{this._successHandler([_1045],"onAreasAndLengthsComplete",_1046,dfd);}catch(err){this._errorHandler(err,_1047,dfd);}},onAreasAndLengthsComplete:function(){},lengths:function(_1048,_1049,_104a){var _104b=lang.mixin({},this._url.query,{f:"json"},_1048.toJson()),_104c=this._lengthsHandler,_104d=this._errorHandler,dfd=new _fb8(_fbb._dfdCanceller);dfd._pendingDfd=_fba({url:this._url.path+"/lengths",content:_104b,callbackParamName:"callback",load:function(r,i){_104c(r,i,_1049,_104a,dfd);},error:function(r){_104d(r,_104a,dfd);}});return dfd;},_lengthsHandler:function(_104e,io,_104f,_1050,dfd){try{this._successHandler([_104e],"onLengthsComplete",_104f,dfd);}catch(err){this._errorHandler(err,_1050,dfd);}},onLengthsComplete:function(){},labelPoints:function(_1051,_1052,_1053){var geoms=_fb6.map(_1051,function(geom){return geom.toJson();});var sr=_1051[0].spatialReference,_1054=lang.mixin({},this._url.query,{f:"json",sr:sr.wkid?sr.wkid:_fb7.toJson(sr.toJson()),polygons:_fb7.toJson(geoms)}),_1055=this._labelPointsHandler,_1056=this._errorHandler,dfd=new _fb8(_fbb._dfdCanceller);dfd._pendingDfd=_fba({url:this._url.path+"/labelPoints",content:_1054,callbackParamName:"callback",load:function(r,i){_1055(r,i,_1051,sr,_1052,_1053,dfd);},error:function(r){_1056(r,_1053,dfd);}});return dfd;},_labelPointsHandler:function(_1057,io,_1058,sr,_1059,_105a,dfd){try{var geoms=_1057.labelPoints,_105b=[];_fb6.forEach(geoms,function(geom){_105b.push(_fc0.fromJson(geom).setSpatialReference(sr));});this._successHandler([_105b],"onLabelPointsComplete",_1059,dfd);}catch(err){this._errorHandler(err,_105a,dfd);}},onLabelPointsComplete:function(){},relation:function(_105c,_105d,_105e){var _105f=lang.mixin({},this._url.query,{f:"json"},_105c.toJson()),_1060=this._relationHandler,_1061=this._errorHandler,dfd=new _fb8(_fbb._dfdCanceller);dfd._pendingDfd=_fba({url:this._url.path+"/relation",content:_105f,callbackParamName:"callback",load:function(r,i){_1060(r,i,_105d,_105e,dfd);},error:function(r){_1061(r,_105e,dfd);}});return dfd;},_relationHandler:function(_1062,io,_1063,_1064,dfd){try{var relas=_1062.relations;this._successHandler([relas],"onRelationComplete",_1063,dfd);}catch(err){this._errorHandler(err,_1064,dfd);}},onRelationComplete:function(){},trimExtend:function(_1065,_1066,_1067){var _1068=lang.mixin({},this._url.query,{f:"json"},_1065.toJson()),outSR=_1065.sr,_1069=this._trimExtendHandler,_106a=this._errorHandler,dfd=new _fb8(_fbb._dfdCanceller);dfd._pendingDfd=_fba({url:this._url.path+"/trimExtend",content:_1068,callbackParamName:"callback",load:function(r,i){_1069(r,i,outSR,_1066,_1067,dfd);},error:function(r){_106a(r,_1067,dfd);}});return dfd;},_trimExtendHandler:function(_106b,io,outSR,_106c,_106d,dfd){try{var geoms=_106b.geometries,_106e=[],i,il=geoms.length;for(i=0;i<il;i++){_106e[i]=new _fbd({spatialReference:outSR,paths:geoms[i].paths});}this._successHandler([_106e],"onTrimExtendComplete",_106c,dfd);}catch(err){this._errorHandler(err,_106d,dfd);}},onTrimExtendComplete:function(){},densify:function(_106f,_1070,_1071){var _1072=lang.mixin({},this._url.query,{f:"json"},_106f.toJson()),outSR=_106f.geometries[0].spatialReference,_1073=this._densifyHandler,_1074=this._errorHandler,dfd=new _fb8(_fbb._dfdCanceller);dfd._pendingDfd=_fba({url:this._url.path+"/densify",content:_1072,callbackParamName:"callback",load:function(r,i){_1073(r,i,outSR,_1070,_1071,dfd);},error:function(r){_1074(r,_1071,dfd);}});return dfd;},_densifyHandler:function(_1075,io,outSR,_1076,_1077,dfd){try{var geoms=_1075.geometries,_1078=[];_fb6.forEach(geoms,function(geom){_1078.push(_fc0.fromJson(geom).setSpatialReference(outSR));});this._successHandler([_1078],"onDensifyComplete",_1076,dfd);}catch(err){this._errorHandler(err,_1077,dfd);}},onDensifyComplete:function(){},generalize:function(_1079,_107a,_107b){var _107c=lang.mixin({},this._url.query,{f:"json"},_1079.toJson()),outSR=_1079.geometries[0].spatialReference,_107d=this._generalizeHandler,_107e=this._errorHandler,dfd=new _fb8(_fbb._dfdCanceller);dfd._pendingDfd=_fba({url:this._url.path+"/generalize",content:_107c,callbackParamName:"callback",load:function(r,i){_107d(r,i,outSR,_107a,_107b,dfd);},error:function(r){_107e(r,_107b,dfd);}});return dfd;},_generalizeHandler:function(_107f,io,outSR,_1080,_1081,dfd){try{var geoms=_107f.geometries,_1082=[];_fb6.forEach(geoms,function(geom){_1082.push(_fc0.fromJson(geom).setSpatialReference(outSR));});this._successHandler([_1082],"onGeneralizeComplete",_1080,dfd);}catch(err){this._errorHandler(err,_1081,dfd);}},onGeneralizeComplete:function(){},offset:function(_1083,_1084,_1085){var _1086=lang.mixin({},this._url.query,{f:"json"},_1083.toJson()),outSR=_1083.geometries[0].spatialReference,_1087=this._offsetHandler,_1088=this._errorHandler,dfd=new _fb8(_fbb._dfdCanceller);dfd._pendingDfd=_fba({url:this._url.path+"/offset",content:_1086,callbackParamName:"callback",load:function(r,i){_1087(r,i,outSR,_1084,_1085,dfd);},error:function(r){_1088(r,_1085,dfd);}});return dfd;},_offsetHandler:function(_1089,io,outSR,_108a,_108b,dfd){try{var geoms=_1089.geometries,_108c=[];_fb6.forEach(geoms,function(geom){_108c.push(_fc0.fromJson(geom).setSpatialReference(outSR));});this._successHandler([_108c],"onOffsetComplete",_108a,dfd);}catch(err){this._errorHandler(err,_108b,dfd);}},onOffsetComplete:function(){},distance:function(_108d,_108e,_108f){var _1090=lang.mixin({},this._url.query,{f:"json"},_108d.toJson()),outSR=_108d.geometry1.spatialReference,_1091=this._distanceHandler,_1092=this._errorHandler,dfd=new _fb8(_fbb._dfdCanceller);dfd._pendingDfd=_fba({url:this._url.path+"/distance",content:_1090,callbackParamName:"callback",load:function(r,i){_1091(r,i,outSR,_108e,_108f,dfd);},error:function(r){_1092(r,_108f,dfd);}});return dfd;},_distanceHandler:function(_1093,io,outSR,_1094,_1095,dfd){try{_1093=_1093&&_1093.distance;this._successHandler([_1093],"onDistanceComplete",_1094,dfd);}catch(err){this._errorHandler(err,_1095,dfd);}},onDistanceComplete:function(){}});lang.mixin(_fc1,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});if(has("extend-esri")){lang.setObject("tasks.GeometryService",_fc1,_fb9);}return _fc1;});},"url:dijit/form/templates/TextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n","dijit/layout/utils":function(){define("dijit/layout/utils",["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","../main"],function(array,_1096,_1097,_1098,lang,dijit){var _1099=lang.getObject("layout",true,dijit);_1099.marginBox2contentBox=function(node,mb){var cs=_1098.getComputedStyle(node);var me=_1097.getMarginExtents(node,cs);var pb=_1097.getPadBorderExtents(node,cs);return {l:_1098.toPixelValue(node,cs.paddingLeft),t:_1098.toPixelValue(node,cs.paddingTop),w:mb.w-(me.w+pb.w),h:mb.h-(me.h+pb.h)};};function _109a(word){return word.substring(0,1).toUpperCase()+word.substring(1);};function size(_109b,dim){var _109c=_109b.resize?_109b.resize(dim):_1097.setMarginBox(_109b.domNode,dim);if(_109c){lang.mixin(_109b,_109c);}else{lang.mixin(_109b,_1097.getMarginBox(_109b.domNode));lang.mixin(_109b,dim);}};_1099.layoutChildren=function(_109d,dim,_109e,_109f,_10a0){dim=lang.mixin({},dim);_1096.add(_109d,"dijitLayoutContainer");_109e=array.filter(_109e,function(item){return item.region!="center"&&item.layoutAlign!="client";}).concat(array.filter(_109e,function(item){return item.region=="center"||item.layoutAlign=="client";}));array.forEach(_109e,function(child){var elm=child.domNode,pos=(child.region||child.layoutAlign);if(!pos){throw new Error("No region setting for "+child.id);}var _10a1=elm.style;_10a1.left=dim.l+"px";_10a1.top=dim.t+"px";_10a1.position="absolute";_1096.add(elm,"dijitAlign"+_109a(pos));var _10a2={};if(_109f&&_109f==child.id){_10a2[child.region=="top"||child.region=="bottom"?"h":"w"]=_10a0;}if(pos=="top"||pos=="bottom"){_10a2.w=dim.w;size(child,_10a2);dim.h-=child.h;if(pos=="top"){dim.t+=child.h;}else{_10a1.top=dim.t+dim.h+"px";}}else{if(pos=="left"||pos=="right"){_10a2.h=dim.h;size(child,_10a2);dim.w-=child.w;if(pos=="left"){dim.l+=child.w;}else{_10a1.left=dim.l+dim.w+"px";}}else{if(pos=="client"||pos=="center"){size(child,dim);}}}});};return {marginBox2contentBox:_1099.marginBox2contentBox,layoutChildren:_1099.layoutChildren};});},"esri/tasks/RasterData":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_10a3,lang,has,_10a4){var _10a5=_10a3(null,{declaredClass:"esri.tasks.RasterData",constructor:function(json){if(json){lang.mixin(this,json);}},url:null,format:null,itemID:null,toJson:function(){var json={};if(this.url){json.url=this.url;}if(this.format){json.format=this.format;}if(this.itemID){json.itemID=this.itemID;}return json;}});if(has("extend-esri")){lang.setObject("tasks.RasterData",_10a5,_10a4);}return _10a5;});},"esri/symbols/SimpleMarkerSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","dojox/gfx/_base","esri/kernel","esri/lang","esri/symbols/MarkerSymbol","esri/symbols/SimpleLineSymbol"],function(_10a6,lang,Color,has,_10a7,_10a8,_10a9,_10aa,_10ab){var _10ac={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"};var _10ad={style:_10ac.STYLE_CIRCLE,color:[255,255,255,0.25],size:12,angle:0,xoffset:0,yoffset:0};var SMS=_10a6(_10aa,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},constructor:function(json,size,_10ae,color){if(json){if(lang.isString(json)){this.style=json;if(size){this.size=size;}if(_10ae){this.outline=_10ae;}if(color){this.color=color;}}else{this.style=_10a9.valueOf(this._styles,this.style);if(json.outline){this.outline=new _10ab(json.outline);}}}else{lang.mixin(this,_10ad);this.size=_10a7.pt2px(this.size);this.outline=new _10ab(this.outline);this.color=new Color(this.color);}if(!this.style){this.style=_10ac.STYLE_CIRCLE;}},setStyle:function(style){this.style=style;return this;},setPath:function(path){this.path=path;this.setStyle(_10ac.STYLE_PATH);return this;},setOutline:function(_10af){this.outline=_10af;return this;},getStroke:function(){return this.outline&&this.outline.getStroke();},getFill:function(){return this.color;},_setDim:function(_10b0,_10b1,_10b2){this._targetWidth=_10b0;this._targetHeight=_10b1;this._spikeSize=_10b2;},getShapeDescriptors:function(){var shape,fill,_10b3;var style=this.style,size=this.size||_10a7.pt2px(_10ad.size),cx=0,cy=0,half=size/2,left=cx-half,right=cx+half,top=cy-half,_10b4=cy+half;switch(style){case _10ac.STYLE_CIRCLE:shape={type:"circle",cx:cx,cy:cy,r:half};fill=this.getFill();_10b3=this.getStroke();if(_10b3){_10b3.style=_10b3.style||"Solid";}break;case _10ac.STYLE_CROSS:shape={type:"path",path:"M "+left+",0 L "+right+",0 M 0,"+top+" L 0,"+_10b4+" E"};fill=null;_10b3=this.getStroke();break;case _10ac.STYLE_DIAMOND:shape={type:"path",path:"M "+left+",0 L 0,"+top+" L "+right+",0 L 0,"+_10b4+" L "+left+",0 E"};fill=this.getFill();_10b3=this.getStroke();break;case _10ac.STYLE_SQUARE:shape={type:"path",path:"M "+left+","+_10b4+" L "+left+","+top+" L "+right+","+top+" L "+right+","+_10b4+" L "+left+","+_10b4+" E"};fill=this.getFill();_10b3=this.getStroke();break;case _10ac.STYLE_X:shape={type:"path",path:"M "+left+","+_10b4+" L "+right+","+top+" M "+left+","+top+" L "+right+","+_10b4+" E"};fill=null;_10b3=this.getStroke();break;case _10ac.STYLE_PATH:shape={type:"path",path:this.path||""};fill=this.getFill();_10b3=this.getStroke();break;}return {defaultShape:shape,fill:fill,stroke:_10b3};},toJson:function(){var json=lang.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[this.style]}),_10b5=this.outline;if(_10b5){json.outline=_10b5.toJson();}json.path=this.path;return _10a9.fixJson(json);}});lang.mixin(SMS,_10ac);SMS.defaultProps=_10ad;if(has("extend-esri")){lang.setObject("symbol.SimpleMarkerSymbol",SMS,_10a8);_10a8.symbol.defaultSimpleMarkerSymbol=_10ad;}return SMS;});},"esri/tasks/Task":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","esri/kernel","esri/deferredUtils","esri/urlUtils","esri/Evented"],function(_10b6,lang,_10b7,has,_10b8,_10b9,_10ba,_10bb){var Task=_10b6(_10bb,{declaredClass:"esri.tasks._Task",_eventMap:{"error":["error"],"complete":["result"]},constructor:function(url){if(url&&lang.isString(url)){this._url=_10ba.urlToObject(this.url=url);}this.normalization=true;this._errorHandler=lang.hitch(this,this._errorHandler);this.registerConnectEvents();},_useSSL:function(){var _10bc=this._url,re=/^http:/i,rep="https:";if(this.url){this.url=this.url.replace(re,rep);}if(_10bc&&_10bc.path){_10bc.path=_10bc.path.replace(re,rep);}},_encode:function(_10bd,_10be,_10bf){var param,type,_10c0={},i,p,pl;for(i in _10bd){if(i==="declaredClass"){continue;}param=_10bd[i];type=typeof param;if(param!==null&&param!==undefined&&type!=="function"){if(lang.isArray(param)){_10c0[i]=[];pl=param.length;for(p=0;p<pl;p++){_10c0[i][p]=this._encode(param[p]);}}else{if(type==="object"){if(param.toJson){var json=param.toJson(_10bf&&_10bf[i]);if(param.declaredClass==="esri.tasks.FeatureSet"){if(json.spatialReference){json.sr=json.spatialReference;delete json.spatialReference;}}_10c0[i]=_10be?json:_10b7.toJson(json);}}else{_10c0[i]=param;}}}}return _10c0;},_successHandler:function(args,_10c1,_10c2,dfd){if(_10c1){this[_10c1].apply(this,args);}if(_10c2){_10c2.apply(null,args);}if(dfd){_10b9._resDfd(dfd,args);}},_errorHandler:function(err,_10c3,dfd){this.onError(err);if(_10c3){_10c3(err);}if(dfd){dfd.errback(err);}},setNormalization:function(_10c4){this.normalization=_10c4;},onError:function(){}});if(has("extend-esri")){_10b8.Task=Task;}return Task;});},"esri/tasks/RelationshipQuery":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_10c5,lang,has,_10c6){var _10c7=_10c5(null,{declaredClass:"esri.tasks.RelationshipQuery",definitionExpression:"",relationshipId:null,returnGeometry:false,objectIds:null,outSpatialReference:null,outFields:null,toJson:function(){var json={definitionExpression:this.definitionExpression,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},_10c8=this.objectIds,_10c9=this.outFields,outSR=this.outSpatialReference;if(_10c8){json.objectIds=_10c8.join(",");}if(_10c9){json.outFields=_10c9.join(",");}if(outSR){json.outSR=outSR.toJson();}json._ts=this._ts;return json;}});if(has("extend-esri")){lang.setObject("tasks.RelationshipQuery",_10c7,_10c6);}return _10c7;});},"esri/symbols/LineSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","dojox/gfx/_base","esri/kernel","esri/symbols/Symbol"],function(_10ca,lang,has,_10cb,_10cc,_10cd){var _10ce=_10ca(_10cd,{declaredClass:"esri.symbol.LineSymbol",constructor:function(json){if(lang.isObject(json)){this.width=_10cb.pt2px(this.width);}else{this.width=12;}},setWidth:function(width){this.width=width;return this;},toJson:function(){var width=_10cb.px2pt(this.width);width=isNaN(width)?undefined:width;return lang.mixin(this.inherited("toJson",arguments),{width:width});}});if(has("extend-esri")){lang.setObject("symbol.LineSymbol",_10ce,_10cc);}return _10ce;});},"esri/dijit/PopupRenderer":function(){define(["require","dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","dojo/has","dojo/query","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dijit/_Widget","dijit/_Templated","esri/kernel","esri/dijit/_EventedWidget","dojo/i18n!esri/nls/jsapi","dojo/NodeList-dom"],function(_10cf,_10d0,_10d1,lang,array,_10d2,has,query,dom,_10d3,_10d4,_10d5,_10d6,_10d7,_10d8,_10d9,_10da,_10db){var _10dc=0;var PR=_10d0([_10da,_10d7,_10d8],{declaredClass:"esri.dijit._PopupRenderer",constructor:function(){this._nls=lang.mixin({},_10db.widgets.popup);},templateString:"<div class='esriViewPopup'>"+"<div class='mainSection'>"+"<div class='header' dojoAttachPoint='_title'></div>"+"<div class='hzLine'></div>"+"<div dojoAttachPoint='_description'></div>"+"<div class='break'></div>"+"</div>"+"<div class='attachmentsSection hidden'>"+"<div>${_nls.NLS_attach}:</div>"+"<ul dojoAttachPoint='_attachmentsList'>"+"</ul>"+"<div class='break'></div>"+"</div>"+"<div class='mediaSection hidden'>"+"<div class='header' dojoAttachPoint='_mediaTitle'></div>"+"<div class='hzLine'></div>"+"<div class='caption' dojoAttachPoint='_mediaCaption'></div>"+"<div class='gallery' dojoAttachPoint='_gallery'>"+"<div class='mediaHandle prev' dojoAttachPoint='_prevMedia' dojoAttachEvent='onclick: _goToPrevMedia'></div>"+"<div class='mediaHandle next' dojoAttachPoint='_nextMedia' dojoAttachEvent='onclick: _goToNextMedia'></div>"+"<ul class='summary'>"+"<li class='image mediaCount hidden' dojoAttachPoint='_imageCount'>0</li>"+"<li class='image mediaIcon hidden'></li>"+"<li class='chart mediaCount hidden' dojoAttachPoint='_chartCount'>0</li>"+"<li class='chart mediaIcon hidden'></li>"+"</ul>"+"<div class='frame' dojoAttachPoint='_mediaFrame'></div>"+"</div>"+"</div>"+"<div class='editSummarySection hidden' dojoAttachPoint='_editSummarySection'>"+"<div class='break'></div>"+"<div class='break hidden' dojoAttachPoint='_mediaBreak'></div>"+"<div class='editSummary' dojoAttachPoint='_editSummary'></div>"+"</div>"+"</div>",showTitle:true,startup:function(){this.inherited(arguments);var _10dd=this.template,_10de=this.graphic,_10df=_10dd.getComponents(_10de),_10e0=this.showTitle?_10df.title:"",_10e1=_10df.description,_10e2=_10df.fields,_10e3=_10df.mediaInfos,_10e4=this.domNode,nls=this._nls;this._prevMedia.title=nls.NLS_prevMedia;this._nextMedia.title=nls.NLS_nextMedia;_10d3.set(this._title,"innerHTML",_10e0);if(!_10e0){_10d4.add(this._title,"hidden");}if(!_10e1&&_10e2){_10e1="";array.forEach(_10e2,function(row){_10e1+=("<tr valign='top'>");_10e1+=("<td class='attrName'>"+row[0]+"</td>");_10e1+=("<td class='attrValue'>"+row[1].replace(/^\s*(https?:\/\/[^\s]+)\s*$/i,"<a target='_blank' href='$1' title='$1'>"+nls.NLS_moreInfo+"</a>")+"</td>");_10e1+=("</tr>");});if(_10e1){_10e1="<table class='attrTable' cellpadding='0px' cellspacing='0px'>"+_10e1+"</table>";}}_10d3.set(this._description,"innerHTML",_10e1);if(!_10e1){_10d4.add(this._description,"hidden");}_10d2.query("a",this._description).forEach(function(node){_10d3.set(node,"target","_blank");});if(_10e0&&_10e1){_10d2.query(".mainSection .hzLine",_10e4).removeClass("hidden");}else{if(_10e0||_10e1){_10d2.query(".mainSection .hzLine",_10e4).addClass("hidden");}else{_10d2.query(".mainSection",_10e4).addClass("hidden");}}var dfd=(this._dfd=_10dd.getAttachments(_10de));if(dfd){dfd.addBoth(lang.hitch(this,this._attListHandler,dfd));_10d3.set(this._attachmentsList,"innerHTML","<li>"+nls.NLS_searching+"...</li>");_10d2.query(".attachmentsSection",_10e4).removeClass("hidden");}if(_10e3&&_10e3.length){_10d2.query(".mediaSection",_10e4).removeClass("hidden");dom.setSelectable(this._mediaFrame,false);this._mediaInfos=_10e3;this._mediaPtr=0;this._updateUI();this._displayMedia();}if(_10df.editSummary){_10d3.set(this._editSummary,"innerHTML",_10df.editSummary);if(_10e3&&_10e3.length){_10d4.remove(this._mediaBreak,"hidden");}_10d4.remove(this._editSummarySection,"hidden");}},destroy:function(){if(this._dfd){this._dfd.cancel();}this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._dfd=null;this.inherited(arguments);},_goToPrevMedia:function(){var ptr=this._mediaPtr-1;if(ptr<0){return;}this._mediaPtr--;this._updateUI();this._displayMedia();},_goToNextMedia:function(){var ptr=this._mediaPtr+1;if(ptr===this._mediaInfos.length){return;}this._mediaPtr++;this._updateUI();this._displayMedia();},_updateUI:function(){var infos=this._mediaInfos,count=infos.length,_10e5=this.domNode,_10e6=this._prevMedia,_10e7=this._nextMedia;if(count>1){var _10e8=0,_10e9=0;array.forEach(infos,function(info){if(info.type==="image"){_10e8++;}else{if(info.type.indexOf("chart")!==-1){_10e9++;}}});if(_10e8){_10d3.set(this._imageCount,"innerHTML",_10e8);_10d2.query(".summary .image",_10e5).removeClass("hidden");}if(_10e9){_10d3.set(this._chartCount,"innerHTML",_10e9);_10d2.query(".summary .chart",_10e5).removeClass("hidden");}}else{_10d2.query(".summary",_10e5).addClass("hidden");_10d4.add(_10e6,"hidden");_10d4.add(_10e7,"hidden");}var ptr=this._mediaPtr;if(ptr===0){_10d4.add(_10e6,"hidden");}else{_10d4.remove(_10e6,"hidden");}if(ptr===count-1){_10d4.add(_10e7,"hidden");}else{_10d4.remove(_10e7,"hidden");}this._destroyFrame();},_displayMedia:function(){var info=this._mediaInfos[this._mediaPtr],_10ea=info.title,_10eb=info.caption,_10ec=_10d2.query(".mediaSection .hzLine",this.domNode)[0];_10d3.set(this._mediaTitle,"innerHTML",_10ea);_10d4[_10ea?"remove":"add"](this._mediaTitle,"hidden");_10d3.set(this._mediaCaption,"innerHTML",_10eb);_10d4[_10eb?"remove":"add"](this._mediaCaption,"hidden");_10d4[(_10ea&&_10eb)?"remove":"add"](_10ec,"hidden");this._rid=null;if(info.type==="image"){this._showImage(info.value);}else{var self=this,_10ed=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"],_10ee=info.value.theme||this.chartTheme||"esri/dijit/Rainbow";if(lang.isString(_10ee)){_10ee=_10ee.replace(/\./gi,"/");if(_10ee.indexOf("/")===-1){_10ee="dojox/charting/themes/"+_10ee;}_10ed.push(_10ee);}try{var rid=(this._rid=_10dc++);_10cf(_10ed,function(_10ef,_10f0,theme){if(rid===self._rid){self._rid=null;self._showChart(info.type,info.value,_10ef,_10f0,theme);}});}catch(err){console.log("PopupRenderer: error loading modules");}}},_showImage:function(value){_10d4.add(this._mediaFrame,"image");var _10f1=_10d6.get(this._gallery,"height"),html="<img class='esriPopupMediaImage' src='"+value.sourceURL+"' />";if(value.linkURL){html="<a target='_blank' href='"+value.linkURL+"'>"+html+"</a>";}_10d3.set(this._mediaFrame,"innerHTML",html);var img=_10d2.query(".esriPopupMediaImage",this._mediaFrame)[0],self=this,_10f2;_10f2=_10d1.connect(img,"onload",function(){_10d1.disconnect(_10f2);_10f2=null;self._imageLoaded(img,_10f1);});},_showChart:function(type,value,_10f3,_10f4,theme){_10d4.remove(this._mediaFrame,"image");var chart=this._chart=new _10f3(_10d5.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});if(theme){chart.setTheme(theme);}switch(type){case "piechart":chart.addPlot("default",{type:"Pie",labels:false});chart.addSeries("Series A",value.fields);break;case "linechart":chart.addPlot("default",{type:"Markers"});chart.addAxis("x",{min:0,majorTicks:false,minorTicks:false,majorLabels:false,minorLabels:false});chart.addAxis("y",{includeZero:true,vertical:true,fixUpper:"minor"});array.forEach(value.fields,function(info,idx){info.x=idx+1;});chart.addSeries("Series A",value.fields);break;case "columnchart":chart.addPlot("default",{type:"Columns",gap:3});chart.addAxis("y",{includeZero:true,vertical:true,fixUpper:"minor"});chart.addSeries("Series A",value.fields);break;case "barchart":chart.addPlot("default",{type:"Bars",gap:3});chart.addAxis("x",{includeZero:true,fixUpper:"minor",minorLabels:false});chart.addAxis("y",{vertical:true,majorTicks:false,minorTicks:false,majorLabels:false,minorLabels:false});chart.addSeries("Series A",value.fields);break;}this._action=new _10f4(chart);chart.render();},_destroyFrame:function(){this._rid=null;if(this._chart){this._chart.destroy();this._chart=null;}if(this._action){this._action.destroy();this._action=null;}_10d3.set(this._mediaFrame,"innerHTML","");},_imageLoaded:function(img,_10f5){var _10f6=img.height;if(_10f6<_10f5){var diff=Math.round((_10f5-_10f6)/2);_10d6.set(img,"marginTop",diff+"px");}},_attListHandler:function(dfd,_10f7){if(dfd===this._dfd){this._dfd=null;var html="";if(!(_10f7 instanceof Error)&&_10f7&&_10f7.length){array.forEach(_10f7,function(info){html+=("<li>");html+=("<a href='"+info.url+"' target='_blank'>"+(info.name||"[No name]")+"</a>");html+=("</li>");});}_10d3.set(this._attachmentsList,"innerHTML",html||"<li>"+this._nls.NLS_noAttach+"</li>");}}});if(has("extend-esri")){lang.setObject("dijit._PopupRenderer",PR,_10d9);}return PR;});},"url:dijit/templates/Dialog.html":"<div class=\"dijitDialog\" role=\"dialog\" aria-labelledby=\"${id}_title\">\n\t<div data-dojo-attach-point=\"titleBar\" class=\"dijitDialogTitleBar\">\n\t\t<span data-dojo-attach-point=\"titleNode\" class=\"dijitDialogTitle\" id=\"${id}_title\"\n\t\t\t\trole=\"heading\" level=\"1\"></span>\n\t\t<span data-dojo-attach-point=\"closeButtonNode\" class=\"dijitDialogCloseIcon\" data-dojo-attach-event=\"ondijitclick: onCancel\" title=\"${buttonCancel}\" role=\"button\" tabIndex=\"-1\">\n\t\t\t<span data-dojo-attach-point=\"closeText\" class=\"closeText\" title=\"${buttonCancel}\">x</span>\n\t\t</span>\n\t</div>\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitDialogPaneContent\"></div>\n</div>\n","esri/graphicsUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/geometry/Extent"],function(lang,array,has,_10f8,_10f9){var _10fa={graphicsExtent:function(_10fb){var g=_10fb[0].geometry,_10fc=g.getExtent(),ext,i,il=_10fb.length;if(_10fc===null){_10fc=new _10f9(g.x,g.y,g.x,g.y,g.spatialReference);}for(i=1;i<il;i++){ext=(g=_10fb[i].geometry).getExtent();if(ext===null){ext=new _10f9(g.x,g.y,g.x,g.y,g.spatialReference);}_10fc=_10fc.union(ext);}if(_10fc.getWidth()<=0&&_10fc.getHeight()<=0){return null;}return _10fc;},getGeometries:function(_10fd){return array.map(_10fd,function(_10fe){return _10fe.geometry;});},_encodeGraphics:function(_10ff,_1100){var _1101=[],json,enc,norm;array.forEach(_10ff,function(g,i){json=g.toJson();enc={};if(json.geometry){norm=_1100&&_1100[i];enc.geometry=norm&&norm.toJson()||json.geometry;}if(json.attributes){enc.attributes=json.attributes;}_1101[i]=enc;});return _1101;}};if(has("extend-esri")){lang.mixin(_10f8,_10fa);}return _10fa;});},"esri/IdentityManager":function(){define(["esri/kernel","esri/IdentityManagerDialog"],function(_1102,_1103){_1102.id=new _1103();return _1102.id;});},"dojox/gfx/matrix":function(){define("dojox/gfx/matrix",["./_base","dojo/_base/lang"],function(g,lang){var m=g.matrix={};var _1104={};m._degToRad=function(_1105){return _1104[_1105]||(_1104[_1105]=(Math.PI*_1105/180));};m._radToDeg=function(_1106){return _1106/Math.PI*180;};m.Matrix2D=function(arg){if(arg){if(typeof arg=="number"){this.xx=this.yy=arg;}else{if(arg instanceof Array){if(arg.length>0){var _1107=m.normalize(arg[0]);for(var i=1;i<arg.length;++i){var l=_1107,r=m.normalize(arg[i]);_1107=new m.Matrix2D();_1107.xx=l.xx*r.xx+l.xy*r.yx;_1107.xy=l.xx*r.xy+l.xy*r.yy;_1107.yx=l.yx*r.xx+l.yy*r.yx;_1107.yy=l.yx*r.xy+l.yy*r.yy;_1107.dx=l.xx*r.dx+l.xy*r.dy+l.dx;_1107.dy=l.yx*r.dx+l.yy*r.dy+l.dy;}lang.mixin(this,_1107);}}else{lang.mixin(this,arg);}}}};lang.extend(m.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});lang.mixin(m,{identity:new m.Matrix2D(),flipX:new m.Matrix2D({xx:-1}),flipY:new m.Matrix2D({yy:-1}),flipXY:new m.Matrix2D({xx:-1,yy:-1}),translate:function(a,b){if(arguments.length>1){return new m.Matrix2D({dx:a,dy:b});}return new m.Matrix2D({dx:a.x,dy:a.y});},scale:function(a,b){if(arguments.length>1){return new m.Matrix2D({xx:a,yy:b});}if(typeof a=="number"){return new m.Matrix2D({xx:a,yy:a});}return new m.Matrix2D({xx:a.x,yy:a.y});},rotate:function(angle){var c=Math.cos(angle);var s=Math.sin(angle);return new m.Matrix2D({xx:c,xy:-s,yx:s,yy:c});},rotateg:function(_1108){return m.rotate(m._degToRad(_1108));},skewX:function(angle){return new m.Matrix2D({xy:Math.tan(angle)});},skewXg:function(_1109){return m.skewX(m._degToRad(_1109));},skewY:function(angle){return new m.Matrix2D({yx:Math.tan(angle)});},skewYg:function(_110a){return m.skewY(m._degToRad(_110a));},reflect:function(a,b){if(arguments.length==1){b=a.y;a=a.x;}var a2=a*a,b2=b*b,n2=a2+b2,xy=2*a*b/n2;return new m.Matrix2D({xx:2*a2/n2-1,xy:xy,yx:xy,yy:2*b2/n2-1});},project:function(a,b){if(arguments.length==1){b=a.y;a=a.x;}var a2=a*a,b2=b*b,n2=a2+b2,xy=a*b/n2;return new m.Matrix2D({xx:a2/n2,xy:xy,yx:xy,yy:b2/n2});},normalize:function(_110b){return (_110b instanceof m.Matrix2D)?_110b:new m.Matrix2D(_110b);},isIdentity:function(_110c){return _110c.xx==1&&_110c.xy==0&&_110c.yx==0&&_110c.yy==1&&_110c.dx==0&&_110c.dy==0;},clone:function(_110d){var obj=new m.Matrix2D();for(var i in _110d){if(typeof (_110d[i])=="number"&&typeof (obj[i])=="number"&&obj[i]!=_110d[i]){obj[i]=_110d[i];}}return obj;},invert:function(_110e){var M=m.normalize(_110e),D=M.xx*M.yy-M.xy*M.yx;M=new m.Matrix2D({xx:M.yy/D,xy:-M.xy/D,yx:-M.yx/D,yy:M.xx/D,dx:(M.xy*M.dy-M.yy*M.dx)/D,dy:(M.yx*M.dx-M.xx*M.dy)/D});return M;},_multiplyPoint:function(_110f,x,y){return {x:_110f.xx*x+_110f.xy*y+_110f.dx,y:_110f.yx*x+_110f.yy*y+_110f.dy};},multiplyPoint:function(_1110,a,b){var M=m.normalize(_1110);if(typeof a=="number"&&typeof b=="number"){return m._multiplyPoint(M,a,b);}return m._multiplyPoint(M,a.x,a.y);},multiplyRectangle:function(_1111,rect){var M=m.normalize(_1111);rect=rect||{x:0,y:0,width:0,height:0};if(m.isIdentity(M)){return {x:rect.x,y:rect.y,width:rect.width,height:rect.height};}var p0=m.multiplyPoint(M,rect.x,rect.y),p1=m.multiplyPoint(M,rect.x,rect.y+rect.height),p2=m.multiplyPoint(M,rect.x+rect.width,rect.y),p3=m.multiplyPoint(M,rect.x+rect.width,rect.y+rect.height),minx=Math.min(p0.x,p1.x,p2.x,p3.x),miny=Math.min(p0.y,p1.y,p2.y,p3.y),maxx=Math.max(p0.x,p1.x,p2.x,p3.x),maxy=Math.max(p0.y,p1.y,p2.y,p3.y);return {x:minx,y:miny,width:maxx-minx,height:maxy-miny};},multiply:function(_1112){var M=m.normalize(_1112);for(var i=1;i<arguments.length;++i){var l=M,r=m.normalize(arguments[i]);M=new m.Matrix2D();M.xx=l.xx*r.xx+l.xy*r.yx;M.xy=l.xx*r.xy+l.xy*r.yy;M.yx=l.yx*r.xx+l.yy*r.yx;M.yy=l.yx*r.xy+l.yy*r.yy;M.dx=l.xx*r.dx+l.xy*r.dy+l.dx;M.dy=l.yx*r.dx+l.yy*r.dy+l.dy;}return M;},_sandwich:function(_1113,x,y){return m.multiply(m.translate(x,y),_1113,m.translate(-x,-y));},scaleAt:function(a,b,c,d){switch(arguments.length){case 4:return m._sandwich(m.scale(a,b),c,d);case 3:if(typeof c=="number"){return m._sandwich(m.scale(a),b,c);}return m._sandwich(m.scale(a,b),c.x,c.y);}return m._sandwich(m.scale(a),b.x,b.y);},rotateAt:function(angle,a,b){if(arguments.length>2){return m._sandwich(m.rotate(angle),a,b);}return m._sandwich(m.rotate(angle),a.x,a.y);},rotategAt:function(_1114,a,b){if(arguments.length>2){return m._sandwich(m.rotateg(_1114),a,b);}return m._sandwich(m.rotateg(_1114),a.x,a.y);},skewXAt:function(angle,a,b){if(arguments.length>2){return m._sandwich(m.skewX(angle),a,b);}return m._sandwich(m.skewX(angle),a.x,a.y);},skewXgAt:function(_1115,a,b){if(arguments.length>2){return m._sandwich(m.skewXg(_1115),a,b);}return m._sandwich(m.skewXg(_1115),a.x,a.y);},skewYAt:function(angle,a,b){if(arguments.length>2){return m._sandwich(m.skewY(angle),a,b);}return m._sandwich(m.skewY(angle),a.x,a.y);},skewYgAt:function(_1116,a,b){if(arguments.length>2){return m._sandwich(m.skewYg(_1116),a,b);}return m._sandwich(m.skewYg(_1116),a.x,a.y);}});g.Matrix2D=m.Matrix2D;return m;});},"esri/layers/QueryDataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/DataSource","esri/SpatialReference"],function(_1117,lang,has,_1118,_1119,_111a,_111b){var _111c=_1117(_111a,{declaredClass:"esri.layers.QueryDataSource",constructor:function(json){if(json){if(json.oidFields&&lang.isString(json.oidFields)){this.oidFields=json.oidFields.split(",");}if(json.spatialReference){this.spatialReference=new _111b(json.spatialReference);}}},toJson:function(){var json={type:"queryTable",workspaceId:this.workspaceId,query:this.query,oidFields:this.oidFields&&this.oidFields.join(),spatialReference:this.spatialReference&&this.spatialReference.toJson()};if(this.geometryType){var _111d;if(this.geometryType.toLowerCase()==="point"){_111d="esriGeometryPoint";}else{if(this.geometryType.toLowerCase()==="multipoint"){_111d="esriGeometryMultipoint";}else{if(this.geometryType.toLowerCase()==="polyline"){_111d="esriGeometryPolyline";}else{if(this.geometryType.toLowerCase()==="polygon"){_111d="esriGeometryPolygon";}else{_111d=this.geometryType;}}}}json.geometryType=_111d;}return _1119.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.QueryDataSource",_111c,_1118);}return _111c;});},"esri/tasks/SpatialRelationship":function(){define(["dojo/_base/lang","dojo/has","esri/kernel"],function(lang,has,_111e){var _111f={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};if(has("extend-esri")){lang.setObject("tasks._SpatialRelationship",_111f,_111e);}return _111f;});},"esri/tasks/RouteTask":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/graphic","esri/request","esri/geometry/normalizeUtils","esri/tasks/Task","esri/tasks/RouteResult","esri/tasks/NAMessage"],function(_1120,lang,array,has,_1121,_1122,_1123,_1124,Task,_1125,_1126){var _1127=_1120(Task,{declaredClass:"esri.tasks.RouteTask",_eventMap:{"solve-complete":["result"]},constructor:function(url){this._url.path+="/solve";this._handler=lang.hitch(this,this._handler);this.registerConnectEvents();},__msigns:[{n:"solve",c:3,a:[{i:0,p:["stops.features","barriers.features","polylineBarriers.features","polygonBarriers.features"]}],e:2}],_handler:function(_1128,io,_1129,_112a,dfd){try{var _112b=[],_112c=[],dirs=_1128.directions||[],_112d=_1128.routes?_1128.routes.features:[],stops=_1128.stops?_1128.stops.features:[],_112e=_1128.barriers?_1128.barriers.features:[],_112f=_1128.polygonBarriers?_1128.polygonBarriers.features:[],_1130=_1128.polylineBarriers?_1128.polylineBarriers.features:[],_1131=_1128.messages,_1132="esri.tasks.RouteTask.NULL_ROUTE_NAME",_1133=array.forEach,_1134=array.indexOf,_1135=true,_1136,_1137,sr=((_1128.routes&&_1128.routes.spatialReference)||(_1128.stops&&_1128.stops.spatialReference)||(_1128.barriers&&_1128.barriers.spatialReference)||(_1128.polygonBarriers&&_1128.polygonBarriers.spatialReference)||(_1128.polylineBarriers&&_1128.polylineBarriers.spatialReference));_1133(dirs,function(dir){_112b.push(_1136=dir.routeName);_112c[_1136]={directions:dir};});_1133(_112d,function(route){if(_1134(_112b,(_1136=route.attributes.Name))===-1){_112b.push(_1136);_112c[_1136]={};}_112c[_1136].route=route;});_1133(stops,function(stop){_1137=stop.attributes;if(_1134(_112b,(_1136=_1137.RouteName||_1132))===-1){_112b.push(_1136);_112c[_1136]={};}if(_1136!==_1132){_1135=false;}if(_112c[_1136].stops===undefined){_112c[_1136].stops=[];}_112c[_1136].stops.push(stop);});if(stops.length>0&&_1135===true){_112c[_112b[0]].stops=_112c[_1132].stops;delete _112c[_1132];_112b.splice(array.indexOf(_112b,_1132),1);}var _1138=[];_1133(_112b,function(_1139,i){_112c[_1139].routeName=_1139===_1132?null:_1139;_112c[_1139].spatialReference=sr;_1138.push(new _1125(_112c[_1139]));});var _113a=function(barrs){_1133(barrs,function(barr,i){if(barr.geometry){barr.geometry.spatialReference=sr;}barrs[i]=new _1122(barr);});return barrs;};_1133(_1131,function(_113b,i){_1131[i]=new _1126(_113b);});var _113c={routeResults:_1138,barriers:_113a(_112e),polygonBarriers:_113a(_112f),polylineBarriers:_113a(_1130),messages:_1131};this._successHandler([_113c],"onSolveComplete",_1129,dfd);}catch(err){this._errorHandler(err,_112a,dfd);}},solve:function(_113d,_113e,_113f,_1140){var stops=_113d.stops;if(stops&&stops.declaredClass==="esri.tasks.FeatureSet"){var _1141=[],error=false,attr;array.forEach(stops.features,function(stop){attr=stop.attributes;if((!attr||!attr.RouteName)&&!error){error=true;}else{if(array.indexOf(_1141,attr?attr.RouteName:"")===-1){_1141.push(attr?attr.RouteName:"");}}});if(_1141.length>1&&error){error=new Error("'RouteName' not specified for atleast 1 stop in stops FeatureSet.");this.onError(error);if(_113f){_113f(error);}throw error;}}var _1142=_1140.assembly,_1143=this._encode(lang.mixin({},this._url.query,{f:"json"},_113d.toJson(_1142&&_1142[0]))),_1144=this._handler,_1145=this._errorHandler;return _1123({url:this._url.path,content:_1143,callbackParamName:"callback",load:function(r,i){_1144(r,i,_113e,_113f,_1140.dfd);},error:function(r){_1145(r,_113f,_1140.dfd);}});},onSolveComplete:function(){}});_1124._createWrappers(_1127);if(has("extend-esri")){lang.setObject("tasks.RouteTask",_1127,_1121);}return _1127;});},"esri/PointerEvents":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/Evented","esri/geometry/Point","esri/geometry/ScreenPoint"],function(_1146,lang,array,has,_1147,_1148,Point,_1149){var _114a=_1146([_1148],{declaredClass:"esri.PointerEvents",tapRadius:8,clickRadius:2,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:has("mac")!==-1?1:3,wheelDivisor:has("chrome")<2?360:120,preventPageScroll:true,constructor:function(node,_114b){this.node=node;lang.mixin(this,_114b);if(node.style.msTouchAction!==undefined){node.style.msTouchAction="none";}else{if(node.style.touchAction!==undefined){node.style.touchAction="none";}}var isMS=navigator.msPointerEnabled,_114c=function(e){e.preventDefault();};node.addEventListener("selectstart",_114c,false);node.addEventListener("dragstart",_114c,false);this._pointerDown=lang.hitch(this,this._pointerDown);this._pointerMove=lang.hitch(this,this._pointerMove);this._pointerUp=lang.hitch(this,this._pointerUp);this._pointerCancel=lang.hitch(this,this._pointerCancel);node.addEventListener(isMS?"MSPointerDown":"pointerdown",this._pointerDown,false);node.addEventListener(isMS?"MSPointerMove":"pointermove",this._pointerMove,false);node.addEventListener(isMS?"MSPointerUp":"pointerup",this._pointerUp,false);node.addEventListener(isMS?"MSPointerCancel":"pointercancel",this._pointerCancel,false);if(this.map){this._mouseOver=lang.hitch(this,this._mouseOver);this._mouseOut=lang.hitch(this,this._mouseOut);this._mouseDown=lang.hitch(this,this._mouseDown);this._mouseUp=lang.hitch(this,this._mouseUp);this._mouseClick=lang.hitch(this,this._mouseClick);this._mouseWheel=lang.hitch(this,this._mouseWheel);this._mouseMove=lang.hitch(this,this._mouseMove);node.addEventListener("mouseover",this._mouseOver,false);node.addEventListener("mouseout",this._mouseOut,false);node.addEventListener("mousedown",this._mouseDown,false);node.addEventListener("mouseup",this._mouseUp,false);node.addEventListener("click",this._mouseClick,false);node.addEventListener("mousewheel",this._mouseWheel,false);node.addEventListener("mousemove",this._mouseMove,false);}this._numTouches=0;this._touches={};this._touchIds=[];this._taps=[];this._immediate=false;},_pointerDown:function(event){var _114d=this._touches,node=this.node,_114e=event.target,pid=event.pointerId,ids=this._touchIds,info,_114f,_1150,ts=(new Date()).getTime();info=(_114d[pid]={});info.pointerId=pid;info.startX=info.pageX=event.pageX;info.startY=info.pageY=event.pageY;info.startTS=ts;ids.push(pid);this._numTouches++;if(_114e.setPointerCapture){_114e.setPointerCapture(pid);}else{if(_114e.msSetPointerCapture){_114e.msSetPointerCapture(pid);}}_114f=_114d[ids[0]];_1150=_114d[ids[1]];if(this._numTouches===1){}else{if(this._numTouches===2){if(this._swipeActive){if(_114f){_114f.startX=_114f.pageX;_114f.startY=_114f.pageY;_114f.moved=false;}this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(event,_114f));}}else{if(this._swipeActive){this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(event,_114f));}else{if(this._pinchActive){this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(event,[_114f,_1150]));}}}}},_pointerMove:function(event){var _1151=this._touches,ids=this._touchIds,info,dx,dy;info=_1151[event.pointerId];if(!info||(info.pageX===event.pageX&&info.pageY===event.pageY)){return;}info.pageX=event.pageX;info.pageY=event.pageY;dx=Math.abs(info.pageX-info.startX);dy=Math.abs(info.pageY-info.startY);if(!info.moved&&((dx>=this.tapRadius)||(dy>=this.tapRadius))){info.moved=info.absMoved=true;}if(this._numTouches===1){if(!this._swipeActive){if(info.moved){this._swipeActive=true;this._fire("onSwipeStart",this._processTouchEvent(event,event));}}else{this._fire("onSwipeMove",this._processTouchEvent(event,event));}}else{if(this._numTouches===2){var _1152=_1151[ids[0]],_1153=_1151[ids[1]];if(!this._pinchActive){if(_1152.moved||_1153.moved){var _1154=Math.abs(_1152.startX-_1153.startX),_1155=Math.abs(_1152.startY-_1153.startY),_1156=Math.sqrt((_1154*_1154)+(_1155*_1155)),_1157=Math.abs(_1152.pageX-_1153.pageX),_1158=Math.abs(_1152.pageY-_1153.pageY),_1159=Math.sqrt((_1157*_1157)+(_1158*_1158));if(Math.abs(_1159-_1156)>=(2*this.tapRadius)){this._pinchActive=true;this._fire("onPinchStart",this._processTouchEvent(event,[_1152,_1153]));}}}else{this._fire("onPinchMove",this._processTouchEvent(event,[_1152,_1153]));}}}},_pointerUp:function(event){var _115a=this._touches,info,node=this.node,_115b=event.target,pid=event.pointerId,ids=this._touchIds,_115c=ids.slice(0),_115d=array.map(_115c,function(id){return _115a[id];}),ts=(new Date()).getTime();info=_115a[pid];if(!info){return;}info.pageX=event.pageX;info.pageY=event.pageY;info.endTS=ts;this._numTouches--;if(_115b.releasePointerCapture){_115b.releasePointerCapture(pid);}else{if(_115b.msReleasePointerCapture){_115b.msReleasePointerCapture(pid);}}if(this._numTouches===0){this._touches={};this._touchIds=[];if(this._swipeActive){this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(event,event));}else{if(this._pinchActive){this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(event,event));}else{if(!info.absMoved){var _115e=Infinity,_115f=-Infinity,_1160=Infinity,_1161=-Infinity,_1162=this.tapStartTolerance,i;for(i=0;i<_115c.length;i++){info=_115d[i];if(info.startTS<_115e){_115e=info.startTS;}if(info.startTS>_115f){_115f=info.startTS;}if(info.endTS<_1160){_1160=info.endTS;}if(info.endTS>_1161){_1161=info.endTS;}}if(Math.abs(_115f-_115e)<=_1162&&Math.abs(_1161-_1160)<=_1162){this._basicTap(event,_115d);}}}}}else{if(this._numTouches===1){if(this._pinchActive){ids.splice(array.indexOf(ids,event.pointerId),1);delete _115a[event.pointerId];var _1163=_115a[ids[0]];_1163.startX=_1163.pageX;_1163.startY=_1163.pageY;_1163.moved=false;if(document.msElementsFromPoint){var _1164=document.msElementsFromPoint(_1163.pageX,_1163.pageY),found=array.some(_1164,function(_1165){return (_1165===node);});if(!found){this._touches={};this._touchIds=[];this._numTouches=0;}}this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(event,[event,_1163]));}}}},_pointerCancel:function(event){if(this._numTouches){this._pointerUp(event);}},_basicTap:function(event,_1166){var ts=(new Date()).getTime(),self=this;event=this._processTouchEvent(event,_1166);this._taps.push({touchInfos:_1166,ts:ts,event:event});if(this._taps.length>2){this._taps.shift();}this._fire("onBasicTap",event);clearTimeout(this._tapTimer);if(this._immediate){this._analyzeTap(true);}else{var _1167=(this._taps.length===2)?(this.doubleTapDuration/2):this.doubleTapDuration;this._tapTimer=setTimeout(function(){var that=self;self=null;clearTimeout(that._tapTimer);that._analyzeTap();},_1167);}},_analyzeTap:function(_1168){var taps=this._taps,first=taps[0],_1169=taps[1],_116a=first.touchInfos,_116b=_1169&&_1169.touchInfos;if(!taps.length){return;}if(!_1168){this._taps=[];}if(first&&_1169){if(_116a.length===_116b.length){if((_1169.ts-first.ts)<=this.doubleTapDuration){var _116c,dx,dy;if(_116a.length===1){dx=Math.abs(_116a[0].startX-_116b[0].startX);dy=Math.abs(_116a[0].startY-_116b[0].startY);_116c=(dx<=this.doubleTapRadius)&&(dy<=this.doubleTapRadius);}else{_116c=true;}if(_116c){this._processedDoubleTap(taps);}else{this._processedTap(_1169);}}else{this._processedTap(_1169);}}else{this._processedTap(_1169);}}else{this._processedTap(first||_1169);}},_processedTap:function(tap){var event=tap.event;this._fire("onProcessedTap",event);if(tap.touchInfos.length===1){this._fire("onTap",this._fixEvent(event));}else{if(tap.touchInfos.length===2){this._fire("onTwoFingerTap",event);}}},_processedDoubleTap:function(taps){var _116d=(taps[1].touchInfos.length===1),_116e,evts;if(_116d){_116e=[this._fixEvent(taps[0].event),this._fixEvent(taps[1].event)];_116e[1].relatedEvents=_116e;}evts=[taps[0].event,taps[1].event];evts[1].relatedEvents=evts;this._fire("onProcessedDoubleTap",evts[1]);if(_116d){this._fire("onDoubleTap",_116e[1]);this._fire("onDblClick",_116e[1]);}},_mouseOver:function(event){this._fire("onMouseOver",this._processMouseEvent(event));},_mouseMove:function(event){this._fire("onMouseMove",this._processMouseEvent(event));},_mouseOut:function(event){this._fire("onMouseOut",this._processMouseEvent(event));},_mouseDown:function(event){this._downX=event.pageX;this._downY=event.pageY;this._fire("onMouseDown",this._processMouseEvent(event));},_mouseUp:function(event){this._fire("onMouseUp",this._processMouseEvent(event));},_mouseClick:function(event){if((Math.abs(event.pageX-this._downX)<=this.clickRadius)&&(Math.abs(event.pageY-this._downY)<=this.clickRadius)){this._fire("onClick",this._processMouseEvent(event));}},_mouseWheel:function(event){var map=this.map,_116f=map?(map.isScrollWheelZoom||map.isScrollWheelPan):this.preventPageScroll;if(_116f){event.preventDefault();}var value=has("ie")||has("webkit")?event.wheelDelta/this.wheelDivisor:-event.detail/this.mozWheelDivisor,_1170=Math.abs(value);if(_1170<=this.minWheelValue){_1170=this.minWheelValue;}else{_1170=this.maxWheelValue;}event.value=value<0?-_1170:_1170;this._fire("onMouseWheel",this._processMouseEvent(event));},_fire:function(_1171,evt){if(this[_1171]){this[_1171](evt);}if(this.map){if(this.map[_1171]){this.map[_1171](evt);}}},_fixEvent:function(event){var _1172={},i;for(i in event){_1172[i]=event[i];}if(this.map){_1172.screenPoint=_1172.screenPoints[0];_1172.mapPoint=_1172.mapPoints[0];}return _1172;},_processTouchEvent:function(evt,_1173){var map=this.map,pos=map&&map.position,_1174=0;if(pos&&_1173){if(lang.isArray(_1173)){var i,_1175;evt.screenPoints=[];evt.mapPoints=[];for(i=0;i<_1173.length;i++){if(_1173[i]){_1175=new _1149(_1173[i].pageX-pos.x,_1173[i].pageY-pos.y);evt.screenPoints.push(_1175);evt.mapPoints.push(map.extent?map.toMap(_1175):new Point());}else{_1174++;}}}else{evt.screenPoint=new _1149(_1173.pageX-pos.x,_1173.pageY-pos.y);evt.mapPoint=map.extent?map.toMap(evt.screenPoint):new Point();}}evt.numPoints=_1173?(lang.isArray(_1173)?(_1173.length-_1174):1):0;return evt;},_processMouseEvent:function(evt){var map=this.map,pos=map&&map.position;if(pos){evt.screenPoint=new _1149(evt.pageX-pos.x,evt.pageY-pos.y);evt.mapPoint=map.extent?map.toMap(evt.screenPoint):new Point();}return evt;},setImmediateTap:function(_1176){this._immediate=_1176;},destroy:function(){var node=this.node;node.removeEventListener("MSPointerDown",this._pointerDown,false);node.removeEventListener("MSPointerMove",this._pointerMove,false);node.removeEventListener("MSPointerUp",this._pointerUp,false);node.removeEventListener("MSPointerCancel",this._pointerCancel,false);if(this.map){node.removeEventListener("mouseover",this._mouseOver,false);node.removeEventListener("mousemove",this._mouseMove,false);node.removeEventListener("mouseout",this._mouseOut,false);node.removeEventListener("mousedown",this._mouseDown,false);node.removeEventListener("mouseup",this._mouseUp,false);node.removeEventListener("click",this._mouseClick,false);}clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._touches=this._touchIds=this._taps=null;}});if(has("extend-esri")){_1147.PointerEvents=_114a;}return _114a;});},"esri/layers/JoinDataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/DataSource","esri/layers/LayerMapSource","esri/layers/TableDataSource","esri/layers/QueryDataSource","esri/layers/RasterDataSource"],function(_1177,lang,has,_1178,_1179,_117a,_117b,_117c,_117d,_117e){var _117f=_1177(_117a,{declaredClass:"esri.layers.JoinDataSource",constructor:function(json){if(json){if(json.leftTableSource){this.leftTableSource=this._createLayerSource(json.leftTableSource);}if(json.rightTableSource){this.rightTableSource=this._createLayerSource(json.rightTableSource);}}},_createLayerSource:function(_1180){var _1181;if(_1180.type==="mapLayer"){_1181=new _117b(_1180);}else{_1181={type:"dataLayer"};var _1182;switch(_1180.dataSource.type){case "table":_1182=new _117c(_1180.dataSource);break;case "queryTable":_1182=new _117d(_1180.dataSource);break;case "joinTable":_1182=new _117f(_1180.dataSource);break;case "raster":_1182=new _117e(_1180.dataSource);break;default:_1182=_1180.dataSource;}_1181.dataSource=_1182;_1181.toJson=function(){var json={type:"dataLayer",dataSource:_1182.toJson()};return _1179.fixJson(json);};}return _1181;},toJson:function(){var json={type:"joinTable",leftTableSource:this.leftTableSource&&this.leftTableSource.toJson(),rightTableSource:this.rightTableSource&&this.rightTableSource.toJson(),leftTableKey:this.leftTableKey,rightTableKey:this.rightTableKey};var _1183;if(this.joinType.toLowerCase()==="left-outer-join"){_1183="esriLeftOuterJoin";}else{if(this.joinType.toLowerCase()==="left-inner-join"){_1183="esriLeftInnerJoin";}else{_1183=this.joinType;}}json.joinType=_1183;return _1179.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.JoinDataSource",_117f,_1178);}return _117f;});},"dijit/_Container":function(){define("dijit/_Container",["dojo/_base/array","dojo/_base/declare","dojo/dom-construct"],function(array,_1184,_1185){return _1184("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}},addChild:function(_1186,_1187){var _1188=this.containerNode;if(_1187&&typeof _1187=="number"){var _1189=this.getChildren();if(_1189&&_1189.length>=_1187){_1188=_1189[_1187-1].domNode;_1187="after";}}_1185.place(_1186.domNode,_1188,_1187);if(this._started&&!_1186._started){_1186.startup();}},removeChild:function(_118a){if(typeof _118a=="number"){_118a=this.getChildren()[_118a];}if(_118a){var node=_118a.domNode;if(node&&node.parentNode){node.parentNode.removeChild(node);}}},hasChildren:function(){return this.getChildren().length>0;},_getSiblingOfChild:function(child,dir){var _118b=this.getChildren(),idx=array.indexOf(this.getChildren(),child);return _118b[idx+dir];},getIndexOfChild:function(child){return array.indexOf(this.getChildren(),child);}});});},"esri/layers/LayerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(_118c,lang,has,_118d,_118e){var _118f=_118c(null,{declaredClass:"esri.layers.LayerInfo",constructor:function(json){lang.mixin(this,json);},toJson:function(){var json={defaultVisibility:this.defaultVisibility,id:this.id,maxScale:this.maxScale,minScale:this.minScale,name:this.name,parentLayerId:this.parentLayerId,subLayerIds:this.subLayerIds};return _118e.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.LayerInfo",_118f,_118d);}return _118f;});},"esri/symbols/PictureFillSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/sniff","dojox/gfx/_base","esri/kernel","esri/lang","esri/urlUtils","esri/symbols/FillSymbol"],function(_1190,lang,has,_1191,_1192,_1193,_1194,_1195){var _1196={xoffset:0,yoffset:0,width:12,height:12};var PFS=_1190(_1195,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(json,_1197,width,_1198){if(json){if(lang.isString(json)){this.url=json;if(_1197!==undefined){this.outline=_1197;}if(width!==undefined){this.width=width;}if(_1198!==undefined){this.height=_1198;}}else{this.xoffset=_1191.pt2px(json.xoffset);this.yoffset=_1191.pt2px(json.yoffset);this.width=_1191.pt2px(json.width);this.height=_1191.pt2px(json.height);var _1199=json.imageData;if((!(has("ie")<9))&&_1199){var temp=this.url;this.url="data:"+(json.contentType||"image")+";base64,"+_1199;this.imageData=temp;}}}else{lang.mixin(this,_1196);this.width=_1191.pt2px(this.width);this.height=_1191.pt2px(this.height);}},setWidth:function(width){this.width=width;return this;},setHeight:function(_119a){this.height=_119a;return this;},setOffset:function(x,y){this.xoffset=x;this.yoffset=y;return this;},setUrl:function(url){if(url!==this.url){delete this.imageData;delete this.contentType;}this.url=url;return this;},setXScale:function(scale){this.xscale=scale;return this;},setYScale:function(scale){this.yscale=scale;return this;},getStroke:function(){return this.outline&&this.outline.getStroke();},getFill:function(){return lang.mixin({},_1191.defaultPattern,{src:this.url,width:(this.width*this.xscale),height:(this.height*this.yscale),x:this.xoffset,y:this.yoffset});},getShapeDescriptors:function(){return {defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"},fill:this.getFill(),stroke:this.getStroke()};},toJson:function(){var url=this.url,_119b=this.imageData;if(url.indexOf("data:")===0){var temp=url;url=_119b;var index=temp.indexOf(";base64,")+8;_119b=temp.substr(index);}url=_1194.getAbsoluteUrl(url);var width=_1191.px2pt(this.width);width=isNaN(width)?undefined:width;var _119c=_1191.px2pt(this.height);_119c=isNaN(_119c)?undefined:_119c;var xoff=_1191.px2pt(this.xoffset);xoff=isNaN(xoff)?undefined:xoff;var yoff=_1191.px2pt(this.yoffset);yoff=isNaN(yoff)?undefined:yoff;var json=_1193.fixJson(lang.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:url,imageData:_119b,contentType:this.contentType,width:width,height:_119c,xoffset:xoff,yoffset:yoff,xscale:this.xscale,yscale:this.yscale}));if(!json.imageData){delete json.imageData;}return json;}});PFS.defaultProps=_1196;if(has("extend-esri")){lang.setObject("symbol.PictureFillSymbol",PFS,_1192);_1192.symbol.defaultPictureFillSymbol=_1196;}return PFS;});},"dojo/html":function(){define(["./_base/kernel","./_base/lang","./_base/array","./_base/declare","./dom","./dom-construct","./parser"],function(_119d,lang,_119e,_119f,dom,_11a0,_11a1){var html={};lang.setObject("dojo.html",html);var _11a2=0;html._secureForInnerHtml=function(cont){return cont.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"");};html._emptyNode=_11a0.empty;html._setNodeContent=function(node,cont){_11a0.empty(node);if(cont){if(typeof cont=="string"){cont=_11a0.toDom(cont,node.ownerDocument);}if(!cont.nodeType&&lang.isArrayLike(cont)){for(var _11a3=cont.length,i=0;i<cont.length;i=_11a3==cont.length?i+1:0){_11a0.place(cont[i],node,"last");}}else{_11a0.place(cont,node,"last");}}return node;};html._ContentSetter=_119f("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:false,extractContent:false,parseContent:false,parserScope:_119d._scopeName,startup:true,constructor:function(_11a4,node){lang.mixin(this,_11a4||{});node=this.node=dom.byId(this.node||node);if(!this.id){this.id=["Setter",(node)?node.id||node.tagName:"",_11a2++].join("_");}},set:function(cont,_11a5){if(undefined!==cont){this.content=cont;}if(_11a5){this._mixin(_11a5);}this.onBegin();this.setContent();var ret=this.onEnd();if(ret&&ret.then){return ret;}else{return this.node;}},setContent:function(){var node=this.node;if(!node){throw new Error(this.declaredClass+": setContent given no node");}try{node=html._setNodeContent(node,this.content);}catch(e){var _11a6=this.onContentError(e);try{node.innerHTML=_11a6;}catch(e){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+e.message,e);}}this.node=node;},empty:function(){if(this.parseDeferred){if(!this.parseDeferred.isResolved()){this.parseDeferred.cancel();}delete this.parseDeferred;}if(this.parseResults&&this.parseResults.length){_119e.forEach(this.parseResults,function(w){if(w.destroy){w.destroy();}});delete this.parseResults;}_11a0.empty(this.node);},onBegin:function(){var cont=this.content;if(lang.isString(cont)){if(this.cleanContent){cont=html._secureForInnerHtml(cont);}if(this.extractContent){var match=cont.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(match){cont=match[1];}}}this.empty();this.content=cont;return this.node;},onEnd:function(){if(this.parseContent){this._parse();}return this.node;},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content;},onContentError:function(err){return "Error occurred setting content: "+err;},onExecError:function(err){return "Error occurred executing scripts: "+err;},_mixin:function(_11a7){var empty={},key;for(key in _11a7){if(key in empty){continue;}this[key]=_11a7[key];}},_parse:function(){var _11a8=this.node;try{var _11a9={};_119e.forEach(["dir","lang","textDir"],function(name){if(this[name]){_11a9[name]=this[name];}},this);var self=this;this.parseDeferred=_11a1.parse({rootNode:_11a8,noStart:!this.startup,inherited:_11a9,scope:this.parserScope}).then(function(_11aa){return self.parseResults=_11aa;});}catch(e){this._onError("Content",e,"Error parsing in _ContentSetter#"+this.id);}},_onError:function(type,err,_11ab){var _11ac=this["on"+type+"Error"].call(this,err);if(_11ab){console.error(_11ab,err);}else{if(_11ac){html._setNodeContent(this.node,_11ac,true);}}}});html.set=function(node,cont,_11ad){if(undefined==cont){console.warn("dojo.html.set: no cont argument provided, using empty string");cont="";}if(!_11ad){return html._setNodeContent(node,cont,true);}else{var op=new html._ContentSetter(lang.mixin(_11ad,{content:cont,node:node}));return op.set();}};return html;});},"esri/layers/DataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_11ae,lang,has,_11af){var _11b0=_11ae(null,{declaredClass:"esri.layers.DataSource",constructor:function(json){if(json){lang.mixin(this,json);}},toJson:function(){}});if(has("extend-esri")){lang.setObject("layers.DataSource",_11b0,_11af);}return _11b0;});},"dijit/form/ValidationTextBox":function(){require({cache:{"url:dijit/form/templates/ValidationTextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n"}});define("dijit/form/ValidationTextBox",["dojo/_base/declare","dojo/_base/kernel","dojo/i18n","./TextBox","../Tooltip","dojo/text!./templates/ValidationTextBox.html","dojo/i18n!./nls/validate"],function(_11b1,_11b2,i18n,_11b3,_11b4,_11b5){var _11b6;return _11b6=_11b1("dijit.form.ValidationTextBox",_11b3,{templateString:_11b5,required:false,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(attr,value){if(value!=_11b6.prototype[attr]){_11b2.deprecated("ValidationTextBox id="+this.id+", set('"+attr+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0");this.set("pattern",value);}},_setRegExpGenAttr:function(_11b7){this._deprecateRegExp("regExpGen",_11b7);this.regExpGen=this._getPatternAttr;},_setRegExpAttr:function(value){this._deprecateRegExp("regExp",value);},_setValueAttr:function(){this.inherited(arguments);this.validate(this.focused);},validator:function(value,_11b8){return (new RegExp("^(?:"+this._getPatternAttr(_11b8)+")"+(this.required?"":"?")+"$")).test(value)&&(!this.required||!this._isEmpty(value))&&(this._isEmpty(value)||this.parse(value,_11b8)!==undefined);},_isValidSubset:function(){return this.textbox.value.search(this._partialre)==0;},isValid:function(){return this.validator(this.textbox.value,this.constraints);},_isEmpty:function(value){return (this.trim?/^\s*$/:/^$/).test(value);},getErrorMessage:function(){var _11b9=this.invalidMessage=="$_unset_$"?this.messages.invalidMessage:!this.invalidMessage?this.promptMessage:this.invalidMessage;var _11ba=this.missingMessage=="$_unset_$"?this.messages.missingMessage:!this.missingMessage?_11b9:this.missingMessage;return (this.required&&this._isEmpty(this.textbox.value))?_11ba:_11b9;},getPromptMessage:function(){return this.promptMessage;},_maskValidSubsetError:true,validate:function(_11bb){var _11bc="";var _11bd=this.disabled||this.isValid(_11bb);if(_11bd){this._maskValidSubsetError=true;}var _11be=this._isEmpty(this.textbox.value);var _11bf=!_11bd&&_11bb&&this._isValidSubset();this._set("state",_11bd?"":(((((!this._hasBeenBlurred||_11bb)&&_11be)||_11bf)&&(this._maskValidSubsetError||(_11bf&&!this._hasBeenBlurred&&_11bb)))?"Incomplete":"Error"));this.focusNode.setAttribute("aria-invalid",_11bd?"false":"true");if(this.state=="Error"){this._maskValidSubsetError=_11bb&&_11bf;_11bc=this.getErrorMessage(_11bb);}else{if(this.state=="Incomplete"){_11bc=this.getPromptMessage(_11bb);this._maskValidSubsetError=!this._hasBeenBlurred||_11bb;}else{if(_11be){_11bc=this.getPromptMessage(_11bb);}}}this.set("message",_11bc);return _11bd;},displayMessage:function(_11c0){if(_11c0&&this.focused){_11b4.show(_11c0,this.domNode,this.tooltipPosition,!this.isLeftToRight());}else{_11b4.hide(this.domNode);}},_refreshState:function(){if(this._created){this.validate(this.focused);}this.inherited(arguments);},constructor:function(_11c1){this.constraints={};this.baseClass+=" dijitValidationTextBox";},startup:function(){this.inherited(arguments);this._refreshState();},_setConstraintsAttr:function(_11c2){if(!_11c2.locale&&this.lang){_11c2.locale=this.lang;}this._set("constraints",_11c2);this._refreshState();},_setPatternAttr:function(_11c3){this._set("pattern",_11c3);},_getPatternAttr:function(_11c4){var p=this.pattern;var type=(typeof p).toLowerCase();if(type=="function"){p=this.pattern(_11c4||this.constraints);}if(p!=this._lastRegExp){var _11c5="";this._lastRegExp=p;if(p!=".*"){p.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(re){switch(re.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":_11c5+=re;break;case ")":_11c5+="|$)";break;default:_11c5+="(?:"+re+"|$)";break;}});}try{"".search(_11c5);}catch(e){_11c5=this.pattern;console.warn("RegExp error in "+this.declaredClass+": "+this.pattern);}this._partialre="^(?:"+_11c5+")$";}return p;},postMixInProperties:function(){this.inherited(arguments);this.messages=i18n.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints);},_setDisabledAttr:function(value){this.inherited(arguments);this._refreshState();},_setRequiredAttr:function(value){this._set("required",value);this.focusNode.setAttribute("aria-required",value);this._refreshState();},_setMessageAttr:function(_11c6){this._set("message",_11c6);this.displayMessage(_11c6);},reset:function(){this._maskValidSubsetError=true;this.inherited(arguments);},_onBlur:function(){this.displayMessage("");this.inherited(arguments);}});});},"dijit/_base":function(){define("dijit/_base",["./main","./a11y","./WidgetSet","./_base/focus","./_base/manager","./_base/place","./_base/popup","./_base/scroll","./_base/sniff","./_base/typematic","./_base/wai","./_base/window"],function(dijit){return dijit._base;});},"dijit/_base/typematic":function(){define("dijit/_base/typematic",["../typematic"],function(){});},"dojo/window":function(){define(["./_base/lang","./sniff","./_base/window","./dom","./dom-geometry","./dom-style"],function(lang,has,_11c7,dom,geom,style){var _11c8={getBox:function(doc){doc=doc||_11c7.doc;var _11c9=(doc.compatMode=="BackCompat")?_11c7.body(doc):doc.documentElement,_11ca=geom.docScroll(doc),w,h;if(has("touch")){var _11cb=_11c8.get(doc);w=_11cb.innerWidth||_11c9.clientWidth;h=_11cb.innerHeight||_11c9.clientHeight;}else{w=_11c9.clientWidth;h=_11c9.clientHeight;}return {l:_11ca.x,t:_11ca.y,w:w,h:h};},get:function(doc){if(has("ie")&&_11c8!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;},scrollIntoView:function(node,pos){try{node=dom.byId(node);var doc=node.ownerDocument||_11c7.doc,body=_11c7.body(doc),html=doc.documentElement||body.parentNode,isIE=has("ie"),isWK=has("webkit");if((!(has("mozilla")||isIE||isWK||has("opera"))||node==body||node==html)&&(typeof node.scrollIntoView!="undefined")){node.scrollIntoView(false);return;}var _11cc=doc.compatMode=="BackCompat",_11cd=(isIE>=9&&"frameElement" in node.ownerDocument.parentWindow)?((html.clientHeight>0&&html.clientWidth>0&&(body.clientHeight==0||body.clientWidth==0||body.clientHeight>html.clientHeight||body.clientWidth>html.clientWidth))?html:body):(_11cc?body:html),_11ce=isWK?body:_11cd,_11cf=_11cd.clientWidth,_11d0=_11cd.clientHeight,rtl=!geom.isBodyLtr(doc),_11d1=pos||geom.position(node),el=node.parentNode,_11d2=function(el){return ((isIE<=6||(isIE&&_11cc))?false:(style.get(el,"position").toLowerCase()=="fixed"));};if(_11d2(node)){return;}while(el){if(el==body){el=_11ce;}var elPos=geom.position(el),_11d3=_11d2(el);if(el==_11ce){elPos.w=_11cf;elPos.h=_11d0;if(_11ce==html&&isIE&&rtl){elPos.x+=_11ce.offsetWidth-elPos.w;}if(elPos.x<0||!isIE){elPos.x=0;}if(elPos.y<0||!isIE){elPos.y=0;}}else{var pb=geom.getPadBorderExtents(el);elPos.w-=pb.w;elPos.h-=pb.h;elPos.x+=pb.l;elPos.y+=pb.t;var _11d4=el.clientWidth,_11d5=elPos.w-_11d4;if(_11d4>0&&_11d5>0){elPos.w=_11d4;elPos.x+=(rtl&&(isIE||el.clientLeft>pb.l))?_11d5:0;}_11d4=el.clientHeight;_11d5=elPos.h-_11d4;if(_11d4>0&&_11d5>0){elPos.h=_11d4;}}if(_11d3){if(elPos.y<0){elPos.h+=elPos.y;elPos.y=0;}if(elPos.x<0){elPos.w+=elPos.x;elPos.x=0;}if(elPos.y+elPos.h>_11d0){elPos.h=_11d0-elPos.y;}if(elPos.x+elPos.w>_11cf){elPos.w=_11cf-elPos.x;}}var l=_11d1.x-elPos.x,t=_11d1.y-Math.max(elPos.y,0),r=l+_11d1.w-elPos.w,bot=t+_11d1.h-elPos.h;if(r*l>0){var s=Math[l<0?"max":"min"](l,r);if(rtl&&((isIE==8&&!_11cc)||isIE>=9)){s=-s;}_11d1.x+=el.scrollLeft;el.scrollLeft+=s;_11d1.x-=el.scrollLeft;}if(bot*t>0){_11d1.y+=el.scrollTop;el.scrollTop+=Math[t<0?"max":"min"](t,bot);_11d1.y-=el.scrollTop;}el=(el!=_11ce)&&!_11d3&&el.parentNode;}}catch(error){console.error("scrollIntoView: "+error);node.scrollIntoView(false);}}};1&&lang.setObject("dojo.window",_11c8);return _11c8;});},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(lang,i18n,_11d6,_11d7,_11d8){var _11d9={};lang.setObject("dojo.number",_11d9);_11d9.format=function(value,_11da){_11da=lang.mixin({},_11da||{});var _11db=i18n.normalizeLocale(_11da.locale),_11dc=i18n.getLocalization("dojo.cldr","number",_11db);_11da.customs=_11dc;var _11dd=_11da.pattern||_11dc[(_11da.type||"decimal")+"Format"];if(isNaN(value)||Math.abs(value)==Infinity){return null;}return _11d9._applyPattern(value,_11dd,_11da);};_11d9._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;_11d9._applyPattern=function(value,_11de,_11df){_11df=_11df||{};var group=_11df.customs.group,_11e0=_11df.customs.decimal,_11e1=_11de.split(";"),_11e2=_11e1[0];_11de=_11e1[(value<0)?1:0]||("-"+_11e2);if(_11de.indexOf("%")!=-1){value*=100;}else{if(_11de.indexOf("‰")!=-1){value*=1000;}else{if(_11de.indexOf("¤")!=-1){group=_11df.customs.currencyGroup||group;_11e0=_11df.customs.currencyDecimal||_11e0;_11de=_11de.replace(/\u00a4{1,3}/,function(match){var prop=["symbol","currency","displayName"][match.length-1];return _11df[prop]||_11df.currency||"";});}else{if(_11de.indexOf("E")!=-1){throw new Error("exponential notation not supported");}}}}var _11e3=_11d9._numberPatternRE;var _11e4=_11e2.match(_11e3);if(!_11e4){throw new Error("unable to find a number expression in pattern: "+_11de);}if(_11df.fractional===false){_11df.places=0;}return _11de.replace(_11e3,_11d9._formatAbsolute(value,_11e4[0],{decimal:_11e0,group:group,places:_11df.places,round:_11df.round}));};_11d9.round=function(value,_11e5,_11e6){var _11e7=10/(_11e6||10);return (_11e7*+value).toFixed(_11e5)/_11e7;};if((0.9).toFixed()==0){var round=_11d9.round;_11d9.round=function(v,p,m){var d=Math.pow(10,-p||0),a=Math.abs(v);if(!v||a>=d){d=0;}else{a/=d;if(a<0.5||a>=0.95){d=0;}}return round(v,p,m)+(v>0?d:-d);};}_11d9._formatAbsolute=function(value,_11e8,_11e9){_11e9=_11e9||{};if(_11e9.places===true){_11e9.places=0;}if(_11e9.places===Infinity){_11e9.places=6;}var _11ea=_11e8.split("."),comma=typeof _11e9.places=="string"&&_11e9.places.indexOf(","),_11eb=_11e9.places;if(comma){_11eb=_11e9.places.substring(comma+1);}else{if(!(_11eb>=0)){_11eb=(_11ea[1]||[]).length;}}if(!(_11e9.round<0)){value=_11d9.round(value,_11eb,_11e9.round);}var _11ec=String(Math.abs(value)).split("."),_11ed=_11ec[1]||"";if(_11ea[1]||_11e9.places){if(comma){_11e9.places=_11e9.places.substring(0,comma);}var pad=_11e9.places!==undefined?_11e9.places:(_11ea[1]&&_11ea[1].lastIndexOf("0")+1);if(pad>_11ed.length){_11ec[1]=_11d7.pad(_11ed,pad,"0",true);}if(_11eb<_11ed.length){_11ec[1]=_11ed.substr(0,_11eb);}}else{if(_11ec[1]){_11ec.pop();}}var _11ee=_11ea[0].replace(",","");pad=_11ee.indexOf("0");if(pad!=-1){pad=_11ee.length-pad;if(pad>_11ec[0].length){_11ec[0]=_11d7.pad(_11ec[0],pad);}if(_11ee.indexOf("#")==-1){_11ec[0]=_11ec[0].substr(_11ec[0].length-pad);}}var index=_11ea[0].lastIndexOf(","),_11ef,_11f0;if(index!=-1){_11ef=_11ea[0].length-index-1;var _11f1=_11ea[0].substr(0,index);index=_11f1.lastIndexOf(",");if(index!=-1){_11f0=_11f1.length-index-1;}}var _11f2=[];for(var whole=_11ec[0];whole;){var off=whole.length-_11ef;_11f2.push((off>0)?whole.substr(off):whole);whole=(off>0)?whole.slice(0,off):"";if(_11f0){_11ef=_11f0;delete _11f0;}}_11ec[0]=_11f2.reverse().join(_11e9.group||",");return _11ec.join(_11e9.decimal||".");};_11d9.regexp=function(_11f3){return _11d9._parseInfo(_11f3).regexp;};_11d9._parseInfo=function(_11f4){_11f4=_11f4||{};var _11f5=i18n.normalizeLocale(_11f4.locale),_11f6=i18n.getLocalization("dojo.cldr","number",_11f5),_11f7=_11f4.pattern||_11f6[(_11f4.type||"decimal")+"Format"],group=_11f6.group,_11f8=_11f6.decimal,_11f9=1;if(_11f7.indexOf("%")!=-1){_11f9/=100;}else{if(_11f7.indexOf("‰")!=-1){_11f9/=1000;}else{var _11fa=_11f7.indexOf("¤")!=-1;if(_11fa){group=_11f6.currencyGroup||group;_11f8=_11f6.currencyDecimal||_11f8;}}}var _11fb=_11f7.split(";");if(_11fb.length==1){_11fb.push("-"+_11fb[0]);}var re=_11d8.buildGroupRE(_11fb,function(_11fc){_11fc="(?:"+_11d8.escapeString(_11fc,".")+")";return _11fc.replace(_11d9._numberPatternRE,function(_11fd){var flags={signed:false,separator:_11f4.strict?group:[group,""],fractional:_11f4.fractional,decimal:_11f8,exponent:false},parts=_11fd.split("."),_11fe=_11f4.places;if(parts.length==1&&_11f9!=1){parts[1]="###";}if(parts.length==1||_11fe===0){flags.fractional=false;}else{if(_11fe===undefined){_11fe=_11f4.pattern?parts[1].lastIndexOf("0")+1:Infinity;}if(_11fe&&_11f4.fractional==undefined){flags.fractional=true;}if(!_11f4.places&&(_11fe<parts[1].length)){_11fe+=","+parts[1].length;}flags.places=_11fe;}var _11ff=parts[0].split(",");if(_11ff.length>1){flags.groupSize=_11ff.pop().length;if(_11ff.length>1){flags.groupSize2=_11ff.pop().length;}}return "("+_11d9._realNumberRegexp(flags)+")";});},true);if(_11fa){re=re.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(match,_1200,_1201,after){var prop=["symbol","currency","displayName"][_1201.length-1],_1202=_11d8.escapeString(_11f4[prop]||_11f4.currency||"");_1200=_1200?"[\\s\\xa0]":"";after=after?"[\\s\\xa0]":"";if(!_11f4.strict){if(_1200){_1200+="*";}if(after){after+="*";}return "(?:"+_1200+_1202+after+")?";}return _1200+_1202+after;});}return {regexp:re.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:group,decimal:_11f8,factor:_11f9};};_11d9.parse=function(_1203,_1204){var info=_11d9._parseInfo(_1204),_1205=(new RegExp("^"+info.regexp+"$")).exec(_1203);if(!_1205){return NaN;}var _1206=_1205[1];if(!_1205[1]){if(!_1205[2]){return NaN;}_1206=_1205[2];info.factor*=-1;}_1206=_1206.replace(new RegExp("["+info.group+"\\s\\xa0"+"]","g"),"").replace(info.decimal,".");return _1206*info.factor;};_11d9._realNumberRegexp=function(flags){flags=flags||{};if(!("places" in flags)){flags.places=Infinity;}if(typeof flags.decimal!="string"){flags.decimal=".";}if(!("fractional" in flags)||/^0/.test(flags.places)){flags.fractional=[true,false];}if(!("exponent" in flags)){flags.exponent=[true,false];}if(!("eSigned" in flags)){flags.eSigned=[true,false];}var _1207=_11d9._integerRegexp(flags),_1208=_11d8.buildGroupRE(flags.fractional,function(q){var re="";if(q&&(flags.places!==0)){re="\\"+flags.decimal;if(flags.places==Infinity){re="(?:"+re+"\\d+)?";}else{re+="\\d{"+flags.places+"}";}}return re;},true);var _1209=_11d8.buildGroupRE(flags.exponent,function(q){if(q){return "([eE]"+_11d9._integerRegexp({signed:flags.eSigned})+")";}return "";});var _120a=_1207+_1208;if(_1208){_120a="(?:(?:"+_120a+")|(?:"+_1208+"))";}return _120a+_1209;};_11d9._integerRegexp=function(flags){flags=flags||{};if(!("signed" in flags)){flags.signed=[true,false];}if(!("separator" in flags)){flags.separator="";}else{if(!("groupSize" in flags)){flags.groupSize=3;}}var _120b=_11d8.buildGroupRE(flags.signed,function(q){return q?"[-+]":"";},true);var _120c=_11d8.buildGroupRE(flags.separator,function(sep){if(!sep){return "(?:\\d+)";}sep=_11d8.escapeString(sep);if(sep==" "){sep="\\s";}else{if(sep==" "){sep="\\s\\xa0";}}var grp=flags.groupSize,grp2=flags.groupSize2;if(grp2){var _120d="(?:0|[1-9]\\d{0,"+(grp2-1)+"}(?:["+sep+"]\\d{"+grp2+"})*["+sep+"]\\d{"+grp+"})";return ((grp-grp2)>0)?"(?:"+_120d+"|(?:0|[1-9]\\d{0,"+(grp-1)+"}))":_120d;}return "(?:0|[1-9]\\d{0,"+(grp-1)+"}(?:["+sep+"]\\d{"+grp+"})*)";},true);return _120b+_120c;};return _11d9;});},"esri/geometry/Polygon":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/SpatialReference","esri/geometry/Geometry","esri/geometry/Point","esri/geometry/Extent","esri/geometry/mathUtils"],function(_120e,array,lang,has,_120f,_1210,_1211,_1212,Point,_1213,_1214){var _1215={type:"polygon",rings:null};var _1216=_120e(_1212,{declaredClass:"esri.geometry.Polygon",constructor:function(obj){lang.mixin(this,_1215);this.rings=[];this._ring=0;if(obj){if(obj.rings){lang.mixin(this,obj);}else{this.spatialReference=obj;}if(this.spatialReference){this.spatialReference=new _1211(this.spatialReference);}}this.verifySR();},_extent:null,addRing:function(_1217){this._extent=null;this._ring=this.rings.length;this.rings[this._ring]=[];if(lang.isArray(_1217[0])){array.forEach(_1217,this._addPointArr,this);}else{array.forEach(_1217,this._addPoint,this);}return this;},_addPointArr:function(point){this.rings[this._ring].push(point);},_addPoint:function(point){this.rings[this._ring].push([point.x,point.y]);},_insertPoints:function(_1218,index){this._extent=null;this._ring=index;if(!this.rings[this._ring]){this.rings[this._ring]=[];}array.forEach(_1218,this._addPoint,this);},_validateInputs:function(_1219,_121a){if((_1219!==null&&_1219!==undefined)&&(_1219<0||_1219>=this.rings.length)){return false;}if((_121a!==null&&_1219!==undefined)&&(_121a<0||_121a>=this.rings[_1219].length)){return false;}return true;},getPoint:function(_121b,_121c){if(this._validateInputs(_121b,_121c)){return new Point(this.rings[_121b][_121c],this.spatialReference);}},setPoint:function(_121d,_121e,point){if(this._validateInputs(_121d,_121e)){this._extent=null;this.rings[_121d][_121e]=[point.x,point.y];return this;}},insertPoint:function(_121f,_1220,point){if(this._validateInputs(_121f)&&_1210.isDefined(_1220)&&(_1220>=0&&_1220<=this.rings[_121f].length)){this._extent=null;this.rings[_121f].splice(_1220,0,[point.x,point.y]);return this;}},removeRing:function(index){if(this._validateInputs(index,null)){this._extent=null;var arr=this.rings.splice(index,1)[0],i,il=arr.length,sr=this.spatialReference;for(i=0;i<il;i++){arr[i]=new Point(arr[i],sr);}return arr;}},removePoint:function(_1221,_1222){if(this._validateInputs(_1221,_1222)){this._extent=null;return new Point(this.rings[_1221].splice(_1222,1)[0],this.spatialReference);}},getExtent:function(){var _1223;if(this._extent){_1223=new _1213(this._extent);_1223._partwise=this._partwise;return _1223;}var rings=this.rings,pal=rings.length;if(!pal||!rings[0].length){return;}var ring,point,x,y,xmax,ymax,pa,pt,ptl,xmin=(xmax=rings[0][0][0]),ymin=(ymax=rings[0][0][1]),min=Math.min,max=Math.max,sr=this.spatialReference,parts=[],rxmin,rxmax,rymin,rymax;for(pa=0;pa<pal;pa++){ring=rings[pa];rxmin=(rxmax=ring[0]&&ring[0][0]);rymin=(rymax=ring[0]&&ring[0][1]);ptl=ring.length;for(pt=0;pt<ptl;pt++){point=ring[pt];x=point[0];y=point[1];xmin=min(xmin,x);ymin=min(ymin,y);xmax=max(xmax,x);ymax=max(ymax,y);rxmin=min(rxmin,x);rymin=min(rymin,y);rxmax=max(rxmax,x);rymax=max(rymax,y);}parts.push(new _1213({xmin:rxmin,ymin:rymin,xmax:rxmax,ymax:rymax,spatialReference:(sr?sr.toJson():null)}));}this._extent={xmin:xmin,ymin:ymin,xmax:xmax,ymax:ymax,spatialReference:(sr?sr.toJson():null)};this._partwise=parts.length>1?parts:null;_1223=new _1213(this._extent);_1223._partwise=this._partwise;return _1223;},contains:function(point){var rings=this.rings,ring,_1224=false,pi,pj,_1225,j,i,pa,pal=rings.length,_1226=this.spatialReference,_1227=point.spatialReference,_1228,x=point.x,y=point.y;if(_1226&&_1227&&!_1226.equals(_1227)&&_1226._canProject(_1227)){_1228=_1226.isWebMercator()?Point.lngLatToXY(x,y):Point.xyToLngLat(x,y,true);x=_1228[0];y=_1228[1];}for(pa=0;pa<pal;pa++){ring=rings[pa];_1225=ring.length;j=0;for(i=0;i<_1225;i++){j++;if(j===_1225){j=0;}pi=ring[i];pj=ring[j];if((pi[1]<y&&pj[1]>=y||pj[1]<y&&pi[1]>=y)&&(pi[0]+(y-pi[1])/(pj[1]-pi[1])*(pj[0]-pi[0])<x)){_1224=!_1224;}}}return _1224;},isClockwise:function(arr){var area=0,i,il=arr.length,func=lang.isArray(arr[0])?function(p1,p2){return p1[0]*p2[1]-p2[0]*p1[1];}:function(p1,p2){return p1.x*p2.y-p2.x*p1.y;};for(i=0;i<il;i++){area+=func(arr[i],arr[(i+1)%il]);}return (area/2)<=0;},isSelfIntersecting:function(_1229){_1229=_1229||this;var i,j,k,m,line1,line2,_122a,_122b=_1229.rings.length;for(k=0;k<_122b;k++){for(i=0;i<_1229.rings[k].length-1;i++){line1=[[_1229.rings[k][i][0],_1229.rings[k][i][1]],[_1229.rings[k][i+1][0],_1229.rings[k][i+1][1]]];for(j=k+1;j<_122b;j++){for(m=0;m<_1229.rings[j].length-1;m++){line2=[[_1229.rings[j][m][0],_1229.rings[j][m][1]],[_1229.rings[j][m+1][0],_1229.rings[j][m+1][1]]];_122a=_1214._getLineIntersection2(line1,line2);if(_122a){if(!((_122a[0]===line1[0][0]&&_122a[1]===line1[0][1])||(_122a[0]===line2[0][0]&&_122a[1]===line2[0][1])||(_122a[0]===line1[1][0]&&_122a[1]===line1[1][1])||(_122a[0]===line2[1][0]&&_122a[1]===line2[1][1]))){return true;}}}}}var _122c=_1229.rings[k].length;if(_122c<=4){continue;}for(i=0;i<_122c-3;i++){var _122d=_122c-1;if(i===0){_122d=_122c-2;}line1=[[_1229.rings[k][i][0],_1229.rings[k][i][1]],[_1229.rings[k][i+1][0],_1229.rings[k][i+1][1]]];for(j=i+2;j<_122d;j++){line2=[[_1229.rings[k][j][0],_1229.rings[k][j][1]],[_1229.rings[k][j+1][0],_1229.rings[k][j+1][1]]];_122a=_1214._getLineIntersection2(line1,line2);if(_122a){if(!((_122a[0]===line1[0][0]&&_122a[1]===line1[0][1])||(_122a[0]===line2[0][0]&&_122a[1]===line2[0][1])||(_122a[0]===line1[1][0]&&_122a[1]===line1[1][1])||(_122a[0]===line2[1][0]&&_122a[1]===line2[1][1]))){return true;}}}}}return false;},toJson:function(){var json={rings:lang.clone(this.rings)},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});_1216.defaultProps=_1215;_1216.createEllipse=function(_122e){var dx=_122e.center.x,dy=_122e.center.y,a=_122e.longAxis,b=_122e.shortAxis,_122f=_122e.numberOfPoints,map=_122e.map,pt,i,_1230,_1231,_1232,path=[],angle=(2*Math.PI)/_122f;for(i=0;i<_122f;i++){_1230=Math.cos(i*angle);_1231=Math.sin(i*angle);pt=map.toMap({x:a*_1230+dx,y:b*_1231+dy});path.push(pt);}path.push(path[0]);_1232=new _1216(map.spatialReference);_1232.addRing(path);return _1232;};_1216.createCircle=function(_1233){var _1234={center:_1233.center,longAxis:_1233.r,shortAxis:_1233.r,numberOfPoints:_1233.numberOfPoints,map:_1233.map};var _1235=_1216.createEllipse(_1234);return _1235;};if(has("extend-esri")){lang.setObject("geometry.Polygon",_1216,_120f);_120f.geometry.defaultPolygon=_1215;_120f.geometry.createEllipse=_1216.createEllipse;_120f.geometry.createCircle=_1216.createCircle;_120f.geometry.isClockwise=_1216.prototype.isClockwise;_120f.geometry.polygonSelfIntersecting=_1216.prototype.isSelfIntersecting;}return _1216;});},"esri/tasks/OffsetParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/geometry/jsonUtils"],function(_1236,lang,array,_1237,has,_1238,_1239){var _123a=_1236(null,{declaredClass:"esri.tasks.OffsetParameters",geometries:null,bevelRatio:null,offsetDistance:null,offsetHow:null,offsetUnit:null,toJson:function(){var geoms=array.map(this.geometries,function(geom){return geom.toJson();});var json={};if(this.geometries&&this.geometries.length>0){json.geometries=_1237.toJson({geometryType:_1239.getJsonType(this.geometries[0]),geometries:geoms});json.sr=_1237.toJson(this.geometries[0].spatialReference.toJson());}if(this.bevelRatio){json.bevelRatio=this.bevelRatio;}if(this.offsetDistance){json.offsetDistance=this.offsetDistance;}if(this.offsetHow){json.offsetHow=this.offsetHow;}if(this.offsetUnit){json.offsetUnit=this.offsetUnit;}return json;}});lang.mixin(_123a,{OFFSET_BEVELLED:"esriGeometryOffsetBevelled",OFFSET_MITERED:"esriGeometryOffsetMitered",OFFSET_ROUNDED:"esriGeometryOffsetRounded"});if(has("extend-esri")){lang.setObject("tasks.OffsetParameters",_123a,_1238);}return _123a;});},"esri/PopupInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/i18n","dojo/has","esri/kernel","esri/lang","dojo/i18n!dojo/cldr/nls/number"],function(_123b,lang,array,_123c,i18n,has,_123d,_123e){var _123f=_123b(null,{declaredClass:"esri.PopupInfo",initialize:function(json,_1240){if(!json){return;}lang.mixin(this,_1240);this.info=json;this.title=this.getTitle;this.content=this.getContent;var _1241=(this._fieldLabels={}),fmaps=(this._fieldsMap={});if(json.fieldInfos){array.forEach(json.fieldInfos,function(_1242){_1241[_1242.fieldName]=_1242.label;fmaps[_1242.fieldName]=_1242;});}},toJson:function(){return _123c.fromJson(_123c.toJson(this.info));},getTitle:function(){},getContent:function(){},getComponents:function(_1243){var _1244=this.info,layer=_1243.getLayer(),_1245=lang.clone(_1243.attributes)||{},_1246=lang.clone(_1245),_1247=_1244.fieldInfos,_1248="",_1249="",_124a,_124b,value,_124c=layer&&layer._getDateOpts&&layer._getDateOpts().properties,_124d={dateFormat:{properties:_124c,formatter:"DateFormat"+this._insertOffset(this._dateFormats["shortDateShortTime"])}};if(_1247){array.forEach(_1247,function(_124e){var _124f=_124e.fieldName,val=_1246[_124f];_1246[_124f]=this._formatValue(val,_124f,_124d);if(_124c&&_124e.format&&_124e.format.dateFormat){var pos=array.indexOf(_124c,_124f);if(pos>-1){_124c.splice(pos,1);}}},this);}if(layer){var types=layer.types,_1250=layer.typeIdField,_1251=_1250&&_1245[_1250];for(_124b in _1245){value=_1245[_124b];if(_123e.isDefined(value)){var _1252=this._getDomainName(layer,types,_1251,_124b,value);if(_123e.isDefined(_1252)){_1246[_124b]=_1252;}else{if(_124b===_1250){var _1253=this._getTypeName(layer,value);if(_123e.isDefined(_1253)){_1246[_124b]=_1253;}}}}}}if(_1244.title){_1248=lang.trim(_123e.substitute(_1246,this._fixTokens(_1244.title),_124d)||"");}if(_1244.description){_1249=lang.trim(_123e.substitute(_1246,this._fixTokens(_1244.description),_124d)||"");}if(_1247){_124a=[];array.forEach(_1247,function(_1254){_124b=_1254.fieldName;if(_124b&&_1254.visible){_124a.push([_1254.label||_124b,_123e.substitute(_1246,"${"+_124b+"}",_124d)||""]);}});}var _1255,valid;if(_1244.mediaInfos){_1255=[];array.forEach(_1244.mediaInfos,function(minfo){valid=0;value=minfo.value;switch(minfo.type){case "image":var url=value.sourceURL;url=url&&lang.trim(_123e.substitute(_1245,this._fixTokens(url)));valid=!!url;break;case "piechart":case "linechart":case "columnchart":case "barchart":valid=array.some(value.fields,function(field){return _123e.isDefined(_1245[field]);});break;default:return;}if(valid){minfo=lang.clone(minfo);value=minfo.value;minfo.title=minfo.title?lang.trim(_123e.substitute(_1246,this._fixTokens(minfo.title),_124d)||""):"";minfo.caption=minfo.caption?lang.trim(_123e.substitute(_1246,this._fixTokens(minfo.caption),_124d)||""):"";if(minfo.type==="image"){value.sourceURL=_123e.substitute(_1245,this._fixTokens(value.sourceURL));if(value.linkURL){value.linkURL=lang.trim(_123e.substitute(_1245,this._fixTokens(value.linkURL))||"");}}else{var _1256=_1245[value.normalizeField]||0;value.fields=array.map(value.fields,function(_1257){var data=_1245[_1257];data=(data===undefined)?null:data;if(data&&_1256){data=data/_1256;}return {y:data,tooltip:(this._fieldLabels[_1257]||_1257)+":<br/>"+this._formatValue(data,_1257,_124d,!!_1256)};},this);}_1255.push(minfo);}},this);}return {title:_1248,description:_1249,fields:(_124a&&_124a.length)?_124a:null,mediaInfos:(_1255&&_1255.length)?_1255:null,formatted:_1246,editSummary:(layer&&layer.getEditSummary)?layer.getEditSummary(_1243):""};},getAttachments:function(_1258){var layer=_1258.getLayer(),_1259=_1258.attributes;if(this.info.showAttachments&&layer&&layer.hasAttachments&&layer.objectIdField){var oid=_1259&&_1259[layer.objectIdField];if(oid){return layer.queryAttachmentInfos(oid);}}},_dateFormats:{"shortDate":"(datePattern: 'M/d/y', selector: 'date')","longMonthDayYear":"(datePattern: 'MMMM d, y', selector: 'date')","dayShortMonthYear":"(datePattern: 'd MMM y', selector: 'date')","longDate":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')","shortDateShortTime":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')","shortDateShortTime24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","shortDateLongTime":"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')","shortDateLongTime24":"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')","longMonthYear":"(datePattern: 'MMMM y', selector: 'date')","shortMonthYear":"(datePattern: 'MMM y', selector: 'date')","year":"(datePattern: 'y', selector: 'date')"},_fixTokens:function(_125a){return _125a.replace(/(\{[^\{\r\n]+\})/g,"$$$1");},_formatValue:function(val,_125b,_125c,_125d){var _125e=this._fieldsMap[_125b],fmt=_125e&&_125e.format;if(!_123e.isDefined(val)||!_125e||!_123e.isDefined(fmt)){return val;}var _125f="",_1260=[],_1261=fmt.hasOwnProperty("places")||fmt.hasOwnProperty("digitSeparator"),_1262=fmt.hasOwnProperty("digitSeparator")?fmt.digitSeparator:true;if(_1261){_125f="NumberFormat";_1260.push("places: "+((_123e.isDefined(fmt.places)&&(!_125d||fmt.places>0))?Number(fmt.places):"Infinity"));if(_1260.length){_125f+=("("+_1260.join(",")+")");}}else{if(fmt.dateFormat){_125f="DateFormat"+this._insertOffset(this._dateFormats[fmt.dateFormat]||this._dateFormats["shortDateShortTime"]);}else{return val;}}var _1263=_123e.substitute({"myKey":val},"${myKey:"+_125f+"}",_125c)||"";if(_1261&&!_1262){var _1264=i18n.getLocalization("dojo.cldr","number");if(_1264.group){_1263=_1263.replace(new RegExp("\\"+_1264.group,"g"),"");}}return _1263;},_insertOffset:function(_1265){if(_1265){_1265=_123e.isDefined(this.utcOffset)?_1265.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+")"):_1265;}return _1265;},_getDomainName:function(layer,types,_1266,_1267,value){var _1268,stop;if(types&&_123e.isDefined(_1266)){array.some(types,function(_1269){if(_1269.id==_1266){_1268=_1269.domains&&_1269.domains[_1267];if(_1268&&_1268.type==="inherited"){_1268=this._getLayerDomain(layer,_1267);stop=true;}return true;}return false;},this);}if(!stop&&!_1268){_1268=this._getLayerDomain(layer,_1267);}if(_1268&&_1268.codedValues){var _126a;array.some(_1268.codedValues,function(_126b){if(_126b.code==value){_126a=_126b.name;return true;}return false;});return _126a;}},_getLayerDomain:function(layer,_126c){var _126d=layer.fields;if(_126d){var _126e;array.some(_126d,function(_126f){if(_126f.name===_126c){_126e=_126f.domain;return true;}return false;});return _126e;}},_getTypeName:function(layer,id){var types=layer.types;if(types){var _1270;array.some(types,function(_1271){if(_1271.id==id){_1270=_1271.name;return true;}return false;});return _1270;}}});if(has("extend-esri")){_123d.PopupInfo=_123d.PopupInfoTemplate=_123f;}return _123f;});},"dijit/_WidgetsInTemplateMixin":function(){define("dijit/_WidgetsInTemplateMixin",["dojo/_base/array","dojo/_base/declare","dojo/parser"],function(array,_1272,_1273){return _1272("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:false,widgetsInTemplate:true,_beforeFillContent:function(){if(this.widgetsInTemplate){var node=this.domNode;var cw=(this._startupWidgets=_1273.parse(node,{noStart:!this._earlyTemplatedStartup,template:true,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,scope:"dojo"}));if(!cw.isFulfilled()){throw new Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), "+"unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}this._attachTemplateNodes(cw,function(n,p){return n[p];});}},startup:function(){array.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);}});});},"dijit/_FocusMixin":function(){define("dijit/_FocusMixin",["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(focus,_1274,_1275,lang){lang.extend(_1274,{focused:false,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus();},_onBlur:function(){this.onBlur();}});return _1275("dijit._FocusMixin",null,{_focusManager:focus});});},"esri/InfoWindowBase":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/Deferred","dojo/dom-construct","dojo/has","dijit/registry","esri/kernel","esri/lang","esri/geometry/ScreenPoint"],function(_1276,lang,array,_1277,_1278,_1279,has,_127a,_127b,_127c,_127d){var _127e=_1276(null,{declaredClass:"esri.InfoWindowBase",constructor:function(){var hitch=lang.hitch;this.__set_title=hitch(this,this.__set_title);this.__err_title=hitch(this,this.__err_title);this.__set_content=hitch(this,this.__set_content);this.__err_content=hitch(this,this.__err_content);},setMap:function(map){this.map=map;},unsetMap:function(map){delete this.map;},setTitle:function(){},setContent:function(){},show:function(){},hide:function(){},resize:function(){},onShow:function(){},onHide:function(){},place:function(_127f,_1280){if(_127c.isDefined(_127f)){if(lang.isObject(_127f)){_1279.place(_127f,_1280,"only");}else{_1280.innerHTML=_127f;}}else{_1280.innerHTML="";}},startupDijits:function(node){this._processDijits(node);},destroyDijits:function(node){this._processDijits(node,true);},_processDijits:function(node,_1281){if(node&&node.children.length===1){var child=node.children[0];if(child){var _1282=_127a.byNode(child);var _1283=_1282?[_1282]:_127a.findWidgets(child);array.forEach(_1283,function(_1284){if(_1281){if(_1284._started&&!_1284._destroyed){try{if(_1284.destroyRecursive){_1284.destroyRecursive();}else{if(_1284.destroy){_1284.destroy();}}}catch(ex){console.debug("An error occurred when destroying a widget embedded within InfoWindow: "+ex.message);}}}else{if(!_1284._started){try{_1284.startup();}catch(ex2){console.debug("An error occurred when starting a widget embedded within InfoWindow: "+ex2.message);}}}});}}},__registerMapListeners:function(){this.__unregisterMapListeners();var map=this.map;this.__handles=[_1277.connect(map,"onPan",this,this.__onMapPan),_1277.connect(map,"onZoomStart",this,this.__onMapZmStart),_1277.connect(map,"onExtentChange",this,this.__onMapExtChg)];},__unregisterMapListeners:function(){var _1285=this.__handles;if(_1285){array.forEach(_1285,_1277.disconnect,_1277);this.__handles=null;}},__onMapPan:function(_1286,delta){this.move(delta,true);},__onMapZmStart:function(){this.__mcoords=this.mapCoords||this.map.toMap(new _127d(this.coords));this.hide(null,true);},__onMapExtChg:function(_1287,delta,_1288){var map=this.map,_1289=this.mapCoords;if(_1289){this.show(_1289,null,true);}else{var _128a;if(_1288){_128a=map.toScreen(this.__mcoords);}else{_128a=this.coords.offset((delta&&delta.x)||0,(delta&&delta.y)||0);}this.show(_128a,null,true);}},__setValue:function(_128b,_128c){this[_128b].innerHTML="";var dfd="_dfd"+_128b,_128d=this[dfd];if(_128d&&_128d.fired===-1){_128d.cancel();this[dfd]=null;}if(_127c.isDefined(_128c)){if(_128c instanceof _1278){this[dfd]=_128c;_128c.addCallbacks(this["__set"+_128b],this["__err"+_128b]);}else{this.__render(_128b,_128c);}}},__set_title:function(_128e){this._dfd_title=null;this.__render("_title",_128e);},__err_title:function(error){this._dfd_title=null;},__set_content:function(_128f){this._dfd_content=null;this.__render("_content",_128f);},__err_content:function(error){this._dfd_content=null;},__render:function(_1290,_1291){var node=this[_1290];this.place(_1291,node);if(this.isShowing){this.startupDijits(node);if(_1290==="_title"&&this._adjustContentArea){this._adjustContentArea();}}}});if(has("extend-esri")){_127b.InfoWindowBase=_127e;}return _127e;});},"dojox/collections/ArrayList":function(){define("dojox/collections/ArrayList",["dojo/_base/kernel","dojo/_base/array","./_base"],function(dojo,_1292,dxc){dxc.ArrayList=function(arr){var items=[];if(arr){items=items.concat(arr);}this.count=items.length;this.add=function(obj){items.push(obj);this.count=items.length;};this.addRange=function(a){if(a.getIterator){var e=a.getIterator();while(!e.atEnd()){this.add(e.get());}this.count=items.length;}else{for(var i=0;i<a.length;i++){items.push(a[i]);}this.count=items.length;}};this.clear=function(){items.splice(0,items.length);this.count=0;};this.clone=function(){return new dxc.ArrayList(items);};this.contains=function(obj){for(var i=0;i<items.length;i++){if(items[i]==obj){return true;}}return false;};this.forEach=function(fn,scope){dojo.forEach(items,fn,scope);};this.getIterator=function(){return new dxc.Iterator(items);};this.indexOf=function(obj){for(var i=0;i<items.length;i++){if(items[i]==obj){return i;}}return -1;};this.insert=function(i,obj){items.splice(i,0,obj);this.count=items.length;};this.item=function(i){return items[i];};this.remove=function(obj){var i=this.indexOf(obj);if(i>=0){items.splice(i,1);}this.count=items.length;};this.removeAt=function(i){items.splice(i,1);this.count=items.length;};this.reverse=function(){items.reverse();};this.sort=function(fn){if(fn){items.sort(fn);}else{items.sort();}};this.setByIndex=function(i,obj){items[i]=obj;this.count=items.length;};this.toArray=function(){return [].concat(items);};this.toString=function(delim){return items.join((delim||","));};};return dxc.ArrayList;});},"dojo/fx/Toggler":function(){define(["../_base/lang","../_base/declare","../_base/fx","../_base/connect"],function(lang,_1293,_1294,_1295){return _1293("dojo.fx.Toggler",null,{node:null,showFunc:_1294.fadeIn,hideFunc:_1294.fadeOut,showDuration:200,hideDuration:200,constructor:function(args){var _1296=this;lang.mixin(_1296,args);_1296.node=args.node;_1296._showArgs=lang.mixin({},args);_1296._showArgs.node=_1296.node;_1296._showArgs.duration=_1296.showDuration;_1296.showAnim=_1296.showFunc(_1296._showArgs);_1296._hideArgs=lang.mixin({},args);_1296._hideArgs.node=_1296.node;_1296._hideArgs.duration=_1296.hideDuration;_1296.hideAnim=_1296.hideFunc(_1296._hideArgs);_1295.connect(_1296.showAnim,"beforeBegin",lang.hitch(_1296.hideAnim,"stop",true));_1295.connect(_1296.hideAnim,"beforeBegin",lang.hitch(_1296.showAnim,"stop",true));},show:function(delay){return this.showAnim.play(delay||0);},hide:function(delay){return this.hideAnim.play(delay||0);}});});},"esri/units":function(){define(["dojo/has","esri/kernel"],function(has,_1297){var units={CENTIMETERS:"esriCentimeters",DECIMAL_DEGREES:"esriDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds",DECIMETERS:"esriDecimeters",FEET:"esriFeet",INCHES:"esriInches",KILOMETERS:"esriKilometers",METERS:"esriMeters",MILES:"esriMiles",MILLIMETERS:"esriMillimeters",NAUTICAL_MILES:"esriNauticalMiles",POINTS:"esriPoints",UNKNOWN:"esriUnknownUnits",YARDS:"esriYards",ACRES:"esriAcres",ARES:"esriAres",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_FEET:"esriSquareFeet",SQUARE_METERS:"esriSquareMeters",HECTARES:"esriHectares",SQUARE_YARDS:"esriSquareYards",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters"};if(has("extend-esri")){_1297.Units=units;}return units;});},"esri/renderers/ClassBreaksRenderer":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/symbols/jsonUtils","esri/renderers/Renderer"],function(_1298,array,lang,has,_1299,_129a,_129b,_129c){var _129d=_1298(_129c,{declaredClass:"esri.renderer.ClassBreaksRenderer",constructor:function(sym,attr){this.breaks=[];this._symbols={};this.infos=[];if(sym&&!sym.declaredClass){var json=sym;this.attributeField=json.field;sym=json.defaultSymbol;if(sym){this.defaultSymbol=_129b.fromJson(sym);}this._copy(["defaultLabel","classificationMethod:rest","normalizationType:rest","normalizationField","normalizationTotal"],json,this);var min=json.minValue,infos=json.classBreakInfos;if(infos&&infos[0]&&_129a.isDefined(infos[0].classMaxValue)){array.forEach(infos,function(info){var _129e=info.classMaxValue;info.minValue=min;info.maxValue=_129e;min=_129e;},this);}array.forEach(infos,this._addBreakInfo,this);}else{this.defaultSymbol=sym;this.attributeField=attr;}},addBreak:function(min,max,_129f){var info=lang.isObject(min)?min:{minValue:min,maxValue:max,symbol:_129f};this._addBreakInfo(info);},removeBreak:function(min,max){var range,_12a0=this.breaks,i,il=_12a0.length,_12a1=this._symbols;for(i=0;i<il;i++){range=_12a0[i];if(range[0]==min&&range[1]==max){_12a0.splice(i,1);delete _12a1[min+"-"+max];this.infos.splice(i,1);break;}}},clearBreaks:function(){this.breaks=[];this._symbols={};this.infos=[];},getSymbol:function(_12a2){var attr=this.attributeField,_12a3=_12a2.attributes,val,rs=this.breaks,i,il=rs.length,_12a4=this._symbols,range,incl=this.isMaxInclusive;if(lang.isFunction(attr)){val=attr(_12a2);}else{val=parseFloat(_12a3[attr]);var _12a5=this.normalizationType,_12a6,_12a7;if(_12a5){_12a6=parseFloat(this.normalizationTotal);_12a7=parseFloat(_12a3[this.normalizationField]);if(_12a5==="log"){val=Math.log(val)*Math.LOG10E;}else{if(_12a5==="percent-of-total"&&!isNaN(_12a6)){val=(val/_12a6)*100;}else{if(_12a5==="field"&&!isNaN(_12a7)){val=val/_12a7;}}}}}for(i=0;i<il;i++){range=rs[i];if(range[0]<=val&&(incl?(val<=range[1]):(val<range[1]))){return _12a4[range[0]+"-"+range[1]];}}return this.defaultSymbol;},setMaxInclusive:function(_12a8){this.isMaxInclusive=_12a8;},_normalizationTypeEnums:[["field","esriNormalizeByField"],["log","esriNormalizeByLog"],["percent-of-total","esriNormalizeByPercentOfTotal"]],_classificationMethodEnums:[["natural-breaks","esriClassifyNaturalBreaks"],["equal-interval","esriClassifyEqualInterval"],["quantile","esriClassifyQuantile"],["standard-deviation","esriClassifyStandardDeviation"],["geometrical-interval","esriClassifyGeometricalInterval"]],_copy:function(keys,_12a9,toObj){array.forEach(keys,function(key){var _12aa=key.split(":"),_12ab,_12ac,_12ad,value;if(_12aa.length>1){key=_12aa[0];_12ab=this["_"+key+"Enums"];if(_12aa[1]==="rest"){_12ac="1";_12ad="0";}else{if(_12aa[1]==="sdk"){_12ac="0";_12ad="1";}}}value=_12a9[key];if(value!==undefined){toObj[key]=value;if(_12ab&&_12ac){var i,len=_12ab.length;for(i=0;i<len;i++){if(_12ab[i][_12ac]===value){toObj[key]=_12ab[i][_12ad];break;}}}}},this);},_addBreakInfo:function(info){var min=info.minValue,max=info.maxValue;this.breaks.push([min,max]);this.infos.push(info);var _12ae=info.symbol;if(_12ae){if(!_12ae.declaredClass){info.symbol=_129b.fromJson(_12ae);}}this._symbols[min+"-"+max]=info.symbol;},toJson:function(){var infos=this.infos||[],_12af=_129a.fixJson,_12b0=infos[0]&&infos[0].minValue,json={type:"classBreaks",field:this.attributeField,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),minValue:(_12b0===-Infinity)?-Number.MAX_VALUE:_12b0,classBreakInfos:array.map(infos,function(info){info=lang.mixin({},info);info.symbol=info.symbol&&info.symbol.toJson();info.classMaxValue=(info.maxValue===Infinity)?Number.MAX_VALUE:info.maxValue;delete info.minValue;delete info.maxValue;return _12af(info);})};this._copy(["defaultLabel","classificationMethod:sdk","normalizationType:sdk","normalizationField","normalizationTotal"],this,json);return _12af(json);}});if(has("extend-esri")){lang.setObject("renderer.ClassBreaksRenderer",_129d,_1299);}return _129d;});},"esri/renderers/TimeClassBreaksAger":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","dojo/date","esri/kernel","esri/lang","esri/symbols/jsonUtils","esri/renderers/SymbolAger"],function(_12b1,array,lang,has,_12b2,_12b3,_12b4,_12b5,_12b6){var _12b7={UNIT_DAYS:"day",UNIT_HOURS:"hour",UNIT_MILLISECONDS:"millisecond",UNIT_MINUTES:"minute",UNIT_MONTHS:"month",UNIT_SECONDS:"second",UNIT_WEEKS:"week",UNIT_YEARS:"year"};var _12b8=_12b1(_12b6,{declaredClass:"esri.renderer.TimeClassBreaksAger",constructor:function(infos,_12b9){this.infos=infos;this.timeUnits=_12b9||"day";infos.sort(function(a,b){if(a.minAge<b.minAge){return -1;}if(a.minAge>b.minAge){return 1;}return 0;});},getAgedSymbol:function(_12ba,_12bb){var _12bc=_12bb.getLayer(),_12bd=_12bb.attributes,isDef=_12b4.isDefined;_12ba=_12b5.fromJson(_12ba.toJson());var _12be=_12bc._map.timeExtent;var _12bf=_12be.endTime;if(!_12bf){return _12ba;}var _12c0=new Date(_12bd[_12bc._startTimeField]);var diff=_12b2.difference(_12c0,_12bf,this.timeUnits);array.some(this.infos,function(info){if(diff>=info.minAge&&diff<=info.maxAge){var color=info.color,size=info.size,alpha=info.alpha;if(color){_12ba.setColor(color);}if(isDef(size)){this._setSymbolSize(_12ba,size);}if(isDef(alpha)&&_12ba.color){_12ba.color.a=alpha;}return true;}},this);return _12ba;}});lang.mixin(_12b8,_12b7);if(has("extend-esri")){lang.setObject("renderer.TimeClassBreaksAger",_12b8,_12b3);}return _12b8;});},"esri/layers/ImageParameters":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","esri/kernel","esri/lang","esri/layerUtils"],function(_12c1,_12c2,lang,_12c3,has,_12c4,_12c5,_12c6){var _12c7=_12c2(null,{declaredClass:"esri.layers.ImageParameters",constructor:function(){this.layerDefinitions=[];},bbox:null,extent:null,width:null,height:null,dpi:null,format:null,imageSpatialReference:null,layerOption:null,layerIds:null,transparent:null,timeExtent:null,layerTimeOptions:null,toJson:function(_12c8){if(this.bbox){_12c1.deprecated(this.declaredClass+" : Property 'bbox' deprecated. Use property 'extent'.");}var bb=this.bbox||this.extent;bb=bb&&_12c8&&bb._normalize(true);var _12c9=this.layerOption,wkid=bb?(bb.spatialReference.wkid||_12c3.toJson(bb.spatialReference.toJson())):null,_12ca=this.imageSpatialReference,json={dpi:this.dpi,format:this.format,transparent:this.transparent,size:(this.width!==null&&this.height!==null?this.width+","+this.height:null),bbox:(bb?(bb.xmin+","+bb.ymin+","+bb.xmax+","+bb.ymax):null),bboxSR:wkid,layers:(_12c9?_12c9+":"+this.layerIds.join(","):null),imageSR:(_12ca?(_12ca.wkid||_12c3.toJson(_12ca.toJson())):wkid)};json.layerDefs=_12c6._serializeLayerDefinitions(this.layerDefinitions);var _12cb=this.timeExtent;json.time=_12cb?_12cb.toJson().join(","):null;json.layerTimeOptions=_12c6._serializeTimeOptions(this.layerTimeOptions);return _12c5.filter(json,function(value){if(value!==null){return true;}});}});lang.mixin(_12c7,{LAYER_OPTION_SHOW:"show",LAYER_OPTION_HIDE:"hide",LAYER_OPTION_INCLUDE:"include",LAYER_OPTION_EXCLUDE:"exclude"});if(has("extend-esri")){lang.setObject("layers.ImageParameters",_12c7,_12c4);}return _12c7;});},"dojox/gfx/renderer":function(){define("dojox/gfx/renderer",["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(g,lang,has,win,_12cc){var _12cd=null;return {load:function(id,_12ce,load){if(_12cd&&id!="force"){load(_12cd);return;}var _12cf=_12cc.forceGfxRenderer,_12d0=!_12cf&&(lang.isString(_12cc.gfxRenderer)?_12cc.gfxRenderer:"svg,vml,canvas,silverlight").split(","),_12d1,_12d2;while(!_12cf&&_12d0.length){switch(_12d0.shift()){case "svg":if("SVGAngle" in win.global){_12cf="svg";}break;case "vml":if(has("ie")){_12cf="vml";}break;case "silverlight":try{if(has("ie")){_12d1=new ActiveXObject("AgControl.AgControl");if(_12d1&&_12d1.IsVersionSupported("1.0")){_12d2=true;}}else{if(navigator.plugins["Silverlight Plug-In"]){_12d2=true;}}}catch(e){_12d2=false;}finally{_12d1=null;}if(_12d2){_12cf="silverlight";}break;case "canvas":if(win.global.CanvasRenderingContext2D){_12cf="canvas";}break;}}if(_12cf==="canvas"&&_12cc.canvasEvents!==false){_12cf="canvasWithEvents";}if(_12cc.isDebug){console.log("gfx renderer = "+_12cf);}function _12d3(){_12ce(["dojox/gfx/"+_12cf],function(_12d4){g.renderer=_12cf;_12cd=_12d4;load(_12d4);});};if(_12cf=="svg"&&typeof window.svgweb!="undefined"){window.svgweb.addOnLoad(_12d3);}else{_12d3();}}};});},"esri/OperationBase":function(){define(["dojo/_base/declare","dojo/has","esri/kernel"],function(_12d5,has,_12d6){var _12d7=_12d5(null,{declaredClass:"esri.OperationBase",type:"not implemented",label:"not implemented",constructor:function(_12d8){_12d8=_12d8||{};if(_12d8.label){this.label=_12d8.label;}},performUndo:function(){console.log("performUndo has not been implemented");},performRedo:function(){console.log("performRedo has not been implemented");}});if(has("extend-esri")){_12d6.OperationBase=_12d7;}return _12d7;});},"esri/dijit/PopupTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","dojo/dom-construct","esri/kernel","esri/InfoTemplate","esri/PopupInfo","esri/dijit/PopupRenderer"],function(_12d9,lang,has,_12da,_12db,_12dc,_12dd,_12de){var PT=_12d9([_12dc,_12dd],{declaredClass:"esri.dijit.PopupTemplate","-chains-":{constructor:"manual"},chartTheme:null,constructor:function(json,_12df){lang.mixin(this,_12df);this.initialize(json,_12df);},getTitle:function(_12e0){return this.info?this.getComponents(_12e0).title:"";},getContent:function(_12e1){return this.info?new _12de({template:this,graphic:_12e1,chartTheme:this.chartTheme},_12da.create("div")).domNode:"";}});if(has("extend-esri")){lang.setObject("dijit.PopupTemplate",PT,_12db);}return PT;});},"dijit/form/_ButtonMixin":function(){define("dijit/form/_ButtonMixin",["dojo/_base/declare","dojo/dom","dojo/_base/event","../registry"],function(_12e2,dom,event,_12e3){return _12e2("dijit.form._ButtonMixin",null,{label:"",type:"button",_onClick:function(e){if(this.disabled){event.stop(e);return false;}var _12e4=this.onClick(e)===false;if(!_12e4&&this.type=="submit"&&!(this.valueNode||this.focusNode).form){for(var node=this.domNode;node.parentNode;node=node.parentNode){var _12e5=_12e3.byNode(node);if(_12e5&&typeof _12e5._onSubmit=="function"){_12e5._onSubmit(e);_12e4=true;break;}}}if(_12e4){e.preventDefault();}return !_12e4;},postCreate:function(){this.inherited(arguments);dom.setSelectable(this.focusNode,false);},onClick:function(){return true;},_setLabelAttr:function(_12e6){this._set("label",_12e6);(this.containerNode||this.focusNode).innerHTML=_12e6;}});});},"esri/domUtils":function(){define(["dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has","esri/kernel"],function(_12e7,lang,style,has,_12e8){var _12e9={show:function(node){if(node){node.style.display="block";}},hide:function(node){if(node){node.style.display="none";}},toggle:function(node){node.style.display=node.style.display==="none"?"block":"none";},documentBox:has("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(node){var _12ea=0,_12eb=0,_12ec=0,_12ed=0,_12ee=0,_12ef=0;return [_12e7.connect(node,"ontouchstart",function(evt){_12ea=evt.touches[0].screenX;_12eb=evt.touches[0].screenY;_12ec=node.scrollWidth;_12ed=node.scrollHeight;_12ee=node.clientWidth;_12ef=node.clientHeight;}),_12e7.connect(node,"ontouchmove",function(evt){evt.preventDefault();var child=node.firstChild;if(child instanceof Text){child=node.childNodes[1];}var _12f0=child._currentX||0,_12f1=child._currentY||0;_12f0+=(evt.touches[0].screenX-_12ea);if(_12f0>0){_12f0=0;}else{if(_12f0<0&&(Math.abs(_12f0)+_12ee)>_12ec){_12f0=-1*(_12ec-_12ee);}}child._currentX=_12f0;_12f1+=(evt.touches[0].screenY-_12eb);if(_12f1>0){_12f1=0;}else{if(_12f1<0&&(Math.abs(_12f1)+_12ef)>_12ed){_12f1=-1*(_12ed-_12ef);}}child._currentY=_12f1;style.set(child,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+_12f0+"px, "+_12f1+"px)"});_12ea=evt.touches[0].screenX;_12eb=evt.touches[0].screenY;})];}};if(has("extend-esri")){lang.mixin(_12e8,_12e9);}return _12e9;});},"dijit/registry":function(){define("dijit/registry",["dojo/_base/array","dojo/sniff","dojo/_base/unload","dojo/_base/window","./main"],function(array,has,_12f2,win,dijit){var _12f3={},hash={};var _12f4={length:0,add:function(_12f5){if(hash[_12f5.id]){throw new Error("Tried to register widget with id=="+_12f5.id+" but that id is already registered");}hash[_12f5.id]=_12f5;this.length++;},remove:function(id){if(hash[id]){delete hash[id];this.length--;}},byId:function(id){return typeof id=="string"?hash[id]:id;},byNode:function(node){return hash[node.getAttribute("widgetId")];},toArray:function(){var ar=[];for(var id in hash){ar.push(hash[id]);}return ar;},getUniqueId:function(_12f6){var id;do{id=_12f6+"_"+(_12f6 in _12f3?++_12f3[_12f6]:_12f3[_12f6]=0);}while(hash[id]);return dijit._scopeName=="dijit"?id:dijit._scopeName+"_"+id;},findWidgets:function(root,_12f7){var _12f8=[];function _12f9(root){for(var node=root.firstChild;node;node=node.nextSibling){if(node.nodeType==1){var _12fa=node.getAttribute("widgetId");if(_12fa){var _12fb=hash[_12fa];if(_12fb){_12f8.push(_12fb);}}else{if(node!==_12f7){_12f9(node);}}}}};_12f9(root);return _12f8;},_destroyAll:function(){dijit._curFocus=null;dijit._prevFocus=null;dijit._activeStack=[];array.forEach(_12f4.findWidgets(win.body()),function(_12fc){if(!_12fc._destroyed){if(_12fc.destroyRecursive){_12fc.destroyRecursive();}else{if(_12fc.destroy){_12fc.destroy();}}}});},getEnclosingWidget:function(node){while(node){var id=node.nodeType==1&&node.getAttribute("widgetId");if(id){return hash[id];}node=node.parentNode;}return null;},_hash:hash};dijit.registry=_12f4;return _12f4;});},"esri/main":function(){define(["esri/kernel","dojo/i18n!esri/nls/jsapi","esri/config","esri/sniff"],function(esri,_12fd){esri.bundle=_12fd;return esri;});},"esri/tasks/GPMessage":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_12fe,lang,has,_12ff){var _1300=_12fe(null,{declaredClass:"esri.tasks.GPMessage",constructor:function(_1301){lang.mixin(this,_1301);}});lang.mixin(_1300,{TYPE_INFORMATIVE:"esriJobMessageTypeInformative",TYPE_PROCESS_DEFINITION:"esriJobMessageTypeProcessDefinition",TYPE_PROCESS_START:"esriJobMessageTypeProcessStart",TYPE_PROCESS_STOP:"esriJobMessageTypeProcessStop",TYPE_WARNING:"esriJobMessageTypeWarning",TYPE_ERROR:"esriJobMessageTypeError",TYPE_EMPTY:"esriJobMessageTypeEmpty",TYPE_ABORT:"esriJobMessageTypeAbort"});if(has("extend-esri")){lang.setObject("tasks.GPMessage",_1300,_12ff);}return _1300;});},"dojo/io/script":function(){define(["../_base/connect","../_base/kernel","../_base/lang","../sniff","../_base/window","../_base/xhr","../dom","../dom-construct","../request/script"],function(_1302,_1303,lang,has,win,xhr,dom,_1304,_1305){function _1306(_1307,id){var dfd=_1307["jsonp_"+id];if(dfd){delete _1307["jsonp_"+id];if(dfd.canceled){_1303.global[_1305._callbacksProperty][dfd.ioArgs.requestId]();}}};_1303.deprecated("dojo/io/script","Use dojo/request/script.","2.0");var _1308={get:function(args){var rDfd,self=this;var dfd=this._makeScriptDeferred(args,function(dfd){rDfd&&rDfd.cancel();});var _1309=dfd.ioArgs;xhr._ioAddQueryToUrl(_1309);xhr._ioNotifyStart(dfd);rDfd=_1305.get(_1309.url,{timeout:args.timeout,jsonp:_1309.jsonp,checkString:args.checkString,ioArgs:_1309,frameDoc:args.frameDoc,canAttach:function(rDfd){_1309.requestId=rDfd.id;_1309.scriptId=rDfd.scriptId;_1309.canDelete=rDfd.canDelete;return _1308._canAttach(_1309);}},true);rDfd.then(function(){_1306(self,_1309.id);dfd.resolve(dfd);}).otherwise(function(error){_1306(self,_1309.id);dfd.ioArgs.error=error;dfd.reject(error);});return dfd;},attach:_1305._attach,remove:_1305._remove,_makeScriptDeferred:function(args,_130a){var dfd=xhr._ioSetArgs(args,_130a||this._deferredCancel,this._deferredOk,this._deferredError);var _130b=dfd.ioArgs;_130b.id=_1303._scopeName+"IoScript"+(args.callbackSuffix||(this._counter++));_130b.canDelete=false;_130b.jsonp=args.callbackParamName||args.jsonp;if(_130b.jsonp){_130b.query=_130b.query||"";if(_130b.query.length>0){_130b.query+="&";}_130b.query+=_130b.jsonp+"="+(args.frameDoc?"parent.":"")+_1303._scopeName+".io.script.jsonp_"+_130b.id+"._jsonpCallback";_130b.frameDoc=args.frameDoc;_130b.canDelete=true;dfd._jsonpCallback=this._jsonpCallback;this["jsonp_"+_130b.id]=dfd;}return dfd;},_deferredCancel:function(dfd){dfd.canceled=true;},_deferredOk:function(dfd){var _130c=dfd.ioArgs;return _130c.json||_130c.scriptLoaded||_130c;},_deferredError:function(error,dfd){console.log("dojo.io.script error",error);return error;},_deadScripts:[],_counter:1,_addDeadScript:function(_130d){_1308._deadScripts.push({id:_130d.id,frameDoc:_130d.frameDoc});_130d.frameDoc=null;},_validCheck:function(dfd){var _130e=_1308._deadScripts;if(_130e&&_130e.length>0){for(var i=0;i<_130e.length;i++){_1308.remove(_130e[i].id,_130e[i].frameDoc);_130e[i].frameDoc=null;}_1308._deadScripts=[];}return true;},_ioCheck:function(dfd){var _130f=dfd.ioArgs;if(_130f.json||(_130f.scriptLoaded&&!_130f.args.checkString)){return true;}var _1310=_130f.args.checkString;return _1310&&eval("typeof("+_1310+") != 'undefined'");},_resHandle:function(dfd){if(_1308._ioCheck(dfd)){dfd.callback(dfd);}else{dfd.errback(new Error("inconceivable dojo.io.script._resHandle error"));}},_canAttach:function(){return true;},_jsonpCallback:function(json){this.ioArgs.json=json;_1303.global[_1305._callbacksProperty][this.ioArgs.requestId](json);}};lang.setObject("dojo.io.script",_1308);return _1308;});},"dojo/date/locale":function(){define(["../_base/lang","../_base/array","../date","../cldr/supplemental","../i18n","../regexp","../string","../i18n!../cldr/nls/gregorian","module"],function(lang,array,date,_1311,i18n,_1312,_1313,_1314,_1315){var _1316={};lang.setObject(_1315.id.replace(/\//g,"."),_1316);function _1317(_1318,_1319,_131a,_131b){return _131b.replace(/([a-z])\1*/ig,function(match){var s,pad,c=match.charAt(0),l=match.length,_131c=["abbr","wide","narrow"];switch(c){case "G":s=_1319[(l<4)?"eraAbbr":"eraNames"][_1318.getFullYear()<0?0:1];break;case "y":s=_1318.getFullYear();switch(l){case 1:break;case 2:if(!_131a.fullYear){s=String(s);s=s.substr(s.length-2);break;}default:pad=true;}break;case "Q":case "q":s=Math.ceil((_1318.getMonth()+1)/3);pad=true;break;case "M":case "L":var m=_1318.getMonth();if(l<3){s=m+1;pad=true;}else{var propM=["months",c=="L"?"standAlone":"format",_131c[l-3]].join("-");s=_1319[propM][m];}break;case "w":var _131d=0;s=_1316._getWeekOfYear(_1318,_131d);pad=true;break;case "d":s=_1318.getDate();pad=true;break;case "D":s=_1316._getDayOfYear(_1318);pad=true;break;case "e":case "c":var d=_1318.getDay();if(l<2){s=(d-_1311.getFirstDayOfWeek(_131a.locale)+8)%7;break;}case "E":d=_1318.getDay();if(l<3){s=d+1;pad=true;}else{var propD=["days",c=="c"?"standAlone":"format",_131c[l-3]].join("-");s=_1319[propD][d];}break;case "a":var _131e=_1318.getHours()<12?"am":"pm";s=_131a[_131e]||_1319["dayPeriods-format-wide-"+_131e];break;case "h":case "H":case "K":case "k":var h=_1318.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}pad=true;break;case "m":s=_1318.getMinutes();pad=true;break;case "s":s=_1318.getSeconds();pad=true;break;case "S":s=Math.round(_1318.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "v":case "z":s=_1316._getZone(_1318,true,_131a);if(s){break;}l=4;case "Z":var _131f=_1316._getZone(_1318,false,_131a);var tz=[(_131f<=0?"+":"-"),_1313.pad(Math.floor(Math.abs(_131f)/60),2),_1313.pad(Math.abs(_131f)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+_131b);}if(pad){s=_1313.pad(s,l);}return s;});};_1316._getZone=function(_1320,_1321,_1322){if(_1321){return date.getTimezoneName(_1320);}else{return _1320.getTimezoneOffset();}};_1316.format=function(_1323,_1324){_1324=_1324||{};var _1325=i18n.normalizeLocale(_1324.locale),_1326=_1324.formatLength||"short",_1327=_1316._getGregorianBundle(_1325),str=[],sauce=lang.hitch(this,_1317,_1323,_1327,_1324);if(_1324.selector=="year"){return _1328(_1327["dateFormatItem-yyyy"]||"yyyy",sauce);}var _1329;if(_1324.selector!="date"){_1329=_1324.timePattern||_1327["timeFormat-"+_1326];if(_1329){str.push(_1328(_1329,sauce));}}if(_1324.selector!="time"){_1329=_1324.datePattern||_1327["dateFormat-"+_1326];if(_1329){str.push(_1328(_1329,sauce));}}return str.length==1?str[0]:_1327["dateTimeFormat-"+_1326].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(match,key){return str[key];});};_1316.regexp=function(_132a){return _1316._parseInfo(_132a).regexp;};_1316._parseInfo=function(_132b){_132b=_132b||{};var _132c=i18n.normalizeLocale(_132b.locale),_132d=_1316._getGregorianBundle(_132c),_132e=_132b.formatLength||"short",_132f=_132b.datePattern||_132d["dateFormat-"+_132e],_1330=_132b.timePattern||_132d["timeFormat-"+_132e],_1331;if(_132b.selector=="date"){_1331=_132f;}else{if(_132b.selector=="time"){_1331=_1330;}else{_1331=_132d["dateTimeFormat-"+_132e].replace(/\{(\d+)\}/g,function(match,key){return [_1330,_132f][key];});}}var _1332=[],re=_1328(_1331,lang.hitch(this,_1333,_1332,_132d,_132b));return {regexp:re,tokens:_1332,bundle:_132d};};_1316.parse=function(value,_1334){var _1335=/[\u200E\u200F\u202A\u202E]/g,info=_1316._parseInfo(_1334),_1336=info.tokens,_1337=info.bundle,re=new RegExp("^"+info.regexp.replace(_1335,"")+"$",info.strict?"":"i"),match=re.exec(value&&value.replace(_1335,""));if(!match){return null;}var _1338=["abbr","wide","narrow"],_1339=[1970,0,1,0,0,0,0],amPm="",valid=array.every(match,function(v,i){if(!i){return true;}var token=_1336[i-1],l=token.length,c=token.charAt(0);switch(c){case "y":if(l!=2&&_1334.strict){_1339[0]=v;}else{if(v<100){v=Number(v);var year=""+new Date().getFullYear(),_133a=year.substring(0,2)*100,_133b=Math.min(Number(year.substring(2,4))+20,99);_1339[0]=(v<_133b)?_133a+v:_133a-100+v;}else{if(_1334.strict){return false;}_1339[0]=v;}}break;case "M":case "L":if(l>2){var _133c=_1337["months-"+(c=="L"?"standAlone":"format")+"-"+_1338[l-3]].concat();if(!_1334.strict){v=v.replace(".","").toLowerCase();_133c=array.map(_133c,function(s){return s.replace(".","").toLowerCase();});}v=array.indexOf(_133c,v);if(v==-1){return false;}}else{v--;}_1339[1]=v;break;case "E":case "e":case "c":var days=_1337["days-"+(c=="c"?"standAlone":"format")+"-"+_1338[l-3]].concat();if(!_1334.strict){v=v.toLowerCase();days=array.map(days,function(d){return d.toLowerCase();});}v=array.indexOf(days,v);if(v==-1){return false;}break;case "D":_1339[1]=0;case "d":_1339[2]=v;break;case "a":var am=_1334.am||_1337["dayPeriods-format-wide-am"],pm=_1334.pm||_1337["dayPeriods-format-wide-pm"];if(!_1334.strict){var _133d=/\./g;v=v.replace(_133d,"").toLowerCase();am=am.replace(_133d,"").toLowerCase();pm=pm.replace(_133d,"").toLowerCase();}if(_1334.strict&&v!=am&&v!=pm){return false;}amPm=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":if(v>23){return false;}_1339[3]=v;break;case "m":_1339[4]=v;break;case "s":_1339[5]=v;break;case "S":_1339[6]=v;}return true;});var hours=+_1339[3];if(amPm==="p"&&hours<12){_1339[3]=hours+12;}else{if(amPm==="a"&&hours==12){_1339[3]=0;}}var _133e=new Date(_1339[0],_1339[1],_1339[2],_1339[3],_1339[4],_1339[5],_1339[6]);if(_1334.strict){_133e.setFullYear(_1339[0]);}var _133f=_1336.join(""),_1340=_133f.indexOf("d")!=-1,_1341=_133f.indexOf("M")!=-1;if(!valid||(_1341&&_133e.getMonth()>_1339[1])||(_1340&&_133e.getDate()>_1339[2])){return null;}if((_1341&&_133e.getMonth()<_1339[1])||(_1340&&_133e.getDate()<_1339[2])){_133e=date.add(_133e,"hour",1);}return _133e;};function _1328(_1342,_1343,_1344,_1345){var _1346=function(x){return x;};_1343=_1343||_1346;_1344=_1344||_1346;_1345=_1345||_1346;var _1347=_1342.match(/(''|[^'])+/g),_1348=_1342.charAt(0)=="'";array.forEach(_1347,function(chunk,i){if(!chunk){_1347[i]="";}else{_1347[i]=(_1348?_1344:_1343)(chunk.replace(/''/g,"'"));_1348=!_1348;}});return _1345(_1347.join(""));};function _1333(_1349,_134a,_134b,_134c){_134c=_1312.escapeString(_134c);if(!_134b.strict){_134c=_134c.replace(" a"," ?a");}return _134c.replace(/([a-z])\1*/ig,function(match){var s,c=match.charAt(0),l=match.length,p2="",p3="";if(_134b.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d{2,4}";break;case "M":case "L":s=(l>2)?"\\S+?":"1[0-2]|"+p2+"[1-9]";break;case "D":s="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+p2+"[1-9][0-9]|"+p3+"[1-9]";break;case "d":s="3[01]|[12]\\d|"+p2+"[1-9]";break;case "w":s="[1-4][0-9]|5[0-3]|"+p2+"[1-9]";break;case "E":case "e":case "c":s="\\S+";break;case "h":s="1[0-2]|"+p2+"[1-9]";break;case "k":s="1[01]|"+p2+"\\d";break;case "H":s="1\\d|2[0-3]|"+p2+"\\d";break;case "K":s="1\\d|2[0-4]|"+p2+"[1-9]";break;case "m":case "s":s="[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_134b.am||_134a["dayPeriods-format-wide-am"],pm=_134b.pm||_134a["dayPeriods-format-wide-pm"];s=am+"|"+pm;if(!_134b.strict){if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}if(s.indexOf(".")!=-1){s+="|"+s.replace(/\./g,"");}}s=s.replace(/\./g,"\\.");break;default:s=".*";}if(_1349){_1349.push(match);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};var _134d=[];_1316.addCustomFormats=function(_134e,_134f){_134d.push({pkg:_134e,name:_134f});};_1316._getGregorianBundle=function(_1350){var _1351={};array.forEach(_134d,function(desc){var _1352=i18n.getLocalization(desc.pkg,desc.name,_1350);_1351=lang.mixin(_1351,_1352);},this);return _1351;};_1316.addCustomFormats(_1315.id.replace(/\/date\/locale$/,".cldr"),"gregorian");_1316.getNames=function(item,type,_1353,_1354){var label,_1355=_1316._getGregorianBundle(_1354),props=[item,_1353,type];if(_1353=="standAlone"){var key=props.join("-");label=_1355[key];if(label[0]==1){label=undefined;}}props[1]="format";return (label||_1355[props.join("-")]).concat();};_1316.isWeekend=function(_1356,_1357){var _1358=_1311.getWeekend(_1357),day=(_1356||new Date()).getDay();if(_1358.end<_1358.start){_1358.end+=7;if(day<_1358.start){day+=7;}}return day>=_1358.start&&day<=_1358.end;};_1316._getDayOfYear=function(_1359){return date.difference(new Date(_1359.getFullYear(),0,1,_1359.getHours()),_1359)+1;};_1316._getWeekOfYear=function(_135a,_135b){if(arguments.length==1){_135b=0;}var _135c=new Date(_135a.getFullYear(),0,1).getDay(),adj=(_135c-_135b+7)%7,week=Math.floor((_1316._getDayOfYear(_135a)+adj-1)/7);if(_135c==_135b){week++;}return week;};return _1316;});},"esri/renderers/SymbolAger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_135d,lang,has,_135e){var _135f=_135d(null,{declaredClass:"esri.renderer.SymbolAger",getAgedSymbol:function(_1360,_1361){},_setSymbolSize:function(_1362,size){switch(_1362.type){case "simplemarkersymbol":_1362.setSize(size);break;case "picturemarkersymbol":_1362.setWidth(size);_1362.setHeight(size);break;case "simplelinesymbol":case "cartographiclinesymbol":_1362.setWidth(size);break;case "simplefillsymbol":case "picturefillsymbol":if(_1362.outline){_1362.outline.setWidth(size);}break;}}});if(has("extend-esri")){lang.setObject("renderer.SymbolAger",_135f,_135e);}return _135f;});},"dijit/_base/wai":function(){define("dijit/_base/wai",["dojo/dom-attr","dojo/_base/lang","../main","../hccss"],function(_1363,lang,dijit){var _1364={hasWaiRole:function(elem,role){var _1365=this.getWaiRole(elem);return role?(_1365.indexOf(role)>-1):(_1365.length>0);},getWaiRole:function(elem){return lang.trim((_1363.get(elem,"role")||"").replace("wairole:",""));},setWaiRole:function(elem,role){_1363.set(elem,"role",role);},removeWaiRole:function(elem,role){var _1366=_1363.get(elem,"role");if(!_1366){return;}if(role){var t=lang.trim((" "+_1366+" ").replace(" "+role+" "," "));_1363.set(elem,"role",t);}else{elem.removeAttribute("role");}},hasWaiState:function(elem,state){return elem.hasAttribute?elem.hasAttribute("aria-"+state):!!elem.getAttribute("aria-"+state);},getWaiState:function(elem,state){return elem.getAttribute("aria-"+state)||"";},setWaiState:function(elem,state,value){elem.setAttribute("aria-"+state,value);},removeWaiState:function(elem,state){elem.removeAttribute("aria-"+state);}};lang.mixin(dijit,_1364);return dijit;});},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","esri/kernel"],function(_1367,topic,has,_1368){var _1369={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:true,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,panDuration:350,panRate:25,logoLink:"http://www.esri.com",basemaps:{"streets":{title:"Streets",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]},"satellite":{title:"Satellite",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]},"hybrid":{title:"Imagery with Labels",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",isReference:true}]},"topo":{title:"Topographic",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}]},"gray":{title:"Light Gray Canvas",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",isReference:true}]},"oceans":{title:"Oceans",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Ocean_Basemap/MapServer"}]},"national-geographic":{title:"National Geographic",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"}]},"osm":{title:"OpenStreetMap",baseMapLayers:[{type:"OpenStreetMap"}]}}},io:{errorHandler:function(error,io){topic.publish("esri.Error",[error]);},proxyUrl:null,alwaysUseProxy:false,corsEnabledServers:["www.arcgis.com","tiles.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","static.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","qaext.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","tilesdevext.arcgis.com","servicesdev.arcgis.com","servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com"],corsDetection:true,_processedCorsServers:{},proxyRules:[],postLength:2000,timeout:60000}}};if(has("extend-esri")){_1368.config=_1369;}if(!_1367.noGlobals){window.esriConfig=_1369;}return _1369;});},"esri/utils":function(){define(["esri/domUtils","esri/lang","esri/urlUtils","esri/request","esri/tileUtils","esri/graphicsUtils","esri/deferredUtils","esri/layerUtils","esri/geometry/normalizeUtils"],function(){return {};});},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(_136a,_136b,has){var _136c=window.location,_136d=_136c.pathname,_136e={version:3.6,_appBaseUrl:_136c.protocol+"//"+_136c.host+_136d.substring(0,_136d.lastIndexOf(_136d.split("/")[_136d.split("/").length-1]))};if(!_136b.noGlobals){window.esri=_136e;}if(!_136a.isAsync){has.add("extend-esri",1);}var _136f=_136e.dijit=(_136e.dijit||{});_136f._arcgisUrl=_136c.protocol+"//www.arcgis.com/sharing/rest";return _136e;});},"esri/tasks/ImageServiceIdentifyParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","esri/kernel","esri/lang","esri/geometry/jsonUtils"],function(_1370,lang,_1371,has,_1372,_1373,_1374){var _1375=_1370(null,{declaredClass:"esri.tasks.ImageServiceIdentifyParameters",geometry:null,mosaicRule:null,pixelSizeX:null,pixelSizeY:null,pixelSize:null,returnGeometry:false,returnCatalogItems:true,timeExtent:null,toJson:function(_1376){var g=_1376&&_1376["geometry"]||this.geometry,json={geometry:g,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,mosaicRule:this.mosaicRule?_1371.toJson(this.mosaicRule.toJson()):null};if(g){json.geometryType=_1374.getJsonType(g);}var _1377=this.timeExtent;json.time=_1377?_1377.toJson().join(","):null;if(_1373.isDefined(this.pixelSizeX)&&_1373.isDefined(this.pixelSizeY)){json.pixelSize=_1371.toJson({x:parseFloat(this.pixelSizeX),y:parseFloat(this.pixelSizeY)});}else{if(this.pixelSize){json.pixelSize=this.pixelSize?_1371.toJson(this.pixelSize.toJson()):null;}}return json;}});if(has("extend-esri")){lang.setObject("tasks.ImageServiceIdentifyParameters",_1375,_1372);}return _1375;});},"esri/layers/RasterFunction":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(_1378,lang,has,_1379,_137a){var _137b=_1378(null,{declaredClass:"esri.layers.RasterFunction",functionName:null,"arguments":null,"functionArguments":null,variableName:null,outputPixelType:null,constructor:function(_137c){if(!lang.isObject(_137c)){return;}lang.mixin(this,_137c);if(_137c.rasterFunction){this.functionName=_137c.rasterFunction;}if(_137c.rasterFunctionArguments){this["functionArguments"]=_137c.rasterFunctionArguments;}else{if(_137c["arguments"]){this["functionArguments"]=_137c["arguments"];}}},toJson:function(){var json={rasterFunction:this.functionName,rasterFunctionArguments:this.functionArguments||this["arguments"],variableName:this.variableName,outputPixelType:this.outputPixelType?this.outputPixelType:null};return _137a.filter(json,function(value){if(value!==null&&value!==undefined){return true;}});}});if(has("extend-esri")){lang.setObject("layers.RasterFunction",_137b,_1379);}return _137b;});},"esri/tasks/ParameterValue":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_137d,lang,has,_137e){var _137f=_137d(null,{declaredClass:"esri.tasks.ParameterValue",constructor:function(json){lang.mixin(this,json);}});if(has("extend-esri")){lang.setObject("tasks.ParameterValue",_137f,_137e);}return _137f;});},"esri/symbols/SimpleFillSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","dojox/gfx/_base","esri/kernel","esri/lang","esri/symbols/FillSymbol","esri/symbols/SimpleLineSymbol","require"],function(_1380,lang,Color,has,_1381,_1382,_1383,_1384,_1385,_1386){var _1387={STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"};var _1388={style:_1387.STYLE_SOLID,color:[0,0,0,0.25]};var SFS=_1380(_1384,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(json,_1389,color){if(json){if(lang.isString(json)){this.style=json;if(_1389!==undefined){this.outline=_1389;}if(color!==undefined){this.color=color;}}else{this.style=_1383.valueOf(this._styles,json.style);}}else{lang.mixin(this,_1388);this.outline=new _1385(this.outline);this.color=new Color(this.color);}var style=this.style;if(style!=="solid"&&style!=="none"){this._src=_1386.toUrl("esri")+"/images/symbol/sfs/"+style+".png";}},setStyle:function(style){this.style=style;return this;},getStroke:function(){return this.outline&&this.outline.getStroke();},getFill:function(){var style=this.style;if(style===_1387.STYLE_NULL){return null;}else{if(style===_1387.STYLE_SOLID){return this.color;}else{return lang.mixin(lang.mixin({},_1381.defaultPattern),{src:this._src,width:10,height:10});}}},getShapeDescriptors:function(){return {defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"},fill:this.getFill(),stroke:this.getStroke()};},toJson:function(){return _1383.fixJson(lang.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}));}});lang.mixin(SFS,_1387);SFS.defaultProps=_1388;if(has("extend-esri")){lang.setObject("symbol.SimpleFillSymbol",SFS,_1382);_1382.symbol.defaultSimpleFillSymbol=_1388;}return SFS;});},"esri/layers/DynamicLayerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/LayerInfo","esri/layers/LayerMapSource","esri/layers/LayerDataSource"],function(_138a,lang,has,_138b,_138c,_138d,_138e,_138f){var _1390=_138a(_138d,{declaredClass:"esri.layers.DynamicLayerInfo",defaultVisibility:true,parentLayerId:-1,maxScale:0,minScale:0,constructor:function(json){if(json){var _1391;if(!json.source){_1391=new _138e();_1391.mapLayerId=this.id;}else{if(json.source.type==="mapLayer"){_1391=new _138e(json.source);}else{_1391=new _138f(json.source);}}this.source=_1391;}},toJson:function(){var json=this.inherited(arguments);json.source=this.source&&this.source.toJson();return _138c.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.DynamicLayerInfo",_1390,_138b);}return _1390;});},"dijit/form/_FormWidget":function(){define("dijit/form/_FormWidget",["dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/ready","../_Widget","../_CssStateMixin","../_TemplatedMixin","./_FormWidgetMixin"],function(_1392,has,_1393,ready,_1394,_1395,_1396,_1397){if(has("dijit-legacy-requires")){ready(0,function(){var _1398=["dijit/form/_FormValueWidget"];require(_1398);});}return _1392("dijit.form._FormWidget",[_1394,_1396,_1395,_1397],{setDisabled:function(_1399){_1393.deprecated("setDisabled("+_1399+") is deprecated. Use set('disabled',"+_1399+") instead.","","2.0");this.set("disabled",_1399);},setValue:function(value){_1393.deprecated("dijit.form._FormWidget:setValue("+value+") is deprecated.  Use set('value',"+value+") instead.","","2.0");this.set("value",value);},getValue:function(){_1393.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value");},postMixInProperties:function(){this.nameAttrSetting=this.name?("name=\""+this.name.replace(/"/g,"&quot;")+"\""):"";this.inherited(arguments);},_setTypeAttr:null});});},"dojo/dnd/common":function(){define(["../_base/connect","../_base/kernel","../_base/lang","../dom"],function(_139a,_139b,lang,dom){var _139c=lang.getObject("dojo.dnd",true);_139c.getCopyKeyState=_139a.isCopyKey;_139c._uniqueId=0;_139c.getUniqueId=function(){var id;do{id=_139b._scopeName+"Unique"+(++_139c._uniqueId);}while(dom.byId(id));return id;};_139c._empty={};_139c.isFormElement=function(e){var t=e.target;if(t.nodeType==3){t=t.parentNode;}return " button textarea input select option ".indexOf(" "+t.tagName.toLowerCase()+" ")>=0;};return _139c;});},"dijit/Viewport":function(){define("dijit/Viewport",["dojo/Evented","dojo/on","dojo/ready","dojo/sniff","dojo/_base/window","dojo/window"],function(_139d,on,ready,has,win,_139e){var _139f=new _139d();ready(200,function(){var _13a0=_139e.getBox();_139f._rlh=on(win.global,"resize",function(){var _13a1=_139e.getBox();if(_13a0.h==_13a1.h&&_13a0.w==_13a1.w){return;}_13a0=_13a1;_139f.emit("resize");});if(has("ie")==8){var _13a2=screen.deviceXDPI;setInterval(function(){if(screen.deviceXDPI!=_13a2){_13a2=screen.deviceXDPI;_139f.emit("resize");}},500);}});return _139f;});},"esri/geometry/scaleUtils":function(){define(["dojo/_base/lang","dojo/has","esri/kernel","esri/config","esri/lang","esri/WKIDUnitConversion"],function(lang,has,esri,_13a3,_13a4,_13a5){var _13a6=39.37,_13a7=20015077/180,ecd=_13a3.defaults,_13a8=_13a5;function _13a9(_13aa,mapWd,_13ab){return (_13aa&&mapWd)?((_13aa.getWidth()/mapWd)*(_13ab||_13a7)*_13a6*ecd.screenDPI):0;};function _13ac(_13ad,mapWd,wkid,scale,_13ae){var _13af;if(_13ae){_13af=wkid;}else{_13af=_13a8.values[_13a8[wkid]];}return _13ad.expand(((scale*mapWd)/((_13af||_13a7)*_13a6*ecd.screenDPI))/_13ad.getWidth());};var _13b0={getScale:function(map,_13b1,wkid){var _13b2,width,wkt;if(arguments.length>1&&(_13a4.isDefined(_13b1)&&!_13b1.declaredClass)){_13b2=map;width=_13b1;_13b1=null;}else{_13b2=map.extent;width=map.width;var sr=map.spatialReference;if(sr){wkid=sr.wkid;wkt=sr.wkt;}}var _13b3;if(wkid){_13b3=_13a8.values[_13a8[wkid]];}else{if(wkt&&(wkt.search(/^PROJCS/i)!==-1)){var _13b4=/UNIT\[([^\]]+)\]\]$/i.exec(wkt);if(_13b4&&_13b4[1]){_13b3=parseFloat(_13b4[1].split(",")[1]);}}}return _13a9(_13b1||_13b2,width,_13b3);},getExtentForScale:function(map,scale,_13b5){var wkid,wkt,sr=map.spatialReference;if(sr){wkid=sr.wkid;wkt=sr.wkt;}var _13b6;if(wkid){_13b6=_13a8.values[_13a8[wkid]];}else{if(wkt&&(wkt.search(/^PROJCS/i)!==-1)){var _13b7=/UNIT\[([^\]]+)\]\]$/i.exec(wkt);if(_13b7&&_13b7[1]){_13b6=parseFloat(_13b7[1].split(",")[1]);}}}return _13ac(_13b5||map.extent,map.width,_13b6,scale,true);}};if(has("extend-esri")){lang.mixin(lang.getObject("geometry",true,esri),_13b0);esri.geometry._getScale=_13a9;esri.geometry._getExtentForScale=_13ac;}return _13b0;});},"esri/tasks/geometry":function(){define(["esri/tasks/GeometryService","esri/tasks/TrimExtendParameters","esri/tasks/BufferParameters","esri/tasks/AreasAndLengthsParameters","esri/tasks/LengthsParameters","esri/tasks/RelationParameters","esri/tasks/DensifyParameters","esri/tasks/GeneralizeParameters","esri/tasks/OffsetParameters","esri/tasks/DistanceParameters","esri/tasks/ProjectParameters"],function(){return {};});},"dojo/io/iframe":function(){define(["../_base/config","../_base/json","../_base/kernel","../_base/lang","../_base/xhr","../sniff","../_base/window","../dom","../dom-construct","../query","require","../aspect","../request/iframe"],function(_13b8,json,_13b9,lang,xhr,has,win,dom,_13ba,query,_13bb,_13bc,_13bd){_13b9.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");var mid=_13bd._iframeName;mid=mid.substring(0,mid.lastIndexOf("_"));var _13be=lang.delegate(_13bd,{create:function(){return _13be._frame=_13bd.create.apply(_13bd,arguments);},get:null,post:null,send:function(args){var rDfd;var dfd=xhr._ioSetArgs(args,function(dfd){rDfd&&rDfd.cancel();},function(dfd){var value=null,_13bf=dfd.ioArgs;try{var _13c0=_13bf.handleAs;if(_13c0==="xml"||_13c0==="html"){value=rDfd.response.data;}else{value=rDfd.response.text;if(_13c0==="json"){value=json.fromJson(value);}else{if(_13c0==="javascript"){value=_13b9.eval(value);}}}}catch(e){value=e;}return value;},function(error,dfd){dfd.ioArgs._hasError=true;return error;});var _13c1=dfd.ioArgs;var _13c2="GET",form=dom.byId(args.form);if(args.method&&args.method.toUpperCase()==="POST"&&form){_13c2="POST";}var _13c3={method:_13c2,handleAs:args.handleAs==="json"||args.handleAs==="javascript"?"text":args.handleAs,form:args.form,query:form?null:args.content,data:form?args.content:null,timeout:args.timeout,ioArgs:_13c1};if(_13c3.method){_13c3.method=_13c3.method.toUpperCase();}if(_13b8.ioPublish&&_13b9.publish&&_13c1.args.ioPublish!==false){var start=_13bc.after(_13bd,"_notifyStart",function(data){if(data.options.ioArgs===_13c1){start.remove();xhr._ioNotifyStart(dfd);}},true);}rDfd=_13bd(_13c1.url,_13c3,true);_13c1._callNext=rDfd._callNext;rDfd.then(function(){dfd.resolve(dfd);}).otherwise(function(error){dfd.ioArgs.error=error;dfd.reject(error);});return dfd;},_iframeOnload:win.global[mid+"_onload"]});lang.setObject("dojo.io.iframe",_13be);return _13be;});},"esri/tileUtils":function(){define(["dojo/_base/array","dojo/has","esri/kernel","esri/geometry/Point","esri/geometry/Extent"],function(array,has,_13c4,Point,_13c5){function _13c6(map,ti,_13c7){var wd=map.width,ht=map.height,ew=_13c7.xmax-_13c7.xmin,eh=_13c7.ymax-_13c7.ymin,_13c8=(map.__tileInfo===ti),_13c9=_13c8?map.getMinZoom():-1,_13ca=_13c8?map.getMaxZoom():-1,ed=-1,lods=ti.lods,i,abs=Math.abs,lod,cl,ced;_13c9=(_13c9>-1)?_13c9:0;_13ca=(_13ca>-1)?_13ca:(lods.length-1);for(i=_13c9;i<=_13ca;i++){cl=lods[i];if(!cl){continue;}ced=ew>eh?abs(eh-(ht*cl.resolution)):abs(ew-(wd*cl.resolution));if(ed<0||ced<=ed){lod=cl;ed=ced;}else{break;}}return lod;};function _13cb(map,_13cc,lod){var res=lod.resolution,cx=(_13cc.xmin+_13cc.xmax)/2,cy=(_13cc.ymin+_13cc.ymax)/2,w2res=(map.width/2)*res,h2res=(map.height/2)*res;return new _13c5(cx-w2res,cy-h2res,cx+w2res,cy+h2res,_13cc.spatialReference);};function _13cd(map,ti,point,lod){var res=lod.resolution,tw=ti.width,th=ti.height,to=ti.origin,mv=map.__visibleDelta,floor=Math.floor,tmw=tw*res,tmh=th*res,tr=floor((to.y-point.y)/tmh),tc=floor((point.x-to.x)/tmw),tmox=to.x+(tc*tmw),tmoy=to.y-(tr*tmh),oX=floor(Math.abs((point.x-tmox)*tw/tmw))+mv.x,oY=floor(Math.abs((point.y-tmoy)*th/tmh))+mv.y;return {point:point,coords:{row:tr,col:tc},offsets:{x:oX,y:oY}};};var _13ce={_addFrameInfo:function(_13cf,_13d0){var _13d1,_13d2,world=2*_13d0.origin[1],m180=_13d0.origin[0],_13d3=_13cf.origin.x,_13d4=_13cf.width,_13d5;array.forEach(_13cf.lods,function(lod){_13d1=Math.round(world/lod.resolution);_13d2=Math.ceil(_13d1/_13d4);_13d5=Math.floor((m180-_13d3)/(_13d4*lod.resolution));if(!lod._frameInfo){lod._frameInfo=[_13d2,_13d5,_13d5+_13d2-1,_13d1];}});},getContainingTileCoords:function(ti,point,lod){var to=ti.origin,res=lod.resolution,tmw=ti.width*res,tmh=ti.height*res,tc=Math.floor((point.x-to.x)/tmw),tr=Math.floor((to.y-point.y)/tmh);return {row:tr,col:tc};},getCandidateTileInfo:function(map,ti,_13d6){var lod=_13c6(map,ti,_13d6),adj=_13cb(map,_13d6,lod),ct=_13cd(map,ti,new Point(adj.xmin,adj.ymax,_13d6.spatialReference),lod);return {tile:ct,lod:lod,extent:adj};},getTileExtent:function(ti,level,row,col){var to=ti.origin,lod=ti.lods[level],res=lod.resolution,tw=ti.width,th=ti.height;return new _13c5(((col*res)*tw)+to.x,to.y-((row+1)*res)*th,(((col+1)*res)*tw)+to.x,to.y-((row*res)*th),ti.spatialReference);}};if(has("extend-esri")){_13c4.TileUtils=_13ce;}return _13ce;});},"esri/tasks/ImageServiceIdentifyTask":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/request","esri/geometry/normalizeUtils","esri/tasks/Task","esri/tasks/ImageServiceIdentifyResult"],function(_13d7,lang,has,_13d8,_13d9,_13da,Task,_13db){var _13dc=_13d7(Task,{declaredClass:"esri.tasks.ImageServiceIdentifyTask",constructor:function(url){this._url.path+="/identify";this._handler=lang.hitch(this,this._handler);},__msigns:[{n:"execute",c:3,a:[{i:0,p:["geometry"]}],e:2}],_handler:function(_13dd,io,_13de,_13df,dfd){try{var _13e0=new _13db(_13dd);this._successHandler([_13e0],"onComplete",_13de,dfd);}catch(err){this._errorHandler(err,_13df,dfd);}},execute:function(_13e1,_13e2,_13e3,_13e4){var _13e5=_13e4.assembly,_13e6=this._encode(lang.mixin({},this._url.query,{f:"json"},_13e1.toJson(_13e5&&_13e5[0]))),_13e7=this._handler,_13e8=this._errorHandler;return _13d9({url:this._url.path,content:_13e6,callbackParamName:"callback",load:function(r,i){_13e7(r,i,_13e2,_13e3,_13e4.dfd);},error:function(r){_13e8(r,_13e3,_13e4.dfd);}});},onComplete:function(){}});_13da._createWrappers(_13dc);if(has("extend-esri")){lang.setObject("tasks.ImageServiceIdentifyTask",_13dc,_13d8);}return _13dc;});},"esri/layers/ArcGISImageServiceLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","dojo/_base/array","dojo/_base/json","dojo/_base/config","dojo/has","dojo/io-query","esri/kernel","esri/config","esri/lang","esri/request","esri/deferredUtils","esri/urlUtils","esri/geometry/Extent","esri/geometry/Point","esri/SpatialReference","esri/layers/MosaicRule","esri/layers/DynamicMapServiceLayer","esri/layers/TimeInfo","esri/layers/Field","esri/graphic","esri/tasks/ImageServiceIdentifyTask","esri/tasks/ImageServiceIdentifyParameters"],function(_13e9,lang,_13ea,array,_13eb,_13ec,has,ioq,_13ed,_13ee,_13ef,_13f0,_13f1,_13f2,_13f3,Point,_13f4,_13f5,_13f6,_13f7,Field,_13f8,_13f9,_13fa){var _13fb=_13e9(_13f6,{declaredClass:"esri.layers.ArcGISImageServiceLayer",_eventMap:{"rendering-change":true,"mosaic-rule-change":true},constructor:function(url,_13fc){this._url=_13f2.urlToObject(url);var _13fd=_13fc&&_13fc.imageServiceParameters;this.format=_13fd&&_13fd.format;this.interpolation=_13fd?_13fd.interpolation:null;this.compressionQuality=_13fd?_13fd.compressionQuality:null;this.bandIds=_13fd?_13fd.bandIds:null;this.mosaicRule=_13fd?_13fd.mosaicRule:null;this.renderingRule=_13fd?_13fd.renderingRule:null;this._params=lang.mixin({},this._url.query,{f:"image",interpolation:this.interpolation,format:this.format,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null},_13fd?_13fd.toJson():{});this._initLayer=lang.hitch(this,this._initLayer);this._queryVisibleRastersHandler=lang.hitch(this,this._queryVisibleRastersHandler);this._visibleRasters=[];this.useMapImage=(_13fc&&_13fc.useMapImage)||false;this.infoTemplate=_13fc&&_13fc.infoTemplate;this._rasterAttributeTableFields=[];this._rasterAttributeTableFeatures=[];this._loadCallback=_13fc&&_13fc.loadCallback;var _13fe=_13fc&&_13fc.resourceInfo;if(_13fe){this._initLayer(_13fe);}else{_13f0({url:this._url.path,content:lang.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});}this.registerConnectEvents();},disableClientCaching:false,_initLayer:function(_13ff,io){this._findCredential();var ssl=(this.credential&&this.credential.ssl)||(_13ff&&_13ff._ssl);if(ssl){this._useSSL();}var _1400=this.minScale,_1401=this.maxScale;lang.mixin(this,_13ff);this.minScale=_1400;this.maxScale=_1401;this.initialExtent=(this.fullExtent=this.extent=(new _13f3(_13ff.extent)));this.spatialReference=this.initialExtent.spatialReference;this.pixelSizeX=parseFloat(this.pixelSizeX);this.pixelSizeY=parseFloat(this.pixelSizeY);var i,il,mins=this.minValues,maxs=this.maxValues,means=this.meanValues,stdvs=this.stdvValues,bs=(this.bands=[]);for(i=0,il=this.bandCount;i<il;i++){bs[i]={min:mins[i],max:maxs[i],mean:means[i],stddev:stdvs[i]};}var _1402=this.timeInfo;this.timeInfo=(_1402&&_1402.timeExtent)?new _13f7(_1402):null;var _1403=this.fields=[];var _1404=_13ff.fields;if(_1404){for(i=0;i<_1404.length;i++){_1403.push(new Field(_1404[i]));}}this.version=_13ff.currentVersion;if(!this.version){var ver;if("fields" in _13ff||"objectIdField" in _13ff||"timeInfo" in _13ff){ver=10;}else{ver=9.3;}this.version=ver;}if(_13ef.isDefined(_13ff.minScale)&&!this._hasMin){this.setMinScale(_13ff.minScale);}if(_13ef.isDefined(_13ff.maxScale)&&!this._hasMax){this.setMaxScale(_13ff.maxScale);}var _1405={};if(_13ff.defaultMosaicMethod){_1405.method=_13ff.defaultMosaicMethod;_1405.operation=_13ff.mosaicOperator;_1405.sortField=_13ff.sortField;_1405.sortValue=_13ff.sortValue;}else{_1405.method=_13f5.METHOD_NONE;}this.defaultMosaicRule=new _13f5(_1405);this.defaultMosaicRule.ascending=true;if(this.version>10&&this.hasRasterAttributeTable){var _1406=this.getRasterAttributeTable();_1406.then(lang.hitch(this,function(_1407){if(_1407&&_1407.features&&_1407.features.length>0){this._rasterAttributeTableFeatures=lang.clone(_1407.features);}if(_1407&&_1407.fields&&_1407.fields.length>0){this._rasterAttributeTableFields=lang.clone(_1407.fields);}}));}this.loaded=true;this.onLoad(this);var _1408=this._loadCallback;if(_1408){delete this._loadCallback;_1408(this);}},getKeyProperties:function(){var url=this._url.path+"/keyProperties",dfd=new _13ea(_13f1._dfdCanceller);if(this.version>10){dfd._pendingDfd=_13f0({url:url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});dfd._pendingDfd.then(function(_1409){dfd.callback(_1409);},function(error){dfd.errback(error);});}else{var err=new Error("Layer does not have key properties");err.log=_13ec.isDebug;dfd.errback(err);}return dfd;},getRasterAttributeTable:function(){var url=this._url.path+"/rasterAttributeTable",dfd=new _13ea(_13f1._dfdCanceller);if(this.version>10&&this.hasRasterAttributeTable){dfd._pendingDfd=_13f0({url:url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});dfd._pendingDfd.then(function(_140a){dfd.callback(_140a);},function(error){dfd.errback(error);});}else{var err=new Error("Layer does not support raster attribute table");err.log=_13ec.isDebug;dfd.errback(err);}return dfd;},_getRasterAttributeTableFeatures:function(){var dfd=new _13ea();if(this._rasterAttributeTableFeatures&&this._rasterAttributeTableFeatures.length>0){dfd.resolve(this._rasterAttributeTableFeatures);return dfd;}if(this.version>10&&this.hasRasterAttributeTable){var _140b=this.getRasterAttributeTable();_140b.then(lang.hitch(this,function(_140c){if(_140c&&_140c.features&&_140c.features.length>0){this._rasterAttributeTableFeatures=lang.clone(_140c.features);}}));return _140b;}else{dfd.resolve(this._rasterAttributeTableFeatures);return dfd;}},getCustomRasterFields:function(_140d){var _140e=_140d?_140d.rasterAttributeTableFieldPrefix:"";var _140f={name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:false,length:50,type:"esriFieldTypeString"};var _1410={name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:false,length:50,type:"esriFieldTypeString"};var _1411=this.fields?lang.clone(this.fields):[];var index=_1411.length;_1411[index]=_1410;if(this.capabilities&&this.capabilities.toLowerCase().indexOf("catalog")>-1){_1411[index+1]=_140f;}if(this._rasterAttributeTableFields&&this._rasterAttributeTableFields.length>0){var _1412=array.filter(this._rasterAttributeTableFields,function(field){return (field.type!=="esriFieldTypeOID"&&field.name.toLowerCase()!=="value");});var _1413=array.map(_1412,function(field){var _1414=lang.clone(field);_1414.name=_140e+field.name;return _1414;});_1411=_1411.concat(_1413);}return _1411;},getImageUrl:function(_1415,width,_1416,_1417){var sr=_1415.spatialReference.wkid||_13eb.toJson(_1415.spatialReference.toJson());delete this._params._ts;var path=this._url.path+"/exportImage?";lang.mixin(this._params,{bbox:_1415.xmin+","+_1415.ymin+","+_1415.xmax+","+_1415.ymax,imageSR:sr,bboxSR:sr,size:width+","+_1416},this.disableClientCaching?{_ts:new Date().getTime()}:{});var token=(this._params.token=this._getToken()),_1418=_13f2.addProxy(path+ioq.objectToQuery(lang.mixin(this._params,{f:"image"})));if((_1418.length>_13ee.defaults.io.postLength)||this.useMapImage){this._jsonRequest=_13f0({url:path,content:lang.mixin(this._params,{f:"json"}),callbackParamName:"callback",load:function(_1419,io){var href=_1419.href;if(token){href+=(href.indexOf("?")===-1?("?token="+token):("&token="+token));}_1417(_13f2.addProxy(href));},error:this._errorHandler});}else{_1417(_1418);}},onRenderingChange:function(){},onMosaicRuleChange:function(){},setInterpolation:function(_141a,_141b){this.interpolation=(this._params.interpolation=_141a);if(!_141b){this.refresh(true);}},setCompressionQuality:function(_141c,_141d){this.compressionQuality=(this._params.compressionQuality=_141c);if(!_141d){this.refresh(true);}},setBandIds:function(ids,_141e){var _141f=false;if(this.bandIds!==ids){_141f=true;}this.bandIds=ids;this._params.bandIds=ids.join(",");if(_141f&&!_141e){this.onRenderingChange();}if(!_141e){this.refresh(true);}},setDefaultBandIds:function(_1420){this.bandIds=(this._params.bandIds=null);if(!_1420){this.refresh(true);}},setDisableClientCaching:function(_1421){this.disableClientCaching=_1421;},setMosaicRule:function(_1422,_1423){var _1424=false;if(this.mosaicRule!==_1422){_1424=true;}this.mosaicRule=_1422;this._params.mosaicRule=_13eb.toJson(_1422.toJson());if(_1424&&!_1423){this.onMosaicRuleChange();}if(!_1423){this.refresh(true);}},setRenderingRule:function(_1425,_1426){var _1427=false;if(this.renderingRule!==_1425){_1427=true;}this.renderingRule=_1425;this._params.renderingRule=_1425?_13eb.toJson(_1425.toJson()):null;if(_1427&&!_1426){this.onRenderingChange();}if(!_1426){this.refresh(true);}},setImageFormat:function(_1428,_1429){this.format=(this._params.format=_1428);if(!_1429){this.refresh(true);}},setInfoTemplate:function(_142a){this.infoTemplate=_142a;},setDefinitionExpression:function(expr,_142b){var json=this.mosaicRule?this.mosaicRule.toJson():{};if(!this.mosaicRule){if(this.defaultMosaicRule){json=this.defaultMosaicRule.toJson();}else{json.method=_13f5.METHOD_NONE;}}json.where=expr;var _142c=new _13f5(json);this.setMosaicRule(_142c,_142b);return this;},getDefinitionExpression:function(){return this.mosaicRule?this.mosaicRule.where:null;},refresh:function(_142d){if(_142d){this.inherited(arguments);}else{var dc=this.disableClientCaching;this.disableClientCaching=true;this.inherited(arguments);this.disableClientCaching=dc;}},exportMapImage:function(_142e,_142f){var m=_13ee.defaults.map,p=lang.mixin({size:m.width+","+m.height},this._params,_142e?_142e.toJson(this.normalization):{},{f:"json"});delete p._ts;this._exportMapImage(this._url.path+"/exportImage",p,_142f);},queryVisibleRasters:function(query,_1430,_1431,_1432){var map=this._map,dfd=_13f1._fixDfd(new _13ea(_13f1._dfdCanceller));this._visibleRasters=[];var i,field,_1433=true;if(this.infoTemplate&&this.infoTemplate.info.fieldInfos&&this.infoTemplate.info.fieldInfos.length>0){_1433=false;for(i=0;i<this.infoTemplate.info.fieldInfos.length;i++){field=this.infoTemplate.info.fieldInfos[i];if(field&&field.visible&&field.fieldName.toLowerCase()!=="raster.servicepixelvalue"){_1433=true;}}}var _1434=new _13fa();_1434.geometry=query.geometry.getCenter();_1434.returnGeometry=true;_1434.returnCatalogItems=_1433;_1434.timeExtent=query.timeExtent;_1434.mosaicRule=(this.mosaicRule?this.mosaicRule:null);_1434.renderingRule=(this.renderingRule?this.renderingRule:null);if(map){var psX=(map.extent.xmax-map.extent.xmin)/(map.width*2);var psY=(map.extent.ymax-map.extent.ymin)/(map.height*2);var psSR=map.extent.spatialReference;var _1435=new Point(psX,psY,psSR);_1434.pixelSize=_1435;}var self=this;var task=new _13f9(this.url);var temp=dfd._pendingDfd=task.execute(_1434);temp.addCallbacks(function(_1436){self._queryVisibleRastersHandler(_1436,_1430,_1431,_1432,dfd);},function(err){self._resolve([err],null,_1432,dfd,true);});return dfd;},_queryVisibleRastersHandler:function(_1437,_1438,_1439,_143a,dfd){var _143b=_1437.features;var _143c=_1437.value;var _143d;if(_1437.catalogItems){_143b=_1437.catalogItems.features;_143d=_1437.properties.Values;}this._visibleRasters=[];var _143e,_143f=this.objectIdField;var _1440=_143c.toLowerCase().indexOf("nodata")>-1;if(_143c&&!_143b&&!_1440){_143f="ObjectId";_143b=[];var _1441={};_1441.ObjectId=0;_143e=new _13f8(new _13f3(this.fullExtent),null,_1441);_143b.push(_143e);}var _1442=[];if(!_143b){this._resolve([_1442,null,null],null,_1439,dfd);return;}var _1443=this.getCustomRasterFields(_1438);var _1444=this._getDomainFields(_1443);var _1445=_1438?_1438.returnDomainValues:false;var _1446=_1438&&_1438.rasterAttributeTableFieldPrefix;var i,oid,_1447,pVal,_1448,_1449,prop,_144a,_144b;var _144c=this._getRasterAttributeTableFeatures();_144c.then(lang.hitch(this,function(_144d){for(i=0;i<_143b.length;i++){_143e=_143b[i];oid=_143e.attributes[_143f];_143e.setInfoTemplate(this.infoTemplate);if(_143c){_1447=_143c;if(_143d&&_143d.length>=i){pVal=_143d[i];_1447=pVal.replace(/ /gi,", ");}_143e.attributes["Raster.ItemPixelValue"]=_1447;_143e.attributes["Raster.ServicePixelValue"]=_143c;if(_144d&&_144d.length>0){_1448=array.filter(_144d,function(_144e){if(_144e&&_144e.attributes){if(_144e.attributes.hasOwnProperty("Value")){return (_144e.attributes.Value==_1447);}else{return (_144e.attributes.VALUE==_1447);}}});if(_1448.length>0){_1449=lang.clone(_1448[0]);if(_1446&&_1449){_144b={};for(prop in _1449.attributes){if(_1449.attributes.hasOwnProperty(prop)){_144a=_1446+prop;_144b[_144a]=_1449.attributes[prop];}}_1449.attributes=_144b;_143e.attributes=lang.mixin(_143e.attributes,_1449.attributes);}}}}if(_1445&&_1444&&_1444.length>0){array.forEach(_1444,function(field){if(field){var value=_143e.attributes[field.name];if(_13ef.isDefined(value)){var _144f=this._getDomainValue(field.domain,value);if(_13ef.isDefined(_144f)){_143e.attributes[field.name]=_144f;}}}},this);}_1442.push(_143e);this._visibleRasters.push(_143e);}this._resolve([_1442,null,true],null,_1439,dfd);}));},getVisibleRasters:function(){var _1450=this._visibleRasters,_1451=[],item;for(item in _1450){if(_1450.hasOwnProperty(item)){_1451.push(_1450[item]);}}return _1451;},_getDomainFields:function(_1452){if(!_1452){return;}var _1453=[];array.forEach(_1452,function(field){if(field.domain){var _1454={};_1454.name=field.name;_1454.domain=field.domain;_1453.push(_1454);}});return _1453;},_getDomainValue:function(_1455,value){if(_1455&&_1455.codedValues){var _1456;array.some(_1455.codedValues,function(_1457){if(_1457.code===value){_1456=_1457.name;return true;}return false;});return _1456;}},_resolve:function(args,_1458,_1459,dfd,_145a){if(_1458){this[_1458].apply(this,args);}if(_1459){_1459.apply(null,args);}if(dfd){_13f1._resDfd(dfd,args,_145a);}}});if(has("extend-esri")){lang.setObject("layers.ArcGISImageServiceLayer",_13fb,_13ed);}return _13fb;});},"esri/renderers/SimpleRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/symbols/jsonUtils","esri/renderers/Renderer"],function(_145b,lang,has,_145c,_145d,_145e,_145f){var _1460=_145b(_145f,{declaredClass:"esri.renderer.SimpleRenderer",constructor:function(sym){if(sym&&!sym.declaredClass){var json=sym;sym=json.symbol;if(sym){this.symbol=_145e.fromJson(sym);}this.label=json.label;this.description=json.description;}else{this.symbol=sym;}},getSymbol:function(_1461){return this.symbol;},toJson:function(){return _145d.fixJson({type:"simple",label:this.label,description:this.description,symbol:this.symbol&&this.symbol.toJson()});}});if(has("extend-esri")){lang.setObject("renderer.SimpleRenderer",_1460,_145c);}return _1460;});},"esri/symbols/MarkerSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","dojox/gfx/_base","esri/kernel","esri/symbols/Symbol"],function(_1462,lang,has,_1463,_1464,_1465){var _1466=_1462(_1465,{declaredClass:"esri.symbol.MarkerSymbol",angle:0,xoffset:0,yoffset:0,size:12,constructor:function(json){if(json&&lang.isObject(json)){this.size=_1463.pt2px(this.size);this.xoffset=_1463.pt2px(this.xoffset);this.yoffset=_1463.pt2px(this.yoffset);}},setAngle:function(angle){this.angle=angle;return this;},setSize:function(size){this.size=size;return this;},setOffset:function(x,y){this.xoffset=x;this.yoffset=y;return this;},toJson:function(){var size=_1463.px2pt(this.size);size=isNaN(size)?undefined:size;var xoff=_1463.px2pt(this.xoffset);xoff=isNaN(xoff)?undefined:xoff;var yoff=_1463.px2pt(this.yoffset);yoff=isNaN(yoff)?undefined:yoff;return lang.mixin(this.inherited("toJson",arguments),{size:size,angle:this.angle,xoffset:xoff,yoffset:yoff});}});if(has("extend-esri")){lang.setObject("symbol.MarkerSymbol",_1466,_1464);}return _1466;});},"esri/tasks/DistanceParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","esri/kernel","esri/geometry/jsonUtils"],function(_1467,lang,_1468,has,_1469,_146a){var _146b=_1467(null,{declaredClass:"esri.tasks.DistanceParameters",geometry1:null,geometry2:null,distanceUnit:null,geodesic:null,toJson:function(){var json={};var _146c=this.geometry1;if(_146c){json.geometry1=_1468.toJson({geometryType:_146a.getJsonType(_146c),geometry:_146c});}var _146d=this.geometry2;if(_146d){json.geometry2=_1468.toJson({geometryType:_146a.getJsonType(_146d),geometry:_146d});}json.sr=_1468.toJson(this.geometry1.spatialReference.toJson());if(this.distanceUnit){json.distanceUnit=this.distanceUnit;}if(this.geodesic){json.geodesic=this.geodesic;}return json;}});if(has("extend-esri")){lang.setObject("tasks.DistanceParameters",_146b,_1469);}return _146b;});},"dijit/_base/place":function(){define("dijit/_base/place",["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],function(array,lang,_146e,place,dijit){var _146f={};_146f.getViewport=function(){return _146e.getBox();};_146f.placeOnScreen=place.at;_146f.placeOnScreenAroundElement=function(node,_1470,_1471,_1472){var _1473;if(lang.isArray(_1471)){_1473=_1471;}else{_1473=[];for(var key in _1471){_1473.push({aroundCorner:key,corner:_1471[key]});}}return place.around(node,_1470,_1473,true,_1472);};_146f.placeOnScreenAroundNode=_146f.placeOnScreenAroundElement;_146f.placeOnScreenAroundRectangle=_146f.placeOnScreenAroundElement;_146f.getPopupAroundAlignment=function(_1474,_1475){var align={};array.forEach(_1474,function(pos){var ltr=_1475;switch(pos){case "after":align[_1475?"BR":"BL"]=_1475?"BL":"BR";break;case "before":align[_1475?"BL":"BR"]=_1475?"BR":"BL";break;case "below-alt":ltr=!ltr;case "below":align[ltr?"BL":"BR"]=ltr?"TL":"TR";align[ltr?"BR":"BL"]=ltr?"TR":"TL";break;case "above-alt":ltr=!ltr;case "above":default:align[ltr?"TL":"TR"]=ltr?"BL":"BR";align[ltr?"TR":"TL"]=ltr?"BR":"BL";break;}});return align;};lang.mixin(dijit,_146f);return dijit;});},"esri/layers/RangeDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/Domain"],function(_1476,lang,has,_1477,_1478,_1479){var _147a=_1476([_1479],{declaredClass:"esri.layers.RangeDomain",constructor:function(json){if(json&&lang.isObject(json)){this.minValue=json.range[0];this.maxValue=json.range[1];}},toJson:function(){var json=this.inherited(arguments);json.range=[this.minValue,this.maxValue];return _1478.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.RangeDomain",_147a,_1477);}return _147a;});},"esri/layers/Field":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/layers/RangeDomain","esri/layers/CodedValueDomain"],function(_147b,lang,has,_147c,_147d,_147e){var Field=_147b(null,{declaredClass:"esri.layers.Field",constructor:function(json){if(json&&lang.isObject(json)){this.name=json.name;this.type=json.type;this.alias=json.alias;this.length=json.length;this.editable=json.editable;this.nullable=json.nullable;var _147f=json.domain;if(_147f&&lang.isObject(_147f)){switch(_147f.type){case "range":this.domain=new _147d(_147f);break;case "codedValue":this.domain=new _147e(_147f);break;}}}}});if(has("extend-esri")){lang.setObject("layers.Field",Field,_147c);}return Field;});},"esri/geometry/Point":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/SpatialReference","esri/geometry/Geometry"],function(_1480,lang,has,_1481,_1482,_1483,_1484){var _1485=6378137,PI=3.141592653589793,_1486=57.29577951308232,_1487=0.017453292519943;function _1488(rad){return rad*_1486;};function _1489(deg){return deg*_1487;};function _148a(lng,lat){if(lat>89.99999){lat=89.99999;}else{if(lat<-89.99999){lat=-89.99999;}}var _148b=_1489(lat);return [_1489(lng)*_1485,_1485/2*Math.log((1+Math.sin(_148b))/(1-Math.sin(_148b)))];};function _148c(x,y,_148d){var _148e=_1488(x/_1485);if(_148d){return [_148e,_1488((PI/2)-(2*Math.atan(Math.exp(-1*y/_1485))))];}return [_148e-(Math.floor((_148e+180)/360)*360),_1488((PI/2)-(2*Math.atan(Math.exp(-1*y/_1485))))];};var _148f={type:"point",x:0,y:0};var Point=_1480(_1484,{declaredClass:"esri.geometry.Point",constructor:function(x,y,_1490){lang.mixin(this,_148f);if(lang.isArray(x)){this.x=x[0];this.y=x[1];this.spatialReference=y;}else{if(lang.isObject(x)){lang.mixin(this,x);if(_1482.isDefined(this.latitude)){this.y=this.latitude;}if(_1482.isDefined(this.longitude)){this.x=this.longitude;}if(this.spatialReference){this.spatialReference=new _1483(this.spatialReference);}}else{this.x=x;this.y=y;this.spatialReference=_1490;}}this.verifySR();},offset:function(x,y){return new this.constructor(this.x+x,this.y+y,this.spatialReference);},setX:function(x){this.x=x;return this;},setY:function(y){this.y=y;return this;},setLongitude:function(_1491){var sr=this.spatialReference;if(sr){if(sr._isWebMercator()){this.x=_148a(_1491,this.y)[0];}else{if(sr.wkid===4326){this.x=_1491;}}}return this;},setLatitude:function(_1492){var sr=this.spatialReference;if(sr){if(sr._isWebMercator()){this.y=_148a(this.x,_1492)[1];}else{if(sr.wkid===4326){this.y=_1492;}}}return this;},getLongitude:function(){var sr=this.spatialReference,_1493;if(sr){if(sr._isWebMercator()){_1493=_148c(this.x,this.y)[0];}else{if(sr.wkid===4326){_1493=this.x;}}}return _1493;},getLatitude:function(){var sr=this.spatialReference,_1494;if(sr){if(sr._isWebMercator()){_1494=_148c(this.x,this.y)[1];}else{if(sr.wkid===4326){_1494=this.y;}}}return _1494;},update:function(x,y){this.x=x;this.y=y;return this;},normalize:function(){var x=this.x,sr=this.spatialReference;if(sr){var info=sr._getInfo();if(info){var _1495=info.valid[0],_1496=info.valid[1],world=2*_1496,ratio;if(x>_1496){ratio=Math.ceil(Math.abs(x-_1496)/world);x-=(ratio*world);}else{if(x<_1495){ratio=Math.ceil(Math.abs(x-_1495)/world);x+=(ratio*world);}}}}return new this.constructor(x,this.y,sr);},toJson:function(){var json={x:this.x,y:this.y},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});Point.lngLatToXY=_148a;Point.xyToLngLat=_148c;Point.defaultProps=_148f;if(has("extend-esri")){lang.setObject("geometry.Point",Point,_1481);_1481.geometry.defaultPoint=_148f;}return Point;});},"dijit/Dialog":function(){require({cache:{"url:dijit/templates/Dialog.html":"<div class=\"dijitDialog\" role=\"dialog\" aria-labelledby=\"${id}_title\">\n\t<div data-dojo-attach-point=\"titleBar\" class=\"dijitDialogTitleBar\">\n\t\t<span data-dojo-attach-point=\"titleNode\" class=\"dijitDialogTitle\" id=\"${id}_title\"\n\t\t\t\trole=\"heading\" level=\"1\"></span>\n\t\t<span data-dojo-attach-point=\"closeButtonNode\" class=\"dijitDialogCloseIcon\" data-dojo-attach-event=\"ondijitclick: onCancel\" title=\"${buttonCancel}\" role=\"button\" tabIndex=\"-1\">\n\t\t\t<span data-dojo-attach-point=\"closeText\" class=\"closeText\" title=\"${buttonCancel}\">x</span>\n\t\t</span>\n\t</div>\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitDialogPaneContent\"></div>\n</div>\n"}});define("dijit/Dialog",["require","dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/_base/fx","dojo/i18n","dojo/keys","dojo/_base/lang","dojo/on","dojo/ready","dojo/sniff","dojo/window","dojo/dnd/Moveable","dojo/dnd/TimedMoveable","./focus","./_base/manager","./_Widget","./_TemplatedMixin","./_CssStateMixin","./form/_FormMixin","./_DialogMixin","./DialogUnderlay","./layout/ContentPane","dojo/text!./templates/Dialog.html","./main","dojo/i18n!./nls/common"],function(_1497,array,_1498,_1499,_149a,dom,_149b,_149c,_149d,event,fx,i18n,keys,lang,on,ready,has,_149e,_149f,_14a0,focus,_14a1,_14a2,_14a3,_14a4,_14a5,_14a6,_14a7,_14a8,_14a9,dijit){var _14aa=_1499("dijit._DialogBase",[_14a3,_14a5,_14a6,_14a4],{templateString:_14a9,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:[{node:"titleNode",type:"innerHTML"},{node:"titleBar",type:"attribute"}],open:false,duration:_14a1.defaultDuration,refocus:true,autofocus:true,_firstFocusItem:null,_lastFocusItem:null,doLayout:false,draggable:true,_setDraggableAttr:function(val){this._set("draggable",val);},"aria-describedby":"",maxRatio:0.9,postMixInProperties:function(){var _14ab=i18n.getLocalization("dijit","common");lang.mixin(this,_14ab);this.inherited(arguments);},postCreate:function(){_149d.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);this.connect(this,"onExecute","hide");this.connect(this,"onCancel","hide");this._modalconnects=[];},onLoad:function(){this._position();if(this.autofocus&&_14ac.isTop(this)){this._getFocusItems(this.domNode);focus.focus(this._firstFocusItem);}this.inherited(arguments);},_endDrag:function(){var _14ad=_149c.position(this.domNode),_14ae=_149e.getBox(this.ownerDocument);_14ad.y=Math.min(Math.max(_14ad.y,0),(_14ae.h-_14ad.h));_14ad.x=Math.min(Math.max(_14ad.x,0),(_14ae.w-_14ad.w));this._relativePosition=_14ad;this._position();},_setup:function(){var node=this.domNode;if(this.titleBar&&this.draggable){this._moveable=new ((has("ie")==6)?_14a0:_149f)(node,{handle:this.titleBar});this.connect(this._moveable,"onMoveStop","_endDrag");}else{_149b.add(node,"dijitDialogFixed");}this.underlayAttrs={dialogId:this.id,"class":array.map(this["class"].split(/\s/),function(s){return s+"_underlay";}).join(" "),ownerDocument:this.ownerDocument};},_size:function(){this._checkIfSingleChild();if(this._singleChild){if(typeof this._singleChildOriginalStyle!="undefined"){this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle;delete this._singleChildOriginalStyle;}}else{_149d.set(this.containerNode,{width:"auto",height:"auto"});}var bb=_149c.position(this.domNode);var _14af=_149e.getBox(this.ownerDocument);_14af.w*=this.maxRatio;_14af.h*=this.maxRatio;if(bb.w>=_14af.w||bb.h>=_14af.h){var _14b0=_149c.position(this.containerNode),w=Math.min(bb.w,_14af.w)-(bb.w-_14b0.w),h=Math.min(bb.h,_14af.h)-(bb.h-_14b0.h);if(this._singleChild&&this._singleChild.resize){if(typeof this._singleChildOriginalStyle=="undefined"){this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText;}this._singleChild.resize({w:w,h:h});}else{_149d.set(this.containerNode,{width:w+"px",height:h+"px",overflow:"auto",position:"relative"});}}else{if(this._singleChild&&this._singleChild.resize){this._singleChild.resize();}}},_position:function(){if(!_149b.contains(this.ownerDocumentBody,"dojoMove")){var node=this.domNode,_14b1=_149e.getBox(this.ownerDocument),p=this._relativePosition,bb=p?null:_149c.position(node),l=Math.floor(_14b1.l+(p?p.x:(_14b1.w-bb.w)/2)),t=Math.floor(_14b1.t+(p?p.y:(_14b1.h-bb.h)/2));_149d.set(node,{left:l+"px",top:t+"px"});}},_onKey:function(evt){if(evt.charOrCode){var node=evt.target;if(evt.charOrCode===keys.TAB){this._getFocusItems(this.domNode);}var _14b2=(this._firstFocusItem==this._lastFocusItem);if(node==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===keys.TAB){if(!_14b2){focus.focus(this._lastFocusItem);}event.stop(evt);}else{if(node==this._lastFocusItem&&evt.charOrCode===keys.TAB&&!evt.shiftKey){if(!_14b2){focus.focus(this._firstFocusItem);}event.stop(evt);}else{while(node){if(node==this.domNode||_149b.contains(node,"dijitPopup")){if(evt.charOrCode==keys.ESCAPE){this.onCancel();}else{return;}}node=node.parentNode;}if(evt.charOrCode!==keys.TAB){event.stop(evt);}else{if(!has("opera")){try{this._firstFocusItem.focus();}catch(e){}}}}}}},show:function(){if(this.open){return;}if(!this._started){this.startup();}if(!this._alreadyInitialized){this._setup();this._alreadyInitialized=true;}if(this._fadeOutDeferred){this._fadeOutDeferred.cancel();}var win=_149e.get(this.ownerDocument);this._modalconnects.push(on(win,"scroll",lang.hitch(this,"resize")));this._modalconnects.push(on(this.domNode,_1498._keypress,lang.hitch(this,"_onKey")));_149d.set(this.domNode,{opacity:0,display:""});this._set("open",true);this._onShow();this._size();this._position();var _14b3;this._fadeInDeferred=new _149a(lang.hitch(this,function(){_14b3.stop();delete this._fadeInDeferred;}));_14b3=fx.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:lang.hitch(this,function(){_14ac.show(this,this.underlayAttrs);}),onEnd:lang.hitch(this,function(){if(this.autofocus&&_14ac.isTop(this)){this._getFocusItems(this.domNode);focus.focus(this._firstFocusItem);}this._fadeInDeferred.resolve(true);delete this._fadeInDeferred;})}).play();return this._fadeInDeferred;},hide:function(){if(!this._alreadyInitialized||!this.open){return;}if(this._fadeInDeferred){this._fadeInDeferred.cancel();}var _14b4;this._fadeOutDeferred=new _149a(lang.hitch(this,function(){_14b4.stop();delete this._fadeOutDeferred;}));this._fadeOutDeferred.then(lang.hitch(this,"onHide"));_14b4=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,function(){this.domNode.style.display="none";_14ac.hide(this);this._fadeOutDeferred.resolve(true);delete this._fadeOutDeferred;})}).play();if(this._scrollConnected){this._scrollConnected=false;}var h;while(h=this._modalconnects.pop()){h.remove();}if(this._relativePosition){delete this._relativePosition;}this._set("open",false);return this._fadeOutDeferred;},resize:function(){if(this.domNode.style.display!="none"){if(_14a7._singleton){_14a7._singleton.layout();}this._position();this._size();}},destroy:function(){if(this._fadeInDeferred){this._fadeInDeferred.cancel();}if(this._fadeOutDeferred){this._fadeOutDeferred.cancel();}if(this._moveable){this._moveable.destroy();}var h;while(h=this._modalconnects.pop()){h.remove();}_14ac.hide(this);this.inherited(arguments);}});var _14b5=_1499("dijit.Dialog",[_14a8,_14aa],{});_14b5._DialogBase=_14aa;var _14ac=_14b5._DialogLevelManager={_beginZIndex:950,show:function(_14b6,_14b7){ds[ds.length-1].focus=focus.curNode;var _14b8=_14a7._singleton;if(!_14b8||_14b8._destroyed){_14b8=dijit._underlay=_14a7._singleton=new _14a7(_14b7);}else{_14b8.set(_14b6.underlayAttrs);}var _14b9=ds[ds.length-1].dialog?ds[ds.length-1].zIndex+2:_14b5._DialogLevelManager._beginZIndex;if(ds.length==1){_14b8.show();}_149d.set(_14a7._singleton.domNode,"zIndex",_14b9-1);_149d.set(_14b6.domNode,"zIndex",_14b9);ds.push({dialog:_14b6,underlayAttrs:_14b7,zIndex:_14b9});},hide:function(_14ba){if(ds[ds.length-1].dialog==_14ba){ds.pop();var pd=ds[ds.length-1];if(!_14a7._singleton._destroyed){if(ds.length==1){_14a7._singleton.hide();}else{_149d.set(_14a7._singleton.domNode,"zIndex",pd.zIndex-1);_14a7._singleton.set(pd.underlayAttrs);}}if(_14ba.refocus){var focus=pd.focus;if(pd.dialog&&(!focus||!dom.isDescendant(focus,pd.dialog.domNode))){pd.dialog._getFocusItems(pd.dialog.domNode);focus=pd.dialog._firstFocusItem;}if(focus){try{focus.focus();}catch(e){}}}}else{var idx=array.indexOf(array.map(ds,function(elem){return elem.dialog;}),_14ba);if(idx!=-1){ds.splice(idx,1);}}},isTop:function(_14bb){return ds[ds.length-1].dialog==_14bb;}};var ds=_14b5._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];if(has("dijit-legacy-requires")){ready(0,function(){var _14bc=["dijit/TooltipDialog"];_1497(_14bc);});}return _14b5;});},"dijit/_base/focus":function(){define("dijit/_base/focus",["dojo/_base/array","dojo/dom","dojo/_base/lang","dojo/topic","dojo/_base/window","../focus","../main"],function(array,dom,lang,topic,win,focus,dijit){var _14bd={_curFocus:null,_prevFocus:null,isCollapsed:function(){return dijit.getBookmark().isCollapsed;},getBookmark:function(){var bm,rg,tg,sel=win.doc.selection,cf=focus.curNode;if(win.global.getSelection){sel=win.global.getSelection();if(sel){if(sel.isCollapsed){tg=cf?cf.tagName:"";if(tg){tg=tg.toLowerCase();if(tg=="textarea"||(tg=="input"&&(!cf.type||cf.type.toLowerCase()=="text"))){sel={start:cf.selectionStart,end:cf.selectionEnd,node:cf,pRange:true};return {isCollapsed:(sel.end<=sel.start),mark:sel};}}bm={isCollapsed:true};if(sel.rangeCount){bm.mark=sel.getRangeAt(0).cloneRange();}}else{rg=sel.getRangeAt(0);bm={isCollapsed:false,mark:rg.cloneRange()};}}}else{if(sel){tg=cf?cf.tagName:"";tg=tg.toLowerCase();if(cf&&tg&&(tg=="button"||tg=="textarea"||tg=="input")){if(sel.type&&sel.type.toLowerCase()=="none"){return {isCollapsed:true,mark:null};}else{rg=sel.createRange();return {isCollapsed:rg.text&&rg.text.length?false:true,mark:{range:rg,pRange:true}};}}bm={};try{rg=sel.createRange();bm.isCollapsed=!(sel.type=="Text"?rg.htmlText.length:rg.length);}catch(e){bm.isCollapsed=true;return bm;}if(sel.type.toUpperCase()=="CONTROL"){if(rg.length){bm.mark=[];var i=0,len=rg.length;while(i<len){bm.mark.push(rg.item(i++));}}else{bm.isCollapsed=true;bm.mark=null;}}else{bm.mark=rg.getBookmark();}}else{console.warn("No idea how to store the current selection for this browser!");}}return bm;},moveToBookmark:function(_14be){var _14bf=win.doc,mark=_14be.mark;if(mark){if(win.global.getSelection){var sel=win.global.getSelection();if(sel&&sel.removeAllRanges){if(mark.pRange){var n=mark.node;n.selectionStart=mark.start;n.selectionEnd=mark.end;}else{sel.removeAllRanges();sel.addRange(mark);}}else{console.warn("No idea how to restore selection for this browser!");}}else{if(_14bf.selection&&mark){var rg;if(mark.pRange){rg=mark.range;}else{if(lang.isArray(mark)){rg=_14bf.body.createControlRange();array.forEach(mark,function(n){rg.addElement(n);});}else{rg=_14bf.body.createTextRange();rg.moveToBookmark(mark);}}rg.select();}}}},getFocus:function(menu,_14c0){var node=!focus.curNode||(menu&&dom.isDescendant(focus.curNode,menu.domNode))?dijit._prevFocus:focus.curNode;return {node:node,bookmark:node&&(node==focus.curNode)&&win.withGlobal(_14c0||win.global,dijit.getBookmark),openedForWindow:_14c0};},_activeStack:[],registerIframe:function(_14c1){return focus.registerIframe(_14c1);},unregisterIframe:function(_14c2){_14c2&&_14c2.remove();},registerWin:function(_14c3,_14c4){return focus.registerWin(_14c3,_14c4);},unregisterWin:function(_14c5){_14c5&&_14c5.remove();}};focus.focus=function(_14c6){if(!_14c6){return;}var node="node" in _14c6?_14c6.node:_14c6,_14c7=_14c6.bookmark,_14c8=_14c6.openedForWindow,_14c9=_14c7?_14c7.isCollapsed:false;if(node){var _14ca=(node.tagName.toLowerCase()=="iframe")?node.contentWindow:node;if(_14ca&&_14ca.focus){try{_14ca.focus();}catch(e){}}focus._onFocusNode(node);}if(_14c7&&win.withGlobal(_14c8||win.global,dijit.isCollapsed)&&!_14c9){if(_14c8){_14c8.focus();}try{win.withGlobal(_14c8||win.global,dijit.moveToBookmark,null,[_14c7]);}catch(e2){}}};focus.watch("curNode",function(name,_14cb,_14cc){dijit._curFocus=_14cc;dijit._prevFocus=_14cb;if(_14cc){topic.publish("focusNode",_14cc);}});focus.watch("activeStack",function(name,_14cd,_14ce){dijit._activeStack=_14ce;});focus.on("widget-blur",function(_14cf,by){topic.publish("widgetBlur",_14cf,by);});focus.on("widget-focus",function(_14d0,by){topic.publish("widgetFocus",_14d0,by);});lang.mixin(dijit,_14bd);return dijit;});},"dijit/a11y":function(){define("dijit/a11y",["dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/sniff","./main"],function(array,_14d1,_14d2,dom,_14d3,_14d4,has,dijit){var shown=(dijit._isElementShown=function(elem){var s=_14d4.get(elem);return (s.visibility!="hidden")&&(s.visibility!="collapsed")&&(s.display!="none")&&(_14d3.get(elem,"type")!="hidden");});dijit.hasDefaultTabStop=function(elem){switch(elem.nodeName.toLowerCase()){case "a":return _14d3.has(elem,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":var body;try{var _14d5=elem.contentDocument;if("designMode" in _14d5&&_14d5.designMode=="on"){return true;}body=_14d5.body;}catch(e1){try{body=elem.contentWindow.document.body;}catch(e2){return false;}}return body&&(body.contentEditable=="true"||(body.firstChild&&body.firstChild.contentEditable=="true"));default:return elem.contentEditable=="true";}};var _14d6=(dijit.isTabNavigable=function(elem){if(_14d3.get(elem,"disabled")){return false;}else{if(_14d3.has(elem,"tabIndex")){return _14d3.get(elem,"tabIndex")>=0;}else{return dijit.hasDefaultTabStop(elem);}}});dijit._getTabNavigable=function(root){var first,last,_14d7,_14d8,_14d9,_14da,_14db={};function _14dc(node){return node&&node.tagName.toLowerCase()=="input"&&node.type&&node.type.toLowerCase()=="radio"&&node.name&&node.name.toLowerCase();};var _14dd=function(_14de){for(var child=_14de.firstChild;child;child=child.nextSibling){if(child.nodeType!=1||(has("ie")<=9&&child.scopeName!=="HTML")||!shown(child)){continue;}if(_14d6(child)){var _14df=+_14d3.get(child,"tabIndex");if(!_14d3.has(child,"tabIndex")||_14df==0){if(!first){first=child;}last=child;}else{if(_14df>0){if(!_14d7||_14df<_14d8){_14d8=_14df;_14d7=child;}if(!_14d9||_14df>=_14da){_14da=_14df;_14d9=child;}}}var rn=_14dc(child);if(_14d3.get(child,"checked")&&rn){_14db[rn]=child;}}if(child.nodeName.toUpperCase()!="SELECT"){_14dd(child);}}};if(shown(root)){_14dd(root);}function rs(node){return _14db[_14dc(node)]||node;};return {first:rs(first),last:rs(last),lowest:rs(_14d7),highest:rs(_14d9)};};dijit.getFirstInTabbingOrder=function(root,doc){var elems=dijit._getTabNavigable(dom.byId(root,doc));return elems.lowest?elems.lowest:elems.first;};dijit.getLastInTabbingOrder=function(root,doc){var elems=dijit._getTabNavigable(dom.byId(root,doc));return elems.last?elems.last:elems.highest;};return {hasDefaultTabStop:dijit.hasDefaultTabStop,isTabNavigable:dijit.isTabNavigable,_getTabNavigable:dijit._getTabNavigable,getFirstInTabbingOrder:dijit.getFirstInTabbingOrder,getLastInTabbingOrder:dijit.getLastInTabbingOrder};});},"esri/tasks/LinearUnit":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_14e0,lang,has,_14e1){var _14e2=_14e0(null,{declaredClass:"esri.tasks.LinearUnit",constructor:function(json){if(json){lang.mixin(this,json);}},distance:0,units:null,toJson:function(){var json={};if(this.distance){json.distance=this.distance;}if(this.units){json.units=this.units;}return json;}});if(has("extend-esri")){lang.setObject("tasks.LinearUnit",_14e2,_14e1);}return _14e2;});},"esri/tasks/GPResultImageLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","dojo/io-query","esri/kernel","esri/layers/ArcGISDynamicMapServiceLayer"],function(_14e3,lang,_14e4,has,ioq,_14e5,_14e6){var _14e7=_14e3(_14e6,{declaredClass:"esri.tasks._GPResultImageLayer",constructor:function(url,_14e8){if(_14e8&&_14e8.imageParameters&&_14e8.imageParameters.extent){this.initialExtent=(this.fullExtent=_14e8.imageParameters.extent);this.spatialReference=this.initialExtent.spatialReference;}this.getImageUrl=lang.hitch(this,this.getImageUrl);this.loaded=true;this.onLoad(this);},getImageUrl:function(_14e9,width,_14ea,_14eb){var path=this._url.path+"?",_14ec=this._params,sr=_14e9.spatialReference.wkid;_14eb(path+ioq.objectToQuery(lang.mixin(_14ec,{f:"image",bbox:_14e4.toJson(_14e9.toJson()),bboxSR:sr,imageSR:sr,size:width+","+_14ea})));}});if(has("extend-esri")){lang.setObject("tasks._GPResultImageLayer",_14e7,_14e5);}return _14e7;});},"dijit/form/_ToggleButtonMixin":function(){define("dijit/form/_ToggleButtonMixin",["dojo/_base/declare","dojo/dom-attr"],function(_14ed,_14ee){return _14ed("dijit.form._ToggleButtonMixin",null,{checked:false,_aria_attr:"aria-pressed",_onClick:function(evt){var _14ef=this.checked;this._set("checked",!_14ef);var ret=this.inherited(arguments);this.set("checked",ret?this.checked:_14ef);return ret;},_setCheckedAttr:function(value,_14f0){this._set("checked",value);var node=this.focusNode||this.domNode;if(this._created){if(_14ee.get(node,"checked")!=!!value){_14ee.set(node,"checked",!!value);}}node.setAttribute(this._aria_attr,String(value));this._handleOnChange(value,_14f0);},postCreate:function(){this.inherited(arguments);var node=this.focusNode||this.domNode;if(this.checked){node.setAttribute("checked","checked");}},reset:function(){this._hasBeenBlurred=false;this.set("checked",this.params.checked||false);}});});},"esri/map":function(){define(["require","dojo/_base/kernel","dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/_base/event","dojo/on","dojo/aspect","dojo/dom","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dijit/registry","esri/kernel","esri/config","esri/sniff","esri/lang","esri/_coremap","esri/MapNavigationManager"],function(_14f1,_14f2,_14f3,_14f4,lang,array,_14f5,on,_14f6,dom,_14f7,_14f8,_14f9,_14fa,_14fb,_14fc,_14fd,has,_14fe,_14ff,_1500){var _1501=30,_1502=30,_1503={up:"panUp",right:"panRight",down:"panDown",left:"panLeft"},_1504={upperRight:"panUpperRight",lowerRight:"panLowerRight",lowerLeft:"panLowerLeft",upperLeft:"panUpperLeft"},dc=_14f4.connect,ddc=_14f4.disconnect,dcr=_14f8.create,ds=_14fa.set,dh=lang.hitch,_1505=_14f9.getMarginBox,_1506=_14f2.deprecated,mixin=lang.mixin,_1507="Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",_1508=0;var Map=_14f3(_14ff,{declaredClass:"esri.Map",constructor:function(_1509,_150a){mixin(this,{_slider:null,_navDiv:null,_mapParams:mixin({attributionWidth:0.45,slider:true,nav:false,logo:true,sliderStyle:"small",sliderPosition:"top-left",sliderOrientation:"vertical",autoResize:true},_150a||{})});mixin(this,{isDoubleClickZoom:false,isShiftDoubleClickZoom:false,isClickRecenter:false,isScrollWheelZoom:false,isPan:false,isRubberBandZoom:false,isKeyboardNavigation:false,isPanArrows:false,isZoomSlider:false});if(lang.isFunction(_14fc._css)){_14fc._css=_14fc._css(this._mapParams.force3DTransforms);this.force3DTransforms=this._mapParams.force3DTransforms;}var _150b=(has("esri-transforms")&&has("esri-transitions"));this.navigationMode=this._mapParams.navigationMode||(_150b&&"css-transforms")||"classic";if(this.navigationMode==="css-transforms"&&!_150b){this.navigationMode="classic";}this.fadeOnZoom=_14fe.isDefined(this._mapParams.fadeOnZoom)?this._mapParams.fadeOnZoom:(this.navigationMode==="css-transforms");if(this.navigationMode!=="css-transforms"){this.fadeOnZoom=false;}this.setMapCursor("default");this.smartNavigation=_150a&&_150a.smartNavigation;if(!_14fe.isDefined(this.smartNavigation)&&has("mac")&&!has("esri-touch")&&!has("esri-pointer")&&!(has("ff")<=3.5)){var parts=navigator.userAgent.match(/Mac\s+OS\s+X\s+([\d]+)(\.|\_)([\d]+)\D/i);if(parts&&_14fe.isDefined(parts[1])&&_14fe.isDefined(parts[3])){var _150c=parseInt(parts[1],10),_150d=parseInt(parts[3],10);this.smartNavigation=((_150c>10)||(_150c===10&&_150d>=6));}}var _150e=true;this.showAttribution=_14fe.isDefined(this._mapParams.showAttribution)?this._mapParams.showAttribution:_150e;this._onLoadHandler_connect=dc(this,"onLoad",this,"_onLoadInitNavsHandler");var _150f=dcr("div",{"class":"esriControlsBR"+(this._mapParams.nav?" withPanArrows":"")},this.root);if(this.showAttribution){var _1510=lang.getObject("esri.dijit.Attribution",false);if(_1510){this._initAttribution(_1510,_150f);}else{var _1511=["esri/dijit/Attribution"],rid=_1508++,self=this;this._rids&&this._rids.push(rid);_14f1(_1511,function(_1512){var idx=self._rids?array.indexOf(self._rids,rid):-1;if(idx!==-1){self._rids.splice(idx,1);self._initAttribution(_1512,_150f);}});}}if(this._mapParams.logo){var style={};if(has("ie")===6){style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true', sizingMethod='crop', src='"+_14f1.toUrl("esri")+"/images/map/logo-med.png"+"')";}var logo=this._ogol=dcr("div",{style:style},_150f);if((this.root.clientWidth*this.root.clientHeight)<250000){_14f7.add(logo,"logo-sm");}else{_14f7.add(logo,"logo-med");}if(!has("esri-touch")&&!has("esri-pointer")){this._ogol_connect=dc(logo,"onclick",this,"_openLogoLink");}}var _1513=(this.navigationManager=new _1500(this)),_1514=_1513.mouseEvents||_1513.touchEvents||_1513.pointerEvents;if(_150a&&_150a.basemap){this._onLoadFix=true;this.setBasemap(_150a.basemap);this._onLoadFix=false;}this.autoResize=this._mapParams.autoResize;if(this.autoResize){var _1515=_14fb.getEnclosingWidget(this.container),_1516=(_1515&&_1515.resize)?_1515:window,_1517=dh(this,this.resize);this._rszSignal=on.pausable(_1516,"resize",_1517);this._oriSignal=on.pausable(window,"orientationchange",_1517);_14f6.after(_1516,"resize",_1517,true);}},_initAttribution:function(_1518,_1519){var _151a=dcr("span",{"class":"esriAttribution"},_1519,"first");ds(_151a,"width",Math.floor(this.width*this._mapParams.attributionWidth)+"px");this._connects.push(dc(_151a,"onclick",function(){var _151b="esriAttributionOpen";if(_14f7.contains(this,_151b)){_14f7.remove(this,_151b);}else{if(this.scrollWidth>this.clientWidth){_14f7.add(this,_151b);}}}));this.attribution=new _1518({map:this},_151a);},_cleanUp:function(){this.disableMapNavigation();this.navigationManager.destroy();var _151c=this._slider;if(_151c&&_151c.destroy&&!_151c._destroyed){_151c.destroy();}var _151d=this._navDiv,_151e=this.attribution;if(_151d){_14f8.destroy(_151d);}if(_151e){_151e.destroy();}this._connects.push(this._slider_connect,this._ogol_connect,this._rszSignal,this._oriSignal);array.forEach(this._connects,ddc);this.attribution=this.navigationManager=this._rids=this._connects=this._slider_connect=this._ogol_connect=this._rszSignal=this._oriSignal=null;this.inherited("_cleanUp",arguments);},_isPanningOrZooming:function(){return this.__panning||this.__zooming;},_canZoom:function(value){var level=this.getLevel();return !this.__tileInfo||!((level===this.getMinZoom()&&value<0)||(level===this.getMaxZoom()&&value>0));},_onLoadInitNavsHandler:function(){this.enableMapNavigation();this._createNav();if(this._mapParams.sliderStyle==="small"||!this._createSlider){this._createSimpleSlider();}else{if(this._mapParams.slider){var _151f=this._getSliderClass(true),_1520=(_151f.indexOf("Horizontal")!==-1),_1521=_1520?"dijit.form.HorizontalSlider":"dijit.form.VerticalSlider",_1522=_1520?"dijit.form.HorizontalRule":"dijit.form.VerticalRule",_1523=_1520?"dijit.form.HorizontalRuleLabels":"dijit.form.VerticalRuleLabels",_1524=[_1521,_1522,_1523],_1525=array.some(_1524,function(_1526){return !lang.getObject(_1526,false);});if(_1525){_1524=array.map(_1524,function(_1527){return _1527.replace(/\./g,"/");});var rid=_1508++,self=this;this._rids&&this._rids.push(rid);_14f1(_1524,function(){var idx=self._rids?array.indexOf(self._rids,rid):-1;if(idx!==-1){self._rids.splice(idx,1);self._createSlider.apply(self,arguments);}});}else{_1524=array.map(_1524,function(_1528){return lang.getObject(_1528,false);});this._createSlider.apply(this,_1524);}}}ddc(this._onLoadHandler_connect);},_createNav:function(){if(this._mapParams.nav){var div,v,i,_1529=_14f7.add,id=this.id;this._navDiv=dcr("div",{id:id+"_navdiv"},this.root);_1529(this._navDiv,"navDiv");var w2=this.width/2,h2=this.height/2,wh;for(i in _1503){v=_1503[i];div=dcr("div",{id:id+"_pan_"+i},this._navDiv);_1529(div,"fixedPan "+v);if(i==="up"||i==="down"){wh=parseInt(_1505(div).w,10)/2;ds(div,{left:(w2-wh)+"px",zIndex:_1501});}else{wh=parseInt(_1505(div).h,10)/2;ds(div,{top:(h2-wh)+"px",zIndex:_1501});}this._connects.push(dc(div,"onclick",dh(this,this[v])));}this._onMapResizeNavHandler_connect=dc(this,"onResize",this,"_onMapResizeNavHandler");for(i in _1504){v=_1504[i];div=dcr("div",{id:id+"_pan_"+i,style:{zIndex:_1501}},this._navDiv);_1529(div,"fixedPan "+v);this._connects.push(dc(div,"onclick",dh(this,this[v])));}this.isPanArrows=true;}},_onMapResizeNavHandler:function(_152a,wd,ht){var id=this.id,w2=wd/2,h2=ht/2,byId=dom.byId,i,div,wh;for(i in _1503){div=byId(id+"_pan_"+i);if(i==="up"||i==="down"){wh=parseInt(_1505(div).w,10)/2;ds(div,"left",(w2-wh)+"px");}else{wh=parseInt(_1505(div).h,10)/2;ds(div,"top",(h2-wh)+"px");}}},_createSimpleSlider:function(){if(this._mapParams.slider){var _152b=(this._slider=dcr("div",{id:this.id+"_zoom_slider","class":this._getSliderClass(),style:{zIndex:_1502}})),_152c=(has("esri-touch")&&!has("ff"))?"touchstart":(has("esri-pointer")?(navigator.msPointerEnabled?"MSPointerDown":"pointerdown"):"onclick"),_152d=dcr("div",{"class":"esriSimpleSliderIncrementButton"},_152b),_152e=dcr("div",{"class":"esriSimpleSliderDecrementButton"},_152b);_152d.innerHTML="+";_152e.innerHTML="&ndash;";if(has("ie")<8){_14f7.add(_152e,"dj_ie67Fix");}this._connects.push(dc(_152d,_152c,this,this._simpleSliderChangeHandler));this._connects.push(dc(_152e,_152c,this,this._simpleSliderChangeHandler));if(_152c=="touchstart"){this._connects.push(dc(_152d,"onclick",this,this._simpleSliderChangeHandler));this._connects.push(dc(_152e,"onclick",this,this._simpleSliderChangeHandler));}if(has("ie")<10){dom.setSelectable(_152b,false);}this.root.appendChild(_152b);this.isZoomSlider=true;}},_simpleSliderChangeHandler:function(evt){_14f5.stop(evt);var _152f=(evt.currentTarget.className.indexOf("IncrementButton")!==-1)?true:false;this._extentUtil({numLevels:_152f?1:-1});},_getSliderClass:function(large){var _1530="",type=(large?"Large":"Simple"),_1531=this._mapParams.sliderOrientation,_1532=this._mapParams.sliderPosition||"";_1531=(_1531&&_1531.toLowerCase()==="horizontal")?"esri"+type+"SliderHorizontal":"esri"+type+"SliderVertical";if(_1532){switch(_1532.toLowerCase()){case "top-left":_1532="esri"+type+"SliderTL";break;case "top-right":_1532="esri"+type+"SliderTR";break;case "bottom-left":_1532="esri"+type+"SliderBL";break;case "bottom-right":_1532="esri"+type+"SliderBR";break;default:break;}}return "esri"+type+"Slider"+" "+_1531+" "+_1532;},_createSlider:function(_1533,_1534,_1535){if(this._mapParams.slider){var div=dcr("div",{id:this.id+"_zoom_slider"},this.root),_1536=_14fd.defaults.map,_1537=this._getSliderClass(true),_1538=(_1537.indexOf("Horizontal")!==-1),_1539=(_1537.indexOf("SliderTL")!==-1||_1537.indexOf("SliderBL")!==-1),isTop=(_1537.indexOf("SliderTL")!==-1||_1537.indexOf("SliderTR")!==-1),_153a=this.getNumLevels(),i,il,_153b;if(_153a>0){var _153c,_153d,_153e=this._mapParams.sliderLabels,_153f=!!_153e,_1540=(_153e!==false);if(_1540){var _1541,_1542=_1538?"bottomDecoration":"rightDecoration";if(!_153e){_153e=[];for(i=0,il=_153a;i<il;i++){_153e[i]="";}}_1541=[{"class":"esriLargeSliderTicks",container:_1542,count:_153a,dijitClass:_1534},{"class":_153f&&"esriLargeSliderLabels",container:_1542,count:_153a,labels:_153e,dijitClass:_1535}];array.forEach(_1541,function(_1543){var _1544=dcr("div"),_1545=_1543.dijitClass;delete _1543.dijitClass;div.appendChild(_1544);if(_1545===_1534){_153c=new _1545(_1543,_1544);}else{_153d=new _1545(_1543,_1544);}});}_153b=(this._slider=new _1533({id:div.id,"class":_1537,minimum:this.getMinZoom(),maximum:this.getMaxZoom(),discreteValues:_153a,value:this.getLevel(),clickSelect:true,intermediateChanges:true,style:"z-index:"+_1502+";"},div));_153b.startup();if(_1540){_153c.startup();_153d.startup();}this._slider_connect=dc(_153b,"onChange",this,"_onSliderChangeHandler");this._connects.push(dc(this,"onExtentChange",this,"_onExtentChangeSliderHandler"));this._connects.push(dc(_153b._movable,"onFirstMove",this,"_onSliderMoveStartHandler"));}else{_153b=(this._slider=new _1533({id:div.id,"class":_1537,minimum:0,maximum:2,discreteValues:3,value:1,clickSelect:true,intermediateChanges:_1536.sliderChangeImmediate,style:"height:50px; z-index:"+_1502+";"},div));var _1546=_153b.domNode.firstChild.childNodes;for(i=1;i<=3;i++){ds(_1546[i],"visibility","hidden");}_153b.startup();this._slider_connect=dc(_153b,"onChange",this,"_onDynSliderChangeHandler");this._connects.push(dc(this,"onExtentChange",this,"_onExtentChangeDynSliderHandler"));}var _1547=_153b.incrementButton,_1548=_153b.decrementButton;_1547.style.outline="none";_1548.style.outline="none";_153b.sliderHandle.style.outline="none";_153b._onKeyPress=function(){};var _1549=_153b._movable;if(_1549){var saved=_1549.onMouseDown;_1549.onMouseDown=function(e){if(has("ie")<9&&e.button!==1){return;}saved.apply(this,arguments);};}this.isZoomSlider=true;}},_onSliderMoveStartHandler:function(){ddc(this._slider_connect);ddc(this._slidermovestop_connect);this._slider_connect=dc(this._slider,"onChange",this,"_onSliderChangeDragHandler");this._slidermovestop_connect=dc(this._slider._movable,"onMoveStop",this,"_onSliderMoveEndHandler");},_onSliderChangeDragHandler:function(value){this._extentUtil({targetLevel:value});},_onSliderMoveEndHandler:function(){ddc(this._slider_connect);ddc(this._slidermovestop_connect);},_onSliderChangeHandler:function(value){this.setLevel(value);},_updateSliderValue:function(_154a,_154b){ddc(this._slider_connect);var _154c=this._slider;var saved=_154c._onChangeActive;_154c._onChangeActive=false;_154c.set("value",_154a);_154c._onChangeActive=saved;this._slider_connect=dc(_154c,"onChange",this,_154b);},_onExtentChangeSliderHandler:function(_154d,_154e,_154f,lod){ddc(this._slidermovestop_connect);this._updateSliderValue(lod.level,"_onSliderChangeHandler");},_onDynSliderChangeHandler:function(value){this._extentUtil({numLevels:value>0?1:-1});},_onExtentChangeDynSliderHandler:function(){this._updateSliderValue(1,"_onDynSliderChangeHandler");},_openLogoLink:function(evt){window.open(_14fd.defaults.map.logoLink,"_blank");_14f5.stop(evt);},enableMapNavigation:function(){this.navigationManager.enableNavigation();},disableMapNavigation:function(){this.navigationManager.disableNavigation();},enableDoubleClickZoom:function(){if(!this.isDoubleClickZoom){this.navigationManager.enableDoubleClickZoom();this.isDoubleClickZoom=true;}},disableDoubleClickZoom:function(){if(this.isDoubleClickZoom){this.navigationManager.disableDoubleClickZoom();this.isDoubleClickZoom=false;}},enableShiftDoubleClickZoom:function(){if(!this.isShiftDoubleClickZoom){_1506(this.declaredClass+": "+_1507,null,"v2.0");this.navigationManager.enableShiftDoubleClickZoom();this.isShiftDoubleClickZoom=true;}},disableShiftDoubleClickZoom:function(){if(this.isShiftDoubleClickZoom){_1506(this.declaredClass+": "+_1507,null,"v2.0");this.navigationManager.disableShiftDoubleClickZoom();this.isShiftDoubleClickZoom=false;}},enableClickRecenter:function(){if(!this.isClickRecenter){this.navigationManager.enableClickRecenter();this.isClickRecenter=true;}},disableClickRecenter:function(){if(this.isClickRecenter){this.navigationManager.disableClickRecenter();this.isClickRecenter=false;}},enablePan:function(){if(!this.isPan){this.navigationManager.enablePan();this.isPan=true;}},disablePan:function(){if(this.isPan){this.navigationManager.disablePan();this.isPan=false;}},enableRubberBandZoom:function(){if(!this.isRubberBandZoom){this.navigationManager.enableRubberBandZoom();this.isRubberBandZoom=true;}},disableRubberBandZoom:function(){if(this.isRubberBandZoom){this.navigationManager.disableRubberBandZoom();this.isRubberBandZoom=false;}},enableKeyboardNavigation:function(){if(!this.isKeyboardNavigation){this.navigationManager.enableKeyboardNavigation();this.isKeyboardNavigation=true;}},disableKeyboardNavigation:function(){if(this.isKeyboardNavigation){this.navigationManager.disableKeyboardNavigation();this.isKeyboardNavigation=false;}},enableScrollWheelZoom:function(){if(!this.isScrollWheelZoom){this.navigationManager.enableScrollWheelZoom();this.isScrollWheelZoom=true;}},disableScrollWheelZoom:function(){if(this.isScrollWheelZoom){this.navigationManager.disableScrollWheelZoom();this.isScrollWheelZoom=false;}},showPanArrows:function(){if(this._navDiv){this._navDiv.style.display="block";this.isPanArrows=true;}},hidePanArrows:function(){if(this._navDiv){this._navDiv.style.display="none";this.isPanArrows=false;}},showZoomSlider:function(){if(this._slider){ds(this._slider.domNode||this._slider,"visibility","visible");this.isZoomSlider=true;}},hideZoomSlider:function(){if(this._slider){ds(this._slider.domNode||this._slider,"visibility","hidden");this.isZoomSlider=false;}}});if(has("extend-esri")){_14fc.Map=Map;}return Map;});},"dijit/_Widget":function(){define("dijit/_Widget",["dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/ready","./registry","./_WidgetBase","./_OnDijitClickMixin","./_FocusMixin","dojo/uacss","./hccss"],function(_1550,_1551,_1552,_1553,has,_1554,lang,query,ready,_1555,_1556,_1557,_1558){function _1559(){};function _155a(_155b){return function(obj,event,scope,_155c){if(obj&&typeof event=="string"&&obj[event]==_1559){return obj.on(event.substring(2).toLowerCase(),lang.hitch(scope,_155c));}return _155b.apply(_1552,arguments);};};_1550.around(_1552,"connect",_155a);if(_1554.connect){_1550.around(_1554,"connect",_155a);}var _155d=_1553("dijit._Widget",[_1556,_1557,_1558],{onClick:_1559,onDblClick:_1559,onKeyDown:_1559,onKeyPress:_1559,onKeyUp:_1559,onMouseDown:_1559,onMouseMove:_1559,onMouseOut:_1559,onMouseOver:_1559,onMouseLeave:_1559,onMouseEnter:_1559,onMouseUp:_1559,constructor:function(_155e){this._toConnect={};for(var name in _155e){if(this[name]===_1559){this._toConnect[name.replace(/^on/,"").toLowerCase()]=_155e[name];delete _155e[name];}}},postCreate:function(){this.inherited(arguments);for(var name in this._toConnect){this.on(name,this._toConnect[name]);}delete this._toConnect;},on:function(type,func){if(this[this._onMap(type)]===_1559){return _1552.connect(this.domNode,type.toLowerCase(),this,func);}return this.inherited(arguments);},_setFocusedAttr:function(val){this._focused=val;this._set("focused",val);},setAttribute:function(attr,value){_1554.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(attr,value);},attr:function(name,value){if(_1551.isDebug){var _155f=arguments.callee._ach||(arguments.callee._ach={}),_1560=(arguments.callee.caller||"unknown caller").toString();if(!_155f[_1560]){_1554.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+_1560,"","2.0");_155f[_1560]=true;}}var args=arguments.length;if(args>=2||typeof name==="object"){return this.set.apply(this,arguments);}else{return this.get(name);}},getDescendants:function(){_1554.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?query("[widgetId]",this.containerNode).map(_1555.byNode):[];},_onShow:function(){this.onShow();},onShow:function(){},onHide:function(){},onClose:function(){return true;}});if(has("dijit-legacy-requires")){ready(0,function(){var _1561=["dijit/_base"];require(_1561);});}return _155d;});},"dojo/touch":function(){define(["./_base/kernel","./aspect","./dom","./_base/lang","./on","./has","./mouse","./domReady","./_base/window"],function(dojo,_1562,dom,lang,on,has,mouse,_1563,win){var _1564=navigator.msPointerEnabled;var _1565;function _1566(_1567,_1568,_1569){if(_1564&&_1569){return function(node,_156a){return on(node,_1569,_156a);};}else{if(has("touch")){return function(node,_156b){var _156c=on(node,_1568,_156b),_156d=on(node,_1567,function(evt){if(!_1565||(new Date()).getTime()>_1565+1000){_156b.call(this,evt);}});return {remove:function(){_156c.remove();_156d.remove();}};};}else{return function(node,_156e){return on(node,_1567,_156e);};}}};var _156f,_1570,_1571;if(has("touch")&&!_1564){_1563(function(){_1571=win.body();win.doc.addEventListener("touchstart",function(event){_1565=(new Date()).getTime();var _1572=_1571;_1571=event.target;if(_1571.dojoElementFromPoint){_1571=_1571.dojoElementFromPoint(event.changedTouches[0].clientX,event.changedTouches[0].clientY);}if(_1572){on.emit(_1572,"dojotouchout",{target:_1572,relatedTarget:_1571,bubbles:true});}if(_1571){on.emit(_1571,"dojotouchover",{target:_1571,relatedTarget:_1572,bubbles:true});}},true);on(win.doc,"touchmove",function(event){_1565=(new Date()).getTime();_1570=event;var _1573=win.doc.elementFromPoint(event.clientX,event.clientY);if(_1573){var _1574=_1573;if(_1573.dojoElementFromPoint){_1573=_1573.dojoElementFromPoint(event.clientX,event.clientY);}if(_1571!==_1573){if(_1571){on.emit(_1574,"dojotouchout",{target:_1571,relatedTarget:_1573,bubbles:true});}if(_1573){on.emit(_1574,"dojotouchover",{target:_1573,relatedTarget:_1571,bubbles:true});}_1571=_1573;}on.emit(_1574,"dojotouchmove",{target:_1573,bubbles:true});}});on(win.doc,"touchend",function(event){var node=win.doc.elementFromPoint(event.clientX,event.clientY);var _1575=node;if(node.dojoElementFromPoint){node=node.dojoElementFromPoint(event.clientX,event.clientY);}if(node){on.emit(_1575,"dojotouchend",lang.delegate(event,{target:node,bubbles:true}));}});});_156f=function(node,_1576){return on(node,"dojotouchmove",function(_1577){_1576(lang.delegate(_1570,{target:_1577.target,preventDefault:function(){_1570.preventDefault();},stopPropagation:function(){_1577.stopPropagation();}}));});};}var touch={press:_1566("mousedown","touchstart","MSPointerDown"),move:_1566("mousemove",_156f,"MSPointerMove"),release:_1566("mouseup","dojotouchend","MSPointerUp"),cancel:_1566(mouse.leave,"touchcancel",has("touch")?"MSPointerCancel":null),over:_1566("mouseover","dojotouchover","MSPointerOver"),out:_1566("mouseout","dojotouchout","MSPointerOut"),enter:mouse._eventHandler(_1566("mouseover","dojotouchover","MSPointerOver")),leave:mouse._eventHandler(_1566("mouseout","dojotouchout","MSPointerOut"))};1&&(dojo.touch=touch);return touch;});},"esri/dijit/Popup":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/kernel","dojo/has","dojo/window","dojo/Stateful","dojo/query","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dijit/registry","esri/kernel","esri/lang","esri/sniff","esri/domUtils","esri/geometry/Polyline","esri/geometry/Polygon","esri/InfoWindowBase","esri/PopupBase","dojo/i18n!esri/nls/jsapi","dojo/NodeList-dom","dojo/has!extend-esri?esri/dijit/PopupTemplate","dojo/has!extend-esri?esri/dijit/PopupRenderer"],function(_1578,lang,array,_1579,_157a,has,win,_157b,query,dom,_157c,_157d,_157e,_157f,_1580,_1581,_1582,_1583,_1584,_1585,_1586,_1587,_1588,_1589,_158a){var Popup=_1578([_1588,_1589,_157b],{declaredClass:"esri.dijit.Popup",offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:true,pagingControls:true,pagingInfo:true,keepHighlightOnHide:false,popupWindow:true,titleInBody:true,anchor:"auto",constructor:function(_158b,_158c){this.initialize();lang.mixin(this,_158b);this.domNode=dom.byId(_158c);var nls=this._nls=lang.mixin({},_158a.widgets.popup);var _158d=this.domNode;_157d.add(_158d,"esriPopup");this._isRTL=!_157f.isBodyLtr();if(this._isRTL){_1580.set(_158d,"direction","rtl");}var _158e="<div class='esriPopupWrapper' style='position: absolute;'>"+"<div class='sizer'>"+"<div class='titlePane'>"+"<div class='spinner hidden' title='"+nls.NLS_searching+"...'></div>"+"<div class='title'></div>"+"<div class='titleButton prev hidden' title='"+nls.NLS_prevFeature+"'></div>"+"<div class='titleButton next hidden' title='"+nls.NLS_nextFeature+"'></div>"+"<div class='titleButton maximize' title='"+nls.NLS_maximize+"'></div>"+"<div class='titleButton close' title='"+nls.NLS_close+"'></div>"+"</div>"+"</div>"+"<div class='sizer content'>"+"<div class='contentPane'>"+"</div>"+"</div>"+"<div class='sizer'>"+"<div class='actionsPane'>"+"<div class='actionList hidden'>"+"<a class='action zoomTo' href='javascript:void(0);'>"+nls.NLS_zoomTo+"</a>"+"</div>"+"</div>"+"</div>"+"<div class='pointer hidden'></div>"+"</div>"+"<div class='outerPointer hidden'></div>";_157c.set(_158d,"innerHTML",_158e);this._sizers=_157a.query(".sizer",_158d);var _158f=_157a.query(".titlePane",_158d)[0];dom.setSelectable(_158f,false);this._title=_157a.query(".title",_158f)[0];this._prevFeatureButton=_157a.query(".prev",_158f)[0];this._nextFeatureButton=_157a.query(".next",_158f)[0];this._maxButton=_157a.query(".maximize",_158f)[0];this._spinner=_157a.query(".spinner",_158f)[0];this._contentPane=_157a.query(".contentPane",_158d)[0];this._positioner=_157a.query(".esriPopupWrapper",_158d)[0];this._pointer=_157a.query(".pointer",_158d)[0];this._outerPointer=_157a.query(".outerPointer",_158d)[0];this._actionList=_157a.query(".actionsPane .actionList",_158d)[0];this._eventConnections=[_1579.connect(_157a.query(".close",_158f)[0],"onclick",this,this.hide),_1579.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),_1579.connect(this._nextFeatureButton,"onclick",this,this.selectNext),_1579.connect(this._maxButton,"onclick",this,this._toggleSize),_1579.connect(_157a.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature),_1579.connect(this,"onClearFeatures",this,this._featuresCleared),_1579.connect(this,"onSelectionChange",this,this._featureSelected),_1579.connect(this,"onDfdComplete",this,this._updateUI)];if(has("esri-touch")){var _1590=_1585.setScrollable(this._contentPane);this._eventConnections.push(_1590[0],_1590[1]);}this._toggleVisibility(false);},onMaximize:function(){},onRestore:function(){},setMap:function(map){this.inherited(arguments);_157e.place(this.domNode,map.root);if(this.highlight){this.enableHighlight(map);}this._maxHeight=_1580.get(this._contentPane,"maxHeight");},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments);},setTitle:function(title){if(!this.popupWindow){return;}if(!_1583.isDefined(title)||title===""){title="&nbsp;";}this.destroyDijits(this._title);this.place(title,this._title);if(this.isShowing){this.startupDijits(this._title);this.reposition();}},setContent:function(_1591){if(!this.popupWindow){return;}if(!_1583.isDefined(_1591)||_1591===""){_1591="&nbsp;";}this.destroyDijits(this._contentPane);this.place(_1591,this._contentPane);if(this.isShowing){this.startupDijits(this._contentPane);this.reposition();}},show:function(_1592,_1593){if(!this.popupWindow){return;}if(!_1592){this._toggleVisibility(true);return;}var map=this.map,_1594;if(_1592.spatialReference){this._location=_1592;_1594=map.toScreen(_1592);}else{this._location=map.toMap(_1592);_1594=_1592;}var _1595=map._getFrameWidth();if(_1595!==-1){_1594.x=_1594.x%_1595;if(_1594.x<0){_1594.x+=_1595;}if(map.width>_1595){var _1596=(map.width-_1595)/2;while(_1594.x<_1596){_1594.x+=_1595;}}}if(this._maximized){this.restore();}else{this._setPosition(_1594);}if(_1593&&_1593.closestFirst){this.showClosestFirst(this._location);}if(!this.isShowing){this._toggleVisibility(true);this._followMap();this.startupDijits(this._title);this.startupDijits(this._contentPane);this.reposition();this.showHighlight();this.onShow();}},hide:function(){if(this.isShowing){this._toggleVisibility(false);this._unfollowMap();if(!this.keepHighlightOnHide){this.hideHighlight();}this.onHide();}},resize:function(width,_1597){if(!this.popupWindow){return;}this._sizers.style({width:width+"px"});_1580.set(this._contentPane,"maxHeight",_1597+"px");this._maxHeight=_1597;if(this.isShowing){this.reposition();}},reposition:function(){if(!this.popupWindow){return;}if(this.map&&this._location&&!this._maximized&&this.isShowing){this._setPosition(this.map.toScreen(this._location));}},maximize:function(){var map=this.map;if(!map||this._maximized||!this.popupWindow){return;}this._maximized=true;var max=this._maxButton;_157d.remove(max,"maximize");_157d.add(max,"restore");_157c.set(max,"title",this._nls.NLS_restore);var _1598=this.marginLeft,_1599=this.marginTop,width=map.width-(2*_1598),_159a=map.height-(2*_1599),_159b=this.domNode;_1580.set(_159b,{left:this._isRTL?null:(_1598+"px"),right:this._isRTL?(_1598+"px"):null,top:_1599+"px",bottom:null});_1580.set(this._positioner,{left:null,right:null,top:null,bottom:null});this._savedWidth=_1580.get(this._sizers[0],"width");this._savedHeight=_1580.get(this._contentPane,"maxHeight");this._sizers.style({width:width+"px"});_1580.set(this._contentPane,{maxHeight:(_159a-65)+"px",height:(_159a-65)+"px"});this._showPointer("");this._unfollowMap();_157d.add(this.domNode,"esriPopupMaximized");this.onMaximize();},restore:function(){var map=this.map;if(!map||!this._maximized||!this.popupWindow){return;}this._maximized=false;var max=this._maxButton;_157d.remove(max,"restore");_157d.add(max,"maximize");_157c.set(max,"title",this._nls.NLS_maximize);_1580.set(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this._location);this._followMap();_157d.remove(this.domNode,"esriPopupMaximized");this.onRestore();},startup:function(){},destroy:function(){if(this.map){this.unsetMap();}this.cleanup();if(this.isShowing){this.hide();}this.destroyDijits(this._title);this.destroyDijits(this._content);array.forEach(this._eventConnections,_1579.disconnect);_157e.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=this._pagerScope=this._targetLocation=this._nls=this._maxButton=null;},selectNext:function(){this.select(this.selectedIndex+1);},selectPrevious:function(){this.select(this.selectedIndex-1);},setFeatures:function(){this.inherited(arguments);this._updateUI();},postscript:null,_highlightSetter:function(value){var _159c=this.highlight,map=this.map;this.highlight=value;if(map&&value!==_159c){if(value){this.enableHighlight(map);var _159d=this.features&&this.features[this.selectedIndex];if(_159d){this.updateHighlight(map,_159d);this.showHighlight();}}else{this.disableHighlight(map);}}},_pagingControlsSetter:function(value){var _159e=this.pagingControls,map=this.map;this.pagingControls=value;if(map&&value!==_159e){this._updatePagingControls();}},_pagingInfoSetter:function(value){var _159f=this.pagingInfo,map=this.map;this.pagingInfo=value;if(map&&value!==_159f&&this.features&&this.features.length){this._updatePagingInfo();}},_popupWindowSetter:function(value){var _15a0=this.popupWindow,map=this.map;this.popupWindow=value;if(map&&value!==_15a0){if(value){this._updateUI();this._updateWindow();}else{this.hide();this.showHighlight();}}},_anchorSetter:function(value){var _15a1=this.anchor;this.anchor=value;if(this.map&&value!==_15a1){this.reposition();}},_featuresCleared:function(){this.setTitle("&nbsp;");this.setContent("&nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight();},_featureSelected:function(){this._updateUI();this._updateWindow();},_updateWindow:function(){var ptr=this.selectedIndex;if(ptr>=0){var _15a2=this.features[ptr].getContent(),_15a3;if(!this.titleInBody&&_15a2&&lang.isString(_15a2.id)){_15a3=_1581.byId(_15a2.id);if(_15a3&&_15a3.set&&/_PopupRenderer/.test(_15a3.declaredClass)){_15a3.set("showTitle",false);}}this.setContent(_15a2);this.updateHighlight(this.map,this.features[ptr]);this.showHighlight();}},_toggleVisibility:function(_15a4){this._setVisibility(_15a4);this.isShowing=_15a4;},_setVisibility:function(_15a5){_1580.set(this.domNode,"visibility",_15a5?"visible":"hidden");},_followMap:function(){this._unfollowMap();var map=this.map;this._handles=[_1579.connect(map,"onPanStart",this,this._onPanStart),_1579.connect(map,"onPan",this,this._onPan),_1579.connect(map,"onZoomStart",this,this._onZoomStart),_1579.connect(map,"onExtentChange",this,this._onExtentChange)];},_unfollowMap:function(){var _15a6=this._handles;if(_15a6){array.forEach(_15a6,_1579.disconnect);this._handles=null;}},_onPanStart:function(){var style=this.domNode.style;this._panOrigin={left:style.left,top:style.top,right:style.right,bottom:style.bottom};},_onPan:function(_15a7,delta){var _15a8=this._panOrigin,dx=delta.x,dy=delta.y,left=_15a8.left,top=_15a8.top,right=_15a8.right,_15a9=_15a8.bottom;if(left){left=(parseFloat(left)+dx)+"px";}if(top){top=(parseFloat(top)+dy)+"px";}if(right){right=(parseFloat(right)-dx)+"px";}if(_15a9){_15a9=(parseFloat(_15a9)-dy)+"px";}_1580.set(this.domNode,{left:left,top:top,right:right,bottom:_15a9});},_onZoomStart:function(){this._setVisibility(false);},_onExtentChange:function(_15aa,delta,_15ab){if(_15ab){this._setVisibility(true);this.show(this._targetLocation||this._location);}this._targetLocation=null;},_toggleSize:function(){if(this._maximized){this.restore();}else{this.maximize();}},_setPosition:function(_15ac){var posX=_15ac.x,posY=_15ac.y,offX=this.offsetX||0,offY=this.offsetY||0,_15ad=0,_15ae=0,_15af=_157f.position(this.map.container,true),width=_15af.w,_15b0=_15af.h,_15b1="Left",_15b2="bottom",_15b3=_157f.getContentBox(this._positioner),_15b4=_15b3.w/2,_15b5=_15b3.h/2,maxH=_1580.get(this._sizers[0],"height")+this._maxHeight+_1580.get(this._sizers[2],"height"),_15b6=maxH/2,xmin=0,ymin=0,xmax=width,ymax=_15b0,pageX=posX,pageY=posY,_15b7=this.anchor.toLowerCase();if(_15b7==="auto"){var _15b8=win.getBox;if(_15b8){_15b8=_15b8();xmin=Math.max(_15b8.l,_15af.x);xmax=Math.min(_15b8.l+_15b8.w,_15af.x+_15af.w);ymin=Math.max(_15b8.t,_15af.y);ymax=Math.min(_15b8.t+_15b8.h,_15af.y+_15af.h);pageX+=_15af.x;pageY+=_15af.y;}var _15b9=((pageY-ymin)>_15b6),_15ba=((ymax-pageY)>=_15b6),_15bb=((xmax-pageX)>=_15b4),_15bc=((pageX-xmin)>_15b4),_15bd=((pageY-ymin)>=maxH),_15be=((ymax-pageY)>=maxH),_15bf=((xmax-pageX)>=_15b3.w),_15c0=((pageX-xmin)>=_15b3.w);if(_15b9&&_15ba){if(_15bf){_15b2="";_15b1="Left";}else{if(_15c0){_15b2="";_15b1="Right";}}}if(_15b1&&_15b2){if(_15bc&&_15bb){if(_15bd){_15b1="";_15b2="bottom";}else{if(_15be){_15b1="";_15b2="top";}}}}if(_15b1&&_15b2){if(_15bf&&_15bd){_15b1="Left";_15b2="bottom";}else{if(_15bf&&_15be){_15b1="Left";_15b2="top";}else{if(_15c0&&_15be){_15b1="Right";_15b2="top";}else{if(_15c0&&_15bd){_15b1="Right";_15b2="bottom";}}}}}}else{_15b2=_15b1="";if(_15b7.indexOf("top")!==-1){_15b2="bottom";}else{if(_15b7.indexOf("bottom")!==-1){_15b2="top";}}if(_15b7.indexOf("left")!==-1){_15b1="Right";}else{if(_15b7.indexOf("right")!==-1){_15b1="Left";}}}var _15c1=_15b2+_15b1;switch(_15c1){case "top":case "bottom":_15ae=14;break;case "Left":case "Right":_15ad=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":_15ae=45;break;}_1580.set(this.domNode,{left:posX+"px",top:posY+"px",right:null,bottom:null});var _15c2={left:null,right:null,top:null,bottom:null};if(_15b1){_15c2[_15b1.toLowerCase()]=(_15ad+offX)+"px";}else{_15c2.left=(-_15b4)+"px";}if(_15b2){_15c2[_15b2]=(_15ae+offY)+"px";}else{_15c2.top=(-_15b5)+"px";}_1580.set(this._positioner,_15c2);this._showPointer(_15c1);},_showPointer:function(_15c3){_157d.remove(this._pointer,["top","bottom","right","left","topLeft","topRight","bottomRight","bottomLeft","hidden"]);_157d.remove(this._outerPointer,["right","left","hidden"]);if(_15c3==="Right"||_15c3==="Left"){_15c3=_15c3.toLowerCase();_157d.add(this._outerPointer,_15c3);}else{_157d.add(this._pointer,_15c3);}},_setPagerCallbacks:function(scope,_15c4,_15c5){if(!this.pagingControls){return;}if(scope===this&&(!this._pagerScope||this._pagerScope===this)){return;}if(scope===this._pagerScope){return;}this._pagerScope=scope;if(scope===this){_15c4=this.selectPrevious;_15c5=this.selectNext;}var _15c6=this._eventConnections;_1579.disconnect(_15c6[1]);_1579.disconnect(_15c6[2]);if(_15c4){_15c6[1]=_1579.connect(this._prevFeatureButton,"onclick",scope,_15c4);}if(_15c5){_15c6[2]=_1579.connect(this._nextFeatureButton,"onclick",scope,_15c5);}},_getLocation:function(_15c7){var map=this.map,point,_15c8,_15c9=0,maxEx,_15ca=_15c7&&_15c7.geometry;if(_15ca){switch(_15ca.type){case "point":point=_15ca;break;case "multipoint":point=_15ca.getPoint(0);_15c8=_15ca.getExtent();break;case "polyline":point=_15ca.getPoint(0,0);_15c8=_15ca.getExtent();if(map._getFrameWidth()!==-1){array.forEach(_15ca.paths,function(path){var _15cb={"paths":[path,map.spatialReference]},_15cc=new _1586(_15cb),subEx=_15cc.getExtent(),_15cd=Math.abs(subEx.ymax-subEx.ymin),_15ce=Math.abs(subEx.xmax-subEx.xmin),delta=(_15ce>_15cd)?_15ce:_15cd;if(delta>_15c9){_15c9=delta;maxEx=subEx;}});maxEx.spatialReference=_15c8.spatialReference;_15c8=maxEx;}break;case "polygon":point=_15ca.getPoint(0,0);_15c8=_15ca.getExtent();if(map._getFrameWidth()!==-1){array.forEach(_15ca.rings,function(ring){var _15cf={"rings":[ring,map.spatialReference]},_15d0=new _1587(_15cf),subEx=_15d0.getExtent(),_15d1=Math.abs(subEx.ymax-subEx.ymin),_15d2=Math.abs(subEx.xmax-subEx.xmin),delta=(_15d2>_15d1)?_15d2:_15d1;if(delta>_15c9){_15c9=delta;maxEx=subEx;}});maxEx.spatialReference=_15c8.spatialReference;_15c8=maxEx;}break;}}return [point,_15c8];},_zoomToFeature:function(){var _15d3=this.features,ptr=this.selectedIndex,map=this.map;if(_15d3){var _15d4=this._getLocation(_15d3[ptr]),point=_15d4[0],_15d5=_15d4[1];if(!point){point=this._location;}if(!_15d5||!_15d5.intersects(this._location)){this._location=point;}if(_15d5){map.setExtent(_15d5,true);}else{var _15d6=map.getNumLevels(),_15d7=map.getLevel(),last=map.getMaxZoom(),_15d8=this.zoomFactor||1;if(_15d6>0){if(_15d7===last){return;}var _15d9=_15d7+_15d8;if(_15d9>last){_15d9=last;}map.navigationManager._wheelZoom({value:(_15d9-_15d7),mapPoint:point},true);}else{map.navigationManager._wheelZoom({value:(1/Math.pow(2,_15d8))*2,mapPoint:point},true);}}}},_updatePagingControls:function(){var prev=this._prevFeatureButton,next=this._nextFeatureButton,ptr=this.selectedIndex,count=this.features?this.features.length:0;if(this.pagingControls&&count>1){if(ptr===0){_157d.add(prev,"hidden");}else{_157d.remove(prev,"hidden");}if(ptr===(count-1)){_157d.add(next,"hidden");}else{_157d.remove(next,"hidden");}}else{_157d.add(prev,"hidden");_157d.add(next,"hidden");}},_updatePagingInfo:function(){var count=this.features?this.features.length:0,nls=this._nls,title="&nbsp;",_15da,_15db,_15dc;if(this.pagingInfo&&count>1&&nls.NLS_pagingInfo){title=_1583.substitute({index:this.selectedIndex+1,total:count},nls.NLS_pagingInfo);}if(count){_15da=this.getSelectedFeature();_15db=_15da.getInfoTemplate();_15dc=_15da.getTitle();if((!_15db||/esri\.InfoTemplate/.test(_15db.declaredClass)||!this.titleInBody)&&_15dc){title=_15dc+((title==="&nbsp;")?"":(" "+title));}}this.setTitle(title);},_updateUI:function(){if(!this.popupWindow){return;}var title="&nbsp;",ptr=this.selectedIndex,_15dd=this.features,_15de=this.deferreds,count=_15dd?_15dd.length:0,_15df=this._spinner,_15e0=this._actionList,nls=this._nls;this._updatePagingControls();this._updatePagingInfo();if(_15de&&_15de.length){if(_15dd){_157d.remove(_15df,"hidden");}else{this.setContent("<div style='text-align: center;'>"+nls.NLS_searching+"...</div>");}}else{_157d.add(_15df,"hidden");if(!count){this.setContent("<div style='text-align: center;'>"+nls.NLS_noInfo+".</div>");}}if(count){_157d.remove(_15e0,"hidden");}else{_157d.add(_15e0,"hidden");}}});if(has("extend-esri")){lang.setObject("dijit.Popup",Popup,_1582);}return Popup;});},"esri/layers/agstiled":function(){define(["esri/layers/agscommon","esri/layers/ArcGISTiledMapServiceLayer"],function(){return {};});},"dojo/fx":function(){define(["./_base/lang","./Evented","./_base/kernel","./_base/array","./_base/connect","./_base/fx","./dom","./dom-style","./dom-geometry","./ready","require"],function(lang,_15e1,dojo,_15e2,_15e3,_15e4,dom,_15e5,geom,ready,_15e6){if(!dojo.isAsync){ready(0,function(){var _15e7=["./fx/Toggler"];_15e6(_15e7);});}var _15e8=dojo.fx={};var _15e9={_fire:function(evt,args){if(this[evt]){this[evt].apply(this,args||[]);}return this;}};var _15ea=function(_15eb){this._index=-1;this._animations=_15eb||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;_15e2.forEach(this._animations,function(a){this.duration+=a.duration;if(a.delay){this.duration+=a.delay;}},this);};_15ea.prototype=new _15e1();lang.extend(_15ea,{_onAnimate:function(){this._fire("onAnimate",arguments);},_onEnd:function(){_15e3.disconnect(this._onAnimateCtx);_15e3.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length){this._fire("onEnd");}else{this._current=this._animations[++this._index];this._onAnimateCtx=_15e3.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=_15e3.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true);}},play:function(delay,_15ec){if(!this._current){this._current=this._animations[this._index=0];}if(!_15ec&&this._current.status()=="playing"){return this;}var _15ed=_15e3.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin");}),_15ee=_15e3.connect(this._current,"onBegin",this,function(arg){this._fire("onBegin",arguments);}),_15ef=_15e3.connect(this._current,"onPlay",this,function(arg){this._fire("onPlay",arguments);_15e3.disconnect(_15ed);_15e3.disconnect(_15ee);_15e3.disconnect(_15ef);});if(this._onAnimateCtx){_15e3.disconnect(this._onAnimateCtx);}this._onAnimateCtx=_15e3.connect(this._current,"onAnimate",this,"_onAnimate");if(this._onEndCtx){_15e3.disconnect(this._onEndCtx);}this._onEndCtx=_15e3.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this;},pause:function(){if(this._current){var e=_15e3.connect(this._current,"onPause",this,function(arg){this._fire("onPause",arguments);_15e3.disconnect(e);});this._current.pause();}return this;},gotoPercent:function(_15f0,_15f1){this.pause();var _15f2=this.duration*_15f0;this._current=null;_15e2.some(this._animations,function(a){if(a.duration<=_15f2){this._current=a;return true;}_15f2-=a.duration;return false;});if(this._current){this._current.gotoPercent(_15f2/this._current.duration,_15f1);}return this;},stop:function(_15f3){if(this._current){if(_15f3){for(;this._index+1<this._animations.length;++this._index){this._animations[this._index].stop(true);}this._current=this._animations[this._index];}var e=_15e3.connect(this._current,"onStop",this,function(arg){this._fire("onStop",arguments);_15e3.disconnect(e);});this._current.stop();}return this;},status:function(){return this._current?this._current.status():"stopped";},destroy:function(){if(this._onAnimateCtx){_15e3.disconnect(this._onAnimateCtx);}if(this._onEndCtx){_15e3.disconnect(this._onEndCtx);}}});lang.extend(_15ea,_15e9);_15e8.chain=function(_15f4){return new _15ea(_15f4);};var _15f5=function(_15f6){this._animations=_15f6||[];this._connects=[];this._finished=0;this.duration=0;_15e2.forEach(_15f6,function(a){var _15f7=a.duration;if(a.delay){_15f7+=a.delay;}if(this.duration<_15f7){this.duration=_15f7;}this._connects.push(_15e3.connect(a,"onEnd",this,"_onEnd"));},this);this._pseudoAnimation=new _15e4.Animation({curve:[0,1],duration:this.duration});var self=this;_15e2.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(evt){self._connects.push(_15e3.connect(self._pseudoAnimation,evt,function(){self._fire(evt,arguments);}));});};lang.extend(_15f5,{_doAction:function(_15f8,args){_15e2.forEach(this._animations,function(a){a[_15f8].apply(a,args);});return this;},_onEnd:function(){if(++this._finished>this._animations.length){this._fire("onEnd");}},_call:function(_15f9,args){var t=this._pseudoAnimation;t[_15f9].apply(t,args);},play:function(delay,_15fa){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this;},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this;},gotoPercent:function(_15fb,_15fc){var ms=this.duration*_15fb;_15e2.forEach(this._animations,function(a){a.gotoPercent(a.duration<ms?1:(ms/a.duration),_15fc);});this._call("gotoPercent",arguments);return this;},stop:function(_15fd){this._doAction("stop",arguments);this._call("stop",arguments);return this;},status:function(){return this._pseudoAnimation.status();},destroy:function(){_15e2.forEach(this._connects,_15e3.disconnect);}});lang.extend(_15f5,_15e9);_15e8.combine=function(_15fe){return new _15f5(_15fe);};_15e8.wipeIn=function(args){var node=args.node=dom.byId(args.node),s=node.style,o;var anim=_15e4.animateProperty(lang.mixin({properties:{height:{start:function(){o=s.overflow;s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s.height="1px";s.display="";s.visibility="";return 1;}else{var _15ff=_15e5.get(node,"height");return Math.max(_15ff,1);}},end:function(){return node.scrollHeight;}}}},args));var fini=function(){s.height="auto";s.overflow=o;};_15e3.connect(anim,"onStop",fini);_15e3.connect(anim,"onEnd",fini);return anim;};_15e8.wipeOut=function(args){var node=args.node=dom.byId(args.node),s=node.style,o;var anim=_15e4.animateProperty(lang.mixin({properties:{height:{end:1}}},args));_15e3.connect(anim,"beforeBegin",function(){o=s.overflow;s.overflow="hidden";s.display="";});var fini=function(){s.overflow=o;s.height="auto";s.display="none";};_15e3.connect(anim,"onStop",fini);_15e3.connect(anim,"onEnd",fini);return anim;};_15e8.slideTo=function(args){var node=args.node=dom.byId(args.node),top=null,left=null;var init=(function(n){return function(){var cs=_15e5.getComputedStyle(n);var pos=cs.position;top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);left=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);if(pos!="absolute"&&pos!="relative"){var ret=geom.position(n,true);top=ret.y;left=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=left+"px";}};})(node);init();var anim=_15e4.animateProperty(lang.mixin({properties:{top:args.top||0,left:args.left||0}},args));_15e3.connect(anim,"beforeBegin",anim,init);return anim;};return _15e8;});},"esri/InfoTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(_1600,lang,has,_1601,_1602){var _1603=_1600(null,{declaredClass:"esri.InfoTemplate",constructor:function(title,_1604){if(title&&lang.isObject(title)&&!lang.isFunction(title)){lang.mixin(this,title);}else{this.title=title||"${*}";this.content=_1604||"${*}";}},setTitle:function(title){this.title=title;return this;},setContent:function(_1605){this.content=_1605;return this;},toJson:function(){return _1602.fixJson({title:this.title,content:this.content});}});if(has("extend-esri")){_1601.InfoTemplate=_1603;}return _1603;});},"esri/tasks/JobInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/tasks/GPMessage"],function(_1606,lang,has,_1607,_1608){var _1609=_1606(null,{declaredClass:"esri.tasks.JobInfo",constructor:function(_160a){this.messages=[];lang.mixin(this,_160a);var _160b=this.messages,i,il=_160b.length;for(i=0;i<il;i++){_160b[i]=new _1608(_160b[i]);}},jobId:"",jobStatus:""});lang.mixin(_1609,{STATUS_CANCELLED:"esriJobCancelled",STATUS_CANCELLING:"esriJobCancelling",STATUS_DELETED:"esriJobDeleted",STATUS_DELETING:"esriJobDeleting",STATUS_EXECUTING:"esriJobExecuting",STATUS_FAILED:"esriJobFailed",STATUS_NEW:"esriJobNew",STATUS_SUBMITTED:"esriJobSubmitted",STATUS_SUCCEEDED:"esriJobSucceeded",STATUS_TIMED_OUT:"esriJobTimedOut",STATUS_WAITING:"esriJobWaiting"});if(has("extend-esri")){lang.setObject("tasks.JobInfo",_1609,_1607);}return _1609;});},"esri/tasks/DensifyParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/geometry/jsonUtils"],function(_160c,lang,array,_160d,has,_160e,_160f){var _1610=_160c(null,{declaredClass:"esri.tasks.DensifyParameters",geometries:null,geodesic:null,lengthUnit:null,maxSegmentLength:null,toJson:function(){var geoms=array.map(this.geometries,function(geom){return geom.toJson();});var json={};if(this.geometries&&this.geometries.length>0){json.geometries=_160d.toJson({geometryType:_160f.getJsonType(this.geometries[0]),geometries:geoms});json.sr=_160d.toJson(this.geometries[0].spatialReference.toJson());}if(this.geodesic){json.geodesic=this.geodesic;}if(this.lengthUnit){json.lengthUnit=this.lengthUnit;}if(this.maxSegmentLength){json.maxSegmentLength=this.maxSegmentLength;}return json;}});if(has("extend-esri")){lang.setObject("tasks.DensifyParameters",_1610,_160e);}return _1610;});},"dijit/_DialogMixin":function(){define("dijit/_DialogMixin",["dojo/_base/declare","./a11y"],function(_1611,a11y){return _1611("dijit._DialogMixin",null,{execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"));},_getFocusItems:function(){var elems=a11y._getTabNavigable(this.containerNode);this._firstFocusItem=elems.lowest||elems.first||this.closeButtonNode||this.domNode;this._lastFocusItem=elems.last||elems.highest||this._firstFocusItem;}});});},"esri/tasks/route":function(){define(["esri/tasks/RouteTask","esri/tasks/RouteParameters","esri/tasks/RouteResult"],function(){return {};});},"esri/layers/TiledMapServiceLayer":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/_base/url","dojo/dom-construct","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojox/collections/ArrayList","dojox/gfx/matrix","esri/kernel","esri/config","esri/sniff","esri/domUtils","esri/tileUtils","esri/geometry/Point","esri/geometry/Rect","esri/layers/layer"],function(_1612,_1613,lang,array,url,_1614,_1615,_1616,_1617,_1618,_1619,_161a,_161b,has,_161c,_161d,Point,Rect,Layer){var _161e=_161b.defaults.map.zoomDuration;var _161f=_1612(Layer,{declaredClass:"esri.layers.TiledMapServiceLayer",constructor:function(url,_1620){_1613.connect(this,"onLoad",this,"_initTiledLayer");this._displayLevels=_1620?_1620.displayLevels:null;this._lowestLevel=this._displayLevels?this._displayLevels[0]:0;this._resampling=_1620?_1620.resampling:false;this._resamplingTolerance=_1620?_1620.resamplingTolerance:null;var dh=lang.hitch;this._addImage=dh(this,this._addImage);this._tileLoadHandler=dh(this,this._tileLoadHandler);this._tileErrorHandler=dh(this,this._tileErrorHandler);this._tilePopPop=dh(this,this._tilePopPop);this._cleanUpRemovedImages=dh(this,this._cleanUpRemovedImages);this._fireOnUpdateEvent=dh(this,this._fireOnUpdateEvent);this._transitionEnd=dh(this,this._transitionEnd);},opacity:1,isPNG32:false,_multiple:1,_initTiledLayer:function(){var ti=this.tileInfo,lods=ti.lods;this._tileW=ti.width;this._tileH=ti.height;var _1621=(this.scales=[]),dl=this._displayLevels,_1622=(this.declaredClass==="esri.layers.WMTSLayer"&&ti.dpi!=96),_1623=-Infinity,_1624=Infinity,fe=this.fullExtent,ul=new Point(fe.xmin,fe.ymax),lr=new Point(fe.xmax,fe.ymin),gctc=_161d.getContainingTileCoords,_1625,lod,i,len=lods.length;for(i=0;i<len;i++){lod=lods[i];if(_1622){lod.scale=lod.scale*96/ti.dpi;}_1625=gctc(ti,ul,lod);lod.startTileRow=_1625.row<0?0:_1625.row;lod.startTileCol=_1625.col<0?0:_1625.col;_1625=gctc(ti,lr,lod);lod.endTileRow=_1625.row;lod.endTileCol=_1625.col;if(!dl||array.indexOf(dl,lod.level)!==-1){_1621[i]=lod.scale;_1623=(lod.scale>_1623)?lod.scale:_1623;_1624=(lod.scale<_1624)?lod.scale:_1624;}}if(_1622){ti.dpi=96;}if(_1623!==-Infinity&&!this._hasMin){this.setMinScale(_1623);}if(_1624!==Infinity&&!this._hasMax){this.setMaxScale(_1624);}this._patchIE=has("ie")>=6&&has("ie")<7&&(this.isPNG32||ti.format==="Mixed");},_isMapAtVisibleScale:function(){var _1626=this.inherited(arguments);if(_1626){var i,map=this._map,_1627=this.scales,_1628=map.getScale(),_1629=false,wider=(map.width>map.height)?map.width:map.height;for(i=0;i<_1627.length;i++){if((Math.abs(_1627[i]-_1628)/_1627[i])<(1/wider)){_1629=true;break;}}_1626=_1629;}return _1626;},_setMap:function(map,_162a,index,lod){this.inherited(arguments);this._map=map;var d=(this._div=_1614.create("div",null,_162a)),_162b=map.__visibleDelta,dc=_1613.connect,names=_161a._css.names,css={position:"absolute",width:map.width+"px",height:map.height+"px",overflow:"visible"};if(map.navigationMode==="css-transforms"){css[names.transform]=_161a._css.translate(-_162b.x,-_162b.y);_1617.set(d,css);delete css[names.transform];css[names.transition]=names.transformName+" "+_161e+"ms ease";_1617.set((this._active=_1614.create("div",null,d)),css);this._active._remove=0;this._passives=[];}else{css.left=-_162b.x+"px";css.top=-_162b.y+"px";_1617.set(d,css);}this._onResizeHandler_connect=dc(map,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=dc(this,"onOpacityChange",this,"_opacityChangeHandler");var _162c=this.tileInfo,sr=_162c.spatialReference,info=sr._getInfo();this._wrap=map.wrapAround180&&sr._isWrappable()&&Math.abs(info.origin[0]-_162c.origin.x)<=info.dx;if(this._wrap){_161d._addFrameInfo(_162c,info);}this.evaluateSuspension();if(this.suspended&&!map.loaded){var _162d=_1613.connect(map,"onLoad",this,function(){_1613.disconnect(_162d);_162d=null;this.evaluateSuspension();});}return d;},_unsetMap:function(map,_162e){if(!this.suspended){this._suspendImpl();}_1614.destroy(this._div);this._map=this._div=null;var dd=_1613.disconnect;dd(this._onResizeHandler_connect);dd(this._opacityChangeHandler_connect);this.inherited(arguments);},onSuspend:function(){this.inherited(arguments);this._suspendImpl();},_suspendImpl:function(){_161c.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();var tiles=this._tiles,_162f=this._tileIds,_1630=this._loadingList,img,i,id,_1631=_1613.disconnect,_1632=_1614.destroy;if(_1630&&_1630.count>0){_1630.forEach(function(imgId){img=tiles[imgId];if(img){_1631(img._onload_connect);_1631(img._onerror_connect);_1631(img._onabort_connect);img._onload_connect=img._onerror_connect=img._onabort_connect=null;}});_1630.clear();this._fireUpdateEnd();}this._removeList.clear();for(i=_162f.length-1;i>=0;i--){id=_162f[i];img=id&&tiles[id];if(img){_1632(img);}}if(this._map.navigationMode==="css-transforms"){var _1633=this._active,_1634=this._passives,_1635;this._noDom=0;for(i=_1634.length-1;i>=0;i--){_1635=_1634[i];if(_1635._endHandle){_1631(_1635._endHandle);}_1635._matrix=_1635._multiply=_1635._endHandle=null;_1635._marked=_1635._remove=0;_1634.splice(i,1);_1632(_1635);}_1633._matrix=_1633._multiply=null;_1633._marked=_1633._remove=0;}this._tileIds=this._tiles=this._tileBounds=this._ct=this._loadingList=this._removeList=this._standby=null;},onResume:function(){this.inherited(arguments);this._tileIds=[];this._tiles=[];this._tileBounds=[];this._ct=null;this._removeList=new _1618();this._loadingList=new _1618();_161c.show(this._div);this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(lang.hitch(this,function(){if(!this.suspended){this._onExtentChangeHandler(this._map.extent,null,true,this._map.__LOD);}}),0);},_enableDrawConnectors:function(){var map=this._map,_1636=_1613.connect;if(map.navigationMode==="css-transforms"){this._onScaleHandler_connect=_1636(map,"onScale",this,this._onScaleHandler);if(has("esri-touch")||has("esri-pointer")){this._standby=[];var self=this,_1637=function(){self._noDom=1;};this._onPanStartHandler_connect=_1636(map,"onPanStart",_1637);this._onZoomStartHandler_connect=_1636(map,"onZoomStart",_1637);}}else{this._onZoomHandler_connect=_1636(map,"onZoom",this,"_onZoomHandler");}this._onPanHandler_connect=_1636(map,"onPan",this,"_onPanHandler");this._onExtentChangeHandler_connect=_1636(map,"onExtentChange",this,"_onExtentChangeHandler");},_disableDrawConnectors:function(){var _1638=_1613.disconnect;_1638(this._onPanHandler_connect);_1638(this._onZoomHandler_connect);_1638(this._onScaleHandler_connect);_1638(this._onExtentChangeHandler_connect);_1638(this._onPanStartHandler_connect);_1638(this._onZoomStartHandler_connect);this._onPanHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=this._onExtentChangeHandler_connect=this._onPanStartHandler_connect=this._onZoomStartHandler_connect=null;},_onResizeHandler:function(_1639,width,_163a){var css={width:width+"px",height:_163a+"px"},ds=_1617.set,i;ds(this._div,css);if(this._map.navigationMode==="css-transforms"){if(this._active){ds(this._active,css);}for(i=this._passives.length-1;i>=0;i--){ds(this._passives[i],css);}}},_onExtentChangeHandler:function(_163b,delta,_163c,lod){var map=this._map,i,_163d=this._standby,img,_163e;clearTimeout(this._wakeTimer);this._wakeTimer=null;if(map._isPanningOrZooming()){return;}if(map.navigationMode==="css-transforms"){if(_163c){for(i=this._passives.length-1;i>=0;i--){_163e=this._passives[i];_1617.set(_163e,_161a._css.names.transition,"none");if(_163e._marked){this._passives.splice(i,1);if(_163e.parentNode){_163e.parentNode.removeChild(_163e);}_1614.destroy(_163e);}else{if(_163e.childNodes.length>0){_163e._multiply=_163e._multiply?_1619.multiply(_163e._matrix,_163e._multiply):_163e._matrix;}}}}this._noDom=0;if(_163d&&_163d.length){for(i=_163d.length-1;i>=0;i--){img=_163d[i];_1617.set(img,"visibility","visible");this._tilePopPop(img);_163d.splice(i,1);}}}this._fireUpdateStart();this._rrIndex=0;var ct=_161d.getCandidateTileInfo(map,this.tileInfo,_163b),mv=map.__visibleDelta,id;if(!this._ct||ct.lod.level!==this._ct.lod.level||_163c){var _163f=(ct&&this._ct&&ct.lod.level!==this._ct.lod.level);this._ct=ct;var _1640=this._tiles,_1641=this._tileIds,_1642=this._tileBounds,_1643=this._removeList,tile,il=_1641.length;this._cleanUpRemovedImages();for(i=0;i<il;i++){id=_1641[i];tile=_1640[id];_1642[id]=_1641[i]=null;if((map.navigationMode==="css-transforms")&&_163f&&tile.parentNode&&map.fadeOnZoom){tile._fadeOut=_163f;tile.parentNode._remove++;}_1643.add(tile);}if(_163c){this._tileIds=[];this._tiles=[];this._tileBounds=[];}}var mx=mv.x,my=mv.y;if(map.navigationMode==="css-transforms"){var css={};css[_161a._css.names.transform]=_161a._css.translate(mx,my);_1617.set(this._div,css);}else{_1617.set(this._div,{left:mx+"px",top:my+"px"});}this.__coords_dx=mx;this.__coords_dy=my;this._updateImages(new Rect(0,0,mv.width,mv.height));if(this._loadingList.count===0){this.onUpdate();this._fireUpdateEnd();}else{this._fireOnUpdate=true;}var _1644,rect,tileW=this._tileW,tileH=this._tileH;mv=new Rect(-mv.x,-mv.y,mv.width,mv.height);for(i=this._tileIds.length-1;i>=0;i--){id=this._tileIds[i];if(id){img=this._tiles[id];_1644=_1616.getMarginBox(img);rect=new Rect(_1644.l,_1644.t,tileW,tileH);if(map.navigationMode==="css-transforms"){rect.x=img._left;rect.y=img._top;}if(mv.intersects(rect)){this._tileBounds[id]=rect;}else{if(this._loadingList.contains(id)){this._tilePopPop(img);}_1614.destroy(img);this._tileIds.splice(i,1);delete this._tileBounds[id];delete this._tiles[id];}}else{this._tileIds.splice(i,1);delete this._tileBounds[id];delete this._tiles[id];}}},_onPanHandler:function(_1645,delta){var map=this._map,mv=map.__visibleDelta.offset(delta.x,delta.y);this.__coords_dx=this.__coords_dy=0;if(map.navigationMode==="css-transforms"){var css={};css[_161a._css.names.transform]=_161a._css.translate(mv.x,mv.y);_1617.set(this._div,css);if(!has("esri-touch")&&!has("esri-pointer")){this._updateImages({x:-mv.x,y:-mv.y,width:mv.width,height:mv.height});}}else{_1617.set(this._div,{left:mv.x+"px",top:mv.y+"px"});this._updateImages({x:-mv.x,y:-mv.y,width:mv.width,height:mv.height});}if(this._loadingList.count>0){this._fireUpdateStart();this._fireOnUpdate=true;}},_onScaleHandler:function(mtx,_1646){var i,css={},names=_161a._css.names,map=this._map;for(i=this._passives.length-1;i>=0;i--){var _1647=this._passives[i];if(_1647.childNodes.length===0){this._passives.splice(i,1);_1614.destroy(_1647);}else{if(_1647.style[names.transition]==="none"){_1617.set(_1647,names.transition,names.transformName+" "+_161e+"ms ease");}_1617.set(_1647,names.transition,_1646?"none":(names.transformName+" "+_161e+"ms ease"));_1647._matrix=mtx;css[names.transform]=_161a._css.matrix(_1647._multiply?_1619.multiply(mtx,_1647._multiply):mtx);_1617.set(_1647,css);}}if(this._active&&this._active.childNodes.length===0){return;}_1617.set(this._active,names.transition,_1646?"none":(names.transformName+" "+_161e+"ms ease"));this._active._matrix=mtx;css[names.transform]=_161a._css.matrix(this._active._matrix);_1617.set(this._active,css);this._passives.push(this._active);css={position:"absolute",width:map.width+"px",height:map.height+"px",overflow:"visible"};css[names.transition]=names.transformName+" "+_161e+"ms ease";_1617.set((this._active=_1614.create("div",null,this._div)),css);this._active._remove=0;if(map.fadeOnZoom){_1614.place(this._active,this._div,"first");}},_onZoomHandler:function(_1648,scale,_1649){var _164a=_1616.getMarginBox(this._div);_1649=_1649.offset(-_164a.l,-_164a.t);if(!this._previousScale||scale===1){this._previousScale=1;}var _164b,sizeW=this._tileW*scale,sizeH=this._tileH*scale,_164c=this._tileBounds,_164d=this._tiles,_164e=this._previousScale,_164f=this._multiple,es=_1617.set,_1650,_1651;var isIE=has("ie");if(isIE&&isIE<8){array.forEach(this._tileIds,function(id){_1651="";_164b=_164c[id];_1650=_164d[id].style.margin.split(" ");array.forEach(_1650,function(_1652){if(_1651!==""){_1651+=" ";}_1652=parseFloat(_1652);_1651+=(_1652/_164e*scale+"px");});es(_164d[id],{left:(_164b.x-((sizeW-_164b.width)*(_1649.x-_164b.x)/_164b.width))+"px",top:(_164b.y-((sizeH-_164b.height)*(_1649.y-_164b.y)/_164b.height))+"px",margin:_164f!==1?_1651:"",zoom:scale});});}else{var _1653=sizeW*_164f,_1654=sizeH*_164f,_1655,_1656;array.forEach(this._tileIds,function(id){_1651="";_164b=_164c[id];_1655=(_164b.x-((sizeW-_164b.width)*(_1649.x-_164b.x)/_164b.width));_1656=(_164b.y-((sizeH-_164b.height)*(_1649.y-_164b.y)/_164b.height));_1650=_164d[id].style.margin.split(" ");array.forEach(_1650,function(_1657){if(_1651!==""){_1651+=" ";}_1657=parseFloat(_1657);_1651+=(_1657/_164e*scale+"px");});es(_164d[id],{left:_1655+"px",top:_1656+"px",margin:_164f!==1?_1651:"",width:_1653+"px",height:_1654+"px"});});}this._previousScale=scale;},_updateImages:function(rect){if(!this._ct){return;}var id,_1658=this._tileW,_1659=this._tileH,_165a=this._ct,lod=_165a.lod,tile=_165a.tile,off=tile.offsets,_165b=tile.coords,cr=_165b.row,cc=_165b.col,level=lod.level,_165c=this.opacity,_165d=this._tileIds,_165e=this._loadingList,_165f=this._addImage,mId=this._map.id,tId=this.id,rx=rect.x,ry=rect.y,str=lod.startTileRow,etr=lod.endTileRow,stc=lod.startTileCol,etc=lod.endTileCol,_1660=array.indexOf,r,c,mvx=-rect.x,mvy=-rect.y,_1661=off.x-this.__coords_dx,_1662=off.y-this.__coords_dy,vx=((_1658-_1661)+mvx),vy=((_1659-_1662)+mvy),ceil=Math.ceil,_1663=(vx>0)?(vx%_1658):((_1658-(Math.abs(vx)%_1658))),_1664=(vy>0)?(vy%_1659):((_1659-(Math.abs(vy)%_1659))),_1665=(rx>0)?Math.floor((rx+_1661)/_1658):ceil((rx-(_1658-_1661))/_1658),_1666=(ry>0)?Math.floor((ry+_1662)/_1659):ceil((ry-(_1659-_1662))/_1659),_1667=_1665+ceil((rect.width-_1663)/_1658),_1668=_1666+ceil((rect.height-_1664)/_1659),_1669,_166a,m180,p180,col,row;if(this._wrap){_1669=lod._frameInfo;_166a=_1669[0];m180=_1669[1];p180=_1669[2];}for(col=_1665;col<=_1667;col++){for(row=_1666;row<=_1668;row++){r=cr+row;c=cc+col;if(this._wrap){if(c<m180){c=c%_166a;c=c<m180?c+_166a:c;}else{if(c>p180){c=c%_166a;}}}if(r>=str&&r<=etr&&c>=stc&&c<=etc){id=mId+"_"+tId+"_tile_"+level+"_"+row+"_"+col;if(_1660(_165d,id)===-1){_165e.add(id);_165d.push(id);_165f(level,row,r,col,c,id,_1658,_1659,_165c,tile,off);}}}}},_cleanUpRemovedImages:function(){var list=this._removeList,dd=_1614.destroy,i,names=_161a._css.names;list.forEach(function(img){if(!img._fadeOut){img.style.filter="";img.style.zoom=1;dd(img);}});if(this._map.navigationMode==="css-transforms"){for(i=this._passives.length-1;i>=0;i--){var _166b=this._passives[i];if(_166b.childNodes.length===0){this._passives.splice(i,1);dd(_166b);}else{if(this._map.fadeOnZoom&&!_166b._marked&&(_166b._remove===_166b.childNodes.length)){_1617.set(_166b,names.transition,"opacity 0.65s");_1617.set(_166b,"opacity",0);_166b._marked=1;if(has("ie")>=10){_166b.addEventListener(names.endEvent,this._transitionEnd,false);}else{_166b._endHandle=_1613.connect(_166b,names.endEvent,this._transitionEnd);}}}}}list.clear();},_transitionEnd:function(evt){var _166c=evt.target,idx;if(evt.propertyName!=="opacity"){return;}if(has("ie")>=10){_166c.removeEventListener(_161a._css.names.endEvent,this._transitionEnd,false);}else{_1613.disconnect(_166c._endHandle);_166c._endHandle=null;}idx=array.indexOf(this._passives,_166c);if(idx>-1){this._passives.splice(idx,1);}if(_166c.parentNode){_166c.parentNode.removeChild(_166c);}_1614.destroy(_166c);},_addImage:function(level,row,r,col,c,id,tileW,tileH,_166d,tile,_166e){if(this._patchIE){var div=(this._tiles[id]=_1614.create("div"));div.id=id;_1615.add(div,"layerTile");_1617.set(div,{left:((tileW*col)-_166e.x)+"px",top:((tileH*row)-_166e.y)+"px",width:tileW+"px",height:tileH+"px",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+this.getTileUrl(level,r,c)+"', sizingMethod='scale')"});if(_166d<1){_1617.set(div,"opacity",_166d);}var _166f=div.appendChild(_1614.create("div"));_1617.set(_166f,{opacity:0,width:tileW+"px",height:tileH+"px"});this._div.appendChild(div);div=null;this._loadingList.remove(id);this._fireOnUpdateEvent();}else{var img=(this._tiles[id]=_1614.create("img")),dc=_1613.connect;img.id=id;_1615.add(img,"layerTile");var left=(tileW*col)-_166e.x,top=(tileH*row)-_166e.y,map=this._map,names=_161a._css.names,css={width:tileW+"px",height:tileH+"px",visibility:"hidden"};if(map.navigationMode==="css-transforms"){css[names.transform]=_161a._css.translate(left,top);_1617.set(img,css);img._left=left;img._top=top;}else{css.left=left+"px";css.top=top+"px";_1617.set(img,css);}if(_166d<1){_1617.set(img,"opacity",_166d);}img._onload_connect=dc(img,"onload",this,"_tileLoadHandler");img._onerror_connect=dc(img,"onerror",lang.hitch(this,"_tileErrorHandler",r,c));img._onabort_connect=dc(img,"onabort",this,"_tileAbortHandler");var url=this.getTileUrl(level,r,c,img);if(url){if(this._failedRequests&&this._failedRequests[url]){_1617.set(img,this._failedRequests[url].css);img.src=this._failedRequests[url].src;this._multiple=parseInt(this._failedRequests[url].css.width)/this._tileW;}else{this._multiple=1;img.src=url;}}if(map.navigationMode==="css-transforms"){this._active.appendChild(img);}else{this._div.appendChild(img);}img=null;}},getTileUrl:function(level,row,col){},refresh:function(){if(!this.suspended){this._onExtentChangeHandler(this._map.extent,null,true,this._map.__LOD);}},_tilePopPop:function(img){var dd=_1613.disconnect;dd(img._onload_connect);dd(img._onerror_connect);dd(img._onabort_connect);img._onload_connect=img._onerror_connect=img._onabort_connect=null;this._loadingList.remove(img.id);this._fireOnUpdateEvent();},_tileLoadHandler:function(evt){var img=evt.currentTarget;if(this._noDom){this._standby.push(img);return;}_1617.set(img,"visibility","visible");this._tilePopPop(img);},_tileAbortHandler:function(evt){var img=evt.currentTarget;this.onError(new Error("Unable to load tile: "+img.src));_1617.set(img,"visibility","hidden");this._tilePopPop(img);},_tileErrorHandler:function(r,c,evt){var img=evt.currentTarget,_1670=new url(img.src),_1671=_1670.path.split("/"),level=parseInt(_1671[_1671.length-3]),_1672=this._ct.lod.level-level+1;this._multiple=Math.pow(2,_1672);if(!this._resampling||level===this._lowestLevel||this._resamplingTolerance===0||(this._resamplingTolerance&&Math.log(this._multiple)/Math.LN2>this._resamplingTolerance)){this.onError(new Error("Unable to load tile: "+img.src));_1617.set(img,"visibility","hidden");this._tilePopPop(img);return;}this._resample(img,r,c);},_resample:function(img,r,c){var _1673=new url(img.src),_1674=_1673.path.split("/"),_1675=this._multiple,_1676=parseInt(_1674[_1674.length-3])-1,_1677=parseInt(r/_1675),_1678=parseInt(c/_1675),_1679=c%_1675,_167a=r%_1675;var _167b=this.getTileUrl(_1676,_1677,_1678);var _167c=this.getTileUrl(_1676+Math.log(_1675)/Math.LN2,r,c);var _167d="-"+this._tileW*_167a+"px",_167e="-"+this._tileH*_1679+"px",_167f=_167d+" 0 0 "+_167e,css={width:this._tileW*_1675+"px",height:this._tileH*_1675+"px",border:"4px",margin:_167f};if(!this._failedRequests){this._failedRequests={};}this._failedRequests[_167c]={"src":_167b,"css":css};_1617.set(img,css);img.src=_167b;},_fireOnUpdateEvent:function(){if(this._loadingList.count===0){this._cleanUpRemovedImages();if(this._fireOnUpdate){this._fireOnUpdate=false;this.onUpdate();this._fireUpdateEnd();}}},setOpacity:function(o){if(this.opacity!=o){this.onOpacityChange(this.opacity=o);}},onOpacityChange:function(){},_opacityChangeHandler:function(value){var djs=_1617.set,i,j,nodes;if(this._map.navigationMode==="css-transforms"){if(this._active){nodes=this._active.childNodes;for(i=nodes.length-1;i>=0;i--){djs(nodes[i],"opacity",value);}}for(i=this._passives.length-1;i>=0;i--){nodes=this._passives[i].childNodes;for(j=nodes.length-1;j>=0;j--){djs(nodes[j],"opacity",value);}}return;}nodes=this._div.childNodes;for(i=nodes.length-1;i>=0;i--){djs(nodes[i],"opacity",value);}}});if(has("extend-esri")){lang.setObject("layers.TiledMapServiceLayer",_161f,_161a);}return _161f;});},"esri/virtualearth/VETiledLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/_base/array","dojo/_base/config","dojo/has","dojo/string","dojo/_base/Deferred","esri/kernel","esri/urlUtils","esri/SpatialReference","esri/layers/TileInfo","esri/layers/TiledMapServiceLayer","esri/geometry/Extent","esri/request"],function(_1680,lang,_1681,array,_1682,has,_1683,_1684,_1685,_1686,_1687,_1688,_1689,_168a,_168b){var VET=_1680(_1689,{declaredClass:"esri.virtualearth.VETiledLayer",constructor:function(_168c){try{_168c=lang.mixin({bingMapsKey:null,culture:"en-US"},_168c||{});var _168d=window.location.protocol;if(_168d==="file:"){_168d="http:";}this.url=_168d+"//dev.virtualearth.net/REST/v1";this._url=_1686.urlToObject(this.url);this.spatialReference=new _1687({wkid:102100});this.tileInfo=new _1688({rows:256,cols:256,dpi:96,origin:{x:-20037508.342787,y:20037508.342787},spatialReference:{wkid:102100},lods:[{level:1,resolution:78271.5169639999,scale:295828763.795777},{level:2,resolution:39135.7584820001,scale:147914381.897889},{level:3,resolution:19567.8792409999,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:0.597164283559817,scale:2256.994353},{level:19,resolution:0.298582141647617,scale:1128.497176}]});this.initialExtent=(this.fullExtent=new _168a(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,new _1687({wkid:102100})));lang.mixin(this,_168c);this.hasAttributionData=this.showAttribution;this._initLayer=lang.hitch(this,this._initLayer);this._errorHandler=lang.hitch(this,this._errorHandler);this._getTileInfo=lang.hitch(this,this._getTileInfo);if(this.bingMapsKey){this._getTileInfo();}else{throw new Error("BingMapsKey must be provided.");}}catch(e){this.onError(e);throw e;}},_unsetMap:function(map,_168e){this.inherited("_unsetMap",arguments);},_getTileInfo:function(){if(!this.mapStyle){return;}var url=this._url.path+"/Imagery/Metadata/"+this.mapStyle;if(this.bingMapsKey){var info=this.resourceInfo;if(!this.loaded&&info){this._initLayer(info);}else{_168b({url:url,content:lang.mixin({},{key:this.bingMapsKey,ss:true,c:this.culture,include:this.hasAttributionData?"imageryProviders":null}),callbackParamName:"jsonp",load:this._initLayer,error:this._errorHandler});}}},_initLayer:function(_168f,io){try{this.resourceInfo=_1681.toJson(_168f);var _1690=_168f.resourceSets[0].resources[0];var _1691=_1690.imageUrl.replace("{","${");this.tileServers=array.map(_1690.imageUrlSubdomains,function(_1692){var _1693=window.location.protocol;if(_1693==="file:"){_1693="http:";}return _1683.substitute(_1691,{subdomain:_1692}).replace("http:",_1693);});this._tsLength=this.tileServers.length;if(!this.loaded){this.copyright=this.copyright||"&copy; 2012 Microsoft Corporation and its data suppliers";this.loaded=true;this.onLoad(this);var _1694=this.loadCallback;if(_1694){delete this.loadCallback;_1694(this);}}else{this.refresh();this.onMapStyleChange();}}catch(e){this.onError(e);}},getAttributionData:function(){var dfd=new _1684(),_1695=_1681.fromJson(this.resourceInfo),_1696;if(this.hasAttributionData&&_1695){_1696=lang.getObject("resourceSets.0.resources.0.imageryProviders",false,_1695);}if(_1696){dfd.callback({contributors:_1696});}else{var err=new Error("Layer does not have attribution data");err.log=_1682.isDebug;dfd.errback(err);}return dfd;},getTileUrl:function(level,row,col){var _1697=this.tileServers[row%this._tsLength],_1698=_1697.replace(/\{/g,"${");return _1683.substitute(_1698,{quadkey:this._getQuadKey(level,row,col),culture:this.culture,token:this.bingMapsKey});},_getQuadKey:function(level,row,col){var _1699="",digit,mask,i;for(i=level;i>0;i--){digit="0";mask=1<<(i-1);if((col&mask)!=0){digit++;}if((row&mask)!=0){digit++;digit++;}_1699=_1699+digit;}return _1699;},setMapStyle:function(style){this.mapStyle=style;this._getTileInfo();},setCulture:function(_169a){this.culture=_169a;this._getTileInfo();},setBingMapsKey:function(_169b){this.bingMapsKey=_169b;},onMapStyleChange:function(){}});lang.mixin(VET,{MAP_STYLE_AERIAL:"aerial",MAP_STYLE_AERIAL_WITH_LABELS:"aerialWithLabels",MAP_STYLE_ROAD:"road"});if(has("extend-esri")){lang.setObject("virtualearth.VETiledLayer",VET,_1685);}return VET;});},"esri/layers/layer":function(){define(["dojo/_base/declare","dojo/_base/config","dojo/_base/connect","dojo/_base/lang","dojo/_base/Deferred","dojo/_base/json","dojo/has","esri/Evented","esri/kernel","esri/lang","esri/request","esri/deferredUtils","esri/urlUtils","esri/SpatialReference","esri/geometry/Extent"],function(_169c,_169d,_169e,lang,_169f,_16a0,has,_16a1,_16a2,_16a3,_16a4,_16a5,_16a6,_16a7,_16a8){var Layer=_169c([_16a1],{declaredClass:"esri.layers.Layer",_eventMap:{"error":["error"],"load":["layer"],"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},constructor:function(url,_16a9){if(url&&lang.isString(url)){this._url=_16a6.urlToObject(this.url=url);}else{this.url=(this._url=null);_16a9=_16a9||url;if(_16a9&&_16a9.layerDefinition){_16a9=null;}}this.spatialReference=new _16a7(4326);this.initialExtent=new _16a8(-180,-90,180,90,new _16a7(4326));this._map=this._div=null;this.normalization=true;if(_16a9){if(_16a9.id){this.id=_16a9.id;}if(_16a9.visible===false){this.visible=false;}if(_16a3.isDefined(_16a9.opacity)){this.opacity=_16a9.opacity;}if(_16a3.isDefined(_16a9.minScale)){this.setMinScale(_16a9.minScale);}if(_16a3.isDefined(_16a9.maxScale)){this.setMaxScale(_16a9.maxScale);}this.attributionDataUrl=_16a9.attributionDataUrl||"";this.hasAttributionData=!!this.attributionDataUrl;if(_16a3.isDefined(_16a9.showAttribution)){this.showAttribution=_16a9.showAttribution;}}this._errorHandler=lang.hitch(this,this._errorHandler);if(this.managedSuspension){var saved=this._setMap;this._setMap=function(map){var _16aa=saved.apply(this,arguments);this.evaluateSuspension();if(this.suspended&&!map.loaded){var _16ab=_169e.connect(map,"onLoad",this,function(){_169e.disconnect(_16ab);_16ab=null;this.evaluateSuspension();});}return _16aa;};}this.registerConnectEvents();},id:null,visible:true,loaded:false,minScale:0,maxScale:0,visibleAtMapScale:false,suspended:true,attributionDataUrl:"",hasAttributionData:false,showAttribution:true,_errorHandler:function(err){this.onError(err);},_setMap:function(map,_16ac,index,lod){this._map=map;this._lyrZEHandle=_169e.connect(map,"onZoomEnd",this,this._processMapScale);if(map.loaded){this.visibleAtMapScale=this._isMapAtVisibleScale();}else{var _16ad=_169e.connect(map,"onLoad",this,function(){_169e.disconnect(_16ad);_16ad=null;this._processMapScale();});}},_unsetMap:function(map,_16ae){_169e.disconnect(this._lyrZEHandle);this._lyrZEHandle=null;this._map=null;this.suspended=true;},_cleanUp:function(){this._map=this._div=null;},_fireUpdateStart:function(){if(this.updating){return;}this.updating=true;this.onUpdateStart();if(this._map){this._map._incr();}},_fireUpdateEnd:function(error,info){this.updating=false;this.onUpdateEnd(error,info);if(this._map){this._map._decr();}},_getToken:function(){var url=this._url,crd=this.credential;return (url&&url.query&&url.query.token)||(crd&&crd.token)||undefined;},_findCredential:function(){this.credential=_16a2.id&&this._url&&_16a2.id.findCredential(this._url.path);},_useSSL:function(){var _16af=this._url,re=/^http:/i,rep="https:";if(this.url){this.url=this.url.replace(re,rep);}if(_16af&&_16af.path){_16af.path=_16af.path.replace(re,rep);}},refresh:function(){},show:function(){this.setVisibility(true);},hide:function(){this.setVisibility(false);},setMinScale:function(_16b0){this.setScaleRange(_16b0);},setMaxScale:function(_16b1){this.setScaleRange(null,_16b1);},setScaleRange:function(_16b2,_16b3){var _16b4=_16a3.isDefined(_16b2),_16b5=_16a3.isDefined(_16b3);if(!this.loaded){this._hasMin=this._hasMin||_16b4;this._hasMax=this._hasMax||_16b5;}var _16b6=this.minScale,_16b7=this.maxScale;this.minScale=(_16b4?_16b2:this.minScale)||0;this.maxScale=(_16b5?_16b3:this.maxScale)||0;if((_16b6!==this.minScale)||(_16b7!==this.maxScale)){this.onScaleRangeChange();this._processMapScale();}},suspend:function(){this._suspended=true;this.evaluateSuspension();},resume:function(){this._suspended=false;this.evaluateSuspension();},canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended;},evaluateSuspension:function(){if(this.canResume()){if(this.suspended){this._resume();}}else{if(!this.suspended){this._suspend();}}},_suspend:function(){this.suspended=true;this.onSuspend();if(this._map){this._map.onLayerSuspend(this);}},_resume:function(){this.suspended=false;var first=(this._resumedOnce===undefined);if(first){this._resumedOnce=true;}this.onResume({firstOccurrence:first});if(this._map){this._map.onLayerResume(this);}},_processMapScale:function(){var _16b8=this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();if(_16b8!==this.visibleAtMapScale){this.onScaleVisibilityChange();this.evaluateSuspension();}},isVisibleAtScale:function(scale){return (scale?Layer.prototype._isMapAtVisibleScale.apply(this,arguments):false);},_isMapAtVisibleScale:function(scale){if(!scale&&(!this._map||!this._map.loaded)){return false;}scale=scale||this._map.getScale();var _16b9=this.minScale,_16ba=this.maxScale,_16bb=!_16b9,_16bc=!_16ba;if(!_16bb&&scale<=_16b9){_16bb=true;}if(!_16bc&&scale>=_16ba){_16bc=true;}return (_16bb&&_16bc)?true:false;},getAttributionData:function(){var url=this.attributionDataUrl,dfd=new _169f(_16a5._dfdCanceller);if(this.hasAttributionData&&url){dfd._pendingDfd=_16a4({url:url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});dfd._pendingDfd.then(function(_16bd){dfd.callback(_16bd);},function(error){dfd.errback(error);});}else{var err=new Error("Layer does not have attribution data");err.log=_169d.isDebug;dfd.errback(err);}return dfd;},getResourceInfo:function(){var info=this.resourceInfo;return lang.isString(info)?_16a0.fromJson(info):lang.clone(info);},setNormalization:function(_16be){this.normalization=_16be;},setVisibility:function(v){if(this.visible!==v){this.visible=v;this.onVisibilityChange(this.visible);this.evaluateSuspension();}},onLoad:function(){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onError:function(){}});if(has("extend-esri")){lang.setObject("layers.Layer",Layer,_16a2);}return Layer;});},"dijit/form/_FormValueWidget":function(){define("dijit/form/_FormValueWidget",["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(_16bf,has,_16c0,_16c1){return _16bf("dijit.form._FormValueWidget",[_16c0,_16c1],{_layoutHackIE7:function(){if(has("ie")==7){var _16c2=this.domNode;var _16c3=_16c2.parentNode;var _16c4=_16c2.firstChild||_16c2;var _16c5=_16c4.style.filter;var _16c6=this;while(_16c3&&_16c3.clientHeight==0){(function ping(){var _16c7=_16c6.connect(_16c3,"onscroll",function(){_16c6.disconnect(_16c7);_16c4.style.filter=(new Date()).getMilliseconds();_16c6.defer(function(){_16c4.style.filter=_16c5;});});})();_16c3=_16c3.parentNode;}}}});});},"esri/urlUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/url","dojo/io-query","esri/kernel","esri/config","esri/sniff"],function(lang,array,Url,ioq,_16c8,_16c9,has){var _16ca={},_16cb=_16c9.defaults.io;_16ca.urlToObject=function(url){var iq=url.indexOf("?");if(iq===-1){return {path:url,query:null};}else{return {path:url.substring(0,iq),query:ioq.queryToObject(url.substring(iq+1))};}};_16ca.getProxyUrl=function(_16cc,_16cd){var _16ce=lang.isString(_16cc)?(lang.trim(_16cc).toLowerCase().indexOf("https:")===0):_16cc,_16cf=_16cb.proxyUrl,_16d0,fixed,_16d1,_16d2,_16d3="esri.config.defaults.io.proxyUrl is not set.";if(lang.isString(_16cc)){_16d2=_16ca.getProxyRule(_16cc);if(_16d2){_16cf=_16d2.proxyUrl;}}if(!_16cf){console.log(_16d3);throw new Error(_16d3);}if(_16ce&&_16cd!==false&&window.location.href.toLowerCase().indexOf("https:")!==0){fixed=_16cf;if(fixed.toLowerCase().indexOf("http")!==0){fixed=_16ca.getAbsoluteUrl(fixed);}fixed=fixed.replace(/^http:/i,"https:");if(_16ca.canUseXhr(fixed)){_16cf=fixed;_16d1=1;}}_16d0=_16ca.urlToObject(_16cf);_16d0._xo=_16d1;return _16d0;};_16ca.addProxy=function(url){var _16d4=_16ca.getProxyRule(url),_16d5,_16d6,_16d7;if(_16d4){_16d5=_16ca.urlToObject(_16d4.proxyUrl);}else{if(_16cb.alwaysUseProxy){_16d5=_16ca.getProxyUrl();}}if(_16d5){_16d6=_16ca.urlToObject(url);url=_16d5.path+"?"+_16d6.path;_16d7=ioq.objectToQuery(lang.mixin(_16d5.query||{},_16d6.query));if(_16d7){url+=("?"+_16d7);}}return url;};_16ca.addProxyRule=function(rule){var _16d8=rule.urlPrefix=(_16ca.urlToObject(rule.urlPrefix).path).replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),rules=_16cb.proxyRules,i,len=rules.length,_16d9,_16da=len;for(i=0;i<len;i++){_16d9=rules[i].urlPrefix;if(_16d8.indexOf(_16d9)===0){if(_16d8.length===_16d9){return -1;}else{_16da=i;break;}}else{if(_16d9.indexOf(_16d8)===0){_16da=i+1;}}}rules.splice(_16da,0,rule);return _16da;};_16ca.getProxyRule=function(url){var rules=_16cb.proxyRules,i,len=rules.length,path=(_16ca.urlToObject(url).path).replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),match;for(i=0;i<len;i++){if(path.indexOf(rules[i].urlPrefix)===0){match=rules[i];break;}}return match;};_16ca.hasSameOrigin=function(url1,url2,_16db){url1=url1.toLowerCase();url2=url2.toLowerCase();var _16dc=window.location.href.toLowerCase();url1=url1.indexOf("http")===0?new Url(url1):(_16dc=new Url(_16dc));url2=url2.indexOf("http")===0?new Url(url2):(lang.isString(_16dc)?new Url(_16dc):_16dc);return ((_16db||(url1.scheme===url2.scheme))&&url1.host===url2.host&&url1.port===url2.port);};_16ca.canUseXhr=function(url,_16dd){var canDo=false,_16de=_16ca.hasSameOrigin,_16df=_16cb.corsEnabledServers,_16e0,found=-1;if(has("esri-cors")&&_16df&&_16df.length){canDo=array.some(_16df,function(_16e1,idx){_16e0=(lang.trim(_16e1).toLowerCase().indexOf("http")!==0);if(_16de(url,_16e0?("http://"+_16e1):_16e1)||(_16e0&&_16de(url,"https://"+_16e1))){found=idx;return true;}return false;});}return _16dd?found:canDo;};_16ca.getAbsoluteUrl=function(url){if(lang.isString(url)&&url.indexOf("http://")===-1&&url.indexOf("https://")===-1){if(url.indexOf("//")===0){return window.location.protocol+url;}else{if(url.indexOf("/")===0){return window.location.protocol+"//"+window.location.host+url;}else{return _16c8._appBaseUrl+url;}}}return url;};if(has("extend-esri")){lang.mixin(_16c8,_16ca);_16c8._getProxyUrl=_16ca.getProxyUrl;_16c8._getProxiedUrl=_16ca.addProxy;_16c8._hasSameOrigin=_16ca.hasSameOrigin;_16c8._canDoXOXHR=_16ca.canUseXhr;_16c8._getAbsoluteUrl=_16ca.getAbsoluteUrl;}return _16ca;});},"esri/tasks/FindResult":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/graphic","esri/geometry/jsonUtils"],function(_16e2,lang,has,_16e3,_16e4,_16e5){var _16e6=_16e2(null,{declaredClass:"esri.tasks.FindResult",constructor:function(json){lang.mixin(this,json);this.feature=new _16e4(json.geometry?_16e5.fromJson(json.geometry):null,null,json.attributes);delete this.geometry;delete this.attributes;}});if(has("extend-esri")){lang.setObject("tasks.FindResult",_16e6,_16e3);}return _16e6;});},"*now":function(r){r(["dojo/i18n!*preload*esri/nls/jsapi*[\"ar\",\"az\",\"ca\",\"cs\",\"da\",\"de-de\",\"el\",\"en-gb\",\"en-us\",\"es-es\",\"fi-fi\",\"fr-fr\",\"he-il\",\"hu\",\"it-it\",\"ja-jp\",\"ko-kr\",\"nl-nl\",\"nb\",\"pl\",\"pt-br\",\"pt-pt\",\"ro\",\"ru\",\"sk\",\"sl\",\"sv\",\"th\",\"tr\",\"zh-tw\",\"zh-cn\",\"ROOT\"]"]);},"*noref":1}});define("esri/jsapi",["dojo/fx/Toggler","dojo/_base/html","dijit/_base","dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton","dijit/_base/manager","dijit/TooltipDialog","esri/main","esri/map","esri/geometry","esri/symbol","esri/renderer","esri/utils","esri/IdentityManager","esri/layers/graphics","esri/layers/agstiled","esri/layers/agsdynamic","esri/layers/agsimageservice","esri/dijit/PopupTemplate","esri/dijit/PopupRenderer","esri/dijit/Attribution","esri/tasks/find","esri/tasks/geometry","esri/tasks/gp","esri/tasks/identify","esri/tasks/locator","esri/tasks/query","esri/tasks/route","esri/tasks/QueryTask","esri/tasks/RelationshipQuery","esri/tasks/StatisticDefinition","esri/toolbars/draw","esri/toolbars/navigation","esri/virtualearth/VETiledLayer","esri/virtualearth/VEGeocoder"],function(){return {};});